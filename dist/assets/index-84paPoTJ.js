function B3(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const o in r)if(o!=="default"&&!(o in t)){const d=Object.getOwnPropertyDescriptor(r,o);d&&Object.defineProperty(t,o,d.get?d:{enumerable:!0,get:()=>r[o]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const d of o)if(d.type==="childList")for(const f of d.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&r(f)}).observe(document,{childList:!0,subtree:!0});function n(o){const d={};return o.integrity&&(d.integrity=o.integrity),o.referrerPolicy&&(d.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?d.credentials="include":o.crossOrigin==="anonymous"?d.credentials="omit":d.credentials="same-origin",d}function r(o){if(o.ep)return;o.ep=!0;const d=n(o);fetch(o.href,d)}})();var rb=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function gw(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var D1={exports:{}},kd={},O1={exports:{}},At={};var ib;function $3(){if(ib)return At;ib=1;var t=Symbol.for("react.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),d=Symbol.for("react.provider"),f=Symbol.for("react.context"),g=Symbol.for("react.forward_ref"),b=Symbol.for("react.suspense"),w=Symbol.for("react.memo"),k=Symbol.for("react.lazy"),C=Symbol.iterator;function N(U){return U===null||typeof U!="object"?null:(U=C&&U[C]||U["@@iterator"],typeof U=="function"?U:null)}var j={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},M=Object.assign,$={};function Q(U,Z,xe){this.props=U,this.context=Z,this.refs=$,this.updater=xe||j}Q.prototype.isReactComponent={},Q.prototype.setState=function(U,Z){if(typeof U!="object"&&typeof U!="function"&&U!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,U,Z,"setState")},Q.prototype.forceUpdate=function(U){this.updater.enqueueForceUpdate(this,U,"forceUpdate")};function ae(){}ae.prototype=Q.prototype;function X(U,Z,xe){this.props=U,this.context=Z,this.refs=$,this.updater=xe||j}var P=X.prototype=new ae;P.constructor=X,M(P,Q.prototype),P.isPureReactComponent=!0;var W=Array.isArray,u=Object.prototype.hasOwnProperty,ye={current:null},ve={key:!0,ref:!0,__self:!0,__source:!0};function be(U,Z,xe){var Be,Ze={},Ve=null,O=null;if(Z!=null)for(Be in Z.ref!==void 0&&(O=Z.ref),Z.key!==void 0&&(Ve=""+Z.key),Z)u.call(Z,Be)&&!ve.hasOwnProperty(Be)&&(Ze[Be]=Z[Be]);var ge=arguments.length-2;if(ge===1)Ze.children=xe;else if(1<ge){for(var Se=Array(ge),Te=0;Te<ge;Te++)Se[Te]=arguments[Te+2];Ze.children=Se}if(U&&U.defaultProps)for(Be in ge=U.defaultProps,ge)Ze[Be]===void 0&&(Ze[Be]=ge[Be]);return{$$typeof:t,type:U,key:Ve,ref:O,props:Ze,_owner:ye.current}}function Ye(U,Z){return{$$typeof:t,type:U.type,key:Z,ref:U.ref,props:U.props,_owner:U._owner}}function me(U){return typeof U=="object"&&U!==null&&U.$$typeof===t}function Me(U){var Z={"=":"=0",":":"=2"};return"$"+U.replace(/[=:]/g,function(xe){return Z[xe]})}var Ce=/\/+/g;function $e(U,Z){return typeof U=="object"&&U!==null&&U.key!=null?Me(""+U.key):Z.toString(36)}function ce(U,Z,xe,Be,Ze){var Ve=typeof U;(Ve==="undefined"||Ve==="boolean")&&(U=null);var O=!1;if(U===null)O=!0;else switch(Ve){case"string":case"number":O=!0;break;case"object":switch(U.$$typeof){case t:case e:O=!0}}if(O)return O=U,Ze=Ze(O),U=Be===""?"."+$e(O,0):Be,W(Ze)?(xe="",U!=null&&(xe=U.replace(Ce,"$&/")+"/"),ce(Ze,Z,xe,"",function(Te){return Te})):Ze!=null&&(me(Ze)&&(Ze=Ye(Ze,xe+(!Ze.key||O&&O.key===Ze.key?"":(""+Ze.key).replace(Ce,"$&/")+"/")+U)),Z.push(Ze)),1;if(O=0,Be=Be===""?".":Be+":",W(U))for(var ge=0;ge<U.length;ge++){Ve=U[ge];var Se=Be+$e(Ve,ge);O+=ce(Ve,Z,xe,Se,Ze)}else if(Se=N(U),typeof Se=="function")for(U=Se.call(U),ge=0;!(Ve=U.next()).done;)Ve=Ve.value,Se=Be+$e(Ve,ge++),O+=ce(Ve,Z,xe,Se,Ze);else if(Ve==="object")throw Z=String(U),Error("Objects are not valid as a React child (found: "+(Z==="[object Object]"?"object with keys {"+Object.keys(U).join(", ")+"}":Z)+"). If you meant to render a collection of children, use an array instead.");return O}function ue(U,Z,xe){if(U==null)return U;var Be=[],Ze=0;return ce(U,Be,"","",function(Ve){return Z.call(xe,Ve,Ze++)}),Be}function ne(U){if(U._status===-1){var Z=U._result;Z=Z(),Z.then(function(xe){(U._status===0||U._status===-1)&&(U._status=1,U._result=xe)},function(xe){(U._status===0||U._status===-1)&&(U._status=2,U._result=xe)}),U._status===-1&&(U._status=0,U._result=Z)}if(U._status===1)return U._result.default;throw U._result}var V={current:null},z={transition:null},fe={ReactCurrentDispatcher:V,ReactCurrentBatchConfig:z,ReactCurrentOwner:ye};function oe(){throw Error("act(...) is not supported in production builds of React.")}return At.Children={map:ue,forEach:function(U,Z,xe){ue(U,function(){Z.apply(this,arguments)},xe)},count:function(U){var Z=0;return ue(U,function(){Z++}),Z},toArray:function(U){return ue(U,function(Z){return Z})||[]},only:function(U){if(!me(U))throw Error("React.Children.only expected to receive a single React element child.");return U}},At.Component=Q,At.Fragment=n,At.Profiler=o,At.PureComponent=X,At.StrictMode=r,At.Suspense=b,At.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=fe,At.act=oe,At.cloneElement=function(U,Z,xe){if(U==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+U+".");var Be=M({},U.props),Ze=U.key,Ve=U.ref,O=U._owner;if(Z!=null){if(Z.ref!==void 0&&(Ve=Z.ref,O=ye.current),Z.key!==void 0&&(Ze=""+Z.key),U.type&&U.type.defaultProps)var ge=U.type.defaultProps;for(Se in Z)u.call(Z,Se)&&!ve.hasOwnProperty(Se)&&(Be[Se]=Z[Se]===void 0&&ge!==void 0?ge[Se]:Z[Se])}var Se=arguments.length-2;if(Se===1)Be.children=xe;else if(1<Se){ge=Array(Se);for(var Te=0;Te<Se;Te++)ge[Te]=arguments[Te+2];Be.children=ge}return{$$typeof:t,type:U.type,key:Ze,ref:Ve,props:Be,_owner:O}},At.createContext=function(U){return U={$$typeof:f,_currentValue:U,_currentValue2:U,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},U.Provider={$$typeof:d,_context:U},U.Consumer=U},At.createElement=be,At.createFactory=function(U){var Z=be.bind(null,U);return Z.type=U,Z},At.createRef=function(){return{current:null}},At.forwardRef=function(U){return{$$typeof:g,render:U}},At.isValidElement=me,At.lazy=function(U){return{$$typeof:k,_payload:{_status:-1,_result:U},_init:ne}},At.memo=function(U,Z){return{$$typeof:w,type:U,compare:Z===void 0?null:Z}},At.startTransition=function(U){var Z=z.transition;z.transition={};try{U()}finally{z.transition=Z}},At.unstable_act=oe,At.useCallback=function(U,Z){return V.current.useCallback(U,Z)},At.useContext=function(U){return V.current.useContext(U)},At.useDebugValue=function(){},At.useDeferredValue=function(U){return V.current.useDeferredValue(U)},At.useEffect=function(U,Z){return V.current.useEffect(U,Z)},At.useId=function(){return V.current.useId()},At.useImperativeHandle=function(U,Z,xe){return V.current.useImperativeHandle(U,Z,xe)},At.useInsertionEffect=function(U,Z){return V.current.useInsertionEffect(U,Z)},At.useLayoutEffect=function(U,Z){return V.current.useLayoutEffect(U,Z)},At.useMemo=function(U,Z){return V.current.useMemo(U,Z)},At.useReducer=function(U,Z,xe){return V.current.useReducer(U,Z,xe)},At.useRef=function(U){return V.current.useRef(U)},At.useState=function(U){return V.current.useState(U)},At.useSyncExternalStore=function(U,Z,xe){return V.current.useSyncExternalStore(U,Z,xe)},At.useTransition=function(){return V.current.useTransition()},At.version="18.3.1",At}var ab;function Qg(){return ab||(ab=1,O1.exports=$3()),O1.exports}var ob;function L3(){if(ob)return kd;ob=1;var t=Qg(),e=Symbol.for("react.element"),n=Symbol.for("react.fragment"),r=Object.prototype.hasOwnProperty,o=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,d={key:!0,ref:!0,__self:!0,__source:!0};function f(g,b,w){var k,C={},N=null,j=null;w!==void 0&&(N=""+w),b.key!==void 0&&(N=""+b.key),b.ref!==void 0&&(j=b.ref);for(k in b)r.call(b,k)&&!d.hasOwnProperty(k)&&(C[k]=b[k]);if(g&&g.defaultProps)for(k in b=g.defaultProps,b)C[k]===void 0&&(C[k]=b[k]);return{$$typeof:e,type:g,key:N,ref:j,props:C,_owner:o.current}}return kd.Fragment=n,kd.jsx=f,kd.jsxs=f,kd}var lb;function K3(){return lb||(lb=1,D1.exports=L3()),D1.exports}var l=K3(),T=Qg();const mw=gw(T),F3=B3({__proto__:null,default:mw},[T]);var Lp={},U1={exports:{}},gr={},B1={exports:{}},$1={};var cb;function q3(){return cb||(cb=1,(function(t){function e(z,fe){var oe=z.length;z.push(fe);e:for(;0<oe;){var U=oe-1>>>1,Z=z[U];if(0<o(Z,fe))z[U]=fe,z[oe]=Z,oe=U;else break e}}function n(z){return z.length===0?null:z[0]}function r(z){if(z.length===0)return null;var fe=z[0],oe=z.pop();if(oe!==fe){z[0]=oe;e:for(var U=0,Z=z.length,xe=Z>>>1;U<xe;){var Be=2*(U+1)-1,Ze=z[Be],Ve=Be+1,O=z[Ve];if(0>o(Ze,oe))Ve<Z&&0>o(O,Ze)?(z[U]=O,z[Ve]=oe,U=Ve):(z[U]=Ze,z[Be]=oe,U=Be);else if(Ve<Z&&0>o(O,oe))z[U]=O,z[Ve]=oe,U=Ve;else break e}}return fe}function o(z,fe){var oe=z.sortIndex-fe.sortIndex;return oe!==0?oe:z.id-fe.id}if(typeof performance=="object"&&typeof performance.now=="function"){var d=performance;t.unstable_now=function(){return d.now()}}else{var f=Date,g=f.now();t.unstable_now=function(){return f.now()-g}}var b=[],w=[],k=1,C=null,N=3,j=!1,M=!1,$=!1,Q=typeof setTimeout=="function"?setTimeout:null,ae=typeof clearTimeout=="function"?clearTimeout:null,X=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function P(z){for(var fe=n(w);fe!==null;){if(fe.callback===null)r(w);else if(fe.startTime<=z)r(w),fe.sortIndex=fe.expirationTime,e(b,fe);else break;fe=n(w)}}function W(z){if($=!1,P(z),!M)if(n(b)!==null)M=!0,ne(u);else{var fe=n(w);fe!==null&&V(W,fe.startTime-z)}}function u(z,fe){M=!1,$&&($=!1,ae(be),be=-1),j=!0;var oe=N;try{for(P(fe),C=n(b);C!==null&&(!(C.expirationTime>fe)||z&&!Me());){var U=C.callback;if(typeof U=="function"){C.callback=null,N=C.priorityLevel;var Z=U(C.expirationTime<=fe);fe=t.unstable_now(),typeof Z=="function"?C.callback=Z:C===n(b)&&r(b),P(fe)}else r(b);C=n(b)}if(C!==null)var xe=!0;else{var Be=n(w);Be!==null&&V(W,Be.startTime-fe),xe=!1}return xe}finally{C=null,N=oe,j=!1}}var ye=!1,ve=null,be=-1,Ye=5,me=-1;function Me(){return!(t.unstable_now()-me<Ye)}function Ce(){if(ve!==null){var z=t.unstable_now();me=z;var fe=!0;try{fe=ve(!0,z)}finally{fe?$e():(ye=!1,ve=null)}}else ye=!1}var $e;if(typeof X=="function")$e=function(){X(Ce)};else if(typeof MessageChannel<"u"){var ce=new MessageChannel,ue=ce.port2;ce.port1.onmessage=Ce,$e=function(){ue.postMessage(null)}}else $e=function(){Q(Ce,0)};function ne(z){ve=z,ye||(ye=!0,$e())}function V(z,fe){be=Q(function(){z(t.unstable_now())},fe)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(z){z.callback=null},t.unstable_continueExecution=function(){M||j||(M=!0,ne(u))},t.unstable_forceFrameRate=function(z){0>z||125<z?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):Ye=0<z?Math.floor(1e3/z):5},t.unstable_getCurrentPriorityLevel=function(){return N},t.unstable_getFirstCallbackNode=function(){return n(b)},t.unstable_next=function(z){switch(N){case 1:case 2:case 3:var fe=3;break;default:fe=N}var oe=N;N=fe;try{return z()}finally{N=oe}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(z,fe){switch(z){case 1:case 2:case 3:case 4:case 5:break;default:z=3}var oe=N;N=z;try{return fe()}finally{N=oe}},t.unstable_scheduleCallback=function(z,fe,oe){var U=t.unstable_now();switch(typeof oe=="object"&&oe!==null?(oe=oe.delay,oe=typeof oe=="number"&&0<oe?U+oe:U):oe=U,z){case 1:var Z=-1;break;case 2:Z=250;break;case 5:Z=1073741823;break;case 4:Z=1e4;break;default:Z=5e3}return Z=oe+Z,z={id:k++,callback:fe,priorityLevel:z,startTime:oe,expirationTime:Z,sortIndex:-1},oe>U?(z.sortIndex=oe,e(w,z),n(b)===null&&z===n(w)&&($?(ae(be),be=-1):$=!0,V(W,oe-U))):(z.sortIndex=Z,e(b,z),M||j||(M=!0,ne(u))),z},t.unstable_shouldYield=Me,t.unstable_wrapCallback=function(z){var fe=N;return function(){var oe=N;N=fe;try{return z.apply(this,arguments)}finally{N=oe}}}})($1)),$1}var ub;function Q3(){return ub||(ub=1,B1.exports=q3()),B1.exports}var db;function z3(){if(db)return gr;db=1;var t=Qg(),e=Q3();function n(s){for(var i="https://reactjs.org/docs/error-decoder.html?invariant="+s,c=1;c<arguments.length;c++)i+="&args[]="+encodeURIComponent(arguments[c]);return"Minified React error #"+s+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var r=new Set,o={};function d(s,i){f(s,i),f(s+"Capture",i)}function f(s,i){for(o[s]=i,s=0;s<i.length;s++)r.add(i[s])}var g=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),b=Object.prototype.hasOwnProperty,w=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,k={},C={};function N(s){return b.call(C,s)?!0:b.call(k,s)?!1:w.test(s)?C[s]=!0:(k[s]=!0,!1)}function j(s,i,c,p){if(c!==null&&c.type===0)return!1;switch(typeof i){case"function":case"symbol":return!0;case"boolean":return p?!1:c!==null?!c.acceptsBooleans:(s=s.toLowerCase().slice(0,5),s!=="data-"&&s!=="aria-");default:return!1}}function M(s,i,c,p){if(i===null||typeof i>"u"||j(s,i,c,p))return!0;if(p)return!1;if(c!==null)switch(c.type){case 3:return!i;case 4:return i===!1;case 5:return isNaN(i);case 6:return isNaN(i)||1>i}return!1}function $(s,i,c,p,v,y,S){this.acceptsBooleans=i===2||i===3||i===4,this.attributeName=p,this.attributeNamespace=v,this.mustUseProperty=c,this.propertyName=s,this.type=i,this.sanitizeURL=y,this.removeEmptyString=S}var Q={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(s){Q[s]=new $(s,0,!1,s,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(s){var i=s[0];Q[i]=new $(i,1,!1,s[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(s){Q[s]=new $(s,2,!1,s.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(s){Q[s]=new $(s,2,!1,s,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(s){Q[s]=new $(s,3,!1,s.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(s){Q[s]=new $(s,3,!0,s,null,!1,!1)}),["capture","download"].forEach(function(s){Q[s]=new $(s,4,!1,s,null,!1,!1)}),["cols","rows","size","span"].forEach(function(s){Q[s]=new $(s,6,!1,s,null,!1,!1)}),["rowSpan","start"].forEach(function(s){Q[s]=new $(s,5,!1,s.toLowerCase(),null,!1,!1)});var ae=/[\-:]([a-z])/g;function X(s){return s[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(s){var i=s.replace(ae,X);Q[i]=new $(i,1,!1,s,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(s){var i=s.replace(ae,X);Q[i]=new $(i,1,!1,s,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(s){var i=s.replace(ae,X);Q[i]=new $(i,1,!1,s,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(s){Q[s]=new $(s,1,!1,s.toLowerCase(),null,!1,!1)}),Q.xlinkHref=new $("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(s){Q[s]=new $(s,1,!1,s.toLowerCase(),null,!0,!0)});function P(s,i,c,p){var v=Q.hasOwnProperty(i)?Q[i]:null;(v!==null?v.type!==0:p||!(2<i.length)||i[0]!=="o"&&i[0]!=="O"||i[1]!=="n"&&i[1]!=="N")&&(M(i,c,v,p)&&(c=null),p||v===null?N(i)&&(c===null?s.removeAttribute(i):s.setAttribute(i,""+c)):v.mustUseProperty?s[v.propertyName]=c===null?v.type===3?!1:"":c:(i=v.attributeName,p=v.attributeNamespace,c===null?s.removeAttribute(i):(v=v.type,c=v===3||v===4&&c===!0?"":""+c,p?s.setAttributeNS(p,i,c):s.setAttribute(i,c))))}var W=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,u=Symbol.for("react.element"),ye=Symbol.for("react.portal"),ve=Symbol.for("react.fragment"),be=Symbol.for("react.strict_mode"),Ye=Symbol.for("react.profiler"),me=Symbol.for("react.provider"),Me=Symbol.for("react.context"),Ce=Symbol.for("react.forward_ref"),$e=Symbol.for("react.suspense"),ce=Symbol.for("react.suspense_list"),ue=Symbol.for("react.memo"),ne=Symbol.for("react.lazy"),V=Symbol.for("react.offscreen"),z=Symbol.iterator;function fe(s){return s===null||typeof s!="object"?null:(s=z&&s[z]||s["@@iterator"],typeof s=="function"?s:null)}var oe=Object.assign,U;function Z(s){if(U===void 0)try{throw Error()}catch(c){var i=c.stack.trim().match(/\n( *(at )?)/);U=i&&i[1]||""}return`
`+U+s}var xe=!1;function Be(s,i){if(!s||xe)return"";xe=!0;var c=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(i)if(i=function(){throw Error()},Object.defineProperty(i.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(i,[])}catch(te){var p=te}Reflect.construct(s,[],i)}else{try{i.call()}catch(te){p=te}s.call(i.prototype)}else{try{throw Error()}catch(te){p=te}s()}}catch(te){if(te&&p&&typeof te.stack=="string"){for(var v=te.stack.split(`
`),y=p.stack.split(`
`),S=v.length-1,D=y.length-1;1<=S&&0<=D&&v[S]!==y[D];)D--;for(;1<=S&&0<=D;S--,D--)if(v[S]!==y[D]){if(S!==1||D!==1)do if(S--,D--,0>D||v[S]!==y[D]){var L=`
`+v[S].replace(" at new "," at ");return s.displayName&&L.includes("<anonymous>")&&(L=L.replace("<anonymous>",s.displayName)),L}while(1<=S&&0<=D);break}}}finally{xe=!1,Error.prepareStackTrace=c}return(s=s?s.displayName||s.name:"")?Z(s):""}function Ze(s){switch(s.tag){case 5:return Z(s.type);case 16:return Z("Lazy");case 13:return Z("Suspense");case 19:return Z("SuspenseList");case 0:case 2:case 15:return s=Be(s.type,!1),s;case 11:return s=Be(s.type.render,!1),s;case 1:return s=Be(s.type,!0),s;default:return""}}function Ve(s){if(s==null)return null;if(typeof s=="function")return s.displayName||s.name||null;if(typeof s=="string")return s;switch(s){case ve:return"Fragment";case ye:return"Portal";case Ye:return"Profiler";case be:return"StrictMode";case $e:return"Suspense";case ce:return"SuspenseList"}if(typeof s=="object")switch(s.$$typeof){case Me:return(s.displayName||"Context")+".Consumer";case me:return(s._context.displayName||"Context")+".Provider";case Ce:var i=s.render;return s=s.displayName,s||(s=i.displayName||i.name||"",s=s!==""?"ForwardRef("+s+")":"ForwardRef"),s;case ue:return i=s.displayName||null,i!==null?i:Ve(s.type)||"Memo";case ne:i=s._payload,s=s._init;try{return Ve(s(i))}catch{}}return null}function O(s){var i=s.type;switch(s.tag){case 24:return"Cache";case 9:return(i.displayName||"Context")+".Consumer";case 10:return(i._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return s=i.render,s=s.displayName||s.name||"",i.displayName||(s!==""?"ForwardRef("+s+")":"ForwardRef");case 7:return"Fragment";case 5:return i;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Ve(i);case 8:return i===be?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof i=="function")return i.displayName||i.name||null;if(typeof i=="string")return i}return null}function ge(s){switch(typeof s){case"boolean":case"number":case"string":case"undefined":return s;case"object":return s;default:return""}}function Se(s){var i=s.type;return(s=s.nodeName)&&s.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function Te(s){var i=Se(s)?"checked":"value",c=Object.getOwnPropertyDescriptor(s.constructor.prototype,i),p=""+s[i];if(!s.hasOwnProperty(i)&&typeof c<"u"&&typeof c.get=="function"&&typeof c.set=="function"){var v=c.get,y=c.set;return Object.defineProperty(s,i,{configurable:!0,get:function(){return v.call(this)},set:function(S){p=""+S,y.call(this,S)}}),Object.defineProperty(s,i,{enumerable:c.enumerable}),{getValue:function(){return p},setValue:function(S){p=""+S},stopTracking:function(){s._valueTracker=null,delete s[i]}}}}function Ke(s){s._valueTracker||(s._valueTracker=Te(s))}function J(s){if(!s)return!1;var i=s._valueTracker;if(!i)return!0;var c=i.getValue(),p="";return s&&(p=Se(s)?s.checked?"true":"false":s.value),s=p,s!==c?(i.setValue(s),!0):!1}function De(s){if(s=s||(typeof document<"u"?document:void 0),typeof s>"u")return null;try{return s.activeElement||s.body}catch{return s.body}}function qe(s,i){var c=i.checked;return oe({},i,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:c??s._wrapperState.initialChecked})}function bt(s,i){var c=i.defaultValue==null?"":i.defaultValue,p=i.checked!=null?i.checked:i.defaultChecked;c=ge(i.value!=null?i.value:c),s._wrapperState={initialChecked:p,initialValue:c,controlled:i.type==="checkbox"||i.type==="radio"?i.checked!=null:i.value!=null}}function Ie(s,i){i=i.checked,i!=null&&P(s,"checked",i,!1)}function Xe(s,i){Ie(s,i);var c=ge(i.value),p=i.type;if(c!=null)p==="number"?(c===0&&s.value===""||s.value!=c)&&(s.value=""+c):s.value!==""+c&&(s.value=""+c);else if(p==="submit"||p==="reset"){s.removeAttribute("value");return}i.hasOwnProperty("value")?Ut(s,i.type,c):i.hasOwnProperty("defaultValue")&&Ut(s,i.type,ge(i.defaultValue)),i.checked==null&&i.defaultChecked!=null&&(s.defaultChecked=!!i.defaultChecked)}function nt(s,i,c){if(i.hasOwnProperty("value")||i.hasOwnProperty("defaultValue")){var p=i.type;if(!(p!=="submit"&&p!=="reset"||i.value!==void 0&&i.value!==null))return;i=""+s._wrapperState.initialValue,c||i===s.value||(s.value=i),s.defaultValue=i}c=s.name,c!==""&&(s.name=""),s.defaultChecked=!!s._wrapperState.initialChecked,c!==""&&(s.name=c)}function Ut(s,i,c){(i!=="number"||De(s.ownerDocument)!==s)&&(c==null?s.defaultValue=""+s._wrapperState.initialValue:s.defaultValue!==""+c&&(s.defaultValue=""+c))}var Kt=Array.isArray;function dt(s,i,c,p){if(s=s.options,i){i={};for(var v=0;v<c.length;v++)i["$"+c[v]]=!0;for(c=0;c<s.length;c++)v=i.hasOwnProperty("$"+s[c].value),s[c].selected!==v&&(s[c].selected=v),v&&p&&(s[c].defaultSelected=!0)}else{for(c=""+ge(c),i=null,v=0;v<s.length;v++){if(s[v].value===c){s[v].selected=!0,p&&(s[v].defaultSelected=!0);return}i!==null||s[v].disabled||(i=s[v])}i!==null&&(i.selected=!0)}}function Ft(s,i){if(i.dangerouslySetInnerHTML!=null)throw Error(n(91));return oe({},i,{value:void 0,defaultValue:void 0,children:""+s._wrapperState.initialValue})}function zt(s,i){var c=i.value;if(c==null){if(c=i.children,i=i.defaultValue,c!=null){if(i!=null)throw Error(n(92));if(Kt(c)){if(1<c.length)throw Error(n(93));c=c[0]}i=c}i==null&&(i=""),c=i}s._wrapperState={initialValue:ge(c)}}function Cn(s,i){var c=ge(i.value),p=ge(i.defaultValue);c!=null&&(c=""+c,c!==s.value&&(s.value=c),i.defaultValue==null&&s.defaultValue!==c&&(s.defaultValue=c)),p!=null&&(s.defaultValue=""+p)}function qn(s){var i=s.textContent;i===s._wrapperState.initialValue&&i!==""&&i!==null&&(s.value=i)}function xt(s){switch(s){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function vn(s,i){return s==null||s==="http://www.w3.org/1999/xhtml"?xt(i):s==="http://www.w3.org/2000/svg"&&i==="foreignObject"?"http://www.w3.org/1999/xhtml":s}var Mn,Ls=(function(s){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(i,c,p,v){MSApp.execUnsafeLocalFunction(function(){return s(i,c,p,v)})}:s})(function(s,i){if(s.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in s)s.innerHTML=i;else{for(Mn=Mn||document.createElement("div"),Mn.innerHTML="<svg>"+i.valueOf().toString()+"</svg>",i=Mn.firstChild;s.firstChild;)s.removeChild(s.firstChild);for(;i.firstChild;)s.appendChild(i.firstChild)}});function as(s,i){if(i){var c=s.firstChild;if(c&&c===s.lastChild&&c.nodeType===3){c.nodeValue=i;return}}s.textContent=i}var bn={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},os=["Webkit","ms","Moz","O"];Object.keys(bn).forEach(function(s){os.forEach(function(i){i=i+s.charAt(0).toUpperCase()+s.substring(1),bn[i]=bn[s]})});function xs(s,i,c){return i==null||typeof i=="boolean"||i===""?"":c||typeof i!="number"||i===0||bn.hasOwnProperty(s)&&bn[s]?(""+i).trim():i+"px"}function Ps(s,i){s=s.style;for(var c in i)if(i.hasOwnProperty(c)){var p=c.indexOf("--")===0,v=xs(c,i[c],p);c==="float"&&(c="cssFloat"),p?s.setProperty(c,v):s[c]=v}}var er=oe({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Bn(s,i){if(i){if(er[s]&&(i.children!=null||i.dangerouslySetInnerHTML!=null))throw Error(n(137,s));if(i.dangerouslySetInnerHTML!=null){if(i.children!=null)throw Error(n(60));if(typeof i.dangerouslySetInnerHTML!="object"||!("__html"in i.dangerouslySetInnerHTML))throw Error(n(61))}if(i.style!=null&&typeof i.style!="object")throw Error(n(62))}}function Hn(s,i){if(s.indexOf("-")===-1)return typeof i.is=="string";switch(s){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ls=null;function Ks(s){return s=s.target||s.srcElement||window,s.correspondingUseElement&&(s=s.correspondingUseElement),s.nodeType===3?s.parentNode:s}var $n=null,Yn=null,kn=null;function _s(s){if(s=Oo(s)){if(typeof $n!="function")throw Error(n(280));var i=s.stateNode;i&&(i=Bl(i),$n(s.stateNode,s.type,i))}}function ie(s){Yn?kn?kn.push(s):kn=[s]:Yn=s}function lt(){if(Yn){var s=Yn,i=kn;if(kn=Yn=null,_s(s),i)for(s=0;s<i.length;s++)_s(i[s])}}function Pt(s,i){return s(i)}function Bt(){}var Gt=!1;function H(s,i,c){if(Gt)return s(i,c);Gt=!0;try{return Pt(s,i,c)}finally{Gt=!1,(Yn!==null||kn!==null)&&(Bt(),lt())}}function sn(s,i){var c=s.stateNode;if(c===null)return null;var p=Bl(c);if(p===null)return null;c=p[i];e:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(p=!p.disabled)||(s=s.type,p=!(s==="button"||s==="input"||s==="select"||s==="textarea")),s=!p;break e;default:s=!1}if(s)return null;if(c&&typeof c!="function")throw Error(n(231,i,typeof c));return c}var jt=!1;if(g)try{var Yt={};Object.defineProperty(Yt,"passive",{get:function(){jt=!0}}),window.addEventListener("test",Yt,Yt),window.removeEventListener("test",Yt,Yt)}catch{jt=!1}function je(s,i,c,p,v,y,S,D,L){var te=Array.prototype.slice.call(arguments,3);try{i.apply(c,te)}catch(Pe){this.onError(Pe)}}var Dn=!1,Ct=null,G=!1,pe=null,de={onError:function(s){Dn=!0,Ct=s}};function Ae(s,i,c,p,v,y,S,D,L){Dn=!1,Ct=null,je.apply(de,arguments)}function tt(s,i,c,p,v,y,S,D,L){if(Ae.apply(this,arguments),Dn){if(Dn){var te=Ct;Dn=!1,Ct=null}else throw Error(n(198));G||(G=!0,pe=te)}}function Re(s){var i=s,c=s;if(s.alternate)for(;i.return;)i=i.return;else{s=i;do i=s,(i.flags&4098)!==0&&(c=i.return),s=i.return;while(s)}return i.tag===3?c:null}function Vt(s){if(s.tag===13){var i=s.memoizedState;if(i===null&&(s=s.alternate,s!==null&&(i=s.memoizedState)),i!==null)return i.dehydrated}return null}function $t(s){if(Re(s)!==s)throw Error(n(188))}function Nn(s){var i=s.alternate;if(!i){if(i=Re(s),i===null)throw Error(n(188));return i!==s?null:s}for(var c=s,p=i;;){var v=c.return;if(v===null)break;var y=v.alternate;if(y===null){if(p=v.return,p!==null){c=p;continue}break}if(v.child===y.child){for(y=v.child;y;){if(y===c)return $t(v),s;if(y===p)return $t(v),i;y=y.sibling}throw Error(n(188))}if(c.return!==p.return)c=v,p=y;else{for(var S=!1,D=v.child;D;){if(D===c){S=!0,c=v,p=y;break}if(D===p){S=!0,p=v,c=y;break}D=D.sibling}if(!S){for(D=y.child;D;){if(D===c){S=!0,c=y,p=v;break}if(D===p){S=!0,p=y,c=v;break}D=D.sibling}if(!S)throw Error(n(189))}}if(c.alternate!==p)throw Error(n(190))}if(c.tag!==3)throw Error(n(188));return c.stateNode.current===c?s:i}function ht(s){return s=Nn(s),s!==null?st(s):null}function st(s){if(s.tag===5||s.tag===6)return s;for(s=s.child;s!==null;){var i=st(s);if(i!==null)return i;s=s.sibling}return null}var ft=e.unstable_scheduleCallback,St=e.unstable_cancelCallback,Tt=e.unstable_shouldYield,Xt=e.unstable_requestPaint,qt=e.unstable_now,tr=e.unstable_getCurrentPriorityLevel,Sn=e.unstable_ImmediatePriority,rn=e.unstable_UserBlockingPriority,cs=e.unstable_NormalPriority,En=e.unstable_LowPriority,en=e.unstable_IdlePriority,Es=null,Jt=null;function un(s){if(Jt&&typeof Jt.onCommitFiberRoot=="function")try{Jt.onCommitFiberRoot(Es,s,void 0,(s.current.flags&128)===128)}catch{}}var q=Math.clz32?Math.clz32:et,re=Math.log,se=Math.LN2;function et(s){return s>>>=0,s===0?32:31-(re(s)/se|0)|0}var Je=64,kt=4194304;function us(s){switch(s&-s){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return s&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return s}}function nr(s,i){var c=s.pendingLanes;if(c===0)return 0;var p=0,v=s.suspendedLanes,y=s.pingedLanes,S=c&268435455;if(S!==0){var D=S&~v;D!==0?p=us(D):(y&=S,y!==0&&(p=us(y)))}else S=c&~v,S!==0?p=us(S):y!==0&&(p=us(y));if(p===0)return 0;if(i!==0&&i!==p&&(i&v)===0&&(v=p&-p,y=i&-i,v>=y||v===16&&(y&4194240)!==0))return i;if((p&4)!==0&&(p|=c&16),i=s.entangledLanes,i!==0)for(s=s.entanglements,i&=p;0<i;)c=31-q(i),v=1<<c,p|=s[c],i&=~v;return p}function kl(s,i){switch(s){case 1:case 2:case 4:return i+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Nl(s,i){for(var c=s.suspendedLanes,p=s.pingedLanes,v=s.expirationTimes,y=s.pendingLanes;0<y;){var S=31-q(y),D=1<<S,L=v[S];L===-1?((D&c)===0||(D&p)!==0)&&(v[S]=kl(D,i)):L<=i&&(s.expiredLanes|=D),y&=~D}}function ga(s){return s=s.pendingLanes&-1073741825,s!==0?s:s&1073741824?1073741824:0}function wo(){var s=Je;return Je<<=1,(Je&4194240)===0&&(Je=64),s}function ma(s){for(var i=[],c=0;31>c;c++)i.push(s);return i}function qr(s,i,c){s.pendingLanes|=i,i!==536870912&&(s.suspendedLanes=0,s.pingedLanes=0),s=s.eventTimes,i=31-q(i),s[i]=c}function Cl(s,i){var c=s.pendingLanes&~i;s.pendingLanes=i,s.suspendedLanes=0,s.pingedLanes=0,s.expiredLanes&=i,s.mutableReadLanes&=i,s.entangledLanes&=i,i=s.entanglements;var p=s.eventTimes;for(s=s.expirationTimes;0<c;){var v=31-q(c),y=1<<v;i[v]=0,p[v]=-1,s[v]=-1,c&=~y}}function va(s,i){var c=s.entangledLanes|=i;for(s=s.entanglements;c;){var p=31-q(c),v=1<<p;v&i|s[p]&i&&(s[p]|=i),c&=~v}}var Qt=0;function ba(s){return s&=-s,1<s?4<s?(s&268435455)!==0?16:536870912:4:1}var xo,ya,oi,dn,li,Ln=!1,Bi=[],wr=null,sr=null,js=null,Qr=new Map,zr=new Map,xr=[],Po="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function _o(s,i){switch(s){case"focusin":case"focusout":wr=null;break;case"dragenter":case"dragleave":sr=null;break;case"mouseover":case"mouseout":js=null;break;case"pointerover":case"pointerout":Qr.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":zr.delete(i.pointerId)}}function Gr(s,i,c,p,v,y){return s===null||s.nativeEvent!==y?(s={blockedOn:i,domEventName:c,eventSystemFlags:p,nativeEvent:y,targetContainers:[v]},i!==null&&(i=Oo(i),i!==null&&ya(i)),s):(s.eventSystemFlags|=p,i=s.targetContainers,v!==null&&i.indexOf(v)===-1&&i.push(v),s)}function Sl(s,i,c,p,v){switch(i){case"focusin":return wr=Gr(wr,s,i,c,p,v),!0;case"dragenter":return sr=Gr(sr,s,i,c,p,v),!0;case"mouseover":return js=Gr(js,s,i,c,p,v),!0;case"pointerover":var y=v.pointerId;return Qr.set(y,Gr(Qr.get(y)||null,s,i,c,p,v)),!0;case"gotpointercapture":return y=v.pointerId,zr.set(y,Gr(zr.get(y)||null,s,i,c,p,v)),!0}return!1}function ko(s){var i=qi(s.target);if(i!==null){var c=Re(i);if(c!==null){if(i=c.tag,i===13){if(i=Vt(c),i!==null){s.blockedOn=i,li(s.priority,function(){oi(c)});return}}else if(i===3&&c.stateNode.current.memoizedState.isDehydrated){s.blockedOn=c.tag===3?c.stateNode.containerInfo:null;return}}}s.blockedOn=null}function $i(s){if(s.blockedOn!==null)return!1;for(var i=s.targetContainers;0<i.length;){var c=hi(s.domEventName,s.eventSystemFlags,i[0],s.nativeEvent);if(c===null){c=s.nativeEvent;var p=new c.constructor(c.type,c);ls=p,c.target.dispatchEvent(p),ls=null}else return i=Oo(c),i!==null&&ya(i),s.blockedOn=c,!1;i.shift()}return!0}function No(s,i,c){$i(s)&&c.delete(i)}function Co(){Ln=!1,wr!==null&&$i(wr)&&(wr=null),sr!==null&&$i(sr)&&(sr=null),js!==null&&$i(js)&&(js=null),Qr.forEach(No),zr.forEach(No)}function ci(s,i){s.blockedOn===i&&(s.blockedOn=null,Ln||(Ln=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,Co)))}function Vr(s){function i(v){return ci(v,s)}if(0<Bi.length){ci(Bi[0],s);for(var c=1;c<Bi.length;c++){var p=Bi[c];p.blockedOn===s&&(p.blockedOn=null)}}for(wr!==null&&ci(wr,s),sr!==null&&ci(sr,s),js!==null&&ci(js,s),Qr.forEach(i),zr.forEach(i),c=0;c<xr.length;c++)p=xr[c],p.blockedOn===s&&(p.blockedOn=null);for(;0<xr.length&&(c=xr[0],c.blockedOn===null);)ko(c),c.blockedOn===null&&xr.shift()}var jr=W.ReactCurrentBatchConfig,ui=!0;function Rl(s,i,c,p){var v=Qt,y=jr.transition;jr.transition=null;try{Qt=1,rr(s,i,c,p)}finally{Qt=v,jr.transition=y}}function So(s,i,c,p){var v=Qt,y=jr.transition;jr.transition=null;try{Qt=4,rr(s,i,c,p)}finally{Qt=v,jr.transition=y}}function rr(s,i,c,p){if(ui){var v=hi(s,i,c,p);if(v===null)du(s,i,p,di,c),_o(s,p);else if(Sl(v,s,i,c,p))p.stopPropagation();else if(_o(s,p),i&4&&-1<Po.indexOf(s)){for(;v!==null;){var y=Oo(v);if(y!==null&&xo(y),y=hi(s,i,c,p),y===null&&du(s,i,p,di,c),y===v)break;v=y}v!==null&&p.stopPropagation()}else du(s,i,p,null,c)}}var di=null;function hi(s,i,c,p){if(di=null,s=Ks(p),s=qi(s),s!==null)if(i=Re(s),i===null)s=null;else if(c=i.tag,c===13){if(s=Vt(i),s!==null)return s;s=null}else if(c===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;s=null}else i!==s&&(s=null);return di=s,null}function Ir(s){switch(s){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(tr()){case Sn:return 1;case rn:return 4;case cs:case En:return 16;case en:return 536870912;default:return 16}default:return 16}}var ir=null,wa=null,I=null;function K(){if(I)return I;var s,i=wa,c=i.length,p,v="value"in ir?ir.value:ir.textContent,y=v.length;for(s=0;s<c&&i[s]===v[s];s++);var S=c-s;for(p=1;p<=S&&i[c-p]===v[y-p];p++);return I=v.slice(s,1<p?1-p:void 0)}function ee(s){var i=s.keyCode;return"charCode"in s?(s=s.charCode,s===0&&i===13&&(s=13)):s=i,s===10&&(s=13),32<=s||s===13?s:0}function le(){return!0}function Le(){return!1}function rt(s){function i(c,p,v,y,S){this._reactName=c,this._targetInst=v,this.type=p,this.nativeEvent=y,this.target=S,this.currentTarget=null;for(var D in s)s.hasOwnProperty(D)&&(c=s[D],this[D]=c?c(y):y[D]);return this.isDefaultPrevented=(y.defaultPrevented!=null?y.defaultPrevented:y.returnValue===!1)?le:Le,this.isPropagationStopped=Le,this}return oe(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var c=this.nativeEvent;c&&(c.preventDefault?c.preventDefault():typeof c.returnValue!="unknown"&&(c.returnValue=!1),this.isDefaultPrevented=le)},stopPropagation:function(){var c=this.nativeEvent;c&&(c.stopPropagation?c.stopPropagation():typeof c.cancelBubble!="unknown"&&(c.cancelBubble=!0),this.isPropagationStopped=le)},persist:function(){},isPersistent:le}),i}var hn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(s){return s.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Is=rt(hn),jn=oe({},hn,{view:0,detail:0}),pt=rt(jn),tn,an,fn,Et=oe({},jn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Tl,button:0,buttons:0,relatedTarget:function(s){return s.relatedTarget===void 0?s.fromElement===s.srcElement?s.toElement:s.fromElement:s.relatedTarget},movementX:function(s){return"movementX"in s?s.movementX:(s!==fn&&(fn&&s.type==="mousemove"?(tn=s.screenX-fn.screenX,an=s.screenY-fn.screenY):an=tn=0,fn=s),tn)},movementY:function(s){return"movementY"in s?s.movementY:an}}),yn=rt(Et),Li=oe({},Et,{dataTransfer:0}),Ki=rt(Li),mm=oe({},jn,{relatedTarget:0}),Xc=rt(mm),vm=oe({},hn,{animationName:0,elapsedTime:0,pseudoElement:0}),bm=rt(vm),ym=oe({},hn,{clipboardData:function(s){return"clipboardData"in s?s.clipboardData:window.clipboardData}}),wm=rt(ym),xm=oe({},hn,{data:0}),wh=rt(xm),Pm={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},xh={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Ph={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function _h(s){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(s):(s=Ph[s])?!!i[s]:!1}function Tl(){return _h}var _m=oe({},jn,{key:function(s){if(s.key){var i=Pm[s.key]||s.key;if(i!=="Unidentified")return i}return s.type==="keypress"?(s=ee(s),s===13?"Enter":String.fromCharCode(s)):s.type==="keydown"||s.type==="keyup"?xh[s.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Tl,charCode:function(s){return s.type==="keypress"?ee(s):0},keyCode:function(s){return s.type==="keydown"||s.type==="keyup"?s.keyCode:0},which:function(s){return s.type==="keypress"?ee(s):s.type==="keydown"||s.type==="keyup"?s.keyCode:0}}),km=rt(_m),kh=oe({},Et,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Nh=rt(kh),Ch=oe({},jn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Tl}),Sh=rt(Ch),Nm=oe({},hn,{propertyName:0,elapsedTime:0,pseudoElement:0}),Rh=rt(Nm),El=oe({},Et,{deltaX:function(s){return"deltaX"in s?s.deltaX:"wheelDeltaX"in s?-s.wheelDeltaX:0},deltaY:function(s){return"deltaY"in s?s.deltaY:"wheelDeltaY"in s?-s.wheelDeltaY:"wheelDelta"in s?-s.wheelDelta:0},deltaZ:0,deltaMode:0}),Th=rt(El),Cm=[9,13,27,32],Jc=g&&"CompositionEvent"in window,xa=null;g&&"documentMode"in document&&(xa=document.documentMode);var Eh=g&&"TextEvent"in window&&!xa,Zc=g&&(!Jc||xa&&8<xa&&11>=xa),eu=" ",jh=!1;function Ih(s,i){switch(s){case"keyup":return Cm.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Ah(s){return s=s.detail,typeof s=="object"&&"data"in s?s.data:null}var Pa=!1;function Sm(s,i){switch(s){case"compositionend":return Ah(i);case"keypress":return i.which!==32?null:(jh=!0,eu);case"textInput":return s=i.data,s===eu&&jh?null:s;default:return null}}function Rm(s,i){if(Pa)return s==="compositionend"||!Jc&&Ih(s,i)?(s=K(),I=wa=ir=null,Pa=!1,s):null;switch(s){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return Zc&&i.locale!=="ko"?null:i.data;default:return null}}var Tm={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Mh(s){var i=s&&s.nodeName&&s.nodeName.toLowerCase();return i==="input"?!!Tm[s.type]:i==="textarea"}function Dh(s,i,c,p){ie(p),i=Dl(i,"onChange"),0<i.length&&(c=new Is("onChange","change",null,c,p),s.push({event:c,listeners:i}))}var Ro=null,To=null;function Oh(s){ef(s,0)}function jl(s){var i=Sa(s);if(J(i))return s}function Em(s,i){if(s==="change")return i}var Uh=!1;if(g){var tu;if(g){var nu="oninput"in document;if(!nu){var Bh=document.createElement("div");Bh.setAttribute("oninput","return;"),nu=typeof Bh.oninput=="function"}tu=nu}else tu=!1;Uh=tu&&(!document.documentMode||9<document.documentMode)}function su(){Ro&&(Ro.detachEvent("onpropertychange",Fi),To=Ro=null)}function Fi(s){if(s.propertyName==="value"&&jl(To)){var i=[];Dh(i,To,s,Ks(s)),H(Oh,i)}}function $h(s,i,c){s==="focusin"?(su(),Ro=i,To=c,Ro.attachEvent("onpropertychange",Fi)):s==="focusout"&&su()}function Lh(s){if(s==="selectionchange"||s==="keyup"||s==="keydown")return jl(To)}function jm(s,i){if(s==="click")return jl(i)}function fi(s,i){if(s==="input"||s==="change")return jl(i)}function Fs(s,i){return s===i&&(s!==0||1/s===1/i)||s!==s&&i!==i}var ar=typeof Object.is=="function"?Object.is:Fs;function Eo(s,i){if(ar(s,i))return!0;if(typeof s!="object"||s===null||typeof i!="object"||i===null)return!1;var c=Object.keys(s),p=Object.keys(i);if(c.length!==p.length)return!1;for(p=0;p<c.length;p++){var v=c[p];if(!b.call(i,v)||!ar(s[v],i[v]))return!1}return!0}function Kh(s){for(;s&&s.firstChild;)s=s.firstChild;return s}function Fh(s,i){var c=Kh(s);s=0;for(var p;c;){if(c.nodeType===3){if(p=s+c.textContent.length,s<=i&&p>=i)return{node:c,offset:i-s};s=p}e:{for(;c;){if(c.nextSibling){c=c.nextSibling;break e}c=c.parentNode}c=void 0}c=Kh(c)}}function qh(s,i){return s&&i?s===i?!0:s&&s.nodeType===3?!1:i&&i.nodeType===3?qh(s,i.parentNode):"contains"in s?s.contains(i):s.compareDocumentPosition?!!(s.compareDocumentPosition(i)&16):!1:!1}function Qh(){for(var s=window,i=De();i instanceof s.HTMLIFrameElement;){try{var c=typeof i.contentWindow.location.href=="string"}catch{c=!1}if(c)s=i.contentWindow;else break;i=De(s.document)}return i}function ru(s){var i=s&&s.nodeName&&s.nodeName.toLowerCase();return i&&(i==="input"&&(s.type==="text"||s.type==="search"||s.type==="tel"||s.type==="url"||s.type==="password")||i==="textarea"||s.contentEditable==="true")}function Im(s){var i=Qh(),c=s.focusedElem,p=s.selectionRange;if(i!==c&&c&&c.ownerDocument&&qh(c.ownerDocument.documentElement,c)){if(p!==null&&ru(c)){if(i=p.start,s=p.end,s===void 0&&(s=i),"selectionStart"in c)c.selectionStart=i,c.selectionEnd=Math.min(s,c.value.length);else if(s=(i=c.ownerDocument||document)&&i.defaultView||window,s.getSelection){s=s.getSelection();var v=c.textContent.length,y=Math.min(p.start,v);p=p.end===void 0?y:Math.min(p.end,v),!s.extend&&y>p&&(v=p,p=y,y=v),v=Fh(c,y);var S=Fh(c,p);v&&S&&(s.rangeCount!==1||s.anchorNode!==v.node||s.anchorOffset!==v.offset||s.focusNode!==S.node||s.focusOffset!==S.offset)&&(i=i.createRange(),i.setStart(v.node,v.offset),s.removeAllRanges(),y>p?(s.addRange(i),s.extend(S.node,S.offset)):(i.setEnd(S.node,S.offset),s.addRange(i)))}}for(i=[],s=c;s=s.parentNode;)s.nodeType===1&&i.push({element:s,left:s.scrollLeft,top:s.scrollTop});for(typeof c.focus=="function"&&c.focus(),c=0;c<i.length;c++)s=i[c],s.element.scrollLeft=s.left,s.element.scrollTop=s.top}}var Am=g&&"documentMode"in document&&11>=document.documentMode,_a=null,iu=null,jo=null,au=!1;function zh(s,i,c){var p=c.window===c?c.document:c.nodeType===9?c:c.ownerDocument;au||_a==null||_a!==De(p)||(p=_a,"selectionStart"in p&&ru(p)?p={start:p.selectionStart,end:p.selectionEnd}:(p=(p.ownerDocument&&p.ownerDocument.defaultView||window).getSelection(),p={anchorNode:p.anchorNode,anchorOffset:p.anchorOffset,focusNode:p.focusNode,focusOffset:p.focusOffset}),jo&&Eo(jo,p)||(jo=p,p=Dl(iu,"onSelect"),0<p.length&&(i=new Is("onSelect","select",null,i,c),s.push({event:i,listeners:p}),i.target=_a)))}function Il(s,i){var c={};return c[s.toLowerCase()]=i.toLowerCase(),c["Webkit"+s]="webkit"+i,c["Moz"+s]="moz"+i,c}var ka={animationend:Il("Animation","AnimationEnd"),animationiteration:Il("Animation","AnimationIteration"),animationstart:Il("Animation","AnimationStart"),transitionend:Il("Transition","TransitionEnd")},ou={},Gh={};g&&(Gh=document.createElement("div").style,"AnimationEvent"in window||(delete ka.animationend.animation,delete ka.animationiteration.animation,delete ka.animationstart.animation),"TransitionEvent"in window||delete ka.transitionend.transition);function Al(s){if(ou[s])return ou[s];if(!ka[s])return s;var i=ka[s],c;for(c in i)if(i.hasOwnProperty(c)&&c in Gh)return ou[s]=i[c];return s}var Vh=Al("animationend"),Wh=Al("animationiteration"),Hh=Al("animationstart"),Yh=Al("transitionend"),Xh=new Map,Jh="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function pi(s,i){Xh.set(s,i),d(i,[s])}for(var lu=0;lu<Jh.length;lu++){var cu=Jh[lu],Mm=cu.toLowerCase(),Dm=cu[0].toUpperCase()+cu.slice(1);pi(Mm,"on"+Dm)}pi(Vh,"onAnimationEnd"),pi(Wh,"onAnimationIteration"),pi(Hh,"onAnimationStart"),pi("dblclick","onDoubleClick"),pi("focusin","onFocus"),pi("focusout","onBlur"),pi(Yh,"onTransitionEnd"),f("onMouseEnter",["mouseout","mouseover"]),f("onMouseLeave",["mouseout","mouseover"]),f("onPointerEnter",["pointerout","pointerover"]),f("onPointerLeave",["pointerout","pointerover"]),d("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),d("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),d("onBeforeInput",["compositionend","keypress","textInput","paste"]),d("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),d("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),d("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Io="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Om=new Set("cancel close invalid load scroll toggle".split(" ").concat(Io));function Zh(s,i,c){var p=s.type||"unknown-event";s.currentTarget=c,tt(p,i,void 0,s),s.currentTarget=null}function ef(s,i){i=(i&4)!==0;for(var c=0;c<s.length;c++){var p=s[c],v=p.event;p=p.listeners;e:{var y=void 0;if(i)for(var S=p.length-1;0<=S;S--){var D=p[S],L=D.instance,te=D.currentTarget;if(D=D.listener,L!==y&&v.isPropagationStopped())break e;Zh(v,D,te),y=L}else for(S=0;S<p.length;S++){if(D=p[S],L=D.instance,te=D.currentTarget,D=D.listener,L!==y&&v.isPropagationStopped())break e;Zh(v,D,te),y=L}}}if(G)throw s=pe,G=!1,pe=null,s}function pn(s,i){var c=i[vu];c===void 0&&(c=i[vu]=new Set);var p=s+"__bubble";c.has(p)||(tf(i,s,2,!1),c.add(p))}function uu(s,i,c){var p=0;i&&(p|=4),tf(c,s,p,i)}var Ml="_reactListening"+Math.random().toString(36).slice(2);function Ao(s){if(!s[Ml]){s[Ml]=!0,r.forEach(function(c){c!=="selectionchange"&&(Om.has(c)||uu(c,!1,s),uu(c,!0,s))});var i=s.nodeType===9?s:s.ownerDocument;i===null||i[Ml]||(i[Ml]=!0,uu("selectionchange",!1,i))}}function tf(s,i,c,p){switch(Ir(i)){case 1:var v=Rl;break;case 4:v=So;break;default:v=rr}c=v.bind(null,i,c,s),v=void 0,!jt||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(v=!0),p?v!==void 0?s.addEventListener(i,c,{capture:!0,passive:v}):s.addEventListener(i,c,!0):v!==void 0?s.addEventListener(i,c,{passive:v}):s.addEventListener(i,c,!1)}function du(s,i,c,p,v){var y=p;if((i&1)===0&&(i&2)===0&&p!==null)e:for(;;){if(p===null)return;var S=p.tag;if(S===3||S===4){var D=p.stateNode.containerInfo;if(D===v||D.nodeType===8&&D.parentNode===v)break;if(S===4)for(S=p.return;S!==null;){var L=S.tag;if((L===3||L===4)&&(L=S.stateNode.containerInfo,L===v||L.nodeType===8&&L.parentNode===v))return;S=S.return}for(;D!==null;){if(S=qi(D),S===null)return;if(L=S.tag,L===5||L===6){p=y=S;continue e}D=D.parentNode}}p=p.return}H(function(){var te=y,Pe=Ks(c),Ne=[];e:{var we=Xh.get(s);if(we!==void 0){var Fe=Is,Ge=s;switch(s){case"keypress":if(ee(c)===0)break e;case"keydown":case"keyup":Fe=km;break;case"focusin":Ge="focus",Fe=Xc;break;case"focusout":Ge="blur",Fe=Xc;break;case"beforeblur":case"afterblur":Fe=Xc;break;case"click":if(c.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Fe=yn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Fe=Ki;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Fe=Sh;break;case Vh:case Wh:case Hh:Fe=bm;break;case Yh:Fe=Rh;break;case"scroll":Fe=pt;break;case"wheel":Fe=Th;break;case"copy":case"cut":case"paste":Fe=wm;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Fe=Nh}var We=(i&4)!==0,An=!We&&s==="scroll",h=We?we!==null?we+"Capture":null:we;We=[];for(var R=te,Y;R!==null;){Y=R;var ke=Y.stateNode;if(Y.tag===5&&ke!==null&&(Y=ke,h!==null&&(ke=sn(R,h),ke!=null&&We.push(Mo(R,ke,Y)))),An)break;R=R.return}0<We.length&&(we=new Fe(we,Ge,null,c,Pe),Ne.push({event:we,listeners:We}))}}if((i&7)===0){e:{if(we=s==="mouseover"||s==="pointerover",Fe=s==="mouseout"||s==="pointerout",we&&c!==ls&&(Ge=c.relatedTarget||c.fromElement)&&(qi(Ge)||Ge[Wr]))break e;if((Fe||we)&&(we=Pe.window===Pe?Pe:(we=Pe.ownerDocument)?we.defaultView||we.parentWindow:window,Fe?(Ge=c.relatedTarget||c.toElement,Fe=te,Ge=Ge?qi(Ge):null,Ge!==null&&(An=Re(Ge),Ge!==An||Ge.tag!==5&&Ge.tag!==6)&&(Ge=null)):(Fe=null,Ge=te),Fe!==Ge)){if(We=yn,ke="onMouseLeave",h="onMouseEnter",R="mouse",(s==="pointerout"||s==="pointerover")&&(We=Nh,ke="onPointerLeave",h="onPointerEnter",R="pointer"),An=Fe==null?we:Sa(Fe),Y=Ge==null?we:Sa(Ge),we=new We(ke,R+"leave",Fe,c,Pe),we.target=An,we.relatedTarget=Y,ke=null,qi(Pe)===te&&(We=new We(h,R+"enter",Ge,c,Pe),We.target=Y,We.relatedTarget=An,ke=We),An=ke,Fe&&Ge)t:{for(We=Fe,h=Ge,R=0,Y=We;Y;Y=Na(Y))R++;for(Y=0,ke=h;ke;ke=Na(ke))Y++;for(;0<R-Y;)We=Na(We),R--;for(;0<Y-R;)h=Na(h),Y--;for(;R--;){if(We===h||h!==null&&We===h.alternate)break t;We=Na(We),h=Na(h)}We=null}else We=null;Fe!==null&&nf(Ne,we,Fe,We,!1),Ge!==null&&An!==null&&nf(Ne,An,Ge,We,!0)}}e:{if(we=te?Sa(te):window,Fe=we.nodeName&&we.nodeName.toLowerCase(),Fe==="select"||Fe==="input"&&we.type==="file")var He=Em;else if(Mh(we))if(Uh)He=fi;else{He=Lh;var E=$h}else(Fe=we.nodeName)&&Fe.toLowerCase()==="input"&&(we.type==="checkbox"||we.type==="radio")&&(He=jm);if(He&&(He=He(s,te))){Dh(Ne,He,c,Pe);break e}E&&E(s,we,te),s==="focusout"&&(E=we._wrapperState)&&E.controlled&&we.type==="number"&&Ut(we,"number",we.value)}switch(E=te?Sa(te):window,s){case"focusin":(Mh(E)||E.contentEditable==="true")&&(_a=E,iu=te,jo=null);break;case"focusout":jo=iu=_a=null;break;case"mousedown":au=!0;break;case"contextmenu":case"mouseup":case"dragend":au=!1,zh(Ne,c,Pe);break;case"selectionchange":if(Am)break;case"keydown":case"keyup":zh(Ne,c,Pe)}var it;if(Jc)e:{switch(s){case"compositionstart":var gt="onCompositionStart";break e;case"compositionend":gt="onCompositionEnd";break e;case"compositionupdate":gt="onCompositionUpdate";break e}gt=void 0}else Pa?Ih(s,c)&&(gt="onCompositionEnd"):s==="keydown"&&c.keyCode===229&&(gt="onCompositionStart");gt&&(Zc&&c.locale!=="ko"&&(Pa||gt!=="onCompositionStart"?gt==="onCompositionEnd"&&Pa&&(it=K()):(ir=Pe,wa="value"in ir?ir.value:ir.textContent,Pa=!0)),E=Dl(te,gt),0<E.length&&(gt=new wh(gt,s,null,c,Pe),Ne.push({event:gt,listeners:E}),it?gt.data=it:(it=Ah(c),it!==null&&(gt.data=it)))),(it=Eh?Sm(s,c):Rm(s,c))&&(te=Dl(te,"onBeforeInput"),0<te.length&&(Pe=new wh("onBeforeInput","beforeinput",null,c,Pe),Ne.push({event:Pe,listeners:te}),Pe.data=it))}ef(Ne,i)})}function Mo(s,i,c){return{instance:s,listener:i,currentTarget:c}}function Dl(s,i){for(var c=i+"Capture",p=[];s!==null;){var v=s,y=v.stateNode;v.tag===5&&y!==null&&(v=y,y=sn(s,c),y!=null&&p.unshift(Mo(s,y,v)),y=sn(s,i),y!=null&&p.push(Mo(s,y,v))),s=s.return}return p}function Na(s){if(s===null)return null;do s=s.return;while(s&&s.tag!==5);return s||null}function nf(s,i,c,p,v){for(var y=i._reactName,S=[];c!==null&&c!==p;){var D=c,L=D.alternate,te=D.stateNode;if(L!==null&&L===p)break;D.tag===5&&te!==null&&(D=te,v?(L=sn(c,y),L!=null&&S.unshift(Mo(c,L,D))):v||(L=sn(c,y),L!=null&&S.push(Mo(c,L,D)))),c=c.return}S.length!==0&&s.push({event:i,listeners:S})}var Um=/\r\n?/g,Bm=/\u0000|\uFFFD/g;function sf(s){return(typeof s=="string"?s:""+s).replace(Um,`
`).replace(Bm,"")}function Ol(s,i,c){if(i=sf(i),sf(s)!==i&&c)throw Error(n(425))}function Ul(){}var hu=null,fu=null;function pu(s,i){return s==="textarea"||s==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var gu=typeof setTimeout=="function"?setTimeout:void 0,$m=typeof clearTimeout=="function"?clearTimeout:void 0,rf=typeof Promise=="function"?Promise:void 0,Lm=typeof queueMicrotask=="function"?queueMicrotask:typeof rf<"u"?function(s){return rf.resolve(null).then(s).catch(Km)}:gu;function Km(s){setTimeout(function(){throw s})}function mu(s,i){var c=i,p=0;do{var v=c.nextSibling;if(s.removeChild(c),v&&v.nodeType===8)if(c=v.data,c==="/$"){if(p===0){s.removeChild(v),Vr(i);return}p--}else c!=="$"&&c!=="$?"&&c!=="$!"||p++;c=v}while(c);Vr(i)}function gi(s){for(;s!=null;s=s.nextSibling){var i=s.nodeType;if(i===1||i===3)break;if(i===8){if(i=s.data,i==="$"||i==="$!"||i==="$?")break;if(i==="/$")return null}}return s}function af(s){s=s.previousSibling;for(var i=0;s;){if(s.nodeType===8){var c=s.data;if(c==="$"||c==="$!"||c==="$?"){if(i===0)return s;i--}else c==="/$"&&i++}s=s.previousSibling}return null}var Ca=Math.random().toString(36).slice(2),Ar="__reactFiber$"+Ca,Do="__reactProps$"+Ca,Wr="__reactContainer$"+Ca,vu="__reactEvents$"+Ca,Fm="__reactListeners$"+Ca,qm="__reactHandles$"+Ca;function qi(s){var i=s[Ar];if(i)return i;for(var c=s.parentNode;c;){if(i=c[Wr]||c[Ar]){if(c=i.alternate,i.child!==null||c!==null&&c.child!==null)for(s=af(s);s!==null;){if(c=s[Ar])return c;s=af(s)}return i}s=c,c=s.parentNode}return null}function Oo(s){return s=s[Ar]||s[Wr],!s||s.tag!==5&&s.tag!==6&&s.tag!==13&&s.tag!==3?null:s}function Sa(s){if(s.tag===5||s.tag===6)return s.stateNode;throw Error(n(33))}function Bl(s){return s[Do]||null}var bu=[],Ra=-1;function mi(s){return{current:s}}function gn(s){0>Ra||(s.current=bu[Ra],bu[Ra]=null,Ra--)}function on(s,i){Ra++,bu[Ra]=s.current,s.current=i}var vi={},ds=mi(vi),As=mi(!1),Qi=vi;function Ta(s,i){var c=s.type.contextTypes;if(!c)return vi;var p=s.stateNode;if(p&&p.__reactInternalMemoizedUnmaskedChildContext===i)return p.__reactInternalMemoizedMaskedChildContext;var v={},y;for(y in c)v[y]=i[y];return p&&(s=s.stateNode,s.__reactInternalMemoizedUnmaskedChildContext=i,s.__reactInternalMemoizedMaskedChildContext=v),v}function Ms(s){return s=s.childContextTypes,s!=null}function $l(){gn(As),gn(ds)}function of(s,i,c){if(ds.current!==vi)throw Error(n(168));on(ds,i),on(As,c)}function lf(s,i,c){var p=s.stateNode;if(i=i.childContextTypes,typeof p.getChildContext!="function")return c;p=p.getChildContext();for(var v in p)if(!(v in i))throw Error(n(108,O(s)||"Unknown",v));return oe({},c,p)}function Ll(s){return s=(s=s.stateNode)&&s.__reactInternalMemoizedMergedChildContext||vi,Qi=ds.current,on(ds,s),on(As,As.current),!0}function cf(s,i,c){var p=s.stateNode;if(!p)throw Error(n(169));c?(s=lf(s,i,Qi),p.__reactInternalMemoizedMergedChildContext=s,gn(As),gn(ds),on(ds,s)):gn(As),on(As,c)}var Hr=null,Kl=!1,yu=!1;function uf(s){Hr===null?Hr=[s]:Hr.push(s)}function Qm(s){Kl=!0,uf(s)}function bi(){if(!yu&&Hr!==null){yu=!0;var s=0,i=Qt;try{var c=Hr;for(Qt=1;s<c.length;s++){var p=c[s];do p=p(!0);while(p!==null)}Hr=null,Kl=!1}catch(v){throw Hr!==null&&(Hr=Hr.slice(s+1)),ft(Sn,bi),v}finally{Qt=i,yu=!1}}return null}var Ea=[],ja=0,Fl=null,ql=0,or=[],lr=0,zi=null,Yr=1,Xr="";function Gi(s,i){Ea[ja++]=ql,Ea[ja++]=Fl,Fl=s,ql=i}function df(s,i,c){or[lr++]=Yr,or[lr++]=Xr,or[lr++]=zi,zi=s;var p=Yr;s=Xr;var v=32-q(p)-1;p&=~(1<<v),c+=1;var y=32-q(i)+v;if(30<y){var S=v-v%5;y=(p&(1<<S)-1).toString(32),p>>=S,v-=S,Yr=1<<32-q(i)+v|c<<v|p,Xr=y+s}else Yr=1<<y|c<<v|p,Xr=s}function wu(s){s.return!==null&&(Gi(s,1),df(s,1,0))}function xu(s){for(;s===Fl;)Fl=Ea[--ja],Ea[ja]=null,ql=Ea[--ja],Ea[ja]=null;for(;s===zi;)zi=or[--lr],or[lr]=null,Xr=or[--lr],or[lr]=null,Yr=or[--lr],or[lr]=null}var qs=null,Qs=null,wn=!1,Pr=null;function hf(s,i){var c=fr(5,null,null,0);c.elementType="DELETED",c.stateNode=i,c.return=s,i=s.deletions,i===null?(s.deletions=[c],s.flags|=16):i.push(c)}function ff(s,i){switch(s.tag){case 5:var c=s.type;return i=i.nodeType!==1||c.toLowerCase()!==i.nodeName.toLowerCase()?null:i,i!==null?(s.stateNode=i,qs=s,Qs=gi(i.firstChild),!0):!1;case 6:return i=s.pendingProps===""||i.nodeType!==3?null:i,i!==null?(s.stateNode=i,qs=s,Qs=null,!0):!1;case 13:return i=i.nodeType!==8?null:i,i!==null?(c=zi!==null?{id:Yr,overflow:Xr}:null,s.memoizedState={dehydrated:i,treeContext:c,retryLane:1073741824},c=fr(18,null,null,0),c.stateNode=i,c.return=s,s.child=c,qs=s,Qs=null,!0):!1;default:return!1}}function Pu(s){return(s.mode&1)!==0&&(s.flags&128)===0}function _u(s){if(wn){var i=Qs;if(i){var c=i;if(!ff(s,i)){if(Pu(s))throw Error(n(418));i=gi(c.nextSibling);var p=qs;i&&ff(s,i)?hf(p,c):(s.flags=s.flags&-4097|2,wn=!1,qs=s)}}else{if(Pu(s))throw Error(n(418));s.flags=s.flags&-4097|2,wn=!1,qs=s}}}function pf(s){for(s=s.return;s!==null&&s.tag!==5&&s.tag!==3&&s.tag!==13;)s=s.return;qs=s}function Ql(s){if(s!==qs)return!1;if(!wn)return pf(s),wn=!0,!1;var i;if((i=s.tag!==3)&&!(i=s.tag!==5)&&(i=s.type,i=i!=="head"&&i!=="body"&&!pu(s.type,s.memoizedProps)),i&&(i=Qs)){if(Pu(s))throw gf(),Error(n(418));for(;i;)hf(s,i),i=gi(i.nextSibling)}if(pf(s),s.tag===13){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(n(317));e:{for(s=s.nextSibling,i=0;s;){if(s.nodeType===8){var c=s.data;if(c==="/$"){if(i===0){Qs=gi(s.nextSibling);break e}i--}else c!=="$"&&c!=="$!"&&c!=="$?"||i++}s=s.nextSibling}Qs=null}}else Qs=qs?gi(s.stateNode.nextSibling):null;return!0}function gf(){for(var s=Qs;s;)s=gi(s.nextSibling)}function Ia(){Qs=qs=null,wn=!1}function ku(s){Pr===null?Pr=[s]:Pr.push(s)}var zm=W.ReactCurrentBatchConfig;function Uo(s,i,c){if(s=c.ref,s!==null&&typeof s!="function"&&typeof s!="object"){if(c._owner){if(c=c._owner,c){if(c.tag!==1)throw Error(n(309));var p=c.stateNode}if(!p)throw Error(n(147,s));var v=p,y=""+s;return i!==null&&i.ref!==null&&typeof i.ref=="function"&&i.ref._stringRef===y?i.ref:(i=function(S){var D=v.refs;S===null?delete D[y]:D[y]=S},i._stringRef=y,i)}if(typeof s!="string")throw Error(n(284));if(!c._owner)throw Error(n(290,s))}return s}function zl(s,i){throw s=Object.prototype.toString.call(i),Error(n(31,s==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":s))}function mf(s){var i=s._init;return i(s._payload)}function vf(s){function i(h,R){if(s){var Y=h.deletions;Y===null?(h.deletions=[R],h.flags|=16):Y.push(R)}}function c(h,R){if(!s)return null;for(;R!==null;)i(h,R),R=R.sibling;return null}function p(h,R){for(h=new Map;R!==null;)R.key!==null?h.set(R.key,R):h.set(R.index,R),R=R.sibling;return h}function v(h,R){return h=Ri(h,R),h.index=0,h.sibling=null,h}function y(h,R,Y){return h.index=Y,s?(Y=h.alternate,Y!==null?(Y=Y.index,Y<R?(h.flags|=2,R):Y):(h.flags|=2,R)):(h.flags|=1048576,R)}function S(h){return s&&h.alternate===null&&(h.flags|=2),h}function D(h,R,Y,ke){return R===null||R.tag!==6?(R=gd(Y,h.mode,ke),R.return=h,R):(R=v(R,Y),R.return=h,R)}function L(h,R,Y,ke){var He=Y.type;return He===ve?Pe(h,R,Y.props.children,ke,Y.key):R!==null&&(R.elementType===He||typeof He=="object"&&He!==null&&He.$$typeof===ne&&mf(He)===R.type)?(ke=v(R,Y.props),ke.ref=Uo(h,R,Y),ke.return=h,ke):(ke=hc(Y.type,Y.key,Y.props,null,h.mode,ke),ke.ref=Uo(h,R,Y),ke.return=h,ke)}function te(h,R,Y,ke){return R===null||R.tag!==4||R.stateNode.containerInfo!==Y.containerInfo||R.stateNode.implementation!==Y.implementation?(R=md(Y,h.mode,ke),R.return=h,R):(R=v(R,Y.children||[]),R.return=h,R)}function Pe(h,R,Y,ke,He){return R===null||R.tag!==7?(R=Zi(Y,h.mode,ke,He),R.return=h,R):(R=v(R,Y),R.return=h,R)}function Ne(h,R,Y){if(typeof R=="string"&&R!==""||typeof R=="number")return R=gd(""+R,h.mode,Y),R.return=h,R;if(typeof R=="object"&&R!==null){switch(R.$$typeof){case u:return Y=hc(R.type,R.key,R.props,null,h.mode,Y),Y.ref=Uo(h,null,R),Y.return=h,Y;case ye:return R=md(R,h.mode,Y),R.return=h,R;case ne:var ke=R._init;return Ne(h,ke(R._payload),Y)}if(Kt(R)||fe(R))return R=Zi(R,h.mode,Y,null),R.return=h,R;zl(h,R)}return null}function we(h,R,Y,ke){var He=R!==null?R.key:null;if(typeof Y=="string"&&Y!==""||typeof Y=="number")return He!==null?null:D(h,R,""+Y,ke);if(typeof Y=="object"&&Y!==null){switch(Y.$$typeof){case u:return Y.key===He?L(h,R,Y,ke):null;case ye:return Y.key===He?te(h,R,Y,ke):null;case ne:return He=Y._init,we(h,R,He(Y._payload),ke)}if(Kt(Y)||fe(Y))return He!==null?null:Pe(h,R,Y,ke,null);zl(h,Y)}return null}function Fe(h,R,Y,ke,He){if(typeof ke=="string"&&ke!==""||typeof ke=="number")return h=h.get(Y)||null,D(R,h,""+ke,He);if(typeof ke=="object"&&ke!==null){switch(ke.$$typeof){case u:return h=h.get(ke.key===null?Y:ke.key)||null,L(R,h,ke,He);case ye:return h=h.get(ke.key===null?Y:ke.key)||null,te(R,h,ke,He);case ne:var E=ke._init;return Fe(h,R,Y,E(ke._payload),He)}if(Kt(ke)||fe(ke))return h=h.get(Y)||null,Pe(R,h,ke,He,null);zl(R,ke)}return null}function Ge(h,R,Y,ke){for(var He=null,E=null,it=R,gt=R=0,B=null;it!==null&&gt<Y.length;gt++){it.index>gt?(B=it,it=null):B=it.sibling;var Nt=we(h,it,Y[gt],ke);if(Nt===null){it===null&&(it=B);break}s&&it&&Nt.alternate===null&&i(h,it),R=y(Nt,R,gt),E===null?He=Nt:E.sibling=Nt,E=Nt,it=B}if(gt===Y.length)return c(h,it),wn&&Gi(h,gt),He;if(it===null){for(;gt<Y.length;gt++)it=Ne(h,Y[gt],ke),it!==null&&(R=y(it,R,gt),E===null?He=it:E.sibling=it,E=it);return wn&&Gi(h,gt),He}for(it=p(h,it);gt<Y.length;gt++)B=Fe(it,h,gt,Y[gt],ke),B!==null&&(s&&B.alternate!==null&&it.delete(B.key===null?gt:B.key),R=y(B,R,gt),E===null?He=B:E.sibling=B,E=B);return s&&it.forEach(function(Ti){return i(h,Ti)}),wn&&Gi(h,gt),He}function We(h,R,Y,ke){var He=fe(Y);if(typeof He!="function")throw Error(n(150));if(Y=He.call(Y),Y==null)throw Error(n(151));for(var E=He=null,it=R,gt=R=0,B=null,Nt=Y.next();it!==null&&!Nt.done;gt++,Nt=Y.next()){it.index>gt?(B=it,it=null):B=it.sibling;var Ti=we(h,it,Nt.value,ke);if(Ti===null){it===null&&(it=B);break}s&&it&&Ti.alternate===null&&i(h,it),R=y(Ti,R,gt),E===null?He=Ti:E.sibling=Ti,E=Ti,it=B}if(Nt.done)return c(h,it),wn&&Gi(h,gt),He;if(it===null){for(;!Nt.done;gt++,Nt=Y.next())Nt=Ne(h,Nt.value,ke),Nt!==null&&(R=y(Nt,R,gt),E===null?He=Nt:E.sibling=Nt,E=Nt);return wn&&Gi(h,gt),He}for(it=p(h,it);!Nt.done;gt++,Nt=Y.next())Nt=Fe(it,h,gt,Nt.value,ke),Nt!==null&&(s&&Nt.alternate!==null&&it.delete(Nt.key===null?gt:Nt.key),R=y(Nt,R,gt),E===null?He=Nt:E.sibling=Nt,E=Nt);return s&&it.forEach(function(P1){return i(h,P1)}),wn&&Gi(h,gt),He}function An(h,R,Y,ke){if(typeof Y=="object"&&Y!==null&&Y.type===ve&&Y.key===null&&(Y=Y.props.children),typeof Y=="object"&&Y!==null){switch(Y.$$typeof){case u:e:{for(var He=Y.key,E=R;E!==null;){if(E.key===He){if(He=Y.type,He===ve){if(E.tag===7){c(h,E.sibling),R=v(E,Y.props.children),R.return=h,h=R;break e}}else if(E.elementType===He||typeof He=="object"&&He!==null&&He.$$typeof===ne&&mf(He)===E.type){c(h,E.sibling),R=v(E,Y.props),R.ref=Uo(h,E,Y),R.return=h,h=R;break e}c(h,E);break}else i(h,E);E=E.sibling}Y.type===ve?(R=Zi(Y.props.children,h.mode,ke,Y.key),R.return=h,h=R):(ke=hc(Y.type,Y.key,Y.props,null,h.mode,ke),ke.ref=Uo(h,R,Y),ke.return=h,h=ke)}return S(h);case ye:e:{for(E=Y.key;R!==null;){if(R.key===E)if(R.tag===4&&R.stateNode.containerInfo===Y.containerInfo&&R.stateNode.implementation===Y.implementation){c(h,R.sibling),R=v(R,Y.children||[]),R.return=h,h=R;break e}else{c(h,R);break}else i(h,R);R=R.sibling}R=md(Y,h.mode,ke),R.return=h,h=R}return S(h);case ne:return E=Y._init,An(h,R,E(Y._payload),ke)}if(Kt(Y))return Ge(h,R,Y,ke);if(fe(Y))return We(h,R,Y,ke);zl(h,Y)}return typeof Y=="string"&&Y!==""||typeof Y=="number"?(Y=""+Y,R!==null&&R.tag===6?(c(h,R.sibling),R=v(R,Y),R.return=h,h=R):(c(h,R),R=gd(Y,h.mode,ke),R.return=h,h=R),S(h)):c(h,R)}return An}var Aa=vf(!0),bf=vf(!1),Gl=mi(null),Vl=null,Ma=null,Nu=null;function Cu(){Nu=Ma=Vl=null}function Su(s){var i=Gl.current;gn(Gl),s._currentValue=i}function Ru(s,i,c){for(;s!==null;){var p=s.alternate;if((s.childLanes&i)!==i?(s.childLanes|=i,p!==null&&(p.childLanes|=i)):p!==null&&(p.childLanes&i)!==i&&(p.childLanes|=i),s===c)break;s=s.return}}function Da(s,i){Vl=s,Nu=Ma=null,s=s.dependencies,s!==null&&s.firstContext!==null&&((s.lanes&i)!==0&&(Ds=!0),s.firstContext=null)}function cr(s){var i=s._currentValue;if(Nu!==s)if(s={context:s,memoizedValue:i,next:null},Ma===null){if(Vl===null)throw Error(n(308));Ma=s,Vl.dependencies={lanes:0,firstContext:s}}else Ma=Ma.next=s;return i}var Vi=null;function Tu(s){Vi===null?Vi=[s]:Vi.push(s)}function yf(s,i,c,p){var v=i.interleaved;return v===null?(c.next=c,Tu(i)):(c.next=v.next,v.next=c),i.interleaved=c,Jr(s,p)}function Jr(s,i){s.lanes|=i;var c=s.alternate;for(c!==null&&(c.lanes|=i),c=s,s=s.return;s!==null;)s.childLanes|=i,c=s.alternate,c!==null&&(c.childLanes|=i),c=s,s=s.return;return c.tag===3?c.stateNode:null}var yi=!1;function Eu(s){s.updateQueue={baseState:s.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function wf(s,i){s=s.updateQueue,i.updateQueue===s&&(i.updateQueue={baseState:s.baseState,firstBaseUpdate:s.firstBaseUpdate,lastBaseUpdate:s.lastBaseUpdate,shared:s.shared,effects:s.effects})}function Mr(s,i){return{eventTime:s,lane:i,tag:0,payload:null,callback:null,next:null}}function zs(s,i,c){var p=s.updateQueue;if(p===null)return null;if(p=p.shared,(Lt&2)!==0){var v=p.pending;return v===null?i.next=i:(i.next=v.next,v.next=i),p.pending=i,Jr(s,c)}return v=p.interleaved,v===null?(i.next=i,Tu(p)):(i.next=v.next,v.next=i),p.interleaved=i,Jr(s,c)}function Bo(s,i,c){if(i=i.updateQueue,i!==null&&(i=i.shared,(c&4194240)!==0)){var p=i.lanes;p&=s.pendingLanes,c|=p,i.lanes=c,va(s,c)}}function ju(s,i){var c=s.updateQueue,p=s.alternate;if(p!==null&&(p=p.updateQueue,c===p)){var v=null,y=null;if(c=c.firstBaseUpdate,c!==null){do{var S={eventTime:c.eventTime,lane:c.lane,tag:c.tag,payload:c.payload,callback:c.callback,next:null};y===null?v=y=S:y=y.next=S,c=c.next}while(c!==null);y===null?v=y=i:y=y.next=i}else v=y=i;c={baseState:p.baseState,firstBaseUpdate:v,lastBaseUpdate:y,shared:p.shared,effects:p.effects},s.updateQueue=c;return}s=c.lastBaseUpdate,s===null?c.firstBaseUpdate=i:s.next=i,c.lastBaseUpdate=i}function Wi(s,i,c,p){var v=s.updateQueue;yi=!1;var y=v.firstBaseUpdate,S=v.lastBaseUpdate,D=v.shared.pending;if(D!==null){v.shared.pending=null;var L=D,te=L.next;L.next=null,S===null?y=te:S.next=te,S=L;var Pe=s.alternate;Pe!==null&&(Pe=Pe.updateQueue,D=Pe.lastBaseUpdate,D!==S&&(D===null?Pe.firstBaseUpdate=te:D.next=te,Pe.lastBaseUpdate=L))}if(y!==null){var Ne=v.baseState;S=0,Pe=te=L=null,D=y;do{var we=D.lane,Fe=D.eventTime;if((p&we)===we){Pe!==null&&(Pe=Pe.next={eventTime:Fe,lane:0,tag:D.tag,payload:D.payload,callback:D.callback,next:null});e:{var Ge=s,We=D;switch(we=i,Fe=c,We.tag){case 1:if(Ge=We.payload,typeof Ge=="function"){Ne=Ge.call(Fe,Ne,we);break e}Ne=Ge;break e;case 3:Ge.flags=Ge.flags&-65537|128;case 0:if(Ge=We.payload,we=typeof Ge=="function"?Ge.call(Fe,Ne,we):Ge,we==null)break e;Ne=oe({},Ne,we);break e;case 2:yi=!0}}D.callback!==null&&D.lane!==0&&(s.flags|=64,we=v.effects,we===null?v.effects=[D]:we.push(D))}else Fe={eventTime:Fe,lane:we,tag:D.tag,payload:D.payload,callback:D.callback,next:null},Pe===null?(te=Pe=Fe,L=Ne):Pe=Pe.next=Fe,S|=we;if(D=D.next,D===null){if(D=v.shared.pending,D===null)break;we=D,D=we.next,we.next=null,v.lastBaseUpdate=we,v.shared.pending=null}}while(!0);if(Pe===null&&(L=Ne),v.baseState=L,v.firstBaseUpdate=te,v.lastBaseUpdate=Pe,i=v.shared.interleaved,i!==null){v=i;do S|=v.lane,v=v.next;while(v!==i)}else y===null&&(v.shared.lanes=0);Xi|=S,s.lanes=S,s.memoizedState=Ne}}function xf(s,i,c){if(s=i.effects,i.effects=null,s!==null)for(i=0;i<s.length;i++){var p=s[i],v=p.callback;if(v!==null){if(p.callback=null,p=c,typeof v!="function")throw Error(n(191,v));v.call(p)}}}var Oa={},Xn=mi(Oa),wi=mi(Oa),Jn=mi(Oa);function ur(s){if(s===Oa)throw Error(n(174));return s}function $o(s,i){switch(on(Jn,i),on(wi,s),on(Xn,Oa),s=i.nodeType,s){case 9:case 11:i=(i=i.documentElement)?i.namespaceURI:vn(null,"");break;default:s=s===8?i.parentNode:i,i=s.namespaceURI||null,s=s.tagName,i=vn(i,s)}gn(Xn),on(Xn,i)}function Hi(){gn(Xn),gn(wi),gn(Jn)}function Pf(s){ur(Jn.current);var i=ur(Xn.current),c=vn(i,s.type);i!==c&&(on(wi,s),on(Xn,c))}function Iu(s){wi.current===s&&(gn(Xn),gn(wi))}var xn=mi(0);function Ua(s){for(var i=s;i!==null;){if(i.tag===13){var c=i.memoizedState;if(c!==null&&(c=c.dehydrated,c===null||c.data==="$?"||c.data==="$!"))return i}else if(i.tag===19&&i.memoizedProps.revealOrder!==void 0){if((i.flags&128)!==0)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===s)break;for(;i.sibling===null;){if(i.return===null||i.return===s)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}var Lo=[];function Wl(){for(var s=0;s<Lo.length;s++)Lo[s]._workInProgressVersionPrimary=null;Lo.length=0}var Hl=W.ReactCurrentDispatcher,Au=W.ReactCurrentBatchConfig,Yi=0,mn=null,Kn=null,Qn=null,Ba=!1,Ko=!1,Fo=0,_f=0;function Zn(){throw Error(n(321))}function Yl(s,i){if(i===null)return!1;for(var c=0;c<i.length&&c<s.length;c++)if(!ar(s[c],i[c]))return!1;return!0}function $a(s,i,c,p,v,y){if(Yi=y,mn=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,Hl.current=s===null||s.memoizedState===null?Hm:Ym,s=c(p,v),Ko){y=0;do{if(Ko=!1,Fo=0,25<=y)throw Error(n(301));y+=1,Qn=Kn=null,i.updateQueue=null,Hl.current=Xm,s=c(p,v)}while(Ko)}if(Hl.current=Jl,i=Kn!==null&&Kn.next!==null,Yi=0,Qn=Kn=mn=null,Ba=!1,i)throw Error(n(300));return s}function Mu(){var s=Fo!==0;return Fo=0,s}function Dr(){var s={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Qn===null?mn.memoizedState=Qn=s:Qn=Qn.next=s,Qn}function dr(){if(Kn===null){var s=mn.alternate;s=s!==null?s.memoizedState:null}else s=Kn.next;var i=Qn===null?mn.memoizedState:Qn.next;if(i!==null)Qn=i,Kn=s;else{if(s===null)throw Error(n(310));Kn=s,s={memoizedState:Kn.memoizedState,baseState:Kn.baseState,baseQueue:Kn.baseQueue,queue:Kn.queue,next:null},Qn===null?mn.memoizedState=Qn=s:Qn=Qn.next=s}return Qn}function qo(s,i){return typeof i=="function"?i(s):i}function Du(s){var i=dr(),c=i.queue;if(c===null)throw Error(n(311));c.lastRenderedReducer=s;var p=Kn,v=p.baseQueue,y=c.pending;if(y!==null){if(v!==null){var S=v.next;v.next=y.next,y.next=S}p.baseQueue=v=y,c.pending=null}if(v!==null){y=v.next,p=p.baseState;var D=S=null,L=null,te=y;do{var Pe=te.lane;if((Yi&Pe)===Pe)L!==null&&(L=L.next={lane:0,action:te.action,hasEagerState:te.hasEagerState,eagerState:te.eagerState,next:null}),p=te.hasEagerState?te.eagerState:s(p,te.action);else{var Ne={lane:Pe,action:te.action,hasEagerState:te.hasEagerState,eagerState:te.eagerState,next:null};L===null?(D=L=Ne,S=p):L=L.next=Ne,mn.lanes|=Pe,Xi|=Pe}te=te.next}while(te!==null&&te!==y);L===null?S=p:L.next=D,ar(p,i.memoizedState)||(Ds=!0),i.memoizedState=p,i.baseState=S,i.baseQueue=L,c.lastRenderedState=p}if(s=c.interleaved,s!==null){v=s;do y=v.lane,mn.lanes|=y,Xi|=y,v=v.next;while(v!==s)}else v===null&&(c.lanes=0);return[i.memoizedState,c.dispatch]}function Ou(s){var i=dr(),c=i.queue;if(c===null)throw Error(n(311));c.lastRenderedReducer=s;var p=c.dispatch,v=c.pending,y=i.memoizedState;if(v!==null){c.pending=null;var S=v=v.next;do y=s(y,S.action),S=S.next;while(S!==v);ar(y,i.memoizedState)||(Ds=!0),i.memoizedState=y,i.baseQueue===null&&(i.baseState=y),c.lastRenderedState=y}return[y,p]}function kf(){}function Nf(s,i){var c=mn,p=dr(),v=i(),y=!ar(p.memoizedState,v);if(y&&(p.memoizedState=v,Ds=!0),p=p.queue,Uu(Rf.bind(null,c,p,s),[s]),p.getSnapshot!==i||y||Qn!==null&&Qn.memoizedState.tag&1){if(c.flags|=2048,Qo(9,Sf.bind(null,c,p,v,i),void 0,null),zn===null)throw Error(n(349));(Yi&30)!==0||Cf(c,i,v)}return v}function Cf(s,i,c){s.flags|=16384,s={getSnapshot:i,value:c},i=mn.updateQueue,i===null?(i={lastEffect:null,stores:null},mn.updateQueue=i,i.stores=[s]):(c=i.stores,c===null?i.stores=[s]:c.push(s))}function Sf(s,i,c,p){i.value=c,i.getSnapshot=p,Tf(i)&&Ef(s)}function Rf(s,i,c){return c(function(){Tf(i)&&Ef(s)})}function Tf(s){var i=s.getSnapshot;s=s.value;try{var c=i();return!ar(s,c)}catch{return!0}}function Ef(s){var i=Jr(s,1);i!==null&&Cr(i,s,1,-1)}function jf(s){var i=Dr();return typeof s=="function"&&(s=s()),i.memoizedState=i.baseState=s,s={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:qo,lastRenderedState:s},i.queue=s,s=s.dispatch=Wm.bind(null,mn,s),[i.memoizedState,s]}function Qo(s,i,c,p){return s={tag:s,create:i,destroy:c,deps:p,next:null},i=mn.updateQueue,i===null?(i={lastEffect:null,stores:null},mn.updateQueue=i,i.lastEffect=s.next=s):(c=i.lastEffect,c===null?i.lastEffect=s.next=s:(p=c.next,c.next=s,s.next=p,i.lastEffect=s)),s}function If(){return dr().memoizedState}function zo(s,i,c,p){var v=Dr();mn.flags|=s,v.memoizedState=Qo(1|i,c,void 0,p===void 0?null:p)}function Xl(s,i,c,p){var v=dr();p=p===void 0?null:p;var y=void 0;if(Kn!==null){var S=Kn.memoizedState;if(y=S.destroy,p!==null&&Yl(p,S.deps)){v.memoizedState=Qo(i,c,y,p);return}}mn.flags|=s,v.memoizedState=Qo(1|i,c,y,p)}function Af(s,i){return zo(8390656,8,s,i)}function Uu(s,i){return Xl(2048,8,s,i)}function Mf(s,i){return Xl(4,2,s,i)}function Df(s,i){return Xl(4,4,s,i)}function Bu(s,i){if(typeof i=="function")return s=s(),i(s),function(){i(null)};if(i!=null)return s=s(),i.current=s,function(){i.current=null}}function Of(s,i,c){return c=c!=null?c.concat([s]):null,Xl(4,4,Bu.bind(null,i,s),c)}function $u(){}function Uf(s,i){var c=dr();i=i===void 0?null:i;var p=c.memoizedState;return p!==null&&i!==null&&Yl(i,p[1])?p[0]:(c.memoizedState=[s,i],s)}function Bf(s,i){var c=dr();i=i===void 0?null:i;var p=c.memoizedState;return p!==null&&i!==null&&Yl(i,p[1])?p[0]:(s=s(),c.memoizedState=[s,i],s)}function $f(s,i,c){return(Yi&21)===0?(s.baseState&&(s.baseState=!1,Ds=!0),s.memoizedState=c):(ar(c,i)||(c=wo(),mn.lanes|=c,Xi|=c,s.baseState=!0),i)}function Gm(s,i){var c=Qt;Qt=c!==0&&4>c?c:4,s(!0);var p=Au.transition;Au.transition={};try{s(!1),i()}finally{Qt=c,Au.transition=p}}function Lf(){return dr().memoizedState}function Vm(s,i,c){var p=ki(s);if(c={lane:p,action:c,hasEagerState:!1,eagerState:null,next:null},Kf(s))Ff(i,c);else if(c=yf(s,i,c,p),c!==null){var v=ks();Cr(c,s,p,v),qf(c,i,p)}}function Wm(s,i,c){var p=ki(s),v={lane:p,action:c,hasEagerState:!1,eagerState:null,next:null};if(Kf(s))Ff(i,v);else{var y=s.alternate;if(s.lanes===0&&(y===null||y.lanes===0)&&(y=i.lastRenderedReducer,y!==null))try{var S=i.lastRenderedState,D=y(S,c);if(v.hasEagerState=!0,v.eagerState=D,ar(D,S)){var L=i.interleaved;L===null?(v.next=v,Tu(i)):(v.next=L.next,L.next=v),i.interleaved=v;return}}catch{}finally{}c=yf(s,i,v,p),c!==null&&(v=ks(),Cr(c,s,p,v),qf(c,i,p))}}function Kf(s){var i=s.alternate;return s===mn||i!==null&&i===mn}function Ff(s,i){Ko=Ba=!0;var c=s.pending;c===null?i.next=i:(i.next=c.next,c.next=i),s.pending=i}function qf(s,i,c){if((c&4194240)!==0){var p=i.lanes;p&=s.pendingLanes,c|=p,i.lanes=c,va(s,c)}}var Jl={readContext:cr,useCallback:Zn,useContext:Zn,useEffect:Zn,useImperativeHandle:Zn,useInsertionEffect:Zn,useLayoutEffect:Zn,useMemo:Zn,useReducer:Zn,useRef:Zn,useState:Zn,useDebugValue:Zn,useDeferredValue:Zn,useTransition:Zn,useMutableSource:Zn,useSyncExternalStore:Zn,useId:Zn,unstable_isNewReconciler:!1},Hm={readContext:cr,useCallback:function(s,i){return Dr().memoizedState=[s,i===void 0?null:i],s},useContext:cr,useEffect:Af,useImperativeHandle:function(s,i,c){return c=c!=null?c.concat([s]):null,zo(4194308,4,Bu.bind(null,i,s),c)},useLayoutEffect:function(s,i){return zo(4194308,4,s,i)},useInsertionEffect:function(s,i){return zo(4,2,s,i)},useMemo:function(s,i){var c=Dr();return i=i===void 0?null:i,s=s(),c.memoizedState=[s,i],s},useReducer:function(s,i,c){var p=Dr();return i=c!==void 0?c(i):i,p.memoizedState=p.baseState=i,s={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:s,lastRenderedState:i},p.queue=s,s=s.dispatch=Vm.bind(null,mn,s),[p.memoizedState,s]},useRef:function(s){var i=Dr();return s={current:s},i.memoizedState=s},useState:jf,useDebugValue:$u,useDeferredValue:function(s){return Dr().memoizedState=s},useTransition:function(){var s=jf(!1),i=s[0];return s=Gm.bind(null,s[1]),Dr().memoizedState=s,[i,s]},useMutableSource:function(){},useSyncExternalStore:function(s,i,c){var p=mn,v=Dr();if(wn){if(c===void 0)throw Error(n(407));c=c()}else{if(c=i(),zn===null)throw Error(n(349));(Yi&30)!==0||Cf(p,i,c)}v.memoizedState=c;var y={value:c,getSnapshot:i};return v.queue=y,Af(Rf.bind(null,p,y,s),[s]),p.flags|=2048,Qo(9,Sf.bind(null,p,y,c,i),void 0,null),c},useId:function(){var s=Dr(),i=zn.identifierPrefix;if(wn){var c=Xr,p=Yr;c=(p&~(1<<32-q(p)-1)).toString(32)+c,i=":"+i+"R"+c,c=Fo++,0<c&&(i+="H"+c.toString(32)),i+=":"}else c=_f++,i=":"+i+"r"+c.toString(32)+":";return s.memoizedState=i},unstable_isNewReconciler:!1},Ym={readContext:cr,useCallback:Uf,useContext:cr,useEffect:Uu,useImperativeHandle:Of,useInsertionEffect:Mf,useLayoutEffect:Df,useMemo:Bf,useReducer:Du,useRef:If,useState:function(){return Du(qo)},useDebugValue:$u,useDeferredValue:function(s){var i=dr();return $f(i,Kn.memoizedState,s)},useTransition:function(){var s=Du(qo)[0],i=dr().memoizedState;return[s,i]},useMutableSource:kf,useSyncExternalStore:Nf,useId:Lf,unstable_isNewReconciler:!1},Xm={readContext:cr,useCallback:Uf,useContext:cr,useEffect:Uu,useImperativeHandle:Of,useInsertionEffect:Mf,useLayoutEffect:Df,useMemo:Bf,useReducer:Ou,useRef:If,useState:function(){return Ou(qo)},useDebugValue:$u,useDeferredValue:function(s){var i=dr();return Kn===null?i.memoizedState=s:$f(i,Kn.memoizedState,s)},useTransition:function(){var s=Ou(qo)[0],i=dr().memoizedState;return[s,i]},useMutableSource:kf,useSyncExternalStore:Nf,useId:Lf,unstable_isNewReconciler:!1};function _r(s,i){if(s&&s.defaultProps){i=oe({},i),s=s.defaultProps;for(var c in s)i[c]===void 0&&(i[c]=s[c]);return i}return i}function Lu(s,i,c,p){i=s.memoizedState,c=c(p,i),c=c==null?i:oe({},i,c),s.memoizedState=c,s.lanes===0&&(s.updateQueue.baseState=c)}var Zl={isMounted:function(s){return(s=s._reactInternals)?Re(s)===s:!1},enqueueSetState:function(s,i,c){s=s._reactInternals;var p=ks(),v=ki(s),y=Mr(p,v);y.payload=i,c!=null&&(y.callback=c),i=zs(s,y,v),i!==null&&(Cr(i,s,v,p),Bo(i,s,v))},enqueueReplaceState:function(s,i,c){s=s._reactInternals;var p=ks(),v=ki(s),y=Mr(p,v);y.tag=1,y.payload=i,c!=null&&(y.callback=c),i=zs(s,y,v),i!==null&&(Cr(i,s,v,p),Bo(i,s,v))},enqueueForceUpdate:function(s,i){s=s._reactInternals;var c=ks(),p=ki(s),v=Mr(c,p);v.tag=2,i!=null&&(v.callback=i),i=zs(s,v,p),i!==null&&(Cr(i,s,p,c),Bo(i,s,p))}};function Qf(s,i,c,p,v,y,S){return s=s.stateNode,typeof s.shouldComponentUpdate=="function"?s.shouldComponentUpdate(p,y,S):i.prototype&&i.prototype.isPureReactComponent?!Eo(c,p)||!Eo(v,y):!0}function zf(s,i,c){var p=!1,v=vi,y=i.contextType;return typeof y=="object"&&y!==null?y=cr(y):(v=Ms(i)?Qi:ds.current,p=i.contextTypes,y=(p=p!=null)?Ta(s,v):vi),i=new i(c,y),s.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,i.updater=Zl,s.stateNode=i,i._reactInternals=s,p&&(s=s.stateNode,s.__reactInternalMemoizedUnmaskedChildContext=v,s.__reactInternalMemoizedMaskedChildContext=y),i}function Gf(s,i,c,p){s=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(c,p),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(c,p),i.state!==s&&Zl.enqueueReplaceState(i,i.state,null)}function Ku(s,i,c,p){var v=s.stateNode;v.props=c,v.state=s.memoizedState,v.refs={},Eu(s);var y=i.contextType;typeof y=="object"&&y!==null?v.context=cr(y):(y=Ms(i)?Qi:ds.current,v.context=Ta(s,y)),v.state=s.memoizedState,y=i.getDerivedStateFromProps,typeof y=="function"&&(Lu(s,i,y,c),v.state=s.memoizedState),typeof i.getDerivedStateFromProps=="function"||typeof v.getSnapshotBeforeUpdate=="function"||typeof v.UNSAFE_componentWillMount!="function"&&typeof v.componentWillMount!="function"||(i=v.state,typeof v.componentWillMount=="function"&&v.componentWillMount(),typeof v.UNSAFE_componentWillMount=="function"&&v.UNSAFE_componentWillMount(),i!==v.state&&Zl.enqueueReplaceState(v,v.state,null),Wi(s,c,v,p),v.state=s.memoizedState),typeof v.componentDidMount=="function"&&(s.flags|=4194308)}function La(s,i){try{var c="",p=i;do c+=Ze(p),p=p.return;while(p);var v=c}catch(y){v=`
Error generating stack: `+y.message+`
`+y.stack}return{value:s,source:i,stack:v,digest:null}}function Fu(s,i,c){return{value:s,source:null,stack:c??null,digest:i??null}}function qu(s,i){try{console.error(i.value)}catch(c){setTimeout(function(){throw c})}}var Jm=typeof WeakMap=="function"?WeakMap:Map;function Vf(s,i,c){c=Mr(-1,c),c.tag=3,c.payload={element:null};var p=i.value;return c.callback=function(){ac||(ac=!0,ad=p),qu(s,i)},c}function Wf(s,i,c){c=Mr(-1,c),c.tag=3;var p=s.type.getDerivedStateFromError;if(typeof p=="function"){var v=i.value;c.payload=function(){return p(v)},c.callback=function(){qu(s,i)}}var y=s.stateNode;return y!==null&&typeof y.componentDidCatch=="function"&&(c.callback=function(){qu(s,i),typeof p!="function"&&(Pi===null?Pi=new Set([this]):Pi.add(this));var S=i.stack;this.componentDidCatch(i.value,{componentStack:S!==null?S:""})}),c}function Qu(s,i,c){var p=s.pingCache;if(p===null){p=s.pingCache=new Jm;var v=new Set;p.set(i,v)}else v=p.get(i),v===void 0&&(v=new Set,p.set(i,v));v.has(c)||(v.add(c),s=d1.bind(null,s,i,c),i.then(s,s))}function zu(s){do{var i;if((i=s.tag===13)&&(i=s.memoizedState,i=i!==null?i.dehydrated!==null:!0),i)return s;s=s.return}while(s!==null);return null}function Hf(s,i,c,p,v){return(s.mode&1)===0?(s===i?s.flags|=65536:(s.flags|=128,c.flags|=131072,c.flags&=-52805,c.tag===1&&(c.alternate===null?c.tag=17:(i=Mr(-1,1),i.tag=2,zs(c,i,1))),c.lanes|=1),s):(s.flags|=65536,s.lanes=v,s)}var Zm=W.ReactCurrentOwner,Ds=!1;function hs(s,i,c,p){i.child=s===null?bf(i,null,c,p):Aa(i,s.child,c,p)}function Yf(s,i,c,p,v){c=c.render;var y=i.ref;return Da(i,v),p=$a(s,i,c,p,y,v),c=Mu(),s!==null&&!Ds?(i.updateQueue=s.updateQueue,i.flags&=-2053,s.lanes&=~v,Zr(s,i,v)):(wn&&c&&wu(i),i.flags|=1,hs(s,i,p,v),i.child)}function Xf(s,i,c,p,v){if(s===null){var y=c.type;return typeof y=="function"&&!pd(y)&&y.defaultProps===void 0&&c.compare===null&&c.defaultProps===void 0?(i.tag=15,i.type=y,Jf(s,i,y,p,v)):(s=hc(c.type,null,p,i,i.mode,v),s.ref=i.ref,s.return=i,i.child=s)}if(y=s.child,(s.lanes&v)===0){var S=y.memoizedProps;if(c=c.compare,c=c!==null?c:Eo,c(S,p)&&s.ref===i.ref)return Zr(s,i,v)}return i.flags|=1,s=Ri(y,p),s.ref=i.ref,s.return=i,i.child=s}function Jf(s,i,c,p,v){if(s!==null){var y=s.memoizedProps;if(Eo(y,p)&&s.ref===i.ref)if(Ds=!1,i.pendingProps=p=y,(s.lanes&v)!==0)(s.flags&131072)!==0&&(Ds=!0);else return i.lanes=s.lanes,Zr(s,i,v)}return Gu(s,i,c,p,v)}function Zf(s,i,c){var p=i.pendingProps,v=p.children,y=s!==null?s.memoizedState:null;if(p.mode==="hidden")if((i.mode&1)===0)i.memoizedState={baseLanes:0,cachePool:null,transitions:null},on(Fa,Gs),Gs|=c;else{if((c&1073741824)===0)return s=y!==null?y.baseLanes|c:c,i.lanes=i.childLanes=1073741824,i.memoizedState={baseLanes:s,cachePool:null,transitions:null},i.updateQueue=null,on(Fa,Gs),Gs|=s,null;i.memoizedState={baseLanes:0,cachePool:null,transitions:null},p=y!==null?y.baseLanes:c,on(Fa,Gs),Gs|=p}else y!==null?(p=y.baseLanes|c,i.memoizedState=null):p=c,on(Fa,Gs),Gs|=p;return hs(s,i,v,c),i.child}function ep(s,i){var c=i.ref;(s===null&&c!==null||s!==null&&s.ref!==c)&&(i.flags|=512,i.flags|=2097152)}function Gu(s,i,c,p,v){var y=Ms(c)?Qi:ds.current;return y=Ta(i,y),Da(i,v),c=$a(s,i,c,p,y,v),p=Mu(),s!==null&&!Ds?(i.updateQueue=s.updateQueue,i.flags&=-2053,s.lanes&=~v,Zr(s,i,v)):(wn&&p&&wu(i),i.flags|=1,hs(s,i,c,v),i.child)}function tp(s,i,c,p,v){if(Ms(c)){var y=!0;Ll(i)}else y=!1;if(Da(i,v),i.stateNode===null)tc(s,i),zf(i,c,p),Ku(i,c,p,v),p=!0;else if(s===null){var S=i.stateNode,D=i.memoizedProps;S.props=D;var L=S.context,te=c.contextType;typeof te=="object"&&te!==null?te=cr(te):(te=Ms(c)?Qi:ds.current,te=Ta(i,te));var Pe=c.getDerivedStateFromProps,Ne=typeof Pe=="function"||typeof S.getSnapshotBeforeUpdate=="function";Ne||typeof S.UNSAFE_componentWillReceiveProps!="function"&&typeof S.componentWillReceiveProps!="function"||(D!==p||L!==te)&&Gf(i,S,p,te),yi=!1;var we=i.memoizedState;S.state=we,Wi(i,p,S,v),L=i.memoizedState,D!==p||we!==L||As.current||yi?(typeof Pe=="function"&&(Lu(i,c,Pe,p),L=i.memoizedState),(D=yi||Qf(i,c,D,p,we,L,te))?(Ne||typeof S.UNSAFE_componentWillMount!="function"&&typeof S.componentWillMount!="function"||(typeof S.componentWillMount=="function"&&S.componentWillMount(),typeof S.UNSAFE_componentWillMount=="function"&&S.UNSAFE_componentWillMount()),typeof S.componentDidMount=="function"&&(i.flags|=4194308)):(typeof S.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=p,i.memoizedState=L),S.props=p,S.state=L,S.context=te,p=D):(typeof S.componentDidMount=="function"&&(i.flags|=4194308),p=!1)}else{S=i.stateNode,wf(s,i),D=i.memoizedProps,te=i.type===i.elementType?D:_r(i.type,D),S.props=te,Ne=i.pendingProps,we=S.context,L=c.contextType,typeof L=="object"&&L!==null?L=cr(L):(L=Ms(c)?Qi:ds.current,L=Ta(i,L));var Fe=c.getDerivedStateFromProps;(Pe=typeof Fe=="function"||typeof S.getSnapshotBeforeUpdate=="function")||typeof S.UNSAFE_componentWillReceiveProps!="function"&&typeof S.componentWillReceiveProps!="function"||(D!==Ne||we!==L)&&Gf(i,S,p,L),yi=!1,we=i.memoizedState,S.state=we,Wi(i,p,S,v);var Ge=i.memoizedState;D!==Ne||we!==Ge||As.current||yi?(typeof Fe=="function"&&(Lu(i,c,Fe,p),Ge=i.memoizedState),(te=yi||Qf(i,c,te,p,we,Ge,L)||!1)?(Pe||typeof S.UNSAFE_componentWillUpdate!="function"&&typeof S.componentWillUpdate!="function"||(typeof S.componentWillUpdate=="function"&&S.componentWillUpdate(p,Ge,L),typeof S.UNSAFE_componentWillUpdate=="function"&&S.UNSAFE_componentWillUpdate(p,Ge,L)),typeof S.componentDidUpdate=="function"&&(i.flags|=4),typeof S.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof S.componentDidUpdate!="function"||D===s.memoizedProps&&we===s.memoizedState||(i.flags|=4),typeof S.getSnapshotBeforeUpdate!="function"||D===s.memoizedProps&&we===s.memoizedState||(i.flags|=1024),i.memoizedProps=p,i.memoizedState=Ge),S.props=p,S.state=Ge,S.context=L,p=te):(typeof S.componentDidUpdate!="function"||D===s.memoizedProps&&we===s.memoizedState||(i.flags|=4),typeof S.getSnapshotBeforeUpdate!="function"||D===s.memoizedProps&&we===s.memoizedState||(i.flags|=1024),p=!1)}return Vu(s,i,c,p,y,v)}function Vu(s,i,c,p,v,y){ep(s,i);var S=(i.flags&128)!==0;if(!p&&!S)return v&&cf(i,c,!1),Zr(s,i,y);p=i.stateNode,Zm.current=i;var D=S&&typeof c.getDerivedStateFromError!="function"?null:p.render();return i.flags|=1,s!==null&&S?(i.child=Aa(i,s.child,null,y),i.child=Aa(i,null,D,y)):hs(s,i,D,y),i.memoizedState=p.state,v&&cf(i,c,!0),i.child}function np(s){var i=s.stateNode;i.pendingContext?of(s,i.pendingContext,i.pendingContext!==i.context):i.context&&of(s,i.context,!1),$o(s,i.containerInfo)}function sp(s,i,c,p,v){return Ia(),ku(v),i.flags|=256,hs(s,i,c,p),i.child}var Wu={dehydrated:null,treeContext:null,retryLane:0};function Hu(s){return{baseLanes:s,cachePool:null,transitions:null}}function rp(s,i,c){var p=i.pendingProps,v=xn.current,y=!1,S=(i.flags&128)!==0,D;if((D=S)||(D=s!==null&&s.memoizedState===null?!1:(v&2)!==0),D?(y=!0,i.flags&=-129):(s===null||s.memoizedState!==null)&&(v|=1),on(xn,v&1),s===null)return _u(i),s=i.memoizedState,s!==null&&(s=s.dehydrated,s!==null)?((i.mode&1)===0?i.lanes=1:s.data==="$!"?i.lanes=8:i.lanes=1073741824,null):(S=p.children,s=p.fallback,y?(p=i.mode,y=i.child,S={mode:"hidden",children:S},(p&1)===0&&y!==null?(y.childLanes=0,y.pendingProps=S):y=fc(S,p,0,null),s=Zi(s,p,c,null),y.return=i,s.return=i,y.sibling=s,i.child=y,i.child.memoizedState=Hu(c),i.memoizedState=Wu,s):Yu(i,S));if(v=s.memoizedState,v!==null&&(D=v.dehydrated,D!==null))return e1(s,i,S,p,D,v,c);if(y){y=p.fallback,S=i.mode,v=s.child,D=v.sibling;var L={mode:"hidden",children:p.children};return(S&1)===0&&i.child!==v?(p=i.child,p.childLanes=0,p.pendingProps=L,i.deletions=null):(p=Ri(v,L),p.subtreeFlags=v.subtreeFlags&14680064),D!==null?y=Ri(D,y):(y=Zi(y,S,c,null),y.flags|=2),y.return=i,p.return=i,p.sibling=y,i.child=p,p=y,y=i.child,S=s.child.memoizedState,S=S===null?Hu(c):{baseLanes:S.baseLanes|c,cachePool:null,transitions:S.transitions},y.memoizedState=S,y.childLanes=s.childLanes&~c,i.memoizedState=Wu,p}return y=s.child,s=y.sibling,p=Ri(y,{mode:"visible",children:p.children}),(i.mode&1)===0&&(p.lanes=c),p.return=i,p.sibling=null,s!==null&&(c=i.deletions,c===null?(i.deletions=[s],i.flags|=16):c.push(s)),i.child=p,i.memoizedState=null,p}function Yu(s,i){return i=fc({mode:"visible",children:i},s.mode,0,null),i.return=s,s.child=i}function ec(s,i,c,p){return p!==null&&ku(p),Aa(i,s.child,null,c),s=Yu(i,i.pendingProps.children),s.flags|=2,i.memoizedState=null,s}function e1(s,i,c,p,v,y,S){if(c)return i.flags&256?(i.flags&=-257,p=Fu(Error(n(422))),ec(s,i,S,p)):i.memoizedState!==null?(i.child=s.child,i.flags|=128,null):(y=p.fallback,v=i.mode,p=fc({mode:"visible",children:p.children},v,0,null),y=Zi(y,v,S,null),y.flags|=2,p.return=i,y.return=i,p.sibling=y,i.child=p,(i.mode&1)!==0&&Aa(i,s.child,null,S),i.child.memoizedState=Hu(S),i.memoizedState=Wu,y);if((i.mode&1)===0)return ec(s,i,S,null);if(v.data==="$!"){if(p=v.nextSibling&&v.nextSibling.dataset,p)var D=p.dgst;return p=D,y=Error(n(419)),p=Fu(y,p,void 0),ec(s,i,S,p)}if(D=(S&s.childLanes)!==0,Ds||D){if(p=zn,p!==null){switch(S&-S){case 4:v=2;break;case 16:v=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:v=32;break;case 536870912:v=268435456;break;default:v=0}v=(v&(p.suspendedLanes|S))!==0?0:v,v!==0&&v!==y.retryLane&&(y.retryLane=v,Jr(s,v),Cr(p,s,v,-1))}return fd(),p=Fu(Error(n(421))),ec(s,i,S,p)}return v.data==="$?"?(i.flags|=128,i.child=s.child,i=h1.bind(null,s),v._reactRetry=i,null):(s=y.treeContext,Qs=gi(v.nextSibling),qs=i,wn=!0,Pr=null,s!==null&&(or[lr++]=Yr,or[lr++]=Xr,or[lr++]=zi,Yr=s.id,Xr=s.overflow,zi=i),i=Yu(i,p.children),i.flags|=4096,i)}function ip(s,i,c){s.lanes|=i;var p=s.alternate;p!==null&&(p.lanes|=i),Ru(s.return,i,c)}function Xu(s,i,c,p,v){var y=s.memoizedState;y===null?s.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:p,tail:c,tailMode:v}:(y.isBackwards=i,y.rendering=null,y.renderingStartTime=0,y.last=p,y.tail=c,y.tailMode=v)}function ap(s,i,c){var p=i.pendingProps,v=p.revealOrder,y=p.tail;if(hs(s,i,p.children,c),p=xn.current,(p&2)!==0)p=p&1|2,i.flags|=128;else{if(s!==null&&(s.flags&128)!==0)e:for(s=i.child;s!==null;){if(s.tag===13)s.memoizedState!==null&&ip(s,c,i);else if(s.tag===19)ip(s,c,i);else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===i)break e;for(;s.sibling===null;){if(s.return===null||s.return===i)break e;s=s.return}s.sibling.return=s.return,s=s.sibling}p&=1}if(on(xn,p),(i.mode&1)===0)i.memoizedState=null;else switch(v){case"forwards":for(c=i.child,v=null;c!==null;)s=c.alternate,s!==null&&Ua(s)===null&&(v=c),c=c.sibling;c=v,c===null?(v=i.child,i.child=null):(v=c.sibling,c.sibling=null),Xu(i,!1,v,c,y);break;case"backwards":for(c=null,v=i.child,i.child=null;v!==null;){if(s=v.alternate,s!==null&&Ua(s)===null){i.child=v;break}s=v.sibling,v.sibling=c,c=v,v=s}Xu(i,!0,c,null,y);break;case"together":Xu(i,!1,null,null,void 0);break;default:i.memoizedState=null}return i.child}function tc(s,i){(i.mode&1)===0&&s!==null&&(s.alternate=null,i.alternate=null,i.flags|=2)}function Zr(s,i,c){if(s!==null&&(i.dependencies=s.dependencies),Xi|=i.lanes,(c&i.childLanes)===0)return null;if(s!==null&&i.child!==s.child)throw Error(n(153));if(i.child!==null){for(s=i.child,c=Ri(s,s.pendingProps),i.child=c,c.return=i;s.sibling!==null;)s=s.sibling,c=c.sibling=Ri(s,s.pendingProps),c.return=i;c.sibling=null}return i.child}function t1(s,i,c){switch(i.tag){case 3:np(i),Ia();break;case 5:Pf(i);break;case 1:Ms(i.type)&&Ll(i);break;case 4:$o(i,i.stateNode.containerInfo);break;case 10:var p=i.type._context,v=i.memoizedProps.value;on(Gl,p._currentValue),p._currentValue=v;break;case 13:if(p=i.memoizedState,p!==null)return p.dehydrated!==null?(on(xn,xn.current&1),i.flags|=128,null):(c&i.child.childLanes)!==0?rp(s,i,c):(on(xn,xn.current&1),s=Zr(s,i,c),s!==null?s.sibling:null);on(xn,xn.current&1);break;case 19:if(p=(c&i.childLanes)!==0,(s.flags&128)!==0){if(p)return ap(s,i,c);i.flags|=128}if(v=i.memoizedState,v!==null&&(v.rendering=null,v.tail=null,v.lastEffect=null),on(xn,xn.current),p)break;return null;case 22:case 23:return i.lanes=0,Zf(s,i,c)}return Zr(s,i,c)}var op,Ju,lp,cp;op=function(s,i){for(var c=i.child;c!==null;){if(c.tag===5||c.tag===6)s.appendChild(c.stateNode);else if(c.tag!==4&&c.child!==null){c.child.return=c,c=c.child;continue}if(c===i)break;for(;c.sibling===null;){if(c.return===null||c.return===i)return;c=c.return}c.sibling.return=c.return,c=c.sibling}},Ju=function(){},lp=function(s,i,c,p){var v=s.memoizedProps;if(v!==p){s=i.stateNode,ur(Xn.current);var y=null;switch(c){case"input":v=qe(s,v),p=qe(s,p),y=[];break;case"select":v=oe({},v,{value:void 0}),p=oe({},p,{value:void 0}),y=[];break;case"textarea":v=Ft(s,v),p=Ft(s,p),y=[];break;default:typeof v.onClick!="function"&&typeof p.onClick=="function"&&(s.onclick=Ul)}Bn(c,p);var S;c=null;for(te in v)if(!p.hasOwnProperty(te)&&v.hasOwnProperty(te)&&v[te]!=null)if(te==="style"){var D=v[te];for(S in D)D.hasOwnProperty(S)&&(c||(c={}),c[S]="")}else te!=="dangerouslySetInnerHTML"&&te!=="children"&&te!=="suppressContentEditableWarning"&&te!=="suppressHydrationWarning"&&te!=="autoFocus"&&(o.hasOwnProperty(te)?y||(y=[]):(y=y||[]).push(te,null));for(te in p){var L=p[te];if(D=v?.[te],p.hasOwnProperty(te)&&L!==D&&(L!=null||D!=null))if(te==="style")if(D){for(S in D)!D.hasOwnProperty(S)||L&&L.hasOwnProperty(S)||(c||(c={}),c[S]="");for(S in L)L.hasOwnProperty(S)&&D[S]!==L[S]&&(c||(c={}),c[S]=L[S])}else c||(y||(y=[]),y.push(te,c)),c=L;else te==="dangerouslySetInnerHTML"?(L=L?L.__html:void 0,D=D?D.__html:void 0,L!=null&&D!==L&&(y=y||[]).push(te,L)):te==="children"?typeof L!="string"&&typeof L!="number"||(y=y||[]).push(te,""+L):te!=="suppressContentEditableWarning"&&te!=="suppressHydrationWarning"&&(o.hasOwnProperty(te)?(L!=null&&te==="onScroll"&&pn("scroll",s),y||D===L||(y=[])):(y=y||[]).push(te,L))}c&&(y=y||[]).push("style",c);var te=y;(i.updateQueue=te)&&(i.flags|=4)}},cp=function(s,i,c,p){c!==p&&(i.flags|=4)};function Go(s,i){if(!wn)switch(s.tailMode){case"hidden":i=s.tail;for(var c=null;i!==null;)i.alternate!==null&&(c=i),i=i.sibling;c===null?s.tail=null:c.sibling=null;break;case"collapsed":c=s.tail;for(var p=null;c!==null;)c.alternate!==null&&(p=c),c=c.sibling;p===null?i||s.tail===null?s.tail=null:s.tail.sibling=null:p.sibling=null}}function fs(s){var i=s.alternate!==null&&s.alternate.child===s.child,c=0,p=0;if(i)for(var v=s.child;v!==null;)c|=v.lanes|v.childLanes,p|=v.subtreeFlags&14680064,p|=v.flags&14680064,v.return=s,v=v.sibling;else for(v=s.child;v!==null;)c|=v.lanes|v.childLanes,p|=v.subtreeFlags,p|=v.flags,v.return=s,v=v.sibling;return s.subtreeFlags|=p,s.childLanes=c,i}function n1(s,i,c){var p=i.pendingProps;switch(xu(i),i.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return fs(i),null;case 1:return Ms(i.type)&&$l(),fs(i),null;case 3:return p=i.stateNode,Hi(),gn(As),gn(ds),Wl(),p.pendingContext&&(p.context=p.pendingContext,p.pendingContext=null),(s===null||s.child===null)&&(Ql(i)?i.flags|=4:s===null||s.memoizedState.isDehydrated&&(i.flags&256)===0||(i.flags|=1024,Pr!==null&&(ld(Pr),Pr=null))),Ju(s,i),fs(i),null;case 5:Iu(i);var v=ur(Jn.current);if(c=i.type,s!==null&&i.stateNode!=null)lp(s,i,c,p,v),s.ref!==i.ref&&(i.flags|=512,i.flags|=2097152);else{if(!p){if(i.stateNode===null)throw Error(n(166));return fs(i),null}if(s=ur(Xn.current),Ql(i)){p=i.stateNode,c=i.type;var y=i.memoizedProps;switch(p[Ar]=i,p[Do]=y,s=(i.mode&1)!==0,c){case"dialog":pn("cancel",p),pn("close",p);break;case"iframe":case"object":case"embed":pn("load",p);break;case"video":case"audio":for(v=0;v<Io.length;v++)pn(Io[v],p);break;case"source":pn("error",p);break;case"img":case"image":case"link":pn("error",p),pn("load",p);break;case"details":pn("toggle",p);break;case"input":bt(p,y),pn("invalid",p);break;case"select":p._wrapperState={wasMultiple:!!y.multiple},pn("invalid",p);break;case"textarea":zt(p,y),pn("invalid",p)}Bn(c,y),v=null;for(var S in y)if(y.hasOwnProperty(S)){var D=y[S];S==="children"?typeof D=="string"?p.textContent!==D&&(y.suppressHydrationWarning!==!0&&Ol(p.textContent,D,s),v=["children",D]):typeof D=="number"&&p.textContent!==""+D&&(y.suppressHydrationWarning!==!0&&Ol(p.textContent,D,s),v=["children",""+D]):o.hasOwnProperty(S)&&D!=null&&S==="onScroll"&&pn("scroll",p)}switch(c){case"input":Ke(p),nt(p,y,!0);break;case"textarea":Ke(p),qn(p);break;case"select":case"option":break;default:typeof y.onClick=="function"&&(p.onclick=Ul)}p=v,i.updateQueue=p,p!==null&&(i.flags|=4)}else{S=v.nodeType===9?v:v.ownerDocument,s==="http://www.w3.org/1999/xhtml"&&(s=xt(c)),s==="http://www.w3.org/1999/xhtml"?c==="script"?(s=S.createElement("div"),s.innerHTML="<script><\/script>",s=s.removeChild(s.firstChild)):typeof p.is=="string"?s=S.createElement(c,{is:p.is}):(s=S.createElement(c),c==="select"&&(S=s,p.multiple?S.multiple=!0:p.size&&(S.size=p.size))):s=S.createElementNS(s,c),s[Ar]=i,s[Do]=p,op(s,i,!1,!1),i.stateNode=s;e:{switch(S=Hn(c,p),c){case"dialog":pn("cancel",s),pn("close",s),v=p;break;case"iframe":case"object":case"embed":pn("load",s),v=p;break;case"video":case"audio":for(v=0;v<Io.length;v++)pn(Io[v],s);v=p;break;case"source":pn("error",s),v=p;break;case"img":case"image":case"link":pn("error",s),pn("load",s),v=p;break;case"details":pn("toggle",s),v=p;break;case"input":bt(s,p),v=qe(s,p),pn("invalid",s);break;case"option":v=p;break;case"select":s._wrapperState={wasMultiple:!!p.multiple},v=oe({},p,{value:void 0}),pn("invalid",s);break;case"textarea":zt(s,p),v=Ft(s,p),pn("invalid",s);break;default:v=p}Bn(c,v),D=v;for(y in D)if(D.hasOwnProperty(y)){var L=D[y];y==="style"?Ps(s,L):y==="dangerouslySetInnerHTML"?(L=L?L.__html:void 0,L!=null&&Ls(s,L)):y==="children"?typeof L=="string"?(c!=="textarea"||L!=="")&&as(s,L):typeof L=="number"&&as(s,""+L):y!=="suppressContentEditableWarning"&&y!=="suppressHydrationWarning"&&y!=="autoFocus"&&(o.hasOwnProperty(y)?L!=null&&y==="onScroll"&&pn("scroll",s):L!=null&&P(s,y,L,S))}switch(c){case"input":Ke(s),nt(s,p,!1);break;case"textarea":Ke(s),qn(s);break;case"option":p.value!=null&&s.setAttribute("value",""+ge(p.value));break;case"select":s.multiple=!!p.multiple,y=p.value,y!=null?dt(s,!!p.multiple,y,!1):p.defaultValue!=null&&dt(s,!!p.multiple,p.defaultValue,!0);break;default:typeof v.onClick=="function"&&(s.onclick=Ul)}switch(c){case"button":case"input":case"select":case"textarea":p=!!p.autoFocus;break e;case"img":p=!0;break e;default:p=!1}}p&&(i.flags|=4)}i.ref!==null&&(i.flags|=512,i.flags|=2097152)}return fs(i),null;case 6:if(s&&i.stateNode!=null)cp(s,i,s.memoizedProps,p);else{if(typeof p!="string"&&i.stateNode===null)throw Error(n(166));if(c=ur(Jn.current),ur(Xn.current),Ql(i)){if(p=i.stateNode,c=i.memoizedProps,p[Ar]=i,(y=p.nodeValue!==c)&&(s=qs,s!==null))switch(s.tag){case 3:Ol(p.nodeValue,c,(s.mode&1)!==0);break;case 5:s.memoizedProps.suppressHydrationWarning!==!0&&Ol(p.nodeValue,c,(s.mode&1)!==0)}y&&(i.flags|=4)}else p=(c.nodeType===9?c:c.ownerDocument).createTextNode(p),p[Ar]=i,i.stateNode=p}return fs(i),null;case 13:if(gn(xn),p=i.memoizedState,s===null||s.memoizedState!==null&&s.memoizedState.dehydrated!==null){if(wn&&Qs!==null&&(i.mode&1)!==0&&(i.flags&128)===0)gf(),Ia(),i.flags|=98560,y=!1;else if(y=Ql(i),p!==null&&p.dehydrated!==null){if(s===null){if(!y)throw Error(n(318));if(y=i.memoizedState,y=y!==null?y.dehydrated:null,!y)throw Error(n(317));y[Ar]=i}else Ia(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;fs(i),y=!1}else Pr!==null&&(ld(Pr),Pr=null),y=!0;if(!y)return i.flags&65536?i:null}return(i.flags&128)!==0?(i.lanes=c,i):(p=p!==null,p!==(s!==null&&s.memoizedState!==null)&&p&&(i.child.flags|=8192,(i.mode&1)!==0&&(s===null||(xn.current&1)!==0?Fn===0&&(Fn=3):fd())),i.updateQueue!==null&&(i.flags|=4),fs(i),null);case 4:return Hi(),Ju(s,i),s===null&&Ao(i.stateNode.containerInfo),fs(i),null;case 10:return Su(i.type._context),fs(i),null;case 17:return Ms(i.type)&&$l(),fs(i),null;case 19:if(gn(xn),y=i.memoizedState,y===null)return fs(i),null;if(p=(i.flags&128)!==0,S=y.rendering,S===null)if(p)Go(y,!1);else{if(Fn!==0||s!==null&&(s.flags&128)!==0)for(s=i.child;s!==null;){if(S=Ua(s),S!==null){for(i.flags|=128,Go(y,!1),p=S.updateQueue,p!==null&&(i.updateQueue=p,i.flags|=4),i.subtreeFlags=0,p=c,c=i.child;c!==null;)y=c,s=p,y.flags&=14680066,S=y.alternate,S===null?(y.childLanes=0,y.lanes=s,y.child=null,y.subtreeFlags=0,y.memoizedProps=null,y.memoizedState=null,y.updateQueue=null,y.dependencies=null,y.stateNode=null):(y.childLanes=S.childLanes,y.lanes=S.lanes,y.child=S.child,y.subtreeFlags=0,y.deletions=null,y.memoizedProps=S.memoizedProps,y.memoizedState=S.memoizedState,y.updateQueue=S.updateQueue,y.type=S.type,s=S.dependencies,y.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),c=c.sibling;return on(xn,xn.current&1|2),i.child}s=s.sibling}y.tail!==null&&qt()>qa&&(i.flags|=128,p=!0,Go(y,!1),i.lanes=4194304)}else{if(!p)if(s=Ua(S),s!==null){if(i.flags|=128,p=!0,c=s.updateQueue,c!==null&&(i.updateQueue=c,i.flags|=4),Go(y,!0),y.tail===null&&y.tailMode==="hidden"&&!S.alternate&&!wn)return fs(i),null}else 2*qt()-y.renderingStartTime>qa&&c!==1073741824&&(i.flags|=128,p=!0,Go(y,!1),i.lanes=4194304);y.isBackwards?(S.sibling=i.child,i.child=S):(c=y.last,c!==null?c.sibling=S:i.child=S,y.last=S)}return y.tail!==null?(i=y.tail,y.rendering=i,y.tail=i.sibling,y.renderingStartTime=qt(),i.sibling=null,c=xn.current,on(xn,p?c&1|2:c&1),i):(fs(i),null);case 22:case 23:return dd(),p=i.memoizedState!==null,s!==null&&s.memoizedState!==null!==p&&(i.flags|=8192),p&&(i.mode&1)!==0?(Gs&1073741824)!==0&&(fs(i),i.subtreeFlags&6&&(i.flags|=8192)):fs(i),null;case 24:return null;case 25:return null}throw Error(n(156,i.tag))}function s1(s,i){switch(xu(i),i.tag){case 1:return Ms(i.type)&&$l(),s=i.flags,s&65536?(i.flags=s&-65537|128,i):null;case 3:return Hi(),gn(As),gn(ds),Wl(),s=i.flags,(s&65536)!==0&&(s&128)===0?(i.flags=s&-65537|128,i):null;case 5:return Iu(i),null;case 13:if(gn(xn),s=i.memoizedState,s!==null&&s.dehydrated!==null){if(i.alternate===null)throw Error(n(340));Ia()}return s=i.flags,s&65536?(i.flags=s&-65537|128,i):null;case 19:return gn(xn),null;case 4:return Hi(),null;case 10:return Su(i.type._context),null;case 22:case 23:return dd(),null;case 24:return null;default:return null}}var nc=!1,ps=!1,r1=typeof WeakSet=="function"?WeakSet:Set,Qe=null;function Ka(s,i){var c=s.ref;if(c!==null)if(typeof c=="function")try{c(null)}catch(p){Rn(s,i,p)}else c.current=null}function Zu(s,i,c){try{c()}catch(p){Rn(s,i,p)}}var up=!1;function i1(s,i){if(hu=ui,s=Qh(),ru(s)){if("selectionStart"in s)var c={start:s.selectionStart,end:s.selectionEnd};else e:{c=(c=s.ownerDocument)&&c.defaultView||window;var p=c.getSelection&&c.getSelection();if(p&&p.rangeCount!==0){c=p.anchorNode;var v=p.anchorOffset,y=p.focusNode;p=p.focusOffset;try{c.nodeType,y.nodeType}catch{c=null;break e}var S=0,D=-1,L=-1,te=0,Pe=0,Ne=s,we=null;t:for(;;){for(var Fe;Ne!==c||v!==0&&Ne.nodeType!==3||(D=S+v),Ne!==y||p!==0&&Ne.nodeType!==3||(L=S+p),Ne.nodeType===3&&(S+=Ne.nodeValue.length),(Fe=Ne.firstChild)!==null;)we=Ne,Ne=Fe;for(;;){if(Ne===s)break t;if(we===c&&++te===v&&(D=S),we===y&&++Pe===p&&(L=S),(Fe=Ne.nextSibling)!==null)break;Ne=we,we=Ne.parentNode}Ne=Fe}c=D===-1||L===-1?null:{start:D,end:L}}else c=null}c=c||{start:0,end:0}}else c=null;for(fu={focusedElem:s,selectionRange:c},ui=!1,Qe=i;Qe!==null;)if(i=Qe,s=i.child,(i.subtreeFlags&1028)!==0&&s!==null)s.return=i,Qe=s;else for(;Qe!==null;){i=Qe;try{var Ge=i.alternate;if((i.flags&1024)!==0)switch(i.tag){case 0:case 11:case 15:break;case 1:if(Ge!==null){var We=Ge.memoizedProps,An=Ge.memoizedState,h=i.stateNode,R=h.getSnapshotBeforeUpdate(i.elementType===i.type?We:_r(i.type,We),An);h.__reactInternalSnapshotBeforeUpdate=R}break;case 3:var Y=i.stateNode.containerInfo;Y.nodeType===1?Y.textContent="":Y.nodeType===9&&Y.documentElement&&Y.removeChild(Y.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(n(163))}}catch(ke){Rn(i,i.return,ke)}if(s=i.sibling,s!==null){s.return=i.return,Qe=s;break}Qe=i.return}return Ge=up,up=!1,Ge}function Vo(s,i,c){var p=i.updateQueue;if(p=p!==null?p.lastEffect:null,p!==null){var v=p=p.next;do{if((v.tag&s)===s){var y=v.destroy;v.destroy=void 0,y!==void 0&&Zu(i,c,y)}v=v.next}while(v!==p)}}function sc(s,i){if(i=i.updateQueue,i=i!==null?i.lastEffect:null,i!==null){var c=i=i.next;do{if((c.tag&s)===s){var p=c.create;c.destroy=p()}c=c.next}while(c!==i)}}function ed(s){var i=s.ref;if(i!==null){var c=s.stateNode;switch(s.tag){case 5:s=c;break;default:s=c}typeof i=="function"?i(s):i.current=s}}function dp(s){var i=s.alternate;i!==null&&(s.alternate=null,dp(i)),s.child=null,s.deletions=null,s.sibling=null,s.tag===5&&(i=s.stateNode,i!==null&&(delete i[Ar],delete i[Do],delete i[vu],delete i[Fm],delete i[qm])),s.stateNode=null,s.return=null,s.dependencies=null,s.memoizedProps=null,s.memoizedState=null,s.pendingProps=null,s.stateNode=null,s.updateQueue=null}function hp(s){return s.tag===5||s.tag===3||s.tag===4}function fp(s){e:for(;;){for(;s.sibling===null;){if(s.return===null||hp(s.return))return null;s=s.return}for(s.sibling.return=s.return,s=s.sibling;s.tag!==5&&s.tag!==6&&s.tag!==18;){if(s.flags&2||s.child===null||s.tag===4)continue e;s.child.return=s,s=s.child}if(!(s.flags&2))return s.stateNode}}function td(s,i,c){var p=s.tag;if(p===5||p===6)s=s.stateNode,i?c.nodeType===8?c.parentNode.insertBefore(s,i):c.insertBefore(s,i):(c.nodeType===8?(i=c.parentNode,i.insertBefore(s,c)):(i=c,i.appendChild(s)),c=c._reactRootContainer,c!=null||i.onclick!==null||(i.onclick=Ul));else if(p!==4&&(s=s.child,s!==null))for(td(s,i,c),s=s.sibling;s!==null;)td(s,i,c),s=s.sibling}function nd(s,i,c){var p=s.tag;if(p===5||p===6)s=s.stateNode,i?c.insertBefore(s,i):c.appendChild(s);else if(p!==4&&(s=s.child,s!==null))for(nd(s,i,c),s=s.sibling;s!==null;)nd(s,i,c),s=s.sibling}var es=null,kr=!1;function xi(s,i,c){for(c=c.child;c!==null;)pp(s,i,c),c=c.sibling}function pp(s,i,c){if(Jt&&typeof Jt.onCommitFiberUnmount=="function")try{Jt.onCommitFiberUnmount(Es,c)}catch{}switch(c.tag){case 5:ps||Ka(c,i);case 6:var p=es,v=kr;es=null,xi(s,i,c),es=p,kr=v,es!==null&&(kr?(s=es,c=c.stateNode,s.nodeType===8?s.parentNode.removeChild(c):s.removeChild(c)):es.removeChild(c.stateNode));break;case 18:es!==null&&(kr?(s=es,c=c.stateNode,s.nodeType===8?mu(s.parentNode,c):s.nodeType===1&&mu(s,c),Vr(s)):mu(es,c.stateNode));break;case 4:p=es,v=kr,es=c.stateNode.containerInfo,kr=!0,xi(s,i,c),es=p,kr=v;break;case 0:case 11:case 14:case 15:if(!ps&&(p=c.updateQueue,p!==null&&(p=p.lastEffect,p!==null))){v=p=p.next;do{var y=v,S=y.destroy;y=y.tag,S!==void 0&&((y&2)!==0||(y&4)!==0)&&Zu(c,i,S),v=v.next}while(v!==p)}xi(s,i,c);break;case 1:if(!ps&&(Ka(c,i),p=c.stateNode,typeof p.componentWillUnmount=="function"))try{p.props=c.memoizedProps,p.state=c.memoizedState,p.componentWillUnmount()}catch(D){Rn(c,i,D)}xi(s,i,c);break;case 21:xi(s,i,c);break;case 22:c.mode&1?(ps=(p=ps)||c.memoizedState!==null,xi(s,i,c),ps=p):xi(s,i,c);break;default:xi(s,i,c)}}function gp(s){var i=s.updateQueue;if(i!==null){s.updateQueue=null;var c=s.stateNode;c===null&&(c=s.stateNode=new r1),i.forEach(function(p){var v=f1.bind(null,s,p);c.has(p)||(c.add(p),p.then(v,v))})}}function Nr(s,i){var c=i.deletions;if(c!==null)for(var p=0;p<c.length;p++){var v=c[p];try{var y=s,S=i,D=S;e:for(;D!==null;){switch(D.tag){case 5:es=D.stateNode,kr=!1;break e;case 3:es=D.stateNode.containerInfo,kr=!0;break e;case 4:es=D.stateNode.containerInfo,kr=!0;break e}D=D.return}if(es===null)throw Error(n(160));pp(y,S,v),es=null,kr=!1;var L=v.alternate;L!==null&&(L.return=null),v.return=null}catch(te){Rn(v,i,te)}}if(i.subtreeFlags&12854)for(i=i.child;i!==null;)mp(i,s),i=i.sibling}function mp(s,i){var c=s.alternate,p=s.flags;switch(s.tag){case 0:case 11:case 14:case 15:if(Nr(i,s),Or(s),p&4){try{Vo(3,s,s.return),sc(3,s)}catch(We){Rn(s,s.return,We)}try{Vo(5,s,s.return)}catch(We){Rn(s,s.return,We)}}break;case 1:Nr(i,s),Or(s),p&512&&c!==null&&Ka(c,c.return);break;case 5:if(Nr(i,s),Or(s),p&512&&c!==null&&Ka(c,c.return),s.flags&32){var v=s.stateNode;try{as(v,"")}catch(We){Rn(s,s.return,We)}}if(p&4&&(v=s.stateNode,v!=null)){var y=s.memoizedProps,S=c!==null?c.memoizedProps:y,D=s.type,L=s.updateQueue;if(s.updateQueue=null,L!==null)try{D==="input"&&y.type==="radio"&&y.name!=null&&Ie(v,y),Hn(D,S);var te=Hn(D,y);for(S=0;S<L.length;S+=2){var Pe=L[S],Ne=L[S+1];Pe==="style"?Ps(v,Ne):Pe==="dangerouslySetInnerHTML"?Ls(v,Ne):Pe==="children"?as(v,Ne):P(v,Pe,Ne,te)}switch(D){case"input":Xe(v,y);break;case"textarea":Cn(v,y);break;case"select":var we=v._wrapperState.wasMultiple;v._wrapperState.wasMultiple=!!y.multiple;var Fe=y.value;Fe!=null?dt(v,!!y.multiple,Fe,!1):we!==!!y.multiple&&(y.defaultValue!=null?dt(v,!!y.multiple,y.defaultValue,!0):dt(v,!!y.multiple,y.multiple?[]:"",!1))}v[Do]=y}catch(We){Rn(s,s.return,We)}}break;case 6:if(Nr(i,s),Or(s),p&4){if(s.stateNode===null)throw Error(n(162));v=s.stateNode,y=s.memoizedProps;try{v.nodeValue=y}catch(We){Rn(s,s.return,We)}}break;case 3:if(Nr(i,s),Or(s),p&4&&c!==null&&c.memoizedState.isDehydrated)try{Vr(i.containerInfo)}catch(We){Rn(s,s.return,We)}break;case 4:Nr(i,s),Or(s);break;case 13:Nr(i,s),Or(s),v=s.child,v.flags&8192&&(y=v.memoizedState!==null,v.stateNode.isHidden=y,!y||v.alternate!==null&&v.alternate.memoizedState!==null||(id=qt())),p&4&&gp(s);break;case 22:if(Pe=c!==null&&c.memoizedState!==null,s.mode&1?(ps=(te=ps)||Pe,Nr(i,s),ps=te):Nr(i,s),Or(s),p&8192){if(te=s.memoizedState!==null,(s.stateNode.isHidden=te)&&!Pe&&(s.mode&1)!==0)for(Qe=s,Pe=s.child;Pe!==null;){for(Ne=Qe=Pe;Qe!==null;){switch(we=Qe,Fe=we.child,we.tag){case 0:case 11:case 14:case 15:Vo(4,we,we.return);break;case 1:Ka(we,we.return);var Ge=we.stateNode;if(typeof Ge.componentWillUnmount=="function"){p=we,c=we.return;try{i=p,Ge.props=i.memoizedProps,Ge.state=i.memoizedState,Ge.componentWillUnmount()}catch(We){Rn(p,c,We)}}break;case 5:Ka(we,we.return);break;case 22:if(we.memoizedState!==null){yp(Ne);continue}}Fe!==null?(Fe.return=we,Qe=Fe):yp(Ne)}Pe=Pe.sibling}e:for(Pe=null,Ne=s;;){if(Ne.tag===5){if(Pe===null){Pe=Ne;try{v=Ne.stateNode,te?(y=v.style,typeof y.setProperty=="function"?y.setProperty("display","none","important"):y.display="none"):(D=Ne.stateNode,L=Ne.memoizedProps.style,S=L!=null&&L.hasOwnProperty("display")?L.display:null,D.style.display=xs("display",S))}catch(We){Rn(s,s.return,We)}}}else if(Ne.tag===6){if(Pe===null)try{Ne.stateNode.nodeValue=te?"":Ne.memoizedProps}catch(We){Rn(s,s.return,We)}}else if((Ne.tag!==22&&Ne.tag!==23||Ne.memoizedState===null||Ne===s)&&Ne.child!==null){Ne.child.return=Ne,Ne=Ne.child;continue}if(Ne===s)break e;for(;Ne.sibling===null;){if(Ne.return===null||Ne.return===s)break e;Pe===Ne&&(Pe=null),Ne=Ne.return}Pe===Ne&&(Pe=null),Ne.sibling.return=Ne.return,Ne=Ne.sibling}}break;case 19:Nr(i,s),Or(s),p&4&&gp(s);break;case 21:break;default:Nr(i,s),Or(s)}}function Or(s){var i=s.flags;if(i&2){try{e:{for(var c=s.return;c!==null;){if(hp(c)){var p=c;break e}c=c.return}throw Error(n(160))}switch(p.tag){case 5:var v=p.stateNode;p.flags&32&&(as(v,""),p.flags&=-33);var y=fp(s);nd(s,y,v);break;case 3:case 4:var S=p.stateNode.containerInfo,D=fp(s);td(s,D,S);break;default:throw Error(n(161))}}catch(L){Rn(s,s.return,L)}s.flags&=-3}i&4096&&(s.flags&=-4097)}function a1(s,i,c){Qe=s,vp(s)}function vp(s,i,c){for(var p=(s.mode&1)!==0;Qe!==null;){var v=Qe,y=v.child;if(v.tag===22&&p){var S=v.memoizedState!==null||nc;if(!S){var D=v.alternate,L=D!==null&&D.memoizedState!==null||ps;D=nc;var te=ps;if(nc=S,(ps=L)&&!te)for(Qe=v;Qe!==null;)S=Qe,L=S.child,S.tag===22&&S.memoizedState!==null?wp(v):L!==null?(L.return=S,Qe=L):wp(v);for(;y!==null;)Qe=y,vp(y),y=y.sibling;Qe=v,nc=D,ps=te}bp(s)}else(v.subtreeFlags&8772)!==0&&y!==null?(y.return=v,Qe=y):bp(s)}}function bp(s){for(;Qe!==null;){var i=Qe;if((i.flags&8772)!==0){var c=i.alternate;try{if((i.flags&8772)!==0)switch(i.tag){case 0:case 11:case 15:ps||sc(5,i);break;case 1:var p=i.stateNode;if(i.flags&4&&!ps)if(c===null)p.componentDidMount();else{var v=i.elementType===i.type?c.memoizedProps:_r(i.type,c.memoizedProps);p.componentDidUpdate(v,c.memoizedState,p.__reactInternalSnapshotBeforeUpdate)}var y=i.updateQueue;y!==null&&xf(i,y,p);break;case 3:var S=i.updateQueue;if(S!==null){if(c=null,i.child!==null)switch(i.child.tag){case 5:c=i.child.stateNode;break;case 1:c=i.child.stateNode}xf(i,S,c)}break;case 5:var D=i.stateNode;if(c===null&&i.flags&4){c=D;var L=i.memoizedProps;switch(i.type){case"button":case"input":case"select":case"textarea":L.autoFocus&&c.focus();break;case"img":L.src&&(c.src=L.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(i.memoizedState===null){var te=i.alternate;if(te!==null){var Pe=te.memoizedState;if(Pe!==null){var Ne=Pe.dehydrated;Ne!==null&&Vr(Ne)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(n(163))}ps||i.flags&512&&ed(i)}catch(we){Rn(i,i.return,we)}}if(i===s){Qe=null;break}if(c=i.sibling,c!==null){c.return=i.return,Qe=c;break}Qe=i.return}}function yp(s){for(;Qe!==null;){var i=Qe;if(i===s){Qe=null;break}var c=i.sibling;if(c!==null){c.return=i.return,Qe=c;break}Qe=i.return}}function wp(s){for(;Qe!==null;){var i=Qe;try{switch(i.tag){case 0:case 11:case 15:var c=i.return;try{sc(4,i)}catch(L){Rn(i,c,L)}break;case 1:var p=i.stateNode;if(typeof p.componentDidMount=="function"){var v=i.return;try{p.componentDidMount()}catch(L){Rn(i,v,L)}}var y=i.return;try{ed(i)}catch(L){Rn(i,y,L)}break;case 5:var S=i.return;try{ed(i)}catch(L){Rn(i,S,L)}}}catch(L){Rn(i,i.return,L)}if(i===s){Qe=null;break}var D=i.sibling;if(D!==null){D.return=i.return,Qe=D;break}Qe=i.return}}var o1=Math.ceil,rc=W.ReactCurrentDispatcher,sd=W.ReactCurrentOwner,hr=W.ReactCurrentBatchConfig,Lt=0,zn=null,In=null,ts=0,Gs=0,Fa=mi(0),Fn=0,Wo=null,Xi=0,ic=0,rd=0,Ho=null,Os=null,id=0,qa=1/0,ei=null,ac=!1,ad=null,Pi=null,oc=!1,_i=null,lc=0,Yo=0,od=null,Xo=-1,cc=0;function ks(){return(Lt&6)!==0?qt():Xo!==-1?Xo:Xo=qt()}function ki(s){return(s.mode&1)===0?1:(Lt&2)!==0&&ts!==0?ts&-ts:zm.transition!==null?(cc===0&&(cc=wo()),cc):(s=Qt,s!==0||(s=window.event,s=s===void 0?16:Ir(s.type)),s)}function Cr(s,i,c,p){if(50<Yo)throw Yo=0,od=null,Error(n(185));qr(s,c,p),((Lt&2)===0||s!==zn)&&(s===zn&&((Lt&2)===0&&(ic|=c),Fn===4&&Ni(s,ts)),Ns(s,p),c===1&&Lt===0&&(i.mode&1)===0&&(qa=qt()+500,Kl&&bi()))}function Ns(s,i){var c=s.callbackNode;Nl(s,i);var p=nr(s,s===zn?ts:0);if(p===0)c!==null&&St(c),s.callbackNode=null,s.callbackPriority=0;else if(i=p&-p,s.callbackPriority!==i){if(c!=null&&St(c),i===1)s.tag===0?Qm(cd.bind(null,s)):uf(cd.bind(null,s)),Lm(function(){(Lt&6)===0&&bi()}),c=null;else{switch(ba(p)){case 1:c=Sn;break;case 4:c=rn;break;case 16:c=cs;break;case 536870912:c=en;break;default:c=cs}c=Tp(c,xp.bind(null,s))}s.callbackPriority=i,s.callbackNode=c}}function xp(s,i){if(Xo=-1,cc=0,(Lt&6)!==0)throw Error(n(327));var c=s.callbackNode;if(Qa()&&s.callbackNode!==c)return null;var p=nr(s,s===zn?ts:0);if(p===0)return null;if((p&30)!==0||(p&s.expiredLanes)!==0||i)i=dc(s,p);else{i=p;var v=Lt;Lt|=2;var y=hd();(zn!==s||ts!==i)&&(ei=null,qa=qt()+500,Si(s,i));do try{c1();break}catch(D){_p(s,D)}while(!0);Cu(),rc.current=y,Lt=v,In!==null?i=0:(zn=null,ts=0,i=Fn)}if(i!==0){if(i===2&&(v=ga(s),v!==0&&(p=v,i=uc(s,v))),i===1)throw c=Wo,Si(s,0),Ni(s,p),Ns(s,qt()),c;if(i===6)Ni(s,p);else{if(v=s.current.alternate,(p&30)===0&&!Pp(v)&&(i=dc(s,p),i===2&&(y=ga(s),y!==0&&(p=y,i=uc(s,y))),i===1))throw c=Wo,Si(s,0),Ni(s,p),Ns(s,qt()),c;switch(s.finishedWork=v,s.finishedLanes=p,i){case 0:case 1:throw Error(n(345));case 2:Ji(s,Os,ei);break;case 3:if(Ni(s,p),(p&130023424)===p&&(i=id+500-qt(),10<i)){if(nr(s,0)!==0)break;if(v=s.suspendedLanes,(v&p)!==p){ks(),s.pingedLanes|=s.suspendedLanes&v;break}s.timeoutHandle=gu(Ji.bind(null,s,Os,ei),i);break}Ji(s,Os,ei);break;case 4:if(Ni(s,p),(p&4194240)===p)break;for(i=s.eventTimes,v=-1;0<p;){var S=31-q(p);y=1<<S,S=i[S],S>v&&(v=S),p&=~y}if(p=v,p=qt()-p,p=(120>p?120:480>p?480:1080>p?1080:1920>p?1920:3e3>p?3e3:4320>p?4320:1960*o1(p/1960))-p,10<p){s.timeoutHandle=gu(Ji.bind(null,s,Os,ei),p);break}Ji(s,Os,ei);break;case 5:Ji(s,Os,ei);break;default:throw Error(n(329))}}}return Ns(s,qt()),s.callbackNode===c?xp.bind(null,s):null}function uc(s,i){var c=Ho;return s.current.memoizedState.isDehydrated&&(Si(s,i).flags|=256),s=dc(s,i),s!==2&&(i=Os,Os=c,i!==null&&ld(i)),s}function ld(s){Os===null?Os=s:Os.push.apply(Os,s)}function Pp(s){for(var i=s;;){if(i.flags&16384){var c=i.updateQueue;if(c!==null&&(c=c.stores,c!==null))for(var p=0;p<c.length;p++){var v=c[p],y=v.getSnapshot;v=v.value;try{if(!ar(y(),v))return!1}catch{return!1}}}if(c=i.child,i.subtreeFlags&16384&&c!==null)c.return=i,i=c;else{if(i===s)break;for(;i.sibling===null;){if(i.return===null||i.return===s)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function Ni(s,i){for(i&=~rd,i&=~ic,s.suspendedLanes|=i,s.pingedLanes&=~i,s=s.expirationTimes;0<i;){var c=31-q(i),p=1<<c;s[c]=-1,i&=~p}}function cd(s){if((Lt&6)!==0)throw Error(n(327));Qa();var i=nr(s,0);if((i&1)===0)return Ns(s,qt()),null;var c=dc(s,i);if(s.tag!==0&&c===2){var p=ga(s);p!==0&&(i=p,c=uc(s,p))}if(c===1)throw c=Wo,Si(s,0),Ni(s,i),Ns(s,qt()),c;if(c===6)throw Error(n(345));return s.finishedWork=s.current.alternate,s.finishedLanes=i,Ji(s,Os,ei),Ns(s,qt()),null}function ud(s,i){var c=Lt;Lt|=1;try{return s(i)}finally{Lt=c,Lt===0&&(qa=qt()+500,Kl&&bi())}}function Ci(s){_i!==null&&_i.tag===0&&(Lt&6)===0&&Qa();var i=Lt;Lt|=1;var c=hr.transition,p=Qt;try{if(hr.transition=null,Qt=1,s)return s()}finally{Qt=p,hr.transition=c,Lt=i,(Lt&6)===0&&bi()}}function dd(){Gs=Fa.current,gn(Fa)}function Si(s,i){s.finishedWork=null,s.finishedLanes=0;var c=s.timeoutHandle;if(c!==-1&&(s.timeoutHandle=-1,$m(c)),In!==null)for(c=In.return;c!==null;){var p=c;switch(xu(p),p.tag){case 1:p=p.type.childContextTypes,p!=null&&$l();break;case 3:Hi(),gn(As),gn(ds),Wl();break;case 5:Iu(p);break;case 4:Hi();break;case 13:gn(xn);break;case 19:gn(xn);break;case 10:Su(p.type._context);break;case 22:case 23:dd()}c=c.return}if(zn=s,In=s=Ri(s.current,null),ts=Gs=i,Fn=0,Wo=null,rd=ic=Xi=0,Os=Ho=null,Vi!==null){for(i=0;i<Vi.length;i++)if(c=Vi[i],p=c.interleaved,p!==null){c.interleaved=null;var v=p.next,y=c.pending;if(y!==null){var S=y.next;y.next=v,p.next=S}c.pending=p}Vi=null}return s}function _p(s,i){do{var c=In;try{if(Cu(),Hl.current=Jl,Ba){for(var p=mn.memoizedState;p!==null;){var v=p.queue;v!==null&&(v.pending=null),p=p.next}Ba=!1}if(Yi=0,Qn=Kn=mn=null,Ko=!1,Fo=0,sd.current=null,c===null||c.return===null){Fn=1,Wo=i,In=null;break}e:{var y=s,S=c.return,D=c,L=i;if(i=ts,D.flags|=32768,L!==null&&typeof L=="object"&&typeof L.then=="function"){var te=L,Pe=D,Ne=Pe.tag;if((Pe.mode&1)===0&&(Ne===0||Ne===11||Ne===15)){var we=Pe.alternate;we?(Pe.updateQueue=we.updateQueue,Pe.memoizedState=we.memoizedState,Pe.lanes=we.lanes):(Pe.updateQueue=null,Pe.memoizedState=null)}var Fe=zu(S);if(Fe!==null){Fe.flags&=-257,Hf(Fe,S,D,y,i),Fe.mode&1&&Qu(y,te,i),i=Fe,L=te;var Ge=i.updateQueue;if(Ge===null){var We=new Set;We.add(L),i.updateQueue=We}else Ge.add(L);break e}else{if((i&1)===0){Qu(y,te,i),fd();break e}L=Error(n(426))}}else if(wn&&D.mode&1){var An=zu(S);if(An!==null){(An.flags&65536)===0&&(An.flags|=256),Hf(An,S,D,y,i),ku(La(L,D));break e}}y=L=La(L,D),Fn!==4&&(Fn=2),Ho===null?Ho=[y]:Ho.push(y),y=S;do{switch(y.tag){case 3:y.flags|=65536,i&=-i,y.lanes|=i;var h=Vf(y,L,i);ju(y,h);break e;case 1:D=L;var R=y.type,Y=y.stateNode;if((y.flags&128)===0&&(typeof R.getDerivedStateFromError=="function"||Y!==null&&typeof Y.componentDidCatch=="function"&&(Pi===null||!Pi.has(Y)))){y.flags|=65536,i&=-i,y.lanes|=i;var ke=Wf(y,D,i);ju(y,ke);break e}}y=y.return}while(y!==null)}Np(c)}catch(He){i=He,In===c&&c!==null&&(In=c=c.return);continue}break}while(!0)}function hd(){var s=rc.current;return rc.current=Jl,s===null?Jl:s}function fd(){(Fn===0||Fn===3||Fn===2)&&(Fn=4),zn===null||(Xi&268435455)===0&&(ic&268435455)===0||Ni(zn,ts)}function dc(s,i){var c=Lt;Lt|=2;var p=hd();(zn!==s||ts!==i)&&(ei=null,Si(s,i));do try{l1();break}catch(v){_p(s,v)}while(!0);if(Cu(),Lt=c,rc.current=p,In!==null)throw Error(n(261));return zn=null,ts=0,Fn}function l1(){for(;In!==null;)kp(In)}function c1(){for(;In!==null&&!Tt();)kp(In)}function kp(s){var i=Rp(s.alternate,s,Gs);s.memoizedProps=s.pendingProps,i===null?Np(s):In=i,sd.current=null}function Np(s){var i=s;do{var c=i.alternate;if(s=i.return,(i.flags&32768)===0){if(c=n1(c,i,Gs),c!==null){In=c;return}}else{if(c=s1(c,i),c!==null){c.flags&=32767,In=c;return}if(s!==null)s.flags|=32768,s.subtreeFlags=0,s.deletions=null;else{Fn=6,In=null;return}}if(i=i.sibling,i!==null){In=i;return}In=i=s}while(i!==null);Fn===0&&(Fn=5)}function Ji(s,i,c){var p=Qt,v=hr.transition;try{hr.transition=null,Qt=1,u1(s,i,c,p)}finally{hr.transition=v,Qt=p}return null}function u1(s,i,c,p){do Qa();while(_i!==null);if((Lt&6)!==0)throw Error(n(327));c=s.finishedWork;var v=s.finishedLanes;if(c===null)return null;if(s.finishedWork=null,s.finishedLanes=0,c===s.current)throw Error(n(177));s.callbackNode=null,s.callbackPriority=0;var y=c.lanes|c.childLanes;if(Cl(s,y),s===zn&&(In=zn=null,ts=0),(c.subtreeFlags&2064)===0&&(c.flags&2064)===0||oc||(oc=!0,Tp(cs,function(){return Qa(),null})),y=(c.flags&15990)!==0,(c.subtreeFlags&15990)!==0||y){y=hr.transition,hr.transition=null;var S=Qt;Qt=1;var D=Lt;Lt|=4,sd.current=null,i1(s,c),mp(c,s),Im(fu),ui=!!hu,fu=hu=null,s.current=c,a1(c),Xt(),Lt=D,Qt=S,hr.transition=y}else s.current=c;if(oc&&(oc=!1,_i=s,lc=v),y=s.pendingLanes,y===0&&(Pi=null),un(c.stateNode),Ns(s,qt()),i!==null)for(p=s.onRecoverableError,c=0;c<i.length;c++)v=i[c],p(v.value,{componentStack:v.stack,digest:v.digest});if(ac)throw ac=!1,s=ad,ad=null,s;return(lc&1)!==0&&s.tag!==0&&Qa(),y=s.pendingLanes,(y&1)!==0?s===od?Yo++:(Yo=0,od=s):Yo=0,bi(),null}function Qa(){if(_i!==null){var s=ba(lc),i=hr.transition,c=Qt;try{if(hr.transition=null,Qt=16>s?16:s,_i===null)var p=!1;else{if(s=_i,_i=null,lc=0,(Lt&6)!==0)throw Error(n(331));var v=Lt;for(Lt|=4,Qe=s.current;Qe!==null;){var y=Qe,S=y.child;if((Qe.flags&16)!==0){var D=y.deletions;if(D!==null){for(var L=0;L<D.length;L++){var te=D[L];for(Qe=te;Qe!==null;){var Pe=Qe;switch(Pe.tag){case 0:case 11:case 15:Vo(8,Pe,y)}var Ne=Pe.child;if(Ne!==null)Ne.return=Pe,Qe=Ne;else for(;Qe!==null;){Pe=Qe;var we=Pe.sibling,Fe=Pe.return;if(dp(Pe),Pe===te){Qe=null;break}if(we!==null){we.return=Fe,Qe=we;break}Qe=Fe}}}var Ge=y.alternate;if(Ge!==null){var We=Ge.child;if(We!==null){Ge.child=null;do{var An=We.sibling;We.sibling=null,We=An}while(We!==null)}}Qe=y}}if((y.subtreeFlags&2064)!==0&&S!==null)S.return=y,Qe=S;else e:for(;Qe!==null;){if(y=Qe,(y.flags&2048)!==0)switch(y.tag){case 0:case 11:case 15:Vo(9,y,y.return)}var h=y.sibling;if(h!==null){h.return=y.return,Qe=h;break e}Qe=y.return}}var R=s.current;for(Qe=R;Qe!==null;){S=Qe;var Y=S.child;if((S.subtreeFlags&2064)!==0&&Y!==null)Y.return=S,Qe=Y;else e:for(S=R;Qe!==null;){if(D=Qe,(D.flags&2048)!==0)try{switch(D.tag){case 0:case 11:case 15:sc(9,D)}}catch(He){Rn(D,D.return,He)}if(D===S){Qe=null;break e}var ke=D.sibling;if(ke!==null){ke.return=D.return,Qe=ke;break e}Qe=D.return}}if(Lt=v,bi(),Jt&&typeof Jt.onPostCommitFiberRoot=="function")try{Jt.onPostCommitFiberRoot(Es,s)}catch{}p=!0}return p}finally{Qt=c,hr.transition=i}}return!1}function Cp(s,i,c){i=La(c,i),i=Vf(s,i,1),s=zs(s,i,1),i=ks(),s!==null&&(qr(s,1,i),Ns(s,i))}function Rn(s,i,c){if(s.tag===3)Cp(s,s,c);else for(;i!==null;){if(i.tag===3){Cp(i,s,c);break}else if(i.tag===1){var p=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof p.componentDidCatch=="function"&&(Pi===null||!Pi.has(p))){s=La(c,s),s=Wf(i,s,1),i=zs(i,s,1),s=ks(),i!==null&&(qr(i,1,s),Ns(i,s));break}}i=i.return}}function d1(s,i,c){var p=s.pingCache;p!==null&&p.delete(i),i=ks(),s.pingedLanes|=s.suspendedLanes&c,zn===s&&(ts&c)===c&&(Fn===4||Fn===3&&(ts&130023424)===ts&&500>qt()-id?Si(s,0):rd|=c),Ns(s,i)}function Sp(s,i){i===0&&((s.mode&1)===0?i=1:(i=kt,kt<<=1,(kt&130023424)===0&&(kt=4194304)));var c=ks();s=Jr(s,i),s!==null&&(qr(s,i,c),Ns(s,c))}function h1(s){var i=s.memoizedState,c=0;i!==null&&(c=i.retryLane),Sp(s,c)}function f1(s,i){var c=0;switch(s.tag){case 13:var p=s.stateNode,v=s.memoizedState;v!==null&&(c=v.retryLane);break;case 19:p=s.stateNode;break;default:throw Error(n(314))}p!==null&&p.delete(i),Sp(s,c)}var Rp;Rp=function(s,i,c){if(s!==null)if(s.memoizedProps!==i.pendingProps||As.current)Ds=!0;else{if((s.lanes&c)===0&&(i.flags&128)===0)return Ds=!1,t1(s,i,c);Ds=(s.flags&131072)!==0}else Ds=!1,wn&&(i.flags&1048576)!==0&&df(i,ql,i.index);switch(i.lanes=0,i.tag){case 2:var p=i.type;tc(s,i),s=i.pendingProps;var v=Ta(i,ds.current);Da(i,c),v=$a(null,i,p,s,v,c);var y=Mu();return i.flags|=1,typeof v=="object"&&v!==null&&typeof v.render=="function"&&v.$$typeof===void 0?(i.tag=1,i.memoizedState=null,i.updateQueue=null,Ms(p)?(y=!0,Ll(i)):y=!1,i.memoizedState=v.state!==null&&v.state!==void 0?v.state:null,Eu(i),v.updater=Zl,i.stateNode=v,v._reactInternals=i,Ku(i,p,s,c),i=Vu(null,i,p,!0,y,c)):(i.tag=0,wn&&y&&wu(i),hs(null,i,v,c),i=i.child),i;case 16:p=i.elementType;e:{switch(tc(s,i),s=i.pendingProps,v=p._init,p=v(p._payload),i.type=p,v=i.tag=g1(p),s=_r(p,s),v){case 0:i=Gu(null,i,p,s,c);break e;case 1:i=tp(null,i,p,s,c);break e;case 11:i=Yf(null,i,p,s,c);break e;case 14:i=Xf(null,i,p,_r(p.type,s),c);break e}throw Error(n(306,p,""))}return i;case 0:return p=i.type,v=i.pendingProps,v=i.elementType===p?v:_r(p,v),Gu(s,i,p,v,c);case 1:return p=i.type,v=i.pendingProps,v=i.elementType===p?v:_r(p,v),tp(s,i,p,v,c);case 3:e:{if(np(i),s===null)throw Error(n(387));p=i.pendingProps,y=i.memoizedState,v=y.element,wf(s,i),Wi(i,p,null,c);var S=i.memoizedState;if(p=S.element,y.isDehydrated)if(y={element:p,isDehydrated:!1,cache:S.cache,pendingSuspenseBoundaries:S.pendingSuspenseBoundaries,transitions:S.transitions},i.updateQueue.baseState=y,i.memoizedState=y,i.flags&256){v=La(Error(n(423)),i),i=sp(s,i,p,c,v);break e}else if(p!==v){v=La(Error(n(424)),i),i=sp(s,i,p,c,v);break e}else for(Qs=gi(i.stateNode.containerInfo.firstChild),qs=i,wn=!0,Pr=null,c=bf(i,null,p,c),i.child=c;c;)c.flags=c.flags&-3|4096,c=c.sibling;else{if(Ia(),p===v){i=Zr(s,i,c);break e}hs(s,i,p,c)}i=i.child}return i;case 5:return Pf(i),s===null&&_u(i),p=i.type,v=i.pendingProps,y=s!==null?s.memoizedProps:null,S=v.children,pu(p,v)?S=null:y!==null&&pu(p,y)&&(i.flags|=32),ep(s,i),hs(s,i,S,c),i.child;case 6:return s===null&&_u(i),null;case 13:return rp(s,i,c);case 4:return $o(i,i.stateNode.containerInfo),p=i.pendingProps,s===null?i.child=Aa(i,null,p,c):hs(s,i,p,c),i.child;case 11:return p=i.type,v=i.pendingProps,v=i.elementType===p?v:_r(p,v),Yf(s,i,p,v,c);case 7:return hs(s,i,i.pendingProps,c),i.child;case 8:return hs(s,i,i.pendingProps.children,c),i.child;case 12:return hs(s,i,i.pendingProps.children,c),i.child;case 10:e:{if(p=i.type._context,v=i.pendingProps,y=i.memoizedProps,S=v.value,on(Gl,p._currentValue),p._currentValue=S,y!==null)if(ar(y.value,S)){if(y.children===v.children&&!As.current){i=Zr(s,i,c);break e}}else for(y=i.child,y!==null&&(y.return=i);y!==null;){var D=y.dependencies;if(D!==null){S=y.child;for(var L=D.firstContext;L!==null;){if(L.context===p){if(y.tag===1){L=Mr(-1,c&-c),L.tag=2;var te=y.updateQueue;if(te!==null){te=te.shared;var Pe=te.pending;Pe===null?L.next=L:(L.next=Pe.next,Pe.next=L),te.pending=L}}y.lanes|=c,L=y.alternate,L!==null&&(L.lanes|=c),Ru(y.return,c,i),D.lanes|=c;break}L=L.next}}else if(y.tag===10)S=y.type===i.type?null:y.child;else if(y.tag===18){if(S=y.return,S===null)throw Error(n(341));S.lanes|=c,D=S.alternate,D!==null&&(D.lanes|=c),Ru(S,c,i),S=y.sibling}else S=y.child;if(S!==null)S.return=y;else for(S=y;S!==null;){if(S===i){S=null;break}if(y=S.sibling,y!==null){y.return=S.return,S=y;break}S=S.return}y=S}hs(s,i,v.children,c),i=i.child}return i;case 9:return v=i.type,p=i.pendingProps.children,Da(i,c),v=cr(v),p=p(v),i.flags|=1,hs(s,i,p,c),i.child;case 14:return p=i.type,v=_r(p,i.pendingProps),v=_r(p.type,v),Xf(s,i,p,v,c);case 15:return Jf(s,i,i.type,i.pendingProps,c);case 17:return p=i.type,v=i.pendingProps,v=i.elementType===p?v:_r(p,v),tc(s,i),i.tag=1,Ms(p)?(s=!0,Ll(i)):s=!1,Da(i,c),zf(i,p,v),Ku(i,p,v,c),Vu(null,i,p,!0,s,c);case 19:return ap(s,i,c);case 22:return Zf(s,i,c)}throw Error(n(156,i.tag))};function Tp(s,i){return ft(s,i)}function p1(s,i,c,p){this.tag=s,this.key=c,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=p,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function fr(s,i,c,p){return new p1(s,i,c,p)}function pd(s){return s=s.prototype,!(!s||!s.isReactComponent)}function g1(s){if(typeof s=="function")return pd(s)?1:0;if(s!=null){if(s=s.$$typeof,s===Ce)return 11;if(s===ue)return 14}return 2}function Ri(s,i){var c=s.alternate;return c===null?(c=fr(s.tag,i,s.key,s.mode),c.elementType=s.elementType,c.type=s.type,c.stateNode=s.stateNode,c.alternate=s,s.alternate=c):(c.pendingProps=i,c.type=s.type,c.flags=0,c.subtreeFlags=0,c.deletions=null),c.flags=s.flags&14680064,c.childLanes=s.childLanes,c.lanes=s.lanes,c.child=s.child,c.memoizedProps=s.memoizedProps,c.memoizedState=s.memoizedState,c.updateQueue=s.updateQueue,i=s.dependencies,c.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},c.sibling=s.sibling,c.index=s.index,c.ref=s.ref,c}function hc(s,i,c,p,v,y){var S=2;if(p=s,typeof s=="function")pd(s)&&(S=1);else if(typeof s=="string")S=5;else e:switch(s){case ve:return Zi(c.children,v,y,i);case be:S=8,v|=8;break;case Ye:return s=fr(12,c,i,v|2),s.elementType=Ye,s.lanes=y,s;case $e:return s=fr(13,c,i,v),s.elementType=$e,s.lanes=y,s;case ce:return s=fr(19,c,i,v),s.elementType=ce,s.lanes=y,s;case V:return fc(c,v,y,i);default:if(typeof s=="object"&&s!==null)switch(s.$$typeof){case me:S=10;break e;case Me:S=9;break e;case Ce:S=11;break e;case ue:S=14;break e;case ne:S=16,p=null;break e}throw Error(n(130,s==null?s:typeof s,""))}return i=fr(S,c,i,v),i.elementType=s,i.type=p,i.lanes=y,i}function Zi(s,i,c,p){return s=fr(7,s,p,i),s.lanes=c,s}function fc(s,i,c,p){return s=fr(22,s,p,i),s.elementType=V,s.lanes=c,s.stateNode={isHidden:!1},s}function gd(s,i,c){return s=fr(6,s,null,i),s.lanes=c,s}function md(s,i,c){return i=fr(4,s.children!==null?s.children:[],s.key,i),i.lanes=c,i.stateNode={containerInfo:s.containerInfo,pendingChildren:null,implementation:s.implementation},i}function m1(s,i,c,p,v){this.tag=i,this.containerInfo=s,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=ma(0),this.expirationTimes=ma(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ma(0),this.identifierPrefix=p,this.onRecoverableError=v,this.mutableSourceEagerHydrationData=null}function vd(s,i,c,p,v,y,S,D,L){return s=new m1(s,i,c,D,L),i===1?(i=1,y===!0&&(i|=8)):i=0,y=fr(3,null,null,i),s.current=y,y.stateNode=s,y.memoizedState={element:p,isDehydrated:c,cache:null,transitions:null,pendingSuspenseBoundaries:null},Eu(y),s}function v1(s,i,c){var p=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:ye,key:p==null?null:""+p,children:s,containerInfo:i,implementation:c}}function Ep(s){if(!s)return vi;s=s._reactInternals;e:{if(Re(s)!==s||s.tag!==1)throw Error(n(170));var i=s;do{switch(i.tag){case 3:i=i.stateNode.context;break e;case 1:if(Ms(i.type)){i=i.stateNode.__reactInternalMemoizedMergedChildContext;break e}}i=i.return}while(i!==null);throw Error(n(171))}if(s.tag===1){var c=s.type;if(Ms(c))return lf(s,c,i)}return i}function jp(s,i,c,p,v,y,S,D,L){return s=vd(c,p,!0,s,v,y,S,D,L),s.context=Ep(null),c=s.current,p=ks(),v=ki(c),y=Mr(p,v),y.callback=i??null,zs(c,y,v),s.current.lanes=v,qr(s,v,p),Ns(s,p),s}function pc(s,i,c,p){var v=i.current,y=ks(),S=ki(v);return c=Ep(c),i.context===null?i.context=c:i.pendingContext=c,i=Mr(y,S),i.payload={element:s},p=p===void 0?null:p,p!==null&&(i.callback=p),s=zs(v,i,S),s!==null&&(Cr(s,v,S,y),Bo(s,v,S)),S}function gc(s){if(s=s.current,!s.child)return null;switch(s.child.tag){case 5:return s.child.stateNode;default:return s.child.stateNode}}function Ip(s,i){if(s=s.memoizedState,s!==null&&s.dehydrated!==null){var c=s.retryLane;s.retryLane=c!==0&&c<i?c:i}}function bd(s,i){Ip(s,i),(s=s.alternate)&&Ip(s,i)}function b1(){return null}var Ap=typeof reportError=="function"?reportError:function(s){console.error(s)};function yd(s){this._internalRoot=s}mc.prototype.render=yd.prototype.render=function(s){var i=this._internalRoot;if(i===null)throw Error(n(409));pc(s,i,null,null)},mc.prototype.unmount=yd.prototype.unmount=function(){var s=this._internalRoot;if(s!==null){this._internalRoot=null;var i=s.containerInfo;Ci(function(){pc(null,s,null,null)}),i[Wr]=null}};function mc(s){this._internalRoot=s}mc.prototype.unstable_scheduleHydration=function(s){if(s){var i=dn();s={blockedOn:null,target:s,priority:i};for(var c=0;c<xr.length&&i!==0&&i<xr[c].priority;c++);xr.splice(c,0,s),c===0&&ko(s)}};function wd(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11)}function vc(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11&&(s.nodeType!==8||s.nodeValue!==" react-mount-point-unstable "))}function Mp(){}function y1(s,i,c,p,v){if(v){if(typeof p=="function"){var y=p;p=function(){var te=gc(S);y.call(te)}}var S=jp(i,p,s,0,null,!1,!1,"",Mp);return s._reactRootContainer=S,s[Wr]=S.current,Ao(s.nodeType===8?s.parentNode:s),Ci(),S}for(;v=s.lastChild;)s.removeChild(v);if(typeof p=="function"){var D=p;p=function(){var te=gc(L);D.call(te)}}var L=vd(s,0,!1,null,null,!1,!1,"",Mp);return s._reactRootContainer=L,s[Wr]=L.current,Ao(s.nodeType===8?s.parentNode:s),Ci(function(){pc(i,L,c,p)}),L}function bc(s,i,c,p,v){var y=c._reactRootContainer;if(y){var S=y;if(typeof v=="function"){var D=v;v=function(){var L=gc(S);D.call(L)}}pc(i,S,s,v)}else S=y1(c,i,s,v,p);return gc(S)}xo=function(s){switch(s.tag){case 3:var i=s.stateNode;if(i.current.memoizedState.isDehydrated){var c=us(i.pendingLanes);c!==0&&(va(i,c|1),Ns(i,qt()),(Lt&6)===0&&(qa=qt()+500,bi()))}break;case 13:Ci(function(){var p=Jr(s,1);if(p!==null){var v=ks();Cr(p,s,1,v)}}),bd(s,1)}},ya=function(s){if(s.tag===13){var i=Jr(s,134217728);if(i!==null){var c=ks();Cr(i,s,134217728,c)}bd(s,134217728)}},oi=function(s){if(s.tag===13){var i=ki(s),c=Jr(s,i);if(c!==null){var p=ks();Cr(c,s,i,p)}bd(s,i)}},dn=function(){return Qt},li=function(s,i){var c=Qt;try{return Qt=s,i()}finally{Qt=c}},$n=function(s,i,c){switch(i){case"input":if(Xe(s,c),i=c.name,c.type==="radio"&&i!=null){for(c=s;c.parentNode;)c=c.parentNode;for(c=c.querySelectorAll("input[name="+JSON.stringify(""+i)+'][type="radio"]'),i=0;i<c.length;i++){var p=c[i];if(p!==s&&p.form===s.form){var v=Bl(p);if(!v)throw Error(n(90));J(p),Xe(p,v)}}}break;case"textarea":Cn(s,c);break;case"select":i=c.value,i!=null&&dt(s,!!c.multiple,i,!1)}},Pt=ud,Bt=Ci;var w1={usingClientEntryPoint:!1,Events:[Oo,Sa,Bl,ie,lt,ud]},Jo={findFiberByHostInstance:qi,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},x1={bundleType:Jo.bundleType,version:Jo.version,rendererPackageName:Jo.rendererPackageName,rendererConfig:Jo.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:W.ReactCurrentDispatcher,findHostInstanceByFiber:function(s){return s=ht(s),s===null?null:s.stateNode},findFiberByHostInstance:Jo.findFiberByHostInstance||b1,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var yc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!yc.isDisabled&&yc.supportsFiber)try{Es=yc.inject(x1),Jt=yc}catch{}}return gr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=w1,gr.createPortal=function(s,i){var c=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!wd(i))throw Error(n(200));return v1(s,i,null,c)},gr.createRoot=function(s,i){if(!wd(s))throw Error(n(299));var c=!1,p="",v=Ap;return i!=null&&(i.unstable_strictMode===!0&&(c=!0),i.identifierPrefix!==void 0&&(p=i.identifierPrefix),i.onRecoverableError!==void 0&&(v=i.onRecoverableError)),i=vd(s,1,!1,null,null,c,!1,p,v),s[Wr]=i.current,Ao(s.nodeType===8?s.parentNode:s),new yd(i)},gr.findDOMNode=function(s){if(s==null)return null;if(s.nodeType===1)return s;var i=s._reactInternals;if(i===void 0)throw typeof s.render=="function"?Error(n(188)):(s=Object.keys(s).join(","),Error(n(268,s)));return s=ht(i),s=s===null?null:s.stateNode,s},gr.flushSync=function(s){return Ci(s)},gr.hydrate=function(s,i,c){if(!vc(i))throw Error(n(200));return bc(null,s,i,!0,c)},gr.hydrateRoot=function(s,i,c){if(!wd(s))throw Error(n(405));var p=c!=null&&c.hydratedSources||null,v=!1,y="",S=Ap;if(c!=null&&(c.unstable_strictMode===!0&&(v=!0),c.identifierPrefix!==void 0&&(y=c.identifierPrefix),c.onRecoverableError!==void 0&&(S=c.onRecoverableError)),i=jp(i,null,s,1,c??null,v,!1,y,S),s[Wr]=i.current,Ao(s),p)for(s=0;s<p.length;s++)c=p[s],v=c._getVersion,v=v(c._source),i.mutableSourceEagerHydrationData==null?i.mutableSourceEagerHydrationData=[c,v]:i.mutableSourceEagerHydrationData.push(c,v);return new mc(i)},gr.render=function(s,i,c){if(!vc(i))throw Error(n(200));return bc(null,s,i,!1,c)},gr.unmountComponentAtNode=function(s){if(!vc(s))throw Error(n(40));return s._reactRootContainer?(Ci(function(){bc(null,null,s,!1,function(){s._reactRootContainer=null,s[Wr]=null})}),!0):!1},gr.unstable_batchedUpdates=ud,gr.unstable_renderSubtreeIntoContainer=function(s,i,c,p){if(!vc(c))throw Error(n(200));if(s==null||s._reactInternals===void 0)throw Error(n(38));return bc(s,i,c,!1,p)},gr.version="18.3.1-next-f1338f8080-20240426",gr}var hb;function vw(){if(hb)return U1.exports;hb=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),U1.exports=z3(),U1.exports}var fb;function G3(){if(fb)return Lp;fb=1;var t=vw();return Lp.createRoot=t.createRoot,Lp.hydrateRoot=t.hydrateRoot,Lp}var V3=G3();const W3=gw(V3);var Lc=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(t){return this.listeners.add(t),this.onSubscribe(),()=>{this.listeners.delete(t),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},H3={setTimeout:(t,e)=>setTimeout(t,e),clearTimeout:t=>clearTimeout(t),setInterval:(t,e)=>setInterval(t,e),clearInterval:t=>clearInterval(t)},Y3=class{#e=H3;#t=!1;setTimeoutProvider(t){this.#e=t}setTimeout(t,e){return this.#e.setTimeout(t,e)}clearTimeout(t){this.#e.clearTimeout(t)}setInterval(t,e){return this.#e.setInterval(t,e)}clearInterval(t){this.#e.clearInterval(t)}},il=new Y3;function X3(t){setTimeout(t,0)}var hl=typeof window>"u"||"Deno"in globalThis;function Ws(){}function J3(t,e){return typeof t=="function"?t(e):t}function d0(t){return typeof t=="number"&&t>=0&&t!==1/0}function bw(t,e){return Math.max(t+(e||0)-Date.now(),0)}function ro(t,e){return typeof t=="function"?t(e):t}function Ur(t,e){return typeof t=="function"?t(e):t}function pb(t,e){const{type:n="all",exact:r,fetchStatus:o,predicate:d,queryKey:f,stale:g}=t;if(f){if(r){if(e.queryHash!==J0(f,e.options))return!1}else if(!Fd(e.queryKey,f))return!1}if(n!=="all"){const b=e.isActive();if(n==="active"&&!b||n==="inactive"&&b)return!1}return!(typeof g=="boolean"&&e.isStale()!==g||o&&o!==e.state.fetchStatus||d&&!d(e))}function gb(t,e){const{exact:n,status:r,predicate:o,mutationKey:d}=t;if(d){if(!e.options.mutationKey)return!1;if(n){if(fl(e.options.mutationKey)!==fl(d))return!1}else if(!Fd(e.options.mutationKey,d))return!1}return!(r&&e.state.status!==r||o&&!o(e))}function J0(t,e){return(e?.queryKeyHashFn||fl)(t)}function fl(t){return JSON.stringify(t,(e,n)=>h0(n)?Object.keys(n).sort().reduce((r,o)=>(r[o]=n[o],r),{}):n)}function Fd(t,e){return t===e?!0:typeof t!=typeof e?!1:t&&e&&typeof t=="object"&&typeof e=="object"?Object.keys(e).every(n=>Fd(t[n],e[n])):!1}var Z3=Object.prototype.hasOwnProperty;function yw(t,e){if(t===e)return t;const n=mb(t)&&mb(e);if(!n&&!(h0(t)&&h0(e)))return e;const o=(n?t:Object.keys(t)).length,d=n?e:Object.keys(e),f=d.length,g=n?new Array(f):{};let b=0;for(let w=0;w<f;w++){const k=n?w:d[w],C=t[k],N=e[k];if(C===N){g[k]=C,(n?w<o:Z3.call(t,k))&&b++;continue}if(C===null||N===null||typeof C!="object"||typeof N!="object"){g[k]=N;continue}const j=yw(C,N);g[k]=j,j===C&&b++}return o===f&&b===o?t:g}function ug(t,e){if(!e||Object.keys(t).length!==Object.keys(e).length)return!1;for(const n in t)if(t[n]!==e[n])return!1;return!0}function mb(t){return Array.isArray(t)&&t.length===Object.keys(t).length}function h0(t){if(!vb(t))return!1;const e=t.constructor;if(e===void 0)return!0;const n=e.prototype;return!(!vb(n)||!n.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(t)!==Object.prototype)}function vb(t){return Object.prototype.toString.call(t)==="[object Object]"}function ek(t){return new Promise(e=>{il.setTimeout(e,t)})}function f0(t,e,n){return typeof n.structuralSharing=="function"?n.structuralSharing(t,e):n.structuralSharing!==!1?yw(t,e):e}function tk(t,e,n=0){const r=[...t,e];return n&&r.length>n?r.slice(1):r}function nk(t,e,n=0){const r=[e,...t];return n&&r.length>n?r.slice(0,-1):r}var Z0=Symbol();function ww(t,e){return!t.queryFn&&e?.initialPromise?()=>e.initialPromise:!t.queryFn||t.queryFn===Z0?()=>Promise.reject(new Error(`Missing queryFn: '${t.queryHash}'`)):t.queryFn}function xw(t,e){return typeof t=="function"?t(...e):!!t}var sk=class extends Lc{#e;#t;#n;constructor(){super(),this.#n=t=>{if(!hl&&window.addEventListener){const e=()=>t();return window.addEventListener("visibilitychange",e,!1),()=>{window.removeEventListener("visibilitychange",e)}}}}onSubscribe(){this.#t||this.setEventListener(this.#n)}onUnsubscribe(){this.hasListeners()||(this.#t?.(),this.#t=void 0)}setEventListener(t){this.#n=t,this.#t?.(),this.#t=t(e=>{typeof e=="boolean"?this.setFocused(e):this.onFocus()})}setFocused(t){this.#e!==t&&(this.#e=t,this.onFocus())}onFocus(){const t=this.isFocused();this.listeners.forEach(e=>{e(t)})}isFocused(){return typeof this.#e=="boolean"?this.#e:globalThis.document?.visibilityState!=="hidden"}},e2=new sk;function p0(){let t,e;const n=new Promise((o,d)=>{t=o,e=d});n.status="pending",n.catch(()=>{});function r(o){Object.assign(n,o),delete n.resolve,delete n.reject}return n.resolve=o=>{r({status:"fulfilled",value:o}),t(o)},n.reject=o=>{r({status:"rejected",reason:o}),e(o)},n}var rk=X3;function ik(){let t=[],e=0,n=g=>{g()},r=g=>{g()},o=rk;const d=g=>{e?t.push(g):o(()=>{n(g)})},f=()=>{const g=t;t=[],g.length&&o(()=>{r(()=>{g.forEach(b=>{n(b)})})})};return{batch:g=>{let b;e++;try{b=g()}finally{e--,e||f()}return b},batchCalls:g=>(...b)=>{d(()=>{g(...b)})},schedule:d,setNotifyFunction:g=>{n=g},setBatchNotifyFunction:g=>{r=g},setScheduler:g=>{o=g}}}var ss=ik(),ak=class extends Lc{#e=!0;#t;#n;constructor(){super(),this.#n=t=>{if(!hl&&window.addEventListener){const e=()=>t(!0),n=()=>t(!1);return window.addEventListener("online",e,!1),window.addEventListener("offline",n,!1),()=>{window.removeEventListener("online",e),window.removeEventListener("offline",n)}}}}onSubscribe(){this.#t||this.setEventListener(this.#n)}onUnsubscribe(){this.hasListeners()||(this.#t?.(),this.#t=void 0)}setEventListener(t){this.#n=t,this.#t?.(),this.#t=t(this.setOnline.bind(this))}setOnline(t){this.#e!==t&&(this.#e=t,this.listeners.forEach(n=>{n(t)}))}isOnline(){return this.#e}},dg=new ak;function ok(t){return Math.min(1e3*2**t,3e4)}function Pw(t){return(t??"online")==="online"?dg.isOnline():!0}var g0=class extends Error{constructor(t){super("CancelledError"),this.revert=t?.revert,this.silent=t?.silent}};function _w(t){let e=!1,n=0,r;const o=p0(),d=()=>o.status!=="pending",f=$=>{if(!d()){const Q=new g0($);N(Q),t.onCancel?.(Q)}},g=()=>{e=!0},b=()=>{e=!1},w=()=>e2.isFocused()&&(t.networkMode==="always"||dg.isOnline())&&t.canRun(),k=()=>Pw(t.networkMode)&&t.canRun(),C=$=>{d()||(r?.(),o.resolve($))},N=$=>{d()||(r?.(),o.reject($))},j=()=>new Promise($=>{r=Q=>{(d()||w())&&$(Q)},t.onPause?.()}).then(()=>{r=void 0,d()||t.onContinue?.()}),M=()=>{if(d())return;let $;const Q=n===0?t.initialPromise:void 0;try{$=Q??t.fn()}catch(ae){$=Promise.reject(ae)}Promise.resolve($).then(C).catch(ae=>{if(d())return;const X=t.retry??(hl?0:3),P=t.retryDelay??ok,W=typeof P=="function"?P(n,ae):P,u=X===!0||typeof X=="number"&&n<X||typeof X=="function"&&X(n,ae);if(e||!u){N(ae);return}n++,t.onFail?.(n,ae),ek(W).then(()=>w()?void 0:j()).then(()=>{e?N(ae):M()})})};return{promise:o,status:()=>o.status,cancel:f,continue:()=>(r?.(),o),cancelRetry:g,continueRetry:b,canStart:k,start:()=>(k()?M():j().then(M),o)}}var kw=class{#e;destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),d0(this.gcTime)&&(this.#e=il.setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(t){this.gcTime=Math.max(this.gcTime||0,t??(hl?1/0:300*1e3))}clearGcTimeout(){this.#e&&(il.clearTimeout(this.#e),this.#e=void 0)}},lk=class extends kw{#e;#t;#n;#r;#s;#a;#o;constructor(t){super(),this.#o=!1,this.#a=t.defaultOptions,this.setOptions(t.options),this.observers=[],this.#r=t.client,this.#n=this.#r.getQueryCache(),this.queryKey=t.queryKey,this.queryHash=t.queryHash,this.#e=yb(this.options),this.state=t.state??this.#e,this.scheduleGc()}get meta(){return this.options.meta}get promise(){return this.#s?.promise}setOptions(t){if(this.options={...this.#a,...t},this.updateGcTime(this.options.gcTime),this.state&&this.state.data===void 0){const e=yb(this.options);e.data!==void 0&&(this.setState(bb(e.data,e.dataUpdatedAt)),this.#e=e)}}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&this.#n.remove(this)}setData(t,e){const n=f0(this.state.data,t,this.options);return this.#i({data:n,type:"success",dataUpdatedAt:e?.updatedAt,manual:e?.manual}),n}setState(t,e){this.#i({type:"setState",state:t,setStateOptions:e})}cancel(t){const e=this.#s?.promise;return this.#s?.cancel(t),e?e.then(Ws).catch(Ws):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(this.#e)}isActive(){return this.observers.some(t=>Ur(t.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===Z0||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(t=>ro(t.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(t=>t.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(t=0){return this.state.data===void 0?!0:t==="static"?!1:this.state.isInvalidated?!0:!bw(this.state.dataUpdatedAt,t)}onFocus(){this.observers.find(e=>e.shouldFetchOnWindowFocus())?.refetch({cancelRefetch:!1}),this.#s?.continue()}onOnline(){this.observers.find(e=>e.shouldFetchOnReconnect())?.refetch({cancelRefetch:!1}),this.#s?.continue()}addObserver(t){this.observers.includes(t)||(this.observers.push(t),this.clearGcTimeout(),this.#n.notify({type:"observerAdded",query:this,observer:t}))}removeObserver(t){this.observers.includes(t)&&(this.observers=this.observers.filter(e=>e!==t),this.observers.length||(this.#s&&(this.#o?this.#s.cancel({revert:!0}):this.#s.cancelRetry()),this.scheduleGc()),this.#n.notify({type:"observerRemoved",query:this,observer:t}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||this.#i({type:"invalidate"})}async fetch(t,e){if(this.state.fetchStatus!=="idle"&&this.#s?.status()!=="rejected"){if(this.state.data!==void 0&&e?.cancelRefetch)this.cancel({silent:!0});else if(this.#s)return this.#s.continueRetry(),this.#s.promise}if(t&&this.setOptions(t),!this.options.queryFn){const g=this.observers.find(b=>b.options.queryFn);g&&this.setOptions(g.options)}const n=new AbortController,r=g=>{Object.defineProperty(g,"signal",{enumerable:!0,get:()=>(this.#o=!0,n.signal)})},o=()=>{const g=ww(this.options,e),w=(()=>{const k={client:this.#r,queryKey:this.queryKey,meta:this.meta};return r(k),k})();return this.#o=!1,this.options.persister?this.options.persister(g,w,this):g(w)},f=(()=>{const g={fetchOptions:e,options:this.options,queryKey:this.queryKey,client:this.#r,state:this.state,fetchFn:o};return r(g),g})();this.options.behavior?.onFetch(f,this),this.#t=this.state,(this.state.fetchStatus==="idle"||this.state.fetchMeta!==f.fetchOptions?.meta)&&this.#i({type:"fetch",meta:f.fetchOptions?.meta}),this.#s=_w({initialPromise:e?.initialPromise,fn:f.fetchFn,onCancel:g=>{g instanceof g0&&g.revert&&this.setState({...this.#t,fetchStatus:"idle"}),n.abort()},onFail:(g,b)=>{this.#i({type:"failed",failureCount:g,error:b})},onPause:()=>{this.#i({type:"pause"})},onContinue:()=>{this.#i({type:"continue"})},retry:f.options.retry,retryDelay:f.options.retryDelay,networkMode:f.options.networkMode,canRun:()=>!0});try{const g=await this.#s.start();if(g===void 0)throw new Error(`${this.queryHash} data is undefined`);return this.setData(g),this.#n.config.onSuccess?.(g,this),this.#n.config.onSettled?.(g,this.state.error,this),g}catch(g){if(g instanceof g0){if(g.silent)return this.#s.promise;if(g.revert){if(this.state.data===void 0)throw g;return this.state.data}}throw this.#i({type:"error",error:g}),this.#n.config.onError?.(g,this),this.#n.config.onSettled?.(this.state.data,g,this),g}finally{this.scheduleGc()}}#i(t){const e=n=>{switch(t.type){case"failed":return{...n,fetchFailureCount:t.failureCount,fetchFailureReason:t.error};case"pause":return{...n,fetchStatus:"paused"};case"continue":return{...n,fetchStatus:"fetching"};case"fetch":return{...n,...Nw(n.data,this.options),fetchMeta:t.meta??null};case"success":const r={...n,...bb(t.data,t.dataUpdatedAt),dataUpdateCount:n.dataUpdateCount+1,...!t.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};return this.#t=t.manual?r:void 0,r;case"error":const o=t.error;return{...n,error:o,errorUpdateCount:n.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:n.fetchFailureCount+1,fetchFailureReason:o,fetchStatus:"idle",status:"error"};case"invalidate":return{...n,isInvalidated:!0};case"setState":return{...n,...t.state}}};this.state=e(this.state),ss.batch(()=>{this.observers.forEach(n=>{n.onQueryUpdate()}),this.#n.notify({query:this,type:"updated",action:t})})}};function Nw(t,e){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:Pw(e.networkMode)?"fetching":"paused",...t===void 0&&{error:null,status:"pending"}}}function bb(t,e){return{data:t,dataUpdatedAt:e??Date.now(),error:null,isInvalidated:!1,status:"success"}}function yb(t){const e=typeof t.initialData=="function"?t.initialData():t.initialData,n=e!==void 0,r=n?typeof t.initialDataUpdatedAt=="function"?t.initialDataUpdatedAt():t.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:n?r??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:n?"success":"pending",fetchStatus:"idle"}}var ck=class extends Lc{constructor(t,e){super(),this.options=e,this.#e=t,this.#i=null,this.#o=p0(),this.bindMethods(),this.setOptions(e)}#e;#t=void 0;#n=void 0;#r=void 0;#s;#a;#o;#i;#g;#h;#f;#c;#u;#l;#p=new Set;bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(this.#t.addObserver(this),wb(this.#t,this.options)?this.#d():this.updateResult(),this.#y())}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return m0(this.#t,this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return m0(this.#t,this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,this.#w(),this.#x(),this.#t.removeObserver(this)}setOptions(t){const e=this.options,n=this.#t;if(this.options=this.#e.defaultQueryOptions(t),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof Ur(this.options.enabled,this.#t)!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");this.#P(),this.#t.setOptions(this.options),e._defaulted&&!ug(this.options,e)&&this.#e.getQueryCache().notify({type:"observerOptionsUpdated",query:this.#t,observer:this});const r=this.hasListeners();r&&xb(this.#t,n,this.options,e)&&this.#d(),this.updateResult(),r&&(this.#t!==n||Ur(this.options.enabled,this.#t)!==Ur(e.enabled,this.#t)||ro(this.options.staleTime,this.#t)!==ro(e.staleTime,this.#t))&&this.#m();const o=this.#v();r&&(this.#t!==n||Ur(this.options.enabled,this.#t)!==Ur(e.enabled,this.#t)||o!==this.#l)&&this.#b(o)}getOptimisticResult(t){const e=this.#e.getQueryCache().build(this.#e,t),n=this.createResult(e,t);return dk(this,n)&&(this.#r=n,this.#a=this.options,this.#s=this.#t.state),n}getCurrentResult(){return this.#r}trackResult(t,e){return new Proxy(t,{get:(n,r)=>(this.trackProp(r),e?.(r),r==="promise"&&(this.trackProp("data"),!this.options.experimental_prefetchInRender&&this.#o.status==="pending"&&this.#o.reject(new Error("experimental_prefetchInRender feature flag is not enabled"))),Reflect.get(n,r))})}trackProp(t){this.#p.add(t)}getCurrentQuery(){return this.#t}refetch({...t}={}){return this.fetch({...t})}fetchOptimistic(t){const e=this.#e.defaultQueryOptions(t),n=this.#e.getQueryCache().build(this.#e,e);return n.fetch().then(()=>this.createResult(n,e))}fetch(t){return this.#d({...t,cancelRefetch:t.cancelRefetch??!0}).then(()=>(this.updateResult(),this.#r))}#d(t){this.#P();let e=this.#t.fetch(this.options,t);return t?.throwOnError||(e=e.catch(Ws)),e}#m(){this.#w();const t=ro(this.options.staleTime,this.#t);if(hl||this.#r.isStale||!d0(t))return;const n=bw(this.#r.dataUpdatedAt,t)+1;this.#c=il.setTimeout(()=>{this.#r.isStale||this.updateResult()},n)}#v(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(this.#t):this.options.refetchInterval)??!1}#b(t){this.#x(),this.#l=t,!(hl||Ur(this.options.enabled,this.#t)===!1||!d0(this.#l)||this.#l===0)&&(this.#u=il.setInterval(()=>{(this.options.refetchIntervalInBackground||e2.isFocused())&&this.#d()},this.#l))}#y(){this.#m(),this.#b(this.#v())}#w(){this.#c&&(il.clearTimeout(this.#c),this.#c=void 0)}#x(){this.#u&&(il.clearInterval(this.#u),this.#u=void 0)}createResult(t,e){const n=this.#t,r=this.options,o=this.#r,d=this.#s,f=this.#a,b=t!==n?t.state:this.#n,{state:w}=t;let k={...w},C=!1,N;if(e._optimisticResults){const be=this.hasListeners(),Ye=!be&&wb(t,e),me=be&&xb(t,n,e,r);(Ye||me)&&(k={...k,...Nw(w.data,t.options)}),e._optimisticResults==="isRestoring"&&(k.fetchStatus="idle")}let{error:j,errorUpdatedAt:M,status:$}=k;N=k.data;let Q=!1;if(e.placeholderData!==void 0&&N===void 0&&$==="pending"){let be;o?.isPlaceholderData&&e.placeholderData===f?.placeholderData?(be=o.data,Q=!0):be=typeof e.placeholderData=="function"?e.placeholderData(this.#f?.state.data,this.#f):e.placeholderData,be!==void 0&&($="success",N=f0(o?.data,be,e),C=!0)}if(e.select&&N!==void 0&&!Q)if(o&&N===d?.data&&e.select===this.#g)N=this.#h;else try{this.#g=e.select,N=e.select(N),N=f0(o?.data,N,e),this.#h=N,this.#i=null}catch(be){this.#i=be}this.#i&&(j=this.#i,N=this.#h,M=Date.now(),$="error");const ae=k.fetchStatus==="fetching",X=$==="pending",P=$==="error",W=X&&ae,u=N!==void 0,ve={status:$,fetchStatus:k.fetchStatus,isPending:X,isSuccess:$==="success",isError:P,isInitialLoading:W,isLoading:W,data:N,dataUpdatedAt:k.dataUpdatedAt,error:j,errorUpdatedAt:M,failureCount:k.fetchFailureCount,failureReason:k.fetchFailureReason,errorUpdateCount:k.errorUpdateCount,isFetched:k.dataUpdateCount>0||k.errorUpdateCount>0,isFetchedAfterMount:k.dataUpdateCount>b.dataUpdateCount||k.errorUpdateCount>b.errorUpdateCount,isFetching:ae,isRefetching:ae&&!X,isLoadingError:P&&!u,isPaused:k.fetchStatus==="paused",isPlaceholderData:C,isRefetchError:P&&u,isStale:t2(t,e),refetch:this.refetch,promise:this.#o,isEnabled:Ur(e.enabled,t)!==!1};if(this.options.experimental_prefetchInRender){const be=Me=>{ve.status==="error"?Me.reject(ve.error):ve.data!==void 0&&Me.resolve(ve.data)},Ye=()=>{const Me=this.#o=ve.promise=p0();be(Me)},me=this.#o;switch(me.status){case"pending":t.queryHash===n.queryHash&&be(me);break;case"fulfilled":(ve.status==="error"||ve.data!==me.value)&&Ye();break;case"rejected":(ve.status!=="error"||ve.error!==me.reason)&&Ye();break}}return ve}updateResult(){const t=this.#r,e=this.createResult(this.#t,this.options);if(this.#s=this.#t.state,this.#a=this.options,this.#s.data!==void 0&&(this.#f=this.#t),ug(e,t))return;this.#r=e;const n=()=>{if(!t)return!0;const{notifyOnChangeProps:r}=this.options,o=typeof r=="function"?r():r;if(o==="all"||!o&&!this.#p.size)return!0;const d=new Set(o??this.#p);return this.options.throwOnError&&d.add("error"),Object.keys(this.#r).some(f=>{const g=f;return this.#r[g]!==t[g]&&d.has(g)})};this.#_({listeners:n()})}#P(){const t=this.#e.getQueryCache().build(this.#e,this.options);if(t===this.#t)return;const e=this.#t;this.#t=t,this.#n=t.state,this.hasListeners()&&(e?.removeObserver(this),t.addObserver(this))}onQueryUpdate(){this.updateResult(),this.hasListeners()&&this.#y()}#_(t){ss.batch(()=>{t.listeners&&this.listeners.forEach(e=>{e(this.#r)}),this.#e.getQueryCache().notify({query:this.#t,type:"observerResultsUpdated"})})}};function uk(t,e){return Ur(e.enabled,t)!==!1&&t.state.data===void 0&&!(t.state.status==="error"&&e.retryOnMount===!1)}function wb(t,e){return uk(t,e)||t.state.data!==void 0&&m0(t,e,e.refetchOnMount)}function m0(t,e,n){if(Ur(e.enabled,t)!==!1&&ro(e.staleTime,t)!=="static"){const r=typeof n=="function"?n(t):n;return r==="always"||r!==!1&&t2(t,e)}return!1}function xb(t,e,n,r){return(t!==e||Ur(r.enabled,t)===!1)&&(!n.suspense||t.state.status!=="error")&&t2(t,n)}function t2(t,e){return Ur(e.enabled,t)!==!1&&t.isStaleByTime(ro(e.staleTime,t))}function dk(t,e){return!ug(t.getCurrentResult(),e)}function Pb(t){return{onFetch:(e,n)=>{const r=e.options,o=e.fetchOptions?.meta?.fetchMore?.direction,d=e.state.data?.pages||[],f=e.state.data?.pageParams||[];let g={pages:[],pageParams:[]},b=0;const w=async()=>{let k=!1;const C=M=>{Object.defineProperty(M,"signal",{enumerable:!0,get:()=>(e.signal.aborted?k=!0:e.signal.addEventListener("abort",()=>{k=!0}),e.signal)})},N=ww(e.options,e.fetchOptions),j=async(M,$,Q)=>{if(k)return Promise.reject();if($==null&&M.pages.length)return Promise.resolve(M);const X=(()=>{const ye={client:e.client,queryKey:e.queryKey,pageParam:$,direction:Q?"backward":"forward",meta:e.options.meta};return C(ye),ye})(),P=await N(X),{maxPages:W}=e.options,u=Q?nk:tk;return{pages:u(M.pages,P,W),pageParams:u(M.pageParams,$,W)}};if(o&&d.length){const M=o==="backward",$=M?hk:_b,Q={pages:d,pageParams:f},ae=$(r,Q);g=await j(Q,ae,M)}else{const M=t??d.length;do{const $=b===0?f[0]??r.initialPageParam:_b(r,g);if(b>0&&$==null)break;g=await j(g,$),b++}while(b<M)}return g};e.options.persister?e.fetchFn=()=>e.options.persister?.(w,{client:e.client,queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},n):e.fetchFn=w}}}function _b(t,{pages:e,pageParams:n}){const r=e.length-1;return e.length>0?t.getNextPageParam(e[r],e,n[r],n):void 0}function hk(t,{pages:e,pageParams:n}){return e.length>0?t.getPreviousPageParam?.(e[0],e,n[0],n):void 0}var fk=class extends kw{#e;#t;#n;#r;constructor(t){super(),this.#e=t.client,this.mutationId=t.mutationId,this.#n=t.mutationCache,this.#t=[],this.state=t.state||Cw(),this.setOptions(t.options),this.scheduleGc()}setOptions(t){this.options=t,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(t){this.#t.includes(t)||(this.#t.push(t),this.clearGcTimeout(),this.#n.notify({type:"observerAdded",mutation:this,observer:t}))}removeObserver(t){this.#t=this.#t.filter(e=>e!==t),this.scheduleGc(),this.#n.notify({type:"observerRemoved",mutation:this,observer:t})}optionalRemove(){this.#t.length||(this.state.status==="pending"?this.scheduleGc():this.#n.remove(this))}continue(){return this.#r?.continue()??this.execute(this.state.variables)}async execute(t){const e=()=>{this.#s({type:"continue"})},n={client:this.#e,meta:this.options.meta,mutationKey:this.options.mutationKey};this.#r=_w({fn:()=>this.options.mutationFn?this.options.mutationFn(t,n):Promise.reject(new Error("No mutationFn found")),onFail:(d,f)=>{this.#s({type:"failed",failureCount:d,error:f})},onPause:()=>{this.#s({type:"pause"})},onContinue:e,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>this.#n.canRun(this)});const r=this.state.status==="pending",o=!this.#r.canStart();try{if(r)e();else{this.#s({type:"pending",variables:t,isPaused:o}),await this.#n.config.onMutate?.(t,this,n);const f=await this.options.onMutate?.(t,n);f!==this.state.context&&this.#s({type:"pending",context:f,variables:t,isPaused:o})}const d=await this.#r.start();return await this.#n.config.onSuccess?.(d,t,this.state.context,this,n),await this.options.onSuccess?.(d,t,this.state.context,n),await this.#n.config.onSettled?.(d,null,this.state.variables,this.state.context,this,n),await this.options.onSettled?.(d,null,t,this.state.context,n),this.#s({type:"success",data:d}),d}catch(d){try{throw await this.#n.config.onError?.(d,t,this.state.context,this,n),await this.options.onError?.(d,t,this.state.context,n),await this.#n.config.onSettled?.(void 0,d,this.state.variables,this.state.context,this,n),await this.options.onSettled?.(void 0,d,t,this.state.context,n),d}finally{this.#s({type:"error",error:d})}}finally{this.#n.runNext(this)}}#s(t){const e=n=>{switch(t.type){case"failed":return{...n,failureCount:t.failureCount,failureReason:t.error};case"pause":return{...n,isPaused:!0};case"continue":return{...n,isPaused:!1};case"pending":return{...n,context:t.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:t.isPaused,status:"pending",variables:t.variables,submittedAt:Date.now()};case"success":return{...n,data:t.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...n,data:void 0,error:t.error,failureCount:n.failureCount+1,failureReason:t.error,isPaused:!1,status:"error"}}};this.state=e(this.state),ss.batch(()=>{this.#t.forEach(n=>{n.onMutationUpdate(t)}),this.#n.notify({mutation:this,type:"updated",action:t})})}};function Cw(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var pk=class extends Lc{constructor(t={}){super(),this.config=t,this.#e=new Set,this.#t=new Map,this.#n=0}#e;#t;#n;build(t,e,n){const r=new fk({client:t,mutationCache:this,mutationId:++this.#n,options:t.defaultMutationOptions(e),state:n});return this.add(r),r}add(t){this.#e.add(t);const e=Kp(t);if(typeof e=="string"){const n=this.#t.get(e);n?n.push(t):this.#t.set(e,[t])}this.notify({type:"added",mutation:t})}remove(t){if(this.#e.delete(t)){const e=Kp(t);if(typeof e=="string"){const n=this.#t.get(e);if(n)if(n.length>1){const r=n.indexOf(t);r!==-1&&n.splice(r,1)}else n[0]===t&&this.#t.delete(e)}}this.notify({type:"removed",mutation:t})}canRun(t){const e=Kp(t);if(typeof e=="string"){const r=this.#t.get(e)?.find(o=>o.state.status==="pending");return!r||r===t}else return!0}runNext(t){const e=Kp(t);return typeof e=="string"?this.#t.get(e)?.find(r=>r!==t&&r.state.isPaused)?.continue()??Promise.resolve():Promise.resolve()}clear(){ss.batch(()=>{this.#e.forEach(t=>{this.notify({type:"removed",mutation:t})}),this.#e.clear(),this.#t.clear()})}getAll(){return Array.from(this.#e)}find(t){const e={exact:!0,...t};return this.getAll().find(n=>gb(e,n))}findAll(t={}){return this.getAll().filter(e=>gb(t,e))}notify(t){ss.batch(()=>{this.listeners.forEach(e=>{e(t)})})}resumePausedMutations(){const t=this.getAll().filter(e=>e.state.isPaused);return ss.batch(()=>Promise.all(t.map(e=>e.continue().catch(Ws))))}};function Kp(t){return t.options.scope?.id}var gk=class extends Lc{#e;#t=void 0;#n;#r;constructor(e,n){super(),this.#e=e,this.setOptions(n),this.bindMethods(),this.#s()}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(e){const n=this.options;this.options=this.#e.defaultMutationOptions(e),ug(this.options,n)||this.#e.getMutationCache().notify({type:"observerOptionsUpdated",mutation:this.#n,observer:this}),n?.mutationKey&&this.options.mutationKey&&fl(n.mutationKey)!==fl(this.options.mutationKey)?this.reset():this.#n?.state.status==="pending"&&this.#n.setOptions(this.options)}onUnsubscribe(){this.hasListeners()||this.#n?.removeObserver(this)}onMutationUpdate(e){this.#s(),this.#a(e)}getCurrentResult(){return this.#t}reset(){this.#n?.removeObserver(this),this.#n=void 0,this.#s(),this.#a()}mutate(e,n){return this.#r=n,this.#n?.removeObserver(this),this.#n=this.#e.getMutationCache().build(this.#e,this.options),this.#n.addObserver(this),this.#n.execute(e)}#s(){const e=this.#n?.state??Cw();this.#t={...e,isPending:e.status==="pending",isSuccess:e.status==="success",isError:e.status==="error",isIdle:e.status==="idle",mutate:this.mutate,reset:this.reset}}#a(e){ss.batch(()=>{if(this.#r&&this.hasListeners()){const n=this.#t.variables,r=this.#t.context,o={client:this.#e,meta:this.options.meta,mutationKey:this.options.mutationKey};e?.type==="success"?(this.#r.onSuccess?.(e.data,n,r,o),this.#r.onSettled?.(e.data,null,n,r,o)):e?.type==="error"&&(this.#r.onError?.(e.error,n,r,o),this.#r.onSettled?.(void 0,e.error,n,r,o))}this.listeners.forEach(n=>{n(this.#t)})})}},mk=class extends Lc{constructor(t={}){super(),this.config=t,this.#e=new Map}#e;build(t,e,n){const r=e.queryKey,o=e.queryHash??J0(r,e);let d=this.get(o);return d||(d=new lk({client:t,queryKey:r,queryHash:o,options:t.defaultQueryOptions(e),state:n,defaultOptions:t.getQueryDefaults(r)}),this.add(d)),d}add(t){this.#e.has(t.queryHash)||(this.#e.set(t.queryHash,t),this.notify({type:"added",query:t}))}remove(t){const e=this.#e.get(t.queryHash);e&&(t.destroy(),e===t&&this.#e.delete(t.queryHash),this.notify({type:"removed",query:t}))}clear(){ss.batch(()=>{this.getAll().forEach(t=>{this.remove(t)})})}get(t){return this.#e.get(t)}getAll(){return[...this.#e.values()]}find(t){const e={exact:!0,...t};return this.getAll().find(n=>pb(e,n))}findAll(t={}){const e=this.getAll();return Object.keys(t).length>0?e.filter(n=>pb(t,n)):e}notify(t){ss.batch(()=>{this.listeners.forEach(e=>{e(t)})})}onFocus(){ss.batch(()=>{this.getAll().forEach(t=>{t.onFocus()})})}onOnline(){ss.batch(()=>{this.getAll().forEach(t=>{t.onOnline()})})}},vk=class{#e;#t;#n;#r;#s;#a;#o;#i;constructor(t={}){this.#e=t.queryCache||new mk,this.#t=t.mutationCache||new pk,this.#n=t.defaultOptions||{},this.#r=new Map,this.#s=new Map,this.#a=0}mount(){this.#a++,this.#a===1&&(this.#o=e2.subscribe(async t=>{t&&(await this.resumePausedMutations(),this.#e.onFocus())}),this.#i=dg.subscribe(async t=>{t&&(await this.resumePausedMutations(),this.#e.onOnline())}))}unmount(){this.#a--,this.#a===0&&(this.#o?.(),this.#o=void 0,this.#i?.(),this.#i=void 0)}isFetching(t){return this.#e.findAll({...t,fetchStatus:"fetching"}).length}isMutating(t){return this.#t.findAll({...t,status:"pending"}).length}getQueryData(t){const e=this.defaultQueryOptions({queryKey:t});return this.#e.get(e.queryHash)?.state.data}ensureQueryData(t){const e=this.defaultQueryOptions(t),n=this.#e.build(this,e),r=n.state.data;return r===void 0?this.fetchQuery(t):(t.revalidateIfStale&&n.isStaleByTime(ro(e.staleTime,n))&&this.prefetchQuery(e),Promise.resolve(r))}getQueriesData(t){return this.#e.findAll(t).map(({queryKey:e,state:n})=>{const r=n.data;return[e,r]})}setQueryData(t,e,n){const r=this.defaultQueryOptions({queryKey:t}),d=this.#e.get(r.queryHash)?.state.data,f=J3(e,d);if(f!==void 0)return this.#e.build(this,r).setData(f,{...n,manual:!0})}setQueriesData(t,e,n){return ss.batch(()=>this.#e.findAll(t).map(({queryKey:r})=>[r,this.setQueryData(r,e,n)]))}getQueryState(t){const e=this.defaultQueryOptions({queryKey:t});return this.#e.get(e.queryHash)?.state}removeQueries(t){const e=this.#e;ss.batch(()=>{e.findAll(t).forEach(n=>{e.remove(n)})})}resetQueries(t,e){const n=this.#e;return ss.batch(()=>(n.findAll(t).forEach(r=>{r.reset()}),this.refetchQueries({type:"active",...t},e)))}cancelQueries(t,e={}){const n={revert:!0,...e},r=ss.batch(()=>this.#e.findAll(t).map(o=>o.cancel(n)));return Promise.all(r).then(Ws).catch(Ws)}invalidateQueries(t,e={}){return ss.batch(()=>(this.#e.findAll(t).forEach(n=>{n.invalidate()}),t?.refetchType==="none"?Promise.resolve():this.refetchQueries({...t,type:t?.refetchType??t?.type??"active"},e)))}refetchQueries(t,e={}){const n={...e,cancelRefetch:e.cancelRefetch??!0},r=ss.batch(()=>this.#e.findAll(t).filter(o=>!o.isDisabled()&&!o.isStatic()).map(o=>{let d=o.fetch(void 0,n);return n.throwOnError||(d=d.catch(Ws)),o.state.fetchStatus==="paused"?Promise.resolve():d}));return Promise.all(r).then(Ws)}fetchQuery(t){const e=this.defaultQueryOptions(t);e.retry===void 0&&(e.retry=!1);const n=this.#e.build(this,e);return n.isStaleByTime(ro(e.staleTime,n))?n.fetch(e):Promise.resolve(n.state.data)}prefetchQuery(t){return this.fetchQuery(t).then(Ws).catch(Ws)}fetchInfiniteQuery(t){return t.behavior=Pb(t.pages),this.fetchQuery(t)}prefetchInfiniteQuery(t){return this.fetchInfiniteQuery(t).then(Ws).catch(Ws)}ensureInfiniteQueryData(t){return t.behavior=Pb(t.pages),this.ensureQueryData(t)}resumePausedMutations(){return dg.isOnline()?this.#t.resumePausedMutations():Promise.resolve()}getQueryCache(){return this.#e}getMutationCache(){return this.#t}getDefaultOptions(){return this.#n}setDefaultOptions(t){this.#n=t}setQueryDefaults(t,e){this.#r.set(fl(t),{queryKey:t,defaultOptions:e})}getQueryDefaults(t){const e=[...this.#r.values()],n={};return e.forEach(r=>{Fd(t,r.queryKey)&&Object.assign(n,r.defaultOptions)}),n}setMutationDefaults(t,e){this.#s.set(fl(t),{mutationKey:t,defaultOptions:e})}getMutationDefaults(t){const e=[...this.#s.values()],n={};return e.forEach(r=>{Fd(t,r.mutationKey)&&Object.assign(n,r.defaultOptions)}),n}defaultQueryOptions(t){if(t._defaulted)return t;const e={...this.#n.queries,...this.getQueryDefaults(t.queryKey),...t,_defaulted:!0};return e.queryHash||(e.queryHash=J0(e.queryKey,e)),e.refetchOnReconnect===void 0&&(e.refetchOnReconnect=e.networkMode!=="always"),e.throwOnError===void 0&&(e.throwOnError=!!e.suspense),!e.networkMode&&e.persister&&(e.networkMode="offlineFirst"),e.queryFn===Z0&&(e.enabled=!1),e}defaultMutationOptions(t){return t?._defaulted?t:{...this.#n.mutations,...t?.mutationKey&&this.getMutationDefaults(t.mutationKey),...t,_defaulted:!0}}clear(){this.#e.clear(),this.#t.clear()}},Sw=T.createContext(void 0),ih=t=>{const e=T.useContext(Sw);if(!e)throw new Error("No QueryClient set, use QueryClientProvider to set one");return e},bk=({client:t,children:e})=>(T.useEffect(()=>(t.mount(),()=>{t.unmount()}),[t]),l.jsx(Sw.Provider,{value:t,children:e})),Rw=T.createContext(!1),yk=()=>T.useContext(Rw);Rw.Provider;function wk(){let t=!1;return{clearReset:()=>{t=!1},reset:()=>{t=!0},isReset:()=>t}}var xk=T.createContext(wk()),Pk=()=>T.useContext(xk),_k=(t,e)=>{(t.suspense||t.throwOnError||t.experimental_prefetchInRender)&&(e.isReset()||(t.retryOnMount=!1))},kk=t=>{T.useEffect(()=>{t.clearReset()},[t])},Nk=({result:t,errorResetBoundary:e,throwOnError:n,query:r,suspense:o})=>t.isError&&!e.isReset()&&!t.isFetching&&r&&(o&&t.data===void 0||xw(n,[t.error,r])),Ck=t=>{if(t.suspense){const n=o=>o==="static"?o:Math.max(o??1e3,1e3),r=t.staleTime;t.staleTime=typeof r=="function"?(...o)=>n(r(...o)):n(r),typeof t.gcTime=="number"&&(t.gcTime=Math.max(t.gcTime,1e3))}},Sk=(t,e)=>t.isLoading&&t.isFetching&&!e,Rk=(t,e)=>t?.suspense&&e.isPending,kb=(t,e,n)=>e.fetchOptimistic(t).catch(()=>{n.clearReset()});function Tk(t,e,n){const r=yk(),o=Pk(),d=ih(),f=d.defaultQueryOptions(t);d.getDefaultOptions().queries?._experimental_beforeQuery?.(f),f._optimisticResults=r?"isRestoring":"optimistic",Ck(f),_k(f,o),kk(o);const g=!d.getQueryCache().get(f.queryHash),[b]=T.useState(()=>new e(d,f)),w=b.getOptimisticResult(f),k=!r&&t.subscribed!==!1;if(T.useSyncExternalStore(T.useCallback(C=>{const N=k?b.subscribe(ss.batchCalls(C)):Ws;return b.updateResult(),N},[b,k]),()=>b.getCurrentResult(),()=>b.getCurrentResult()),T.useEffect(()=>{b.setOptions(f)},[f,b]),Rk(f,w))throw kb(f,b,o);if(Nk({result:w,errorResetBoundary:o,throwOnError:f.throwOnError,query:d.getQueryCache().get(f.queryHash),suspense:f.suspense}))throw w.error;return d.getDefaultOptions().queries?._experimental_afterQuery?.(f,w),f.experimental_prefetchInRender&&!hl&&Sk(w,r)&&(g?kb(f,b,o):d.getQueryCache().get(f.queryHash)?.promise)?.catch(Ws).finally(()=>{b.updateResult()}),f.notifyOnChangeProps?w:b.trackResult(w)}function qd(t,e){return Tk(t,ck)}function Jp(t,e){const n=ih(),[r]=T.useState(()=>new gk(n,t));T.useEffect(()=>{r.setOptions(t)},[r,t]);const o=T.useSyncExternalStore(T.useCallback(f=>r.subscribe(ss.batchCalls(f)),[r]),()=>r.getCurrentResult(),()=>r.getCurrentResult()),d=T.useCallback((f,g)=>{r.mutate(f,g).catch(Ws)},[r]);if(o.error&&xw(r.options.throwOnError,[o.error]))throw o.error;return{...o,mutate:d,mutateAsync:o.mutate}}function Ek(t,e){if(t instanceof RegExp)return{keys:!1,pattern:t};var n,r,o,d,f=[],g="",b=t.split("/");for(b[0]||b.shift();o=b.shift();)n=o[0],n==="*"?(f.push(n),g+=o[1]==="?"?"(?:/(.*))?":"/(.*)"):n===":"?(r=o.indexOf("?",1),d=o.indexOf(".",1),f.push(o.substring(1,~r?r:~d?d:o.length)),g+=~r&&!~d?"(?:/([^/]+?))?":"/([^/]+?)",~d&&(g+=(~r?"?":"")+"\\"+o.substring(d))):g+="/"+o;return{keys:f,pattern:new RegExp("^"+g+(e?"(?=$|/)":"/?$"),"i")}}var L1={exports:{}},K1={};var Nb;function jk(){if(Nb)return K1;Nb=1;var t=Qg();function e(C,N){return C===N&&(C!==0||1/C===1/N)||C!==C&&N!==N}var n=typeof Object.is=="function"?Object.is:e,r=t.useState,o=t.useEffect,d=t.useLayoutEffect,f=t.useDebugValue;function g(C,N){var j=N(),M=r({inst:{value:j,getSnapshot:N}}),$=M[0].inst,Q=M[1];return d(function(){$.value=j,$.getSnapshot=N,b($)&&Q({inst:$})},[C,j,N]),o(function(){return b($)&&Q({inst:$}),C(function(){b($)&&Q({inst:$})})},[C]),f(j),j}function b(C){var N=C.getSnapshot;C=C.value;try{var j=N();return!n(C,j)}catch{return!0}}function w(C,N){return N()}var k=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?w:g;return K1.useSyncExternalStore=t.useSyncExternalStore!==void 0?t.useSyncExternalStore:k,K1}var Cb;function Ik(){return Cb||(Cb=1,L1.exports=jk()),L1.exports}var Ak=Ik();const Mk=F3.useInsertionEffect,Dk=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",Ok=Dk?T.useLayoutEffect:T.useEffect,Uk=Mk||Ok,Tw=t=>{const e=T.useRef([t,(...n)=>e[0](...n)]).current;return Uk(()=>{e[0]=t}),e[1]},Bk="popstate",n2="pushState",s2="replaceState",$k="hashchange",Sb=[Bk,n2,s2,$k],Lk=t=>{for(const e of Sb)addEventListener(e,t);return()=>{for(const e of Sb)removeEventListener(e,t)}},Ew=(t,e)=>Ak.useSyncExternalStore(Lk,t,e),Rb=()=>location.search,Kk=({ssrSearch:t}={})=>Ew(Rb,t!=null?()=>t:Rb),Tb=()=>location.pathname,Fk=({ssrPath:t}={})=>Ew(Tb,t!=null?()=>t:Tb),qk=(t,{replace:e=!1,state:n=null}={})=>history[e?s2:n2](n,"",t),Qk=(t={})=>[Fk(t),qk],Eb=Symbol.for("wouter_v3");if(typeof history<"u"&&typeof window[Eb]>"u"){for(const t of[n2,s2]){const e=history[t];history[t]=function(){const n=e.apply(this,arguments),r=new Event(t);return r.arguments=arguments,dispatchEvent(r),n}}Object.defineProperty(window,Eb,{value:!0})}const zk=(t,e)=>e.toLowerCase().indexOf(t.toLowerCase())?"~"+e:e.slice(t.length)||"/",jw=(t="")=>t==="/"?"":t,Gk=(t,e)=>t[0]==="~"?t.slice(1):jw(e)+t,Vk=(t="",e)=>zk(jb(jw(t)),jb(e)),jb=t=>{try{return decodeURI(t)}catch{return t}},Iw={hook:Qk,searchHook:Kk,parser:Ek,base:"",ssrPath:void 0,ssrSearch:void 0,ssrContext:void 0,hrefs:t=>t},Aw=T.createContext(Iw),ah=()=>T.useContext(Aw),Mw={},Dw=T.createContext(Mw),Wk=()=>T.useContext(Dw),zg=t=>{const[e,n]=t.hook(t);return[Vk(t.base,e),Tw((r,o)=>n(Gk(r,t.base),o))]},fa=()=>zg(ah()),Ow=(t,e,n,r)=>{const{pattern:o,keys:d}=e instanceof RegExp?{keys:!1,pattern:e}:t(e||"*",r),f=o.exec(n)||[],[g,...b]=f;return g!==void 0?[!0,(()=>{const w=d!==!1?Object.fromEntries(d.map((C,N)=>[C,b[N]])):f.groups;let k={...b};return w&&Object.assign(k,w),k})(),...r?[g]:[]]:[!1,null]},Hk=({children:t,...e})=>{const n=ah(),r=e.hook?Iw:n;let o=r;const[d,f]=e.ssrPath?.split("?")??[];f&&(e.ssrSearch=f,e.ssrPath=d),e.hrefs=e.hrefs??e.hook?.hrefs,e.searchHook=e.searchHook??e.hook?.searchHook;let g=T.useRef({}),b=g.current,w=b;for(let k in r){const C=k==="base"?r[k]+(e[k]||""):e[k]||r[k];b===w&&C!==w[k]&&(g.current=w={...w}),w[k]=C,(C!==r[k]||C!==o[k])&&(o=w)}return T.createElement(Aw.Provider,{value:o,children:t})},Ib=({children:t,component:e},n)=>e?T.createElement(e,{params:n}):typeof t=="function"?t(n):t,Yk=t=>{let e=T.useRef(Mw);const n=e.current;return e.current=Object.keys(t).length!==Object.keys(n).length||Object.entries(t).some(([r,o])=>o!==n[r])?t:n},ms=({path:t,nest:e,match:n,...r})=>{const o=ah(),[d]=zg(o),[f,g,b]=n??Ow(o.parser,t,d,e),w=Yk({...Wk(),...g});if(!f)return null;const k=b?T.createElement(Hk,{base:b},Ib(r,w)):Ib(r,w);return T.createElement(Dw.Provider,{value:w,children:k})},Ab=T.forwardRef((t,e)=>{const n=ah(),[r,o]=zg(n),{to:d="",href:f=d,onClick:g,asChild:b,children:w,className:k,replace:C,state:N,...j}=t,M=Tw(Q=>{Q.ctrlKey||Q.metaKey||Q.altKey||Q.shiftKey||Q.button!==0||(g?.(Q),Q.defaultPrevented||(Q.preventDefault(),o(f,t)))}),$=n.hrefs(f[0]==="~"?f.slice(1):n.base+f,n);return b&&T.isValidElement(w)?T.cloneElement(w,{onClick:M,href:$}):T.createElement("a",{...j,onClick:M,href:$,className:k?.call?k(r===f):k,children:w,ref:e})}),Uw=t=>Array.isArray(t)?t.flatMap(e=>Uw(e&&e.type===T.Fragment?e.props.children:e)):[t],Xk=({children:t,location:e})=>{const n=ah(),[r]=zg(n);for(const o of Uw(t)){let d=0;if(T.isValidElement(o)&&(d=Ow(n.parser,o.props.path,e||r,o.props.nest))[0])return T.cloneElement(o,{match:d})}return null};const Jk=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),Bw=(...t)=>t.filter((e,n,r)=>!!e&&r.indexOf(e)===n).join(" ");var Zk={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const e4=T.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:o="",children:d,iconNode:f,...g},b)=>T.createElement("svg",{ref:b,...Zk,width:e,height:e,stroke:t,strokeWidth:r?Number(n)*24/Number(e):n,className:Bw("lucide",o),...g},[...f.map(([w,k])=>T.createElement(w,k)),...Array.isArray(d)?d:[d]]));const ot=(t,e)=>{const n=T.forwardRef(({className:r,...o},d)=>T.createElement(e4,{ref:d,iconNode:e,className:Bw(`lucide-${Jk(t)}`,r),...o}));return n.displayName=`${t}`,n};const t4=ot("ArrowLeftRight",[["path",{d:"M8 3 4 7l4 4",key:"9rb6wj"}],["path",{d:"M4 7h16",key:"6tx8e3"}],["path",{d:"m16 21 4-4-4-4",key:"siv7j2"}],["path",{d:"M20 17H4",key:"h6l3hr"}]]);const v0=ot("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);const Ed=ot("BookOpen",[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]]);const Gg=ot("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);const r2=ot("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);const $w=ot("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);const n4=ot("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);const s4=ot("Chrome",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["line",{x1:"21.17",x2:"12",y1:"8",y2:"8",key:"a0cw5f"}],["line",{x1:"3.95",x2:"8.54",y1:"6.06",y2:"14",key:"1kftof"}],["line",{x1:"10.88",x2:"15.46",y1:"21.94",y2:"14",key:"1ymyh8"}]]);const Lw=ot("CircleCheck",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);const r4=ot("CircleHelp",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);const Mb=ot("CirclePlus",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]]);const i4=ot("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);const Kw=ot("Crown",[["path",{d:"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z",key:"1vdc57"}],["path",{d:"M5 21h14",key:"11awu3"}]]);const Fw=ot("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);const qw=ot("Dumbbell",[["path",{d:"M14.4 14.4 9.6 9.6",key:"ic80wn"}],["path",{d:"M18.657 21.485a2 2 0 1 1-2.829-2.828l-1.767 1.768a2 2 0 1 1-2.829-2.829l6.364-6.364a2 2 0 1 1 2.829 2.829l-1.768 1.767a2 2 0 1 1 2.828 2.829z",key:"nnl7wr"}],["path",{d:"m21.5 21.5-1.4-1.4",key:"1f1ice"}],["path",{d:"M3.9 3.9 2.5 2.5",key:"1evmna"}],["path",{d:"M6.404 12.768a2 2 0 1 1-2.829-2.829l1.768-1.767a2 2 0 1 1-2.828-2.829l2.828-2.828a2 2 0 1 1 2.829 2.828l1.767-1.768a2 2 0 1 1 2.829 2.829z",key:"yhosts"}]]);const a4=ot("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);const o4=ot("Flame",[["path",{d:"M8.5 14.5A2.5 2.5 0 0 0 11 12c0-1.38-.5-2-1-3-1.072-2.143-.224-4.054 2-6 .5 2.5 2 4.9 4 6.5 2 1.6 3 3.5 3 5.5a7 7 0 1 1-14 0c0-1.153.433-2.294 1-3a2.5 2.5 0 0 0 2.5 2.5z",key:"96xj49"}]]);const l4=ot("House",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]]);const c4=ot("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);const u4=ot("Layers",[["path",{d:"m12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83Z",key:"8b97xw"}],["path",{d:"m22 17.65-9.17 4.16a2 2 0 0 1-1.66 0L2 17.65",key:"dd6zsq"}],["path",{d:"m22 12.65-9.17 4.16a2 2 0 0 1-1.66 0L2 12.65",key:"ep9fru"}]]);const Qw=ot("LayoutGrid",[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1",key:"6d4xhi"}],["rect",{width:"7",height:"7",x:"14",y:"14",rx:"1",key:"nxv5o0"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}]]);const Db=ot("LayoutList",[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}],["path",{d:"M14 4h7",key:"3xa0d5"}],["path",{d:"M14 9h7",key:"1icrd9"}],["path",{d:"M14 15h7",key:"1mj8o2"}],["path",{d:"M14 20h7",key:"11slyb"}]]);const d4=ot("LifeBuoy",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m4.93 4.93 4.24 4.24",key:"1ymg45"}],["path",{d:"m14.83 9.17 4.24-4.24",key:"1cb5xl"}],["path",{d:"m14.83 14.83 4.24 4.24",key:"q42g0n"}],["path",{d:"m9.17 14.83-4.24 4.24",key:"bqpfvv"}],["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}]]);const h4=ot("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);const f4=ot("LockOpen",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 9.9-1",key:"1mm8w8"}]]);const zw=ot("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);const p4=ot("LogIn",[["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}],["polyline",{points:"10 17 15 12 10 7",key:"1ail0h"}],["line",{x1:"15",x2:"3",y1:"12",y2:"12",key:"v6grx8"}]]);const b0=ot("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);const Gw=ot("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);const g4=ot("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);const m4=ot("MessageCircle",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]]);const hg=ot("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]);const v4=ot("Pause",[["rect",{x:"14",y:"4",width:"4",height:"16",rx:"1",key:"zuxfzm"}],["rect",{x:"6",y:"4",width:"4",height:"16",rx:"1",key:"1okwgv"}]]);const Qd=ot("Pencil",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]);const Vw=ot("Play",[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]]);const fg=ot("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);const b4=ot("Puzzle",[["path",{d:"M19.439 7.85c-.049.322.059.648.289.878l1.568 1.568c.47.47.706 1.087.706 1.704s-.235 1.233-.706 1.704l-1.611 1.611a.98.98 0 0 1-.837.276c-.47-.07-.802-.48-.968-.925a2.501 2.501 0 1 0-3.214 3.214c.446.166.855.497.925.968a.979.979 0 0 1-.276.837l-1.61 1.61a2.404 2.404 0 0 1-1.705.707 2.402 2.402 0 0 1-1.704-.706l-1.568-1.568a1.026 1.026 0 0 0-.877-.29c-.493.074-.84.504-1.02.968a2.5 2.5 0 1 1-3.237-3.237c.464-.18.894-.527.967-1.02a1.026 1.026 0 0 0-.289-.877l-1.568-1.568A2.402 2.402 0 0 1 1.998 12c0-.617.236-1.234.706-1.704L4.23 8.77c.24-.24.581-.353.917-.303.515.077.877.528 1.073 1.01a2.5 2.5 0 1 0 3.259-3.259c-.482-.196-.933-.558-1.01-1.073-.05-.336.062-.676.303-.917l1.525-1.525A2.402 2.402 0 0 1 12 1.998c.617 0 1.234.236 1.704.706l1.568 1.568c.23.23.556.338.877.29.493-.074.84-.504 1.02-.968a2.5 2.5 0 1 1 3.237 3.237c-.464.18-.894.527-.967 1.02Z",key:"i0oyt7"}]]);const y4=ot("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);const w4=ot("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);const Ww=ot("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);const x4=ot("ShieldOff",[["path",{d:"m2 2 20 20",key:"1ooewy"}],["path",{d:"M5 5a1 1 0 0 0-1 1v7c0 5 3.5 7.5 7.67 8.94a1 1 0 0 0 .67.01c2.35-.82 4.48-1.97 5.9-3.71",key:"1jlk70"}],["path",{d:"M9.309 3.652A12.252 12.252 0 0 0 11.24 2.28a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1v7a9.784 9.784 0 0 1-.08 1.264",key:"18rp1v"}]]);const P4=ot("SkipBack",[["polygon",{points:"19 20 9 12 19 4 19 20",key:"o2sva"}],["line",{x1:"5",x2:"5",y1:"19",y2:"5",key:"1ocqjk"}]]);const _4=ot("Sparkles",[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]]);const pg=ot("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]);const k4=ot("Swords",[["polyline",{points:"14.5 17.5 3 6 3 3 6 3 17.5 14.5",key:"1hfsw2"}],["line",{x1:"13",x2:"19",y1:"19",y2:"13",key:"1vrmhu"}],["line",{x1:"16",x2:"20",y1:"16",y2:"20",key:"1bron3"}],["line",{x1:"19",x2:"21",y1:"21",y2:"19",key:"13pww6"}],["polyline",{points:"14.5 6.5 18 3 21 3 21 6 17.5 9.5",key:"hbey2j"}],["line",{x1:"5",x2:"9",y1:"14",y2:"18",key:"1hf58s"}],["line",{x1:"7",x2:"4",y1:"17",y2:"20",key:"pidxm4"}],["line",{x1:"3",x2:"5",y1:"19",y2:"21",key:"1pehsh"}]]);const N4=ot("Tag",[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]]);const al=ot("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);const C4=ot("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);const S4=ot("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);const i2=ot("UserRound",[["circle",{cx:"12",cy:"8",r:"5",key:"1hypcn"}],["path",{d:"M20 21a8 8 0 0 0-16 0",key:"rfgkzh"}]]);const R4=ot("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);const T4=ot("Video",[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]]);const E4=ot("Volume2",[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["path",{d:"M16 9a5 5 0 0 1 0 6",key:"1q6k2b"}],["path",{d:"M19.364 18.364a9 9 0 0 0 0-12.728",key:"ijwkga"}]]);const j4=ot("VolumeX",[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["line",{x1:"22",x2:"16",y1:"9",y2:"15",key:"1ewh16"}],["line",{x1:"16",x2:"22",y1:"9",y2:"15",key:"5ykzw1"}]]);const vr=ot("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);const I4=ot("Zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]),y0="/assets/App%20tab%20icon-CFmv5IVU.png";function A4(){const[,t]=fa(),[e,n]=T.useState(!1),r=()=>n(f=>!f),o=()=>t("/courses"),d=f=>{(f.key==="Enter"||f.key===" ")&&(f.preventDefault(),o())};return l.jsxs("div",{className:`min-h-screen relative overflow-hidden ${e?"bg-[#f7f7fb] text-slate-900":"bg-[#0b0f1c] text-white"}`,children:[l.jsxs("div",{className:"pointer-events-none absolute inset-0",children:[l.jsx("div",{className:`absolute -left-24 top-24 h-72 w-72 ${e?"bg-pink-300/30":"bg-pink-500/20"} blur-[120px]`}),l.jsx("div",{className:`absolute right-0 top-10 h-96 w-96 ${e?"bg-purple-300/30":"bg-purple-500/25"} blur-[160px]`})]}),l.jsx("div",{className:`relative ${e?"bg-white/90 border-b border-slate-200":"bg-[#0b0f1c]/90 border-b border-white/5"}`,children:l.jsxs("div",{className:"max-w-6xl w-full mx-auto px-4 sm:px-6 h-16 flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:"h-12 w-12 overflow-hidden flex items-center justify-center",children:l.jsx("img",{src:y0,alt:"Pawn Point logo",className:"h-full w-full object-cover"})}),l.jsx("span",{className:"text-2xl font-extrabold tracking-tight",children:"Pawn Point"})]}),l.jsxs("div",{className:"flex items-center gap-3 md:hidden",children:[l.jsx("button",{onClick:r,className:`h-9 w-9 rounded-full border flex items-center justify-center transition ${e?"bg-slate-100 border-slate-300 text-slate-800 hover:bg-slate-200":"bg-white/5 border-white/10 text-white hover:bg-white/10"}`,"aria-label":"Toggle theme",children:e?l.jsx(hg,{className:"h-4 w-4"}):l.jsx(pg,{className:"h-4 w-4"})}),l.jsx("button",{onClick:()=>t("/login"),className:`rounded-full px-3 py-2 text-sm font-semibold border transition ${e?"border-slate-200 bg-white text-slate-900 hover:bg-slate-100":"border-white/10 bg-white/5 text-white hover:bg-white/10"}`,children:"Log in"})]}),l.jsxs("div",{className:`hidden md:flex items-center gap-4 text-base font-semibold md:translate-x-[-8px] ${e?"text-slate-700":"text-white/80"}`,children:[l.jsxs("button",{onClick:()=>t("/login"),className:`transition flex items-center gap-2 ${e?"hover:text-slate-900":"hover:text-white"}`,children:[l.jsx(p4,{className:"h-5 w-5",strokeWidth:2.5}),"Log in"]}),l.jsx("button",{onClick:r,className:`h-9 w-9 rounded-full border flex items-center justify-center transition ${e?"bg-slate-100 border-slate-300 text-slate-800 hover:bg-slate-200":"bg-white/5 border-white/10 text-white hover:bg-white/10"}`,"aria-label":"Toggle theme",children:e?l.jsx(hg,{className:"h-4 w-4"}):l.jsx(pg,{className:"h-4 w-4"})})]})]})}),l.jsx("main",{className:"relative max-w-6xl w-full mx-auto px-4 sm:px-6 pb-20 pt-10 sm:pt-12 min-h-[calc(100vh-64px)] flex items-center",children:l.jsxs("section",{className:"w-full grid md:grid-cols-2 gap-10 sm:gap-12 items-center",children:[l.jsxs("div",{className:"space-y-6 relative flex flex-col items-center text-center md:items-start md:text-left",children:[l.jsx("div",{className:"pointer-events-none absolute -left-10 -top-6 h-20 w-20 rounded-full bg-pink-500/20 blur-3xl"}),l.jsxs("div",{className:"space-y-4 w-full cursor-pointer",role:"button",tabIndex:0,onClick:o,onKeyDown:d,"aria-label":"Go to course menu",children:[l.jsx("h1",{className:"text-4xl sm:text-5xl md:text-6xl font-extrabold leading-tight text-[#ff0fb3] drop-shadow-[0_10px_35px_rgba(255,15,179,0.35)]",children:"Become the Player You Were Meant to Be"}),l.jsx("p",{className:`text-lg leading-relaxed ${e?"text-slate-700":"text-white/80"}`,children:"Pawn Point gives you the roadmap to real improvement. Learn smarter, train efficient, and develop the skills that actually win games."})]}),l.jsxs("div",{className:"flex flex-col sm:flex-row items-center gap-3 w-full sm:w-auto",children:[l.jsx("button",{onClick:()=>t("/signup"),className:"w-full sm:w-auto rounded-full bg-[#ff0fb3] hover:bg-pink-500 text-white px-5 py-3 text-sm font-semibold shadow-[0_10px_30px_rgba(255,15,179,0.35)] transition",children:"Start free"}),l.jsx("button",{onClick:()=>t("/login"),className:`w-full sm:w-auto rounded-full px-5 py-3 text-sm font-semibold border transition ${e?"border-slate-300 bg-white text-slate-900 hover:bg-slate-100":"border-white/15 bg-white/5 text-white hover:bg-white/10"}`,children:"I already have an account"})]})]}),l.jsxs("div",{className:"relative flex justify-center items-center",children:[l.jsx("div",{className:"pointer-events-none absolute -inset-10 bg-gradient-to-br from-[#ff0fb3]/25 via-[#7c3aed]/20 to-[#0ea5e9]/25 blur-[140px]"}),l.jsx("div",{className:`relative w-full max-w-[320px] sm:max-w-[360px] aspect-square overflow-hidden rounded-[28px] sm:rounded-[32px] border ${e?"border-slate-200 bg-white":"border-white/10 bg-white/5"} shadow-[0_20px_60px_rgba(0,0,0,0.45)] cursor-pointer`,role:"button",tabIndex:0,"aria-label":"Open course menu",onClick:o,onKeyDown:d,children:l.jsx("img",{src:y0,alt:"Pawn Point icon",className:"h-full w-full object-cover"})})]})]})})]})}function Hw(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var o=t.length;for(e=0;e<o;e++)t[e]&&(n=Hw(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function Kc(){for(var t,e,n=0,r="",o=arguments.length;n<o;n++)(t=arguments[n])&&(e=Hw(t))&&(r&&(r+=" "),r+=e);return r}const Oe=T.forwardRef(function({className:e,variant:n="primary",...r},o){const d="inline-flex items-center justify-center rounded-full px-4 py-2 text-sm font-semibold transition",f={primary:"bg-brand.pink hover:bg-pink-500 text-white shadow-glow",ghost:"bg-transparent hover:bg-white/10 text-white",outline:"border border-white/30 text-white hover:bg-white/10"};return l.jsx("button",{ref:o,className:Kc(d,f[n],e),...r})}),M4=()=>{};var Ob={};const Yw={NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};const Ue=function(t,e){if(!t)throw Fc(e)},Fc=function(t){return new Error("Firebase Database ("+Yw.SDK_VERSION+") INTERNAL ASSERT FAILED: "+t)};const Xw=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let o=t.charCodeAt(r);o<128?e[n++]=o:o<2048?(e[n++]=o>>6|192,e[n++]=o&63|128):(o&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(o=65536+((o&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=o>>18|240,e[n++]=o>>12&63|128,e[n++]=o>>6&63|128,e[n++]=o&63|128):(e[n++]=o>>12|224,e[n++]=o>>6&63|128,e[n++]=o&63|128)}return e},D4=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const o=t[n++];if(o<128)e[r++]=String.fromCharCode(o);else if(o>191&&o<224){const d=t[n++];e[r++]=String.fromCharCode((o&31)<<6|d&63)}else if(o>239&&o<365){const d=t[n++],f=t[n++],g=t[n++],b=((o&7)<<18|(d&63)<<12|(f&63)<<6|g&63)-65536;e[r++]=String.fromCharCode(55296+(b>>10)),e[r++]=String.fromCharCode(56320+(b&1023))}else{const d=t[n++],f=t[n++];e[r++]=String.fromCharCode((o&15)<<12|(d&63)<<6|f&63)}}return e.join("")},a2={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let o=0;o<t.length;o+=3){const d=t[o],f=o+1<t.length,g=f?t[o+1]:0,b=o+2<t.length,w=b?t[o+2]:0,k=d>>2,C=(d&3)<<4|g>>4;let N=(g&15)<<2|w>>6,j=w&63;b||(j=64,f||(N=64)),r.push(n[k],n[C],n[N],n[j])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(Xw(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):D4(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let o=0;o<t.length;){const d=n[t.charAt(o++)],g=o<t.length?n[t.charAt(o)]:0;++o;const w=o<t.length?n[t.charAt(o)]:64;++o;const C=o<t.length?n[t.charAt(o)]:64;if(++o,d==null||g==null||w==null||C==null)throw new O4;const N=d<<2|g>>4;if(r.push(N),w!==64){const j=g<<4&240|w>>2;if(r.push(j),C!==64){const M=w<<6&192|C;r.push(M)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class O4 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Jw=function(t){const e=Xw(t);return a2.encodeByteArray(e,!0)},gg=function(t){return Jw(t).replace(/\./g,"")},mg=function(t){try{return a2.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function U4(t){return Zw(void 0,t)}function Zw(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:const n=e;return new Date(n.getTime());case Object:t===void 0&&(t={});break;case Array:t=[];break;default:return e}for(const n in e)!e.hasOwnProperty(n)||!B4(n)||(t[n]=Zw(t[n],e[n]));return t}function B4(t){return t!=="__proto__"}function $4(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}const L4=()=>$4().__FIREBASE_DEFAULTS__,K4=()=>{if(typeof process>"u"||typeof Ob>"u")return;const t=Ob.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},F4=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&mg(t[1]);return e&&JSON.parse(e)},o2=()=>{try{return M4()||L4()||K4()||F4()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},ex=t=>o2()?.emulatorHosts?.[t],q4=t=>{const e=ex(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},tx=()=>o2()?.config,nx=t=>o2()?.[`_${t}`];class oh{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}function qc(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function sx(t){return(await fetch(t,{credentials:"include"})).ok}function Q4(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",o=t.iat||0,d=t.sub||t.user_id;if(!d)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const f={iss:`https://securetoken.google.com/${r}`,aud:r,iat:o,exp:o+3600,auth_time:o,sub:d,user_id:d,firebase:{sign_in_provider:"custom",identities:{}},...t};return[gg(JSON.stringify(n)),gg(JSON.stringify(f)),""].join(".")}const Dd={};function z4(){const t={prod:[],emulator:[]};for(const e of Object.keys(Dd))Dd[e]?t.emulator.push(e):t.prod.push(e);return t}function G4(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let Ub=!1;function rx(t,e){if(typeof window>"u"||typeof document>"u"||!qc(window.location.host)||Dd[t]===e||Dd[t]||Ub)return;Dd[t]=e;function n(N){return`__firebase__banner__${N}`}const r="__firebase__banner",d=z4().prod.length>0;function f(){const N=document.getElementById(r);N&&N.remove()}function g(N){N.style.display="flex",N.style.background="#7faaf0",N.style.position="fixed",N.style.bottom="5px",N.style.left="5px",N.style.padding=".5em",N.style.borderRadius="5px",N.style.alignItems="center"}function b(N,j){N.setAttribute("width","24"),N.setAttribute("id",j),N.setAttribute("height","24"),N.setAttribute("viewBox","0 0 24 24"),N.setAttribute("fill","none"),N.style.marginLeft="-6px"}function w(){const N=document.createElement("span");return N.style.cursor="pointer",N.style.marginLeft="16px",N.style.fontSize="24px",N.innerHTML=" &times;",N.onclick=()=>{Ub=!0,f()},N}function k(N,j){N.setAttribute("id",j),N.innerText="Learn more",N.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",N.setAttribute("target","__blank"),N.style.paddingLeft="5px",N.style.textDecoration="underline"}function C(){const N=G4(r),j=n("text"),M=document.getElementById(j)||document.createElement("span"),$=n("learnmore"),Q=document.getElementById($)||document.createElement("a"),ae=n("preprendIcon"),X=document.getElementById(ae)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(N.created){const P=N.element;g(P),k(Q,$);const W=w();b(X,ae),P.append(X,M,Q,W),document.body.appendChild(P)}d?(M.innerText="Preview backend disconnected.",X.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(X.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,M.innerText="Preview backend running in this workspace."),M.setAttribute("id",j)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",C):C()}function Xs(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function l2(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Xs())}function V4(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function W4(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function ix(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function H4(){const t=Xs();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function Y4(){return Yw.NODE_ADMIN===!0}function X4(){try{return typeof indexedDB=="object"}catch{return!1}}function J4(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(r);o.onsuccess=()=>{o.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},o.onupgradeneeded=()=>{n=!1},o.onerror=()=>{e(o.error?.message||"")}}catch(n){e(n)}})}const Z4="FirebaseError";class vo extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=Z4,Object.setPrototypeOf(this,vo.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,lh.prototype.create)}}class lh{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},o=`${this.service}/${e}`,d=this.errors[e],f=d?e5(d,r):"Error",g=`${this.serviceName}: ${f} (${o}).`;return new vo(o,g,r)}}function e5(t,e){return t.replace(t5,(n,r)=>{const o=e[r];return o!=null?String(o):`<${r}?>`})}const t5=/\{\$([^}]+)}/g;function zd(t){return JSON.parse(t)}function is(t){return JSON.stringify(t)}const ax=function(t){let e={},n={},r={},o="";try{const d=t.split(".");e=zd(mg(d[0])||""),n=zd(mg(d[1])||""),o=d[2],r=n.d||{},delete n.d}catch{}return{header:e,claims:n,data:r,signature:o}},n5=function(t){const e=ax(t),n=e.claims;return!!n&&typeof n=="object"&&n.hasOwnProperty("iat")},s5=function(t){const e=ax(t).claims;return typeof e=="object"&&e.admin===!0};function Mi(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function Tc(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]}function w0(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function vg(t,e,n){const r={};for(const o in t)Object.prototype.hasOwnProperty.call(t,o)&&(r[o]=e.call(n,t[o],o,t));return r}function pl(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const o of n){if(!r.includes(o))return!1;const d=t[o],f=e[o];if(Bb(d)&&Bb(f)){if(!pl(d,f))return!1}else if(d!==f)return!1}for(const o of r)if(!n.includes(o))return!1;return!0}function Bb(t){return t!==null&&typeof t=="object"}function Qc(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(o=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(o))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function jd(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[o,d]=r.split("=");e[decodeURIComponent(o)]=decodeURIComponent(d)}}),e}function Id(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}class r5{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,n){n||(n=0);const r=this.W_;if(typeof e=="string")for(let C=0;C<16;C++)r[C]=e.charCodeAt(n)<<24|e.charCodeAt(n+1)<<16|e.charCodeAt(n+2)<<8|e.charCodeAt(n+3),n+=4;else for(let C=0;C<16;C++)r[C]=e[n]<<24|e[n+1]<<16|e[n+2]<<8|e[n+3],n+=4;for(let C=16;C<80;C++){const N=r[C-3]^r[C-8]^r[C-14]^r[C-16];r[C]=(N<<1|N>>>31)&4294967295}let o=this.chain_[0],d=this.chain_[1],f=this.chain_[2],g=this.chain_[3],b=this.chain_[4],w,k;for(let C=0;C<80;C++){C<40?C<20?(w=g^d&(f^g),k=1518500249):(w=d^f^g,k=1859775393):C<60?(w=d&f|g&(d|f),k=2400959708):(w=d^f^g,k=3395469782);const N=(o<<5|o>>>27)+w+b+k+r[C]&4294967295;b=g,g=f,f=(d<<30|d>>>2)&4294967295,d=o,o=N}this.chain_[0]=this.chain_[0]+o&4294967295,this.chain_[1]=this.chain_[1]+d&4294967295,this.chain_[2]=this.chain_[2]+f&4294967295,this.chain_[3]=this.chain_[3]+g&4294967295,this.chain_[4]=this.chain_[4]+b&4294967295}update(e,n){if(e==null)return;n===void 0&&(n=e.length);const r=n-this.blockSize;let o=0;const d=this.buf_;let f=this.inbuf_;for(;o<n;){if(f===0)for(;o<=r;)this.compress_(e,o),o+=this.blockSize;if(typeof e=="string"){for(;o<n;)if(d[f]=e.charCodeAt(o),++f,++o,f===this.blockSize){this.compress_(d),f=0;break}}else for(;o<n;)if(d[f]=e[o],++f,++o,f===this.blockSize){this.compress_(d),f=0;break}}this.inbuf_=f,this.total_+=n}digest(){const e=[];let n=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let o=this.blockSize-1;o>=56;o--)this.buf_[o]=n&255,n/=256;this.compress_(this.buf_);let r=0;for(let o=0;o<5;o++)for(let d=24;d>=0;d-=8)e[r]=this.chain_[o]>>d&255,++r;return e}}function i5(t,e){const n=new a5(t,e);return n.subscribe.bind(n)}class a5{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let o;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");o5(e,["next","error","complete"])?o=e:o={next:e,error:n,complete:r},o.next===void 0&&(o.next=F1),o.error===void 0&&(o.error=F1),o.complete===void 0&&(o.complete=F1);const d=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch{}}),this.observers.push(o),d}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function o5(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function F1(){}function Vg(t,e){return`${t} failed: ${e} argument `}const l5=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let o=t.charCodeAt(r);if(o>=55296&&o<=56319){const d=o-55296;r++,Ue(r<t.length,"Surrogate pair missing trail surrogate.");const f=t.charCodeAt(r)-56320;o=65536+(d<<10)+f}o<128?e[n++]=o:o<2048?(e[n++]=o>>6|192,e[n++]=o&63|128):o<65536?(e[n++]=o>>12|224,e[n++]=o>>6&63|128,e[n++]=o&63|128):(e[n++]=o>>18|240,e[n++]=o>>12&63|128,e[n++]=o>>6&63|128,e[n++]=o&63|128)}return e},Wg=function(t){let e=0;for(let n=0;n<t.length;n++){const r=t.charCodeAt(n);r<128?e++:r<2048?e+=2:r>=55296&&r<=56319?(e+=4,n++):e+=3}return e};function ws(t){return t&&t._delegate?t._delegate:t}class gl{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const nl="[DEFAULT]";class c5{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new oh;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:n});o&&r.resolve(o)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e?.identifier),r=e?.optional??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(o){if(r)return null;throw o}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(d5(e))try{this.getOrInitializeService({instanceIdentifier:nl})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(n);try{const d=this.getOrInitializeService({instanceIdentifier:o});r.resolve(d)}catch{}}}}clearInstance(e=nl){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=nl){return this.instances.has(e)}getOptions(e=nl){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[d,f]of this.instancesDeferred.entries()){const g=this.normalizeInstanceIdentifier(d);r===g&&f.resolve(o)}return o}onInit(e,n){const r=this.normalizeInstanceIdentifier(n),o=this.onInitCallbacks.get(r)??new Set;o.add(e),this.onInitCallbacks.set(r,o);const d=this.instances.get(r);return d&&e(d,r),()=>{o.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const o of r)try{o(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:u5(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=nl){return this.component?this.component.multipleInstances?e:nl:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function u5(t){return t===nl?void 0:t}function d5(t){return t.instantiationMode==="EAGER"}class h5{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new c5(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}var ln;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(ln||(ln={}));const f5={debug:ln.DEBUG,verbose:ln.VERBOSE,info:ln.INFO,warn:ln.WARN,error:ln.ERROR,silent:ln.SILENT},p5=ln.INFO,g5={[ln.DEBUG]:"log",[ln.VERBOSE]:"log",[ln.INFO]:"info",[ln.WARN]:"warn",[ln.ERROR]:"error"},m5=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),o=g5[e];if(o)console[o](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class c2{constructor(e){this.name=e,this._logLevel=p5,this._logHandler=m5,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ln))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?f5[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ln.DEBUG,...e),this._logHandler(this,ln.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ln.VERBOSE,...e),this._logHandler(this,ln.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ln.INFO,...e),this._logHandler(this,ln.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ln.WARN,...e),this._logHandler(this,ln.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ln.ERROR,...e),this._logHandler(this,ln.ERROR,...e)}}const v5=(t,e)=>e.some(n=>t instanceof n);let $b,Lb;function b5(){return $b||($b=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function y5(){return Lb||(Lb=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const ox=new WeakMap,x0=new WeakMap,lx=new WeakMap,q1=new WeakMap,u2=new WeakMap;function w5(t){const e=new Promise((n,r)=>{const o=()=>{t.removeEventListener("success",d),t.removeEventListener("error",f)},d=()=>{n(io(t.result)),o()},f=()=>{r(t.error),o()};t.addEventListener("success",d),t.addEventListener("error",f)});return e.then(n=>{n instanceof IDBCursor&&ox.set(n,t)}).catch(()=>{}),u2.set(e,t),e}function x5(t){if(x0.has(t))return;const e=new Promise((n,r)=>{const o=()=>{t.removeEventListener("complete",d),t.removeEventListener("error",f),t.removeEventListener("abort",f)},d=()=>{n(),o()},f=()=>{r(t.error||new DOMException("AbortError","AbortError")),o()};t.addEventListener("complete",d),t.addEventListener("error",f),t.addEventListener("abort",f)});x0.set(t,e)}let P0={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return x0.get(t);if(e==="objectStoreNames")return t.objectStoreNames||lx.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return io(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function P5(t){P0=t(P0)}function _5(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(Q1(this),e,...n);return lx.set(r,e.sort?e.sort():[e]),io(r)}:y5().includes(t)?function(...e){return t.apply(Q1(this),e),io(ox.get(this))}:function(...e){return io(t.apply(Q1(this),e))}}function k5(t){return typeof t=="function"?_5(t):(t instanceof IDBTransaction&&x5(t),v5(t,b5())?new Proxy(t,P0):t)}function io(t){if(t instanceof IDBRequest)return w5(t);if(q1.has(t))return q1.get(t);const e=k5(t);return e!==t&&(q1.set(t,e),u2.set(e,t)),e}const Q1=t=>u2.get(t);function N5(t,e,{blocked:n,upgrade:r,blocking:o,terminated:d}={}){const f=indexedDB.open(t,e),g=io(f);return r&&f.addEventListener("upgradeneeded",b=>{r(io(f.result),b.oldVersion,b.newVersion,io(f.transaction),b)}),n&&f.addEventListener("blocked",b=>n(b.oldVersion,b.newVersion,b)),g.then(b=>{d&&b.addEventListener("close",()=>d()),o&&b.addEventListener("versionchange",w=>o(w.oldVersion,w.newVersion,w))}).catch(()=>{}),g}const C5=["get","getKey","getAll","getAllKeys","count"],S5=["put","add","delete","clear"],z1=new Map;function Kb(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(z1.get(e))return z1.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,o=S5.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(o||C5.includes(n)))return;const d=async function(f,...g){const b=this.transaction(f,o?"readwrite":"readonly");let w=b.store;return r&&(w=w.index(g.shift())),(await Promise.all([w[n](...g),o&&b.done]))[0]};return z1.set(e,d),d}P5(t=>({...t,get:(e,n,r)=>Kb(e,n)||t.get(e,n,r),has:(e,n)=>!!Kb(e,n)||t.has(e,n)}));class R5{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(T5(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function T5(t){return t.getComponent()?.type==="VERSION"}const _0="@firebase/app",Fb="0.14.6";const ca=new c2("@firebase/app"),E5="@firebase/app-compat",j5="@firebase/analytics-compat",I5="@firebase/analytics",A5="@firebase/app-check-compat",M5="@firebase/app-check",D5="@firebase/auth",O5="@firebase/auth-compat",U5="@firebase/database",B5="@firebase/data-connect",$5="@firebase/database-compat",L5="@firebase/functions",K5="@firebase/functions-compat",F5="@firebase/installations",q5="@firebase/installations-compat",Q5="@firebase/messaging",z5="@firebase/messaging-compat",G5="@firebase/performance",V5="@firebase/performance-compat",W5="@firebase/remote-config",H5="@firebase/remote-config-compat",Y5="@firebase/storage",X5="@firebase/storage-compat",J5="@firebase/firestore",Z5="@firebase/ai",eN="@firebase/firestore-compat",tN="firebase",nN="12.6.0";const k0="[DEFAULT]",sN={[_0]:"fire-core",[E5]:"fire-core-compat",[I5]:"fire-analytics",[j5]:"fire-analytics-compat",[M5]:"fire-app-check",[A5]:"fire-app-check-compat",[D5]:"fire-auth",[O5]:"fire-auth-compat",[U5]:"fire-rtdb",[B5]:"fire-data-connect",[$5]:"fire-rtdb-compat",[L5]:"fire-fn",[K5]:"fire-fn-compat",[F5]:"fire-iid",[q5]:"fire-iid-compat",[Q5]:"fire-fcm",[z5]:"fire-fcm-compat",[G5]:"fire-perf",[V5]:"fire-perf-compat",[W5]:"fire-rc",[H5]:"fire-rc-compat",[Y5]:"fire-gcs",[X5]:"fire-gcs-compat",[J5]:"fire-fst",[eN]:"fire-fst-compat",[Z5]:"fire-vertex","fire-js":"fire-js",[tN]:"fire-js-all"};const bg=new Map,rN=new Map,N0=new Map;function qb(t,e){try{t.container.addComponent(e)}catch(n){ca.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Ec(t){const e=t.name;if(N0.has(e))return ca.debug(`There were multiple attempts to register component ${e}.`),!1;N0.set(e,t);for(const n of bg.values())qb(n,t);for(const n of rN.values())qb(n,t);return!0}function d2(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function mr(t){return t==null?!1:t.settings!==void 0}const iN={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},ao=new lh("app","Firebase",iN);class aN{constructor(e,n,r){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new gl("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ao.create("app-deleted",{appName:this._name})}}const zc=nN;function cx(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r={name:k0,automaticDataCollectionEnabled:!0,...e},o=r.name;if(typeof o!="string"||!o)throw ao.create("bad-app-name",{appName:String(o)});if(n||(n=tx()),!n)throw ao.create("no-options");const d=bg.get(o);if(d){if(pl(n,d.options)&&pl(r,d.config))return d;throw ao.create("duplicate-app",{appName:o})}const f=new h5(o);for(const b of N0.values())f.addComponent(b);const g=new aN(n,r,f);return bg.set(o,g),g}function ux(t=k0){const e=bg.get(t);if(!e&&t===k0&&tx())return cx();if(!e)throw ao.create("no-app",{appName:t});return e}function oo(t,e,n){let r=sN[t]??t;n&&(r+=`-${n}`);const o=r.match(/\s|\//),d=e.match(/\s|\//);if(o||d){const f=[`Unable to register library "${r}" with version "${e}":`];o&&f.push(`library name "${r}" contains illegal characters (whitespace or "/")`),o&&d&&f.push("and"),d&&f.push(`version name "${e}" contains illegal characters (whitespace or "/")`),ca.warn(f.join(" "));return}Ec(new gl(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}const oN="firebase-heartbeat-database",lN=1,Gd="firebase-heartbeat-store";let G1=null;function dx(){return G1||(G1=N5(oN,lN,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Gd)}catch(n){console.warn(n)}}}}).catch(t=>{throw ao.create("idb-open",{originalErrorMessage:t.message})})),G1}async function cN(t){try{const n=(await dx()).transaction(Gd),r=await n.objectStore(Gd).get(hx(t));return await n.done,r}catch(e){if(e instanceof vo)ca.warn(e.message);else{const n=ao.create("idb-get",{originalErrorMessage:e?.message});ca.warn(n.message)}}}async function Qb(t,e){try{const r=(await dx()).transaction(Gd,"readwrite");await r.objectStore(Gd).put(e,hx(t)),await r.done}catch(n){if(n instanceof vo)ca.warn(n.message);else{const r=ao.create("idb-set",{originalErrorMessage:n?.message});ca.warn(r.message)}}}function hx(t){return`${t.name}!${t.options.appId}`}const uN=1024,dN=30;class hN{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new pN(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){try{const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=zb();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(o=>o.date===r))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:n}),this._heartbeatsCache.heartbeats.length>dN){const o=gN(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){ca.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=zb(),{heartbeatsToSend:n,unsentEntries:r}=fN(this._heartbeatsCache.heartbeats),o=gg(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=e,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(e){return ca.warn(e),""}}}function zb(){return new Date().toISOString().substring(0,10)}function fN(t,e=uN){const n=[];let r=t.slice();for(const o of t){const d=n.find(f=>f.agent===o.agent);if(d){if(d.dates.push(o.date),Gb(n)>e){d.dates.pop();break}}else if(n.push({agent:o.agent,dates:[o.date]}),Gb(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class pN{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return X4()?J4().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await cN(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return Qb(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return Qb(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function Gb(t){return gg(JSON.stringify({version:2,heartbeats:t})).length}function gN(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}function mN(t){Ec(new gl("platform-logger",e=>new R5(e),"PRIVATE")),Ec(new gl("heartbeat",e=>new hN(e),"PRIVATE")),oo(_0,Fb,t),oo(_0,Fb,"esm2020"),oo("fire-js","")}mN("");function fx(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const vN=fx,px=new lh("auth","Firebase",fx());const yg=new c2("@firebase/auth");function bN(t,...e){yg.logLevel<=ln.WARN&&yg.warn(`Auth (${zc}): ${t}`,...e)}function Zp(t,...e){yg.logLevel<=ln.ERROR&&yg.error(`Auth (${zc}): ${t}`,...e)}function Lr(t,...e){throw f2(t,...e)}function ii(t,...e){return f2(t,...e)}function h2(t,e,n){const r={...vN(),[e]:n};return new lh("auth","Firebase",r).create(e,{appName:t.name})}function Ii(t){return h2(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function yN(t,e,n){const r=n;if(!(e instanceof r))throw r.name!==e.constructor.name&&Lr(t,"argument-error"),h2(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function f2(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return px.create(t,...e)}function mt(t,e,...n){if(!t)throw f2(e,...n)}function ia(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Zp(e),new Error(e)}function ua(t,e){t||ia(e)}function C0(){return typeof self<"u"&&self.location?.href||""}function wN(){return Vb()==="http:"||Vb()==="https:"}function Vb(){return typeof self<"u"&&self.location?.protocol||null}function xN(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(wN()||W4()||"connection"in navigator)?navigator.onLine:!0}function PN(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}class ch{constructor(e,n){this.shortDelay=e,this.longDelay=n,ua(n>e,"Short delay should be less than long delay!"),this.isMobile=l2()||ix()}get(){return xN()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function p2(t,e){ua(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}class gx{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;ia("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;ia("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;ia("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const _N={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};const kN=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],NN=new ch(3e4,6e4);function bo(t,e){return t.tenantId&&!e.tenantId?{...e,tenantId:t.tenantId}:e}async function Di(t,e,n,r,o={}){return mx(t,o,async()=>{let d={},f={};r&&(e==="GET"?f=r:d={body:JSON.stringify(r)});const g=Qc({key:t.config.apiKey,...f}).slice(1),b=await t._getAdditionalHeaders();b["Content-Type"]="application/json",t.languageCode&&(b["X-Firebase-Locale"]=t.languageCode);const w={method:e,headers:b,...d};return V4()||(w.referrerPolicy="no-referrer"),t.emulatorConfig&&qc(t.emulatorConfig.host)&&(w.credentials="include"),gx.fetch()(await vx(t,t.config.apiHost,n,g),w)})}async function mx(t,e,n){t._canInitEmulator=!1;const r={..._N,...e};try{const o=new SN(t),d=await Promise.race([n(),o.promise]);o.clearNetworkTimeout();const f=await d.json();if("needConfirmation"in f)throw Fp(t,"account-exists-with-different-credential",f);if(d.ok&&!("errorMessage"in f))return f;{const g=d.ok?f.errorMessage:f.error.message,[b,w]=g.split(" : ");if(b==="FEDERATED_USER_ID_ALREADY_LINKED")throw Fp(t,"credential-already-in-use",f);if(b==="EMAIL_EXISTS")throw Fp(t,"email-already-in-use",f);if(b==="USER_DISABLED")throw Fp(t,"user-disabled",f);const k=r[b]||b.toLowerCase().replace(/[_\s]+/g,"-");if(w)throw h2(t,k,w);Lr(t,k)}}catch(o){if(o instanceof vo)throw o;Lr(t,"network-request-failed",{message:String(o)})}}async function uh(t,e,n,r,o={}){const d=await Di(t,e,n,r,o);return"mfaPendingCredential"in d&&Lr(t,"multi-factor-auth-required",{_serverResponse:d}),d}async function vx(t,e,n,r){const o=`${e}${n}?${r}`,d=t,f=d.config.emulator?p2(t.config,o):`${t.config.apiScheme}://${o}`;return kN.includes(n)&&(await d._persistenceManagerAvailable,d._getPersistenceType()==="COOKIE")?d._getPersistence()._getFinalTarget(f).toString():f}function CN(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class SN{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(ii(this.auth,"network-request-failed")),NN.get())})}}function Fp(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const o=ii(t,e,r);return o.customData._tokenResponse=n,o}function Wb(t){return t!==void 0&&t.enterprise!==void 0}class RN{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return CN(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function TN(t,e){return Di(t,"GET","/v2/recaptchaConfig",bo(t,e))}async function EN(t,e){return Di(t,"POST","/v1/accounts:delete",e)}async function wg(t,e){return Di(t,"POST","/v1/accounts:lookup",e)}function Od(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function jN(t,e=!1){const n=ws(t),r=await n.getIdToken(e),o=g2(r);mt(o&&o.exp&&o.auth_time&&o.iat,n.auth,"internal-error");const d=typeof o.firebase=="object"?o.firebase:void 0,f=d?.sign_in_provider;return{claims:o,token:r,authTime:Od(V1(o.auth_time)),issuedAtTime:Od(V1(o.iat)),expirationTime:Od(V1(o.exp)),signInProvider:f||null,signInSecondFactor:d?.sign_in_second_factor||null}}function V1(t){return Number(t)*1e3}function g2(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return Zp("JWT malformed, contained fewer than 3 sections"),null;try{const o=mg(n);return o?JSON.parse(o):(Zp("Failed to decode base64 JWT payload"),null)}catch(o){return Zp("Caught error parsing JWT payload as JSON",o?.toString()),null}}function Hb(t){const e=g2(t);return mt(e,"internal-error"),mt(typeof e.exp<"u","internal-error"),mt(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}async function ml(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof vo&&IN(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function IN({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}class AN{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}class S0{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Od(this.lastLoginAt),this.creationTime=Od(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function xg(t){const e=t.auth,n=await t.getIdToken(),r=await ml(t,wg(e,{idToken:n}));mt(r?.users.length,e,"internal-error");const o=r.users[0];t._notifyReloadListener(o);const d=o.providerUserInfo?.length?bx(o.providerUserInfo):[],f=DN(t.providerData,d),g=t.isAnonymous,b=!(t.email&&o.passwordHash)&&!f?.length,w=g?b:!1,k={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:f,metadata:new S0(o.createdAt,o.lastLoginAt),isAnonymous:w};Object.assign(t,k)}async function MN(t){const e=ws(t);await xg(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function DN(t,e){return[...t.filter(r=>!e.some(o=>o.providerId===r.providerId)),...e]}function bx(t){return t.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}async function ON(t,e){const n=await mx(t,{},async()=>{const r=Qc({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:o,apiKey:d}=t.config,f=await vx(t,o,"/v1/token",`key=${d}`),g=await t._getAdditionalHeaders();g["Content-Type"]="application/x-www-form-urlencoded";const b={method:"POST",headers:g,body:r};return t.emulatorConfig&&qc(t.emulatorConfig.host)&&(b.credentials="include"),gx.fetch()(f,b)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function UN(t,e){return Di(t,"POST","/v2/accounts:revokeToken",bo(t,e))}class kc{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){mt(e.idToken,"internal-error"),mt(typeof e.idToken<"u","internal-error"),mt(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Hb(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){mt(e.length!==0,"internal-error");const n=Hb(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(mt(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:o,expiresIn:d}=await ON(e,n);this.updateTokensAndExpiration(r,o,Number(d))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:o,expirationTime:d}=n,f=new kc;return r&&(mt(typeof r=="string","internal-error",{appName:e}),f.refreshToken=r),o&&(mt(typeof o=="string","internal-error",{appName:e}),f.accessToken=o),d&&(mt(typeof d=="number","internal-error",{appName:e}),f.expirationTime=d),f}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new kc,this.toJSON())}_performRefresh(){return ia("not implemented")}}function Ya(t,e){mt(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class si{constructor({uid:e,auth:n,stsTokenManager:r,...o}){this.providerId="firebase",this.proactiveRefresh=new AN(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new S0(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(e){const n=await ml(this,this.stsTokenManager.getToken(this.auth,e));return mt(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return jN(this,e)}reload(){return MN(this)}_assign(e){this!==e&&(mt(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new si({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){mt(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await xg(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(mr(this.auth.app))return Promise.reject(Ii(this.auth));const e=await this.getIdToken();return await ml(this,EN(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const r=n.displayName??void 0,o=n.email??void 0,d=n.phoneNumber??void 0,f=n.photoURL??void 0,g=n.tenantId??void 0,b=n._redirectEventId??void 0,w=n.createdAt??void 0,k=n.lastLoginAt??void 0,{uid:C,emailVerified:N,isAnonymous:j,providerData:M,stsTokenManager:$}=n;mt(C&&$,e,"internal-error");const Q=kc.fromJSON(this.name,$);mt(typeof C=="string",e,"internal-error"),Ya(r,e.name),Ya(o,e.name),mt(typeof N=="boolean",e,"internal-error"),mt(typeof j=="boolean",e,"internal-error"),Ya(d,e.name),Ya(f,e.name),Ya(g,e.name),Ya(b,e.name),Ya(w,e.name),Ya(k,e.name);const ae=new si({uid:C,auth:e,email:o,emailVerified:N,displayName:r,isAnonymous:j,photoURL:f,phoneNumber:d,tenantId:g,stsTokenManager:Q,createdAt:w,lastLoginAt:k});return M&&Array.isArray(M)&&(ae.providerData=M.map(X=>({...X}))),b&&(ae._redirectEventId=b),ae}static async _fromIdTokenResponse(e,n,r=!1){const o=new kc;o.updateFromServerResponse(n);const d=new si({uid:n.localId,auth:e,stsTokenManager:o,isAnonymous:r});return await xg(d),d}static async _fromGetAccountInfoResponse(e,n,r){const o=n.users[0];mt(o.localId!==void 0,"internal-error");const d=o.providerUserInfo!==void 0?bx(o.providerUserInfo):[],f=!(o.email&&o.passwordHash)&&!d?.length,g=new kc;g.updateFromIdToken(r);const b=new si({uid:o.localId,auth:e,stsTokenManager:g,isAnonymous:f}),w={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:d,metadata:new S0(o.createdAt,o.lastLoginAt),isAnonymous:!(o.email&&o.passwordHash)&&!d?.length};return Object.assign(b,w),b}}const Yb=new Map;function aa(t){ua(t instanceof Function,"Expected a class definition");let e=Yb.get(t);return e?(ua(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,Yb.set(t,e),e)}class yx{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}yx.type="NONE";const Xb=yx;function eg(t,e,n){return`firebase:${t}:${e}:${n}`}class Nc{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:o,name:d}=this.auth;this.fullUserKey=eg(this.userKey,o.apiKey,d),this.fullPersistenceKey=eg("persistence",o.apiKey,d),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await wg(this.auth,{idToken:e}).catch(()=>{});return n?si._fromGetAccountInfoResponse(this.auth,n,e):null}return si._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new Nc(aa(Xb),e,r);const o=(await Promise.all(n.map(async w=>{if(await w._isAvailable())return w}))).filter(w=>w);let d=o[0]||aa(Xb);const f=eg(r,e.config.apiKey,e.name);let g=null;for(const w of n)try{const k=await w._get(f);if(k){let C;if(typeof k=="string"){const N=await wg(e,{idToken:k}).catch(()=>{});if(!N)break;C=await si._fromGetAccountInfoResponse(e,N,k)}else C=si._fromJSON(e,k);w!==d&&(g=C),d=w;break}}catch{}const b=o.filter(w=>w._shouldAllowMigration);return!d._shouldAllowMigration||!b.length?new Nc(d,e,r):(d=b[0],g&&await d._set(f,g.toJSON()),await Promise.all(n.map(async w=>{if(w!==d)try{await w._remove(f)}catch{}})),new Nc(d,e,r))}}function Jb(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(_x(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(wx(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(Nx(e))return"Blackberry";if(Cx(e))return"Webos";if(xx(e))return"Safari";if((e.includes("chrome/")||Px(e))&&!e.includes("edge/"))return"Chrome";if(kx(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if(r?.length===2)return r[1]}return"Other"}function wx(t=Xs()){return/firefox\//i.test(t)}function xx(t=Xs()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Px(t=Xs()){return/crios\//i.test(t)}function _x(t=Xs()){return/iemobile/i.test(t)}function kx(t=Xs()){return/android/i.test(t)}function Nx(t=Xs()){return/blackberry/i.test(t)}function Cx(t=Xs()){return/webos/i.test(t)}function m2(t=Xs()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function BN(t=Xs()){return m2(t)&&!!window.navigator?.standalone}function $N(){return H4()&&document.documentMode===10}function Sx(t=Xs()){return m2(t)||kx(t)||Cx(t)||Nx(t)||/windows phone/i.test(t)||_x(t)}function Rx(t,e=[]){let n;switch(t){case"Browser":n=Jb(Xs());break;case"Worker":n=`${Jb(Xs())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${zc}/${r}`}class LN{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=d=>new Promise((f,g)=>{try{const b=e(d);f(b)}catch(b){g(b)}});r.onAbort=n,this.queue.push(r);const o=this.queue.length-1;return()=>{this.queue[o]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const o of n)try{o()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}}}async function KN(t,e={}){return Di(t,"GET","/v2/passwordPolicy",bo(t,e))}const FN=6;class qN{constructor(e){const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??FN,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,o=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),o&&(n.meetsMaxPasswordLength=e.length<=o)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let o=0;o<e.length;o++)r=e.charAt(o),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,o,d){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=o)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=d))}}class QN{constructor(e,n,r,o){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=o,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Zb(this),this.idTokenSubscription=new Zb(this),this.beforeStateQueue=new LN(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=px,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=o.sdkClientVersion,this._persistenceManagerAvailable=new Promise(d=>this._resolvePersistenceManagerAvailable=d)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=aa(n)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await Nc.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await wg(this,{idToken:e}),r=await si._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(mr(this.app)){const d=this.app.settings.authIdToken;return d?new Promise(f=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(d).then(f,f))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let r=n,o=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const d=this.redirectUser?._redirectEventId,f=r?._redirectEventId,g=await this.tryRedirectSignIn(e);(!d||d===f)&&g?.user&&(r=g.user,o=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(o)try{await this.beforeStateQueue.runMiddleware(r)}catch(d){r=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(d))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return mt(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await xg(e)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=PN()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(mr(this.app))return Promise.reject(Ii(this));const n=e?ws(e):null;return n&&mt(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&mt(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return mr(this.app)?Promise.reject(Ii(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return mr(this.app)?Promise.reject(Ii(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(aa(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await KN(this),n=new qN(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new lh("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await UN(this,r)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&aa(e)||this._popupRedirectResolver;mt(n,this,"argument-error"),this.redirectPersistenceManager=await Nc.create(this,[aa(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,o){if(this._deleted)return()=>{};const d=typeof n=="function"?n:n.next.bind(n);let f=!1;const g=this._isInitialized?Promise.resolve():this._initializationPromise;if(mt(g,this,"internal-error"),g.then(()=>{f||d(this.currentUser)}),typeof n=="function"){const b=e.addObserver(n,r,o);return()=>{f=!0,b()}}else{const b=e.addObserver(n);return()=>{f=!0,b()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return mt(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Rx(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();n&&(e["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){if(mr(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&bN(`Error while retrieving App Check token: ${e.error}`),e?.token}}function yo(t){return ws(t)}class Zb{constructor(e){this.auth=e,this.observer=null,this.addObserver=i5(n=>this.observer=n)}get next(){return mt(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let Hg={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function zN(t){Hg=t}function Tx(t){return Hg.loadJS(t)}function GN(){return Hg.recaptchaEnterpriseScript}function VN(){return Hg.gapiScript}function WN(t){return`__${t}${Math.floor(Math.random()*1e6)}`}class HN{constructor(){this.enterprise=new YN}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class YN{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const XN="recaptcha-enterprise",Ex="NO_RECAPTCHA";class JN{constructor(e){this.type=XN,this.auth=yo(e)}async verify(e="verify",n=!1){async function r(d){if(!n){if(d.tenantId==null&&d._agentRecaptchaConfig!=null)return d._agentRecaptchaConfig.siteKey;if(d.tenantId!=null&&d._tenantRecaptchaConfigs[d.tenantId]!==void 0)return d._tenantRecaptchaConfigs[d.tenantId].siteKey}return new Promise(async(f,g)=>{TN(d,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(b=>{if(b.recaptchaKey===void 0)g(new Error("recaptcha Enterprise site key undefined"));else{const w=new RN(b);return d.tenantId==null?d._agentRecaptchaConfig=w:d._tenantRecaptchaConfigs[d.tenantId]=w,f(w.siteKey)}}).catch(b=>{g(b)})})}function o(d,f,g){const b=window.grecaptcha;Wb(b)?b.enterprise.ready(()=>{b.enterprise.execute(d,{action:e}).then(w=>{f(w)}).catch(()=>{f(Ex)})}):g(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new HN().execute("siteKey",{action:"verify"}):new Promise((d,f)=>{r(this.auth).then(g=>{if(!n&&Wb(window.grecaptcha))o(g,d,f);else{if(typeof window>"u"){f(new Error("RecaptchaVerifier is only supported in browser"));return}let b=GN();b.length!==0&&(b+=g),Tx(b).then(()=>{o(g,d,f)}).catch(w=>{f(w)})}}).catch(g=>{f(g)})})}}async function ey(t,e,n,r=!1,o=!1){const d=new JN(t);let f;if(o)f=Ex;else try{f=await d.verify(n)}catch{f=await d.verify(n,!0)}const g={...e};if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in g){const b=g.phoneEnrollmentInfo.phoneNumber,w=g.phoneEnrollmentInfo.recaptchaToken;Object.assign(g,{phoneEnrollmentInfo:{phoneNumber:b,recaptchaToken:w,captchaResponse:f,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in g){const b=g.phoneSignInInfo.recaptchaToken;Object.assign(g,{phoneSignInInfo:{recaptchaToken:b,captchaResponse:f,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return g}return r?Object.assign(g,{captchaResp:f}):Object.assign(g,{captchaResponse:f}),Object.assign(g,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(g,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),g}async function R0(t,e,n,r,o){if(t._getRecaptchaConfig()?.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const d=await ey(t,e,n,n==="getOobCode");return r(t,d)}else return r(t,e).catch(async d=>{if(d.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const f=await ey(t,e,n,n==="getOobCode");return r(t,f)}else return Promise.reject(d)})}function ZN(t,e){const n=d2(t,"auth");if(n.isInitialized()){const o=n.getImmediate(),d=n.getOptions();if(pl(d,e??{}))return o;Lr(o,"already-initialized")}return n.initialize({options:e})}function eC(t,e){const n=e?.persistence||[],r=(Array.isArray(n)?n:[n]).map(aa);e?.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e?.popupRedirectResolver)}function tC(t,e,n){const r=yo(t);mt(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const o=!1,d=jx(e),{host:f,port:g}=nC(e),b=g===null?"":`:${g}`,w={url:`${d}//${f}${b}/`},k=Object.freeze({host:f,port:g,protocol:d.replace(":",""),options:Object.freeze({disableWarnings:o})});if(!r._canInitEmulator){mt(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),mt(pl(w,r.config.emulator)&&pl(k,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=w,r.emulatorConfig=k,r.settings.appVerificationDisabledForTesting=!0,qc(f)?(sx(`${d}//${f}${b}`),rx("Auth",!0)):sC()}function jx(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function nC(t){const e=jx(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",o=/^(\[[^\]]+\])(:|$)/.exec(r);if(o){const d=o[1];return{host:d,port:ty(r.substr(d.length+1))}}else{const[d,f]=r.split(":");return{host:d,port:ty(f)}}}function ty(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function sC(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}class v2{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return ia("not implemented")}_getIdTokenResponse(e){return ia("not implemented")}_linkToIdToken(e,n){return ia("not implemented")}_getReauthenticationResolver(e){return ia("not implemented")}}async function rC(t,e){return Di(t,"POST","/v1/accounts:update",e)}async function iC(t,e){return Di(t,"POST","/v1/accounts:signUp",e)}async function aC(t,e){return uh(t,"POST","/v1/accounts:signInWithPassword",bo(t,e))}async function oC(t,e){return uh(t,"POST","/v1/accounts:signInWithEmailLink",bo(t,e))}async function lC(t,e){return uh(t,"POST","/v1/accounts:signInWithEmailLink",bo(t,e))}class Vd extends v2{constructor(e,n,r,o=null){super("password",r),this._email=e,this._password=n,this._tenantId=o}static _fromEmailAndPassword(e,n){return new Vd(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new Vd(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n?.email&&n?.password){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return R0(e,n,"signInWithPassword",aC);case"emailLink":return oC(e,{email:this._email,oobCode:this._password});default:Lr(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return R0(e,r,"signUpPassword",iC);case"emailLink":return lC(e,{idToken:n,email:this._email,oobCode:this._password});default:Lr(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function Cc(t,e){return uh(t,"POST","/v1/accounts:signInWithIdp",bo(t,e))}const cC="http://localhost";class vl extends v2{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new vl(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Lr("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:o,...d}=n;if(!r||!o)return null;const f=new vl(r,o);return f.idToken=d.idToken||void 0,f.accessToken=d.accessToken||void 0,f.secret=d.secret,f.nonce=d.nonce,f.pendingToken=d.pendingToken||null,f}_getIdTokenResponse(e){const n=this.buildRequest();return Cc(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,Cc(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Cc(e,n)}buildRequest(){const e={requestUri:cC,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Qc(n)}return e}}function uC(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function dC(t){const e=jd(Id(t)).link,n=e?jd(Id(e)).deep_link_id:null,r=jd(Id(t)).deep_link_id;return(r?jd(Id(r)).link:null)||r||n||e||t}class b2{constructor(e){const n=jd(Id(e)),r=n.apiKey??null,o=n.oobCode??null,d=uC(n.mode??null);mt(r&&o&&d,"argument-error"),this.apiKey=r,this.operation=d,this.code=o,this.continueUrl=n.continueUrl??null,this.languageCode=n.lang??null,this.tenantId=n.tenantId??null}static parseLink(e){const n=dC(e);try{return new b2(n)}catch{return null}}}class Gc{constructor(){this.providerId=Gc.PROVIDER_ID}static credential(e,n){return Vd._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=b2.parseLink(n);return mt(r,"argument-error"),Vd._fromEmailAndCode(e,r.code,r.tenantId)}}Gc.PROVIDER_ID="password";Gc.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Gc.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class y2{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class dh extends y2{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class eo extends dh{constructor(){super("facebook.com")}static credential(e){return vl._fromParams({providerId:eo.PROVIDER_ID,signInMethod:eo.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return eo.credentialFromTaggedObject(e)}static credentialFromError(e){return eo.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return eo.credential(e.oauthAccessToken)}catch{return null}}}eo.FACEBOOK_SIGN_IN_METHOD="facebook.com";eo.PROVIDER_ID="facebook.com";class ra extends dh{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return vl._fromParams({providerId:ra.PROVIDER_ID,signInMethod:ra.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return ra.credentialFromTaggedObject(e)}static credentialFromError(e){return ra.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return ra.credential(n,r)}catch{return null}}}ra.GOOGLE_SIGN_IN_METHOD="google.com";ra.PROVIDER_ID="google.com";class to extends dh{constructor(){super("github.com")}static credential(e){return vl._fromParams({providerId:to.PROVIDER_ID,signInMethod:to.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return to.credentialFromTaggedObject(e)}static credentialFromError(e){return to.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return to.credential(e.oauthAccessToken)}catch{return null}}}to.GITHUB_SIGN_IN_METHOD="github.com";to.PROVIDER_ID="github.com";class no extends dh{constructor(){super("twitter.com")}static credential(e,n){return vl._fromParams({providerId:no.PROVIDER_ID,signInMethod:no.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return no.credentialFromTaggedObject(e)}static credentialFromError(e){return no.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return no.credential(n,r)}catch{return null}}}no.TWITTER_SIGN_IN_METHOD="twitter.com";no.PROVIDER_ID="twitter.com";async function hC(t,e){return uh(t,"POST","/v1/accounts:signUp",bo(t,e))}class bl{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,o=!1){const d=await si._fromIdTokenResponse(e,r,o),f=ny(r);return new bl({user:d,providerId:f,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const o=ny(r);return new bl({user:e,providerId:o,_tokenResponse:r,operationType:n})}}function ny(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}class Pg extends vo{constructor(e,n,r,o){super(n.code,n.message),this.operationType=r,this.user=o,Object.setPrototypeOf(this,Pg.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,o){return new Pg(e,n,r,o)}}function Ix(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(d=>{throw d.code==="auth/multi-factor-auth-required"?Pg._fromErrorAndOperation(t,d,e,r):d})}async function fC(t,e,n=!1){const r=await ml(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return bl._forOperation(t,"link",r)}async function pC(t,e,n=!1){const{auth:r}=t;if(mr(r.app))return Promise.reject(Ii(r));const o="reauthenticate";try{const d=await ml(t,Ix(r,o,e,t),n);mt(d.idToken,r,"internal-error");const f=g2(d.idToken);mt(f,r,"internal-error");const{sub:g}=f;return mt(t.uid===g,r,"user-mismatch"),bl._forOperation(t,o,d)}catch(d){throw d?.code==="auth/user-not-found"&&Lr(r,"user-mismatch"),d}}async function Ax(t,e,n=!1){if(mr(t.app))return Promise.reject(Ii(t));const r="signIn",o=await Ix(t,r,e),d=await bl._fromIdTokenResponse(t,r,o);return n||await t._updateCurrentUser(d.user),d}async function gC(t,e){return Ax(yo(t),e)}async function Mx(t){const e=yo(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function mC(t,e,n){if(mr(t.app))return Promise.reject(Ii(t));const r=yo(t),f=await R0(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",hC).catch(b=>{throw b.code==="auth/password-does-not-meet-requirements"&&Mx(t),b}),g=await bl._fromIdTokenResponse(r,"signIn",f);return await r._updateCurrentUser(g.user),g}function vC(t,e,n){return mr(t.app)?Promise.reject(Ii(t)):gC(ws(t),Gc.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&Mx(t),r})}async function bC(t,e){return Di(t,"POST","/v1/accounts:update",e)}async function yC(t,{displayName:e,photoURL:n}){if(e===void 0&&n===void 0)return;const r=ws(t),d={idToken:await r.getIdToken(),displayName:e,photoUrl:n,returnSecureToken:!0},f=await ml(r,bC(r.auth,d));r.displayName=f.displayName||null,r.photoURL=f.photoUrl||null;const g=r.providerData.find(({providerId:b})=>b==="password");g&&(g.displayName=r.displayName,g.photoURL=r.photoURL),await r._updateTokensIfNecessary(f)}function wC(t,e){const n=ws(t);return mr(n.auth.app)?Promise.reject(Ii(n.auth)):xC(n,e)}async function xC(t,e,n){const{auth:r}=t,d={idToken:await t.getIdToken(),returnSecureToken:!0};e&&(d.email=e);const f=await ml(t,rC(r,d));await t._updateTokensIfNecessary(f,!0)}function PC(t,e){return ws(t).setPersistence(e)}function _C(t,e,n,r){return ws(t).onIdTokenChanged(e,n,r)}function kC(t,e,n){return ws(t).beforeAuthStateChanged(e,n)}function NC(t,e,n,r){return ws(t).onAuthStateChanged(e,n,r)}function CC(t){return ws(t).signOut()}const _g="__sak";class Dx{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(_g,"1"),this.storage.removeItem(_g),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}const SC=1e3,RC=10;class Ox extends Dx{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=Sx(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),o=this.localCache[n];r!==o&&e(n,o,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((f,g,b)=>{this.notifyListeners(f,b)});return}const r=e.key;n?this.detachListener():this.stopPolling();const o=()=>{const f=this.storage.getItem(r);!n&&this.localCache[r]===f||this.notifyListeners(r,f)},d=this.storage.getItem(r);$N()&&d!==e.newValue&&e.newValue!==e.oldValue?setTimeout(o,RC):o()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const o of Array.from(r))o(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},SC)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}Ox.type="LOCAL";const Ux=Ox;class Bx extends Dx{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}Bx.type="SESSION";const $x=Bx;function TC(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}class Yg{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(o=>o.isListeningto(e));if(n)return n;const r=new Yg(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:o,data:d}=n.data,f=this.handlersMap[o];if(!f?.size)return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:o});const g=Array.from(f).map(async w=>w(n.origin,d)),b=await TC(g);n.ports[0].postMessage({status:"done",eventId:r,eventType:o,response:b})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Yg.receivers=[];function w2(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}class EC{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const o=typeof MessageChannel<"u"?new MessageChannel:null;if(!o)throw new Error("connection_unavailable");let d,f;return new Promise((g,b)=>{const w=w2("",20);o.port1.start();const k=setTimeout(()=>{b(new Error("unsupported_event"))},r);f={messageChannel:o,onMessage(C){const N=C;if(N.data.eventId===w)switch(N.data.status){case"ack":clearTimeout(k),d=setTimeout(()=>{b(new Error("timeout"))},3e3);break;case"done":clearTimeout(d),g(N.data.response);break;default:clearTimeout(k),clearTimeout(d),b(new Error("invalid_response"));break}}},this.handlers.add(f),o.port1.addEventListener("message",f.onMessage),this.target.postMessage({eventType:e,eventId:w,data:n},[o.port2])}).finally(()=>{f&&this.removeMessageHandler(f)})}}function Ai(){return window}function jC(t){Ai().location.href=t}function Lx(){return typeof Ai().WorkerGlobalScope<"u"&&typeof Ai().importScripts=="function"}async function IC(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function AC(){return navigator?.serviceWorker?.controller||null}function MC(){return Lx()?self:null}const Kx="firebaseLocalStorageDb",DC=1,kg="firebaseLocalStorage",Fx="fbase_key";class hh{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Xg(t,e){return t.transaction([kg],e?"readwrite":"readonly").objectStore(kg)}function OC(){const t=indexedDB.deleteDatabase(Kx);return new hh(t).toPromise()}function T0(){const t=indexedDB.open(Kx,DC);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(kg,{keyPath:Fx})}catch(o){n(o)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(kg)?e(r):(r.close(),await OC(),e(await T0()))})})}async function sy(t,e,n){const r=Xg(t,!0).put({[Fx]:e,value:n});return new hh(r).toPromise()}async function UC(t,e){const n=Xg(t,!1).get(e),r=await new hh(n).toPromise();return r===void 0?null:r.value}function ry(t,e){const n=Xg(t,!0).delete(e);return new hh(n).toPromise()}const BC=800,$C=3;class qx{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await T0(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>$C)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Lx()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Yg._getInstance(MC()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await IC(),!this.activeServiceWorker)return;this.sender=new EC(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||AC()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await T0();return await sy(e,_g,"1"),await ry(e,_g),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>sy(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>UC(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>ry(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(o=>{const d=Xg(o,!1).getAll();return new hh(d).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:o,value:d}of e)r.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(d)&&(this.notifyListeners(o,d),n.push(o));for(const o of Object.keys(this.localCache))this.localCache[o]&&!r.has(o)&&(this.notifyListeners(o,null),n.push(o));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const o of Array.from(r))o(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),BC)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}qx.type="LOCAL";const LC=qx;new ch(3e4,6e4);function Qx(t,e){return e?aa(e):(mt(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}class x2 extends v2{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Cc(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Cc(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Cc(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function KC(t){return Ax(t.auth,new x2(t),t.bypassAuthState)}function FC(t){const{auth:e,user:n}=t;return mt(n,e,"internal-error"),pC(n,new x2(t),t.bypassAuthState)}async function qC(t){const{auth:e,user:n}=t;return mt(n,e,"internal-error"),fC(n,new x2(t),t.bypassAuthState)}class zx{constructor(e,n,r,o,d=!1){this.auth=e,this.resolver=r,this.user=o,this.bypassAuthState=d,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:o,tenantId:d,error:f,type:g}=e;if(f){this.reject(f);return}const b={auth:this.auth,requestUri:n,sessionId:r,tenantId:d||void 0,postBody:o||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(g)(b))}catch(w){this.reject(w)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return KC;case"linkViaPopup":case"linkViaRedirect":return qC;case"reauthViaPopup":case"reauthViaRedirect":return FC;default:Lr(this.auth,"internal-error")}}resolve(e){ua(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){ua(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const QC=new ch(2e3,1e4);async function zC(t,e,n){if(mr(t.app))return Promise.reject(ii(t,"operation-not-supported-in-this-environment"));const r=yo(t);yN(t,e,y2);const o=Qx(r,n);return new ol(r,"signInViaPopup",e,o).executeNotNull()}class ol extends zx{constructor(e,n,r,o,d){super(e,n,o,d),this.provider=r,this.authWindow=null,this.pollId=null,ol.currentPopupAction&&ol.currentPopupAction.cancel(),ol.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return mt(e,this.auth,"internal-error"),e}async onExecution(){ua(this.filter.length===1,"Popup operations only handle one event");const e=w2();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(ii(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(ii(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,ol.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(ii(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,QC.get())};e()}}ol.currentPopupAction=null;const GC="pendingRedirect",tg=new Map;class VC extends zx{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=tg.get(this.auth._key());if(!e){try{const r=await WC(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}tg.set(this.auth._key(),e)}return this.bypassAuthState||tg.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function WC(t,e){const n=XC(e),r=YC(t);if(!await r._isAvailable())return!1;const o=await r._get(n)==="true";return await r._remove(n),o}function HC(t,e){tg.set(t._key(),e)}function YC(t){return aa(t._redirectPersistence)}function XC(t){return eg(GC,t.config.apiKey,t.name)}async function JC(t,e,n=!1){if(mr(t.app))return Promise.reject(Ii(t));const r=yo(t),o=Qx(r,e),f=await new VC(r,o,n).execute();return f&&!n&&(delete f.user._redirectEventId,await r._persistUserIfCurrent(f.user),await r._setRedirectUser(null,e)),f}const ZC=600*1e3;class eS{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!tS(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){if(e.error&&!Gx(e)){const r=e.error.code?.split("auth/")[1]||"internal-error";n.onError(ii(this.auth,r))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=ZC&&this.cachedEventUids.clear(),this.cachedEventUids.has(iy(e))}saveEventToCache(e){this.cachedEventUids.add(iy(e)),this.lastProcessedEventTime=Date.now()}}function iy(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function Gx({type:t,error:e}){return t==="unknown"&&e?.code==="auth/no-auth-event"}function tS(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Gx(t);default:return!1}}async function nS(t,e={}){return Di(t,"GET","/v1/projects",e)}const sS=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,rS=/^https?/;async function iS(t){if(t.config.emulator)return;const{authorizedDomains:e}=await nS(t);for(const n of e)try{if(aS(n))return}catch{}Lr(t,"unauthorized-domain")}function aS(t){const e=C0(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const f=new URL(t);return f.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&f.hostname===r}if(!rS.test(n))return!1;if(sS.test(t))return r===t;const o=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(r)}const oS=new ch(3e4,6e4);function ay(){const t=Ai().___jsl;if(t?.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function lS(t){return new Promise((e,n)=>{function r(){ay(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{ay(),n(ii(t,"network-request-failed"))},timeout:oS.get()})}if(Ai().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(Ai().gapi?.load)r();else{const o=WN("iframefcb");return Ai()[o]=()=>{gapi.load?r():n(ii(t,"network-request-failed"))},Tx(`${VN()}?onload=${o}`).catch(d=>n(d))}}).catch(e=>{throw ng=null,e})}let ng=null;function cS(t){return ng=ng||lS(t),ng}const uS=new ch(5e3,15e3),dS="__/auth/iframe",hS="emulator/auth/iframe",fS={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},pS=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function gS(t){const e=t.config;mt(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?p2(e,hS):`https://${t.config.authDomain}/${dS}`,r={apiKey:e.apiKey,appName:t.name,v:zc},o=pS.get(t.config.apiHost);o&&(r.eid=o);const d=t._getFrameworks();return d.length&&(r.fw=d.join(",")),`${n}?${Qc(r).slice(1)}`}async function mS(t){const e=await cS(t),n=Ai().gapi;return mt(n,t,"internal-error"),e.open({where:document.body,url:gS(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:fS,dontclear:!0},r=>new Promise(async(o,d)=>{await r.restyle({setHideOnLeave:!1});const f=ii(t,"network-request-failed"),g=Ai().setTimeout(()=>{d(f)},uS.get());function b(){Ai().clearTimeout(g),o(r)}r.ping(b).then(b,()=>{d(f)})}))}const vS={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},bS=500,yS=600,wS="_blank",xS="http://localhost";class oy{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function PS(t,e,n,r=bS,o=yS){const d=Math.max((window.screen.availHeight-o)/2,0).toString(),f=Math.max((window.screen.availWidth-r)/2,0).toString();let g="";const b={...vS,width:r.toString(),height:o.toString(),top:d,left:f},w=Xs().toLowerCase();n&&(g=Px(w)?wS:n),wx(w)&&(e=e||xS,b.scrollbars="yes");const k=Object.entries(b).reduce((N,[j,M])=>`${N}${j}=${M},`,"");if(BN(w)&&g!=="_self")return _S(e||"",g),new oy(null);const C=window.open(e||"",g,k);mt(C,t,"popup-blocked");try{C.focus()}catch{}return new oy(C)}function _S(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}const kS="__/auth/handler",NS="emulator/auth/handler",CS=encodeURIComponent("fac");async function ly(t,e,n,r,o,d){mt(t.config.authDomain,t,"auth-domain-config-required"),mt(t.config.apiKey,t,"invalid-api-key");const f={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:zc,eventId:o};if(e instanceof y2){e.setDefaultLanguage(t.languageCode),f.providerId=e.providerId||"",w0(e.getCustomParameters())||(f.customParameters=JSON.stringify(e.getCustomParameters()));for(const[k,C]of Object.entries({}))f[k]=C}if(e instanceof dh){const k=e.getScopes().filter(C=>C!=="");k.length>0&&(f.scopes=k.join(","))}t.tenantId&&(f.tid=t.tenantId);const g=f;for(const k of Object.keys(g))g[k]===void 0&&delete g[k];const b=await t._getAppCheckToken(),w=b?`#${CS}=${encodeURIComponent(b)}`:"";return`${SS(t)}?${Qc(g).slice(1)}${w}`}function SS({config:t}){return t.emulator?p2(t,NS):`https://${t.authDomain}/${kS}`}const W1="webStorageSupport";class RS{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=$x,this._completeRedirectFn=JC,this._overrideRedirectResult=HC}async _openPopup(e,n,r,o){ua(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const d=await ly(e,n,r,C0(),o);return PS(e,d,w2())}async _openRedirect(e,n,r,o){await this._originValidation(e);const d=await ly(e,n,r,C0(),o);return jC(d),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:o,promise:d}=this.eventManagers[n];return o?Promise.resolve(o):(ua(d,"If manager is not set, promise should be"),d)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await mS(e),r=new eS(e);return n.register("authEvent",o=>(mt(o?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(W1,{type:W1},o=>{const d=o?.[0]?.[W1];d!==void 0&&n(!!d),Lr(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=iS(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return Sx()||xx()||m2()}}const Vx=RS;var cy="@firebase/auth",uy="1.11.1";class TS{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){mt(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function ES(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function jS(t){Ec(new gl("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),o=e.getProvider("heartbeat"),d=e.getProvider("app-check-internal"),{apiKey:f,authDomain:g}=r.options;mt(f&&!f.includes(":"),"invalid-api-key",{appName:r.name});const b={apiKey:f,authDomain:g,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Rx(t)},w=new QN(r,o,d,b);return eC(w,n),w},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),Ec(new gl("auth-internal",e=>{const n=yo(e.getProvider("auth").getImmediate());return(r=>new TS(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),oo(cy,uy,ES(t)),oo(cy,uy,"esm2020")}const IS=300,AS=nx("authIdTokenMaxAge")||IS;let dy=null;const MS=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>AS)return;const o=n?.token;dy!==o&&(dy=o,await fetch(t,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))};function DS(t=ux()){const e=d2(t,"auth");if(e.isInitialized())return e.getImmediate();const n=ZN(t,{popupRedirectResolver:Vx,persistence:[LC,Ux,$x]}),r=nx("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const d=new URL(r,location.origin);if(location.origin===d.origin){const f=MS(d.toString());kC(n,f,()=>f(n.currentUser)),_C(n,g=>f(g))}}const o=ex("auth");return o&&tC(n,`http://${o}`),n}function OS(){return document.getElementsByTagName("head")?.[0]??document}zN({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=o=>{const d=ii("internal-error");d.customData=o,n(d)},r.type="text/javascript",r.charset="UTF-8",OS().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});jS("Browser");var US="firebase",BS="12.6.0";oo(US,BS,"app");var hy={};const fy="@firebase/database",py="1.1.0";let Wx="";function $S(t){Wx=t}class LS{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,n){n==null?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),is(n))}get(e){const n=this.domStorage_.getItem(this.prefixedName_(e));return n==null?null:zd(n)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}class KS{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,n){n==null?delete this.cache_[e]:this.cache_[e]=n}get(e){return Mi(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}const Hx=function(t){try{if(typeof window<"u"&&typeof window[t]<"u"){const e=window[t];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new LS(e)}}catch{}return new KS},ll=Hx("localStorage"),FS=Hx("sessionStorage");const Sc=new c2("@firebase/database"),qS=(function(){let t=1;return function(){return t++}})(),Yx=function(t){const e=l5(t),n=new r5;n.update(e);const r=n.digest();return a2.encodeByteArray(r)},fh=function(...t){let e="";for(let n=0;n<t.length;n++){const r=t[n];Array.isArray(r)||r&&typeof r=="object"&&typeof r.length=="number"?e+=fh.apply(null,r):typeof r=="object"?e+=is(r):e+=r,e+=" "}return e};let Ud=null,gy=!0;const QS=function(t,e){Ue(!0,"Can't turn on custom loggers persistently."),Sc.logLevel=ln.VERBOSE,Ud=Sc.log.bind(Sc)},Ss=function(...t){if(gy===!0&&(gy=!1,Ud===null&&FS.get("logging_enabled")===!0&&QS()),Ud){const e=fh.apply(null,t);Ud(e)}},ph=function(t){return function(...e){Ss(t,...e)}},E0=function(...t){const e="FIREBASE INTERNAL ERROR: "+fh(...t);Sc.error(e)},da=function(...t){const e=`FIREBASE FATAL ERROR: ${fh(...t)}`;throw Sc.error(e),new Error(e)},Ys=function(...t){const e="FIREBASE WARNING: "+fh(...t);Sc.warn(e)},zS=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&Ys("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},P2=function(t){return typeof t=="number"&&(t!==t||t===Number.POSITIVE_INFINITY||t===Number.NEGATIVE_INFINITY)},GS=function(t){if(document.readyState==="complete")t();else{let e=!1;const n=function(){if(!document.body){setTimeout(n,Math.floor(10));return}e||(e=!0,t())};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&n()}),window.attachEvent("onload",n))}},jc="[MIN_NAME]",yl="[MAX_NAME]",Pl=function(t,e){if(t===e)return 0;if(t===jc||e===yl)return-1;if(e===jc||t===yl)return 1;{const n=my(t),r=my(e);return n!==null?r!==null?n-r===0?t.length-e.length:n-r:-1:r!==null?1:t<e?-1:1}},VS=function(t,e){return t===e?0:t<e?-1:1},Nd=function(t,e){if(e&&t in e)return e[t];throw new Error("Missing required key ("+t+") in object: "+is(e))},_2=function(t){if(typeof t!="object"||t===null)return is(t);const e=[];for(const r in t)e.push(r);e.sort();let n="{";for(let r=0;r<e.length;r++)r!==0&&(n+=","),n+=is(e[r]),n+=":",n+=_2(t[e[r]]);return n+="}",n},Xx=function(t,e){const n=t.length;if(n<=e)return[t];const r=[];for(let o=0;o<n;o+=e)o+e>n?r.push(t.substring(o,n)):r.push(t.substring(o,o+e));return r};function Rs(t,e){for(const n in t)t.hasOwnProperty(n)&&e(n,t[n])}const Jx=function(t){Ue(!P2(t),"Invalid JSON number");const e=11,n=52,r=(1<<e-1)-1;let o,d,f,g,b;t===0?(d=0,f=0,o=1/t===-1/0?1:0):(o=t<0,t=Math.abs(t),t>=Math.pow(2,1-r)?(g=Math.min(Math.floor(Math.log(t)/Math.LN2),r),d=g+r,f=Math.round(t*Math.pow(2,n-g)-Math.pow(2,n))):(d=0,f=Math.round(t/Math.pow(2,1-r-n))));const w=[];for(b=n;b;b-=1)w.push(f%2?1:0),f=Math.floor(f/2);for(b=e;b;b-=1)w.push(d%2?1:0),d=Math.floor(d/2);w.push(o?1:0),w.reverse();const k=w.join("");let C="";for(b=0;b<64;b+=8){let N=parseInt(k.substr(b,8),2).toString(16);N.length===1&&(N="0"+N),C=C+N}return C.toLowerCase()},WS=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},HS=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"};function YS(t,e){let n="Unknown Error";t==="too_big"?n="The data requested exceeds the maximum size that can be accessed with a single request.":t==="permission_denied"?n="Client doesn't have permission to access the desired data.":t==="unavailable"&&(n="The service is unavailable");const r=new Error(t+" at "+e._path.toString()+": "+n);return r.code=t.toUpperCase(),r}const XS=new RegExp("^-?(0*)\\d{1,10}$"),JS=-2147483648,ZS=2147483647,my=function(t){if(XS.test(t)){const e=Number(t);if(e>=JS&&e<=ZS)return e}return null},Vc=function(t){try{t()}catch(e){setTimeout(()=>{const n=e.stack||"";throw Ys("Exception was thrown by user callback.",n),e},Math.floor(0))}},e6=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},Bd=function(t,e){const n=setTimeout(t,e);return typeof n=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(n):typeof n=="object"&&n.unref&&n.unref(),n};class t6{constructor(e,n){this.appCheckProvider=n,this.appName=e.name,mr(e)&&e.settings.appCheckToken&&(this.serverAppAppCheckToken=e.settings.appCheckToken),this.appCheck=n?.getImmediate({optional:!0}),this.appCheck||n?.get().then(r=>this.appCheck=r)}getToken(e){if(this.serverAppAppCheckToken){if(e)throw new Error("Attempted reuse of `FirebaseServerApp.appCheckToken` after previous usage failed.");return Promise.resolve({token:this.serverAppAppCheckToken})}return this.appCheck?this.appCheck.getToken(e):new Promise((n,r)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(n,r):n(null)},0)})}addTokenChangeListener(e){this.appCheckProvider?.get().then(n=>n.addTokenListener(e))}notifyForInvalidToken(){Ys(`Provided AppCheck credentials for the app named "${this.appName}" are invalid. This usually indicates your app was not initialized correctly.`)}}class n6{constructor(e,n,r){this.appName_=e,this.firebaseOptions_=n,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(o=>this.auth_=o)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(n=>n&&n.code==="auth/token-not-initialized"?(Ss("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(n)):new Promise((n,r)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(n,r):n(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(n=>n.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(n=>n.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',Ys(e)}}class sg{constructor(e){this.accessToken=e}getToken(e){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(e){e(this.accessToken)}removeTokenChangeListener(e){}notifyForInvalidToken(){}}sg.OWNER="owner";const k2="5",Zx="v",eP="s",tP="r",nP="f",sP=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,rP="ls",iP="p",j0="ac",aP="websocket",oP="long_polling";class lP{constructor(e,n,r,o,d=!1,f="",g=!1,b=!1,w=null){this.secure=n,this.namespace=r,this.webSocketOnly=o,this.nodeAdmin=d,this.persistenceKey=f,this.includeNamespaceInQueryParams=g,this.isUsingEmulator=b,this.emulatorOptions=w,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=ll.get("host:"+e)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&ll.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){const e=this.secure?"https://":"http://",n=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${e}${this.host}/${n}`}}function s6(t){return t.host!==t.internalHost||t.isCustomHost()||t.includeNamespaceInQueryParams}function cP(t,e,n){Ue(typeof e=="string","typeof type must == string"),Ue(typeof n=="object","typeof params must == object");let r;if(e===aP)r=(t.secure?"wss://":"ws://")+t.internalHost+"/.ws?";else if(e===oP)r=(t.secure?"https://":"http://")+t.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+e);s6(t)&&(n.ns=t.namespace);const o=[];return Rs(n,(d,f)=>{o.push(d+"="+f)}),r+o.join("&")}class r6{constructor(){this.counters_={}}incrementCounter(e,n=1){Mi(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=n}get(){return U4(this.counters_)}}const H1={},Y1={};function N2(t){const e=t.toString();return H1[e]||(H1[e]=new r6),H1[e]}function i6(t,e){const n=t.toString();return Y1[n]||(Y1[n]=e()),Y1[n]}class a6{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,n){this.closeAfterResponse=e,this.onClose=n,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,n){for(this.pendingResponses[e]=n;this.pendingResponses[this.currentResponseNum];){const r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let o=0;o<r.length;++o)r[o]&&Vc(()=>{this.onMessage_(r[o])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}const vy="start",o6="close",l6="pLPCommand",c6="pRTLPCB",uP="id",dP="pw",hP="ser",u6="cb",d6="seg",h6="ts",f6="d",p6="dframe",fP=1870,pP=30,g6=fP-pP,m6=25e3,v6=3e4;class _c{constructor(e,n,r,o,d,f,g){this.connId=e,this.repoInfo=n,this.applicationId=r,this.appCheckToken=o,this.authToken=d,this.transportSessionId=f,this.lastSessionId=g,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=ph(e),this.stats_=N2(n),this.urlFn=b=>(this.appCheckToken&&(b[j0]=this.appCheckToken),cP(n,oP,b))}open(e,n){this.curSegmentNum=0,this.onDisconnect_=n,this.myPacketOrderer=new a6(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(v6)),GS(()=>{if(this.isClosed_)return;this.scriptTagHolder=new C2((...d)=>{const[f,g,b,w,k]=d;if(this.incrementIncomingBytes_(d),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,f===vy)this.id=g,this.password=b;else if(f===o6)g?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(g,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+f)},(...d)=>{const[f,g]=d;this.incrementIncomingBytes_(d),this.myPacketOrderer.handleResponse(f,g)},()=>{this.onClosed_()},this.urlFn);const r={};r[vy]="t",r[hP]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(r[u6]=this.scriptTagHolder.uniqueCallbackIdentifier),r[Zx]=k2,this.transportSessionId&&(r[eP]=this.transportSessionId),this.lastSessionId&&(r[rP]=this.lastSessionId),this.applicationId&&(r[iP]=this.applicationId),this.appCheckToken&&(r[j0]=this.appCheckToken),typeof location<"u"&&location.hostname&&sP.test(location.hostname)&&(r[tP]=nP);const o=this.urlFn(r);this.log_("Connecting via long-poll to "+o),this.scriptTagHolder.addTag(o,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){_c.forceAllow_=!0}static forceDisallow(){_c.forceDisallow_=!0}static isAvailable(){return _c.forceAllow_?!0:!_c.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!WS()&&!HS()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const n=is(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const r=Jw(n),o=Xx(r,g6);for(let d=0;d<o.length;d++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,o.length,o[d]),this.curSegmentNum++}addDisconnectPingFrame(e,n){this.myDisconnFrame=document.createElement("iframe");const r={};r[p6]="t",r[uP]=e,r[dP]=n,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const n=is(e).length;this.bytesReceived+=n,this.stats_.incrementCounter("bytes_received",n)}}class C2{constructor(e,n,r,o){this.onDisconnect=r,this.urlFn=o,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0;{this.uniqueCallbackIdentifier=qS(),window[l6+this.uniqueCallbackIdentifier]=e,window[c6+this.uniqueCallbackIdentifier]=n,this.myIFrame=C2.createIFrame_();let d="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(d='<script>document.domain="'+document.domain+'";<\/script>');const f="<html><body>"+d+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(f),this.myIFrame.doc.close()}catch(g){Ss("frame writing exception"),g.stack&&Ss(g.stack),Ss(g)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",document.body){document.body.appendChild(e);try{e.contentWindow.document||Ss("No IE domain setting required")}catch{const r=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,n){for(this.myID=e,this.myPW=n,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e[uP]=this.myID,e[dP]=this.myPW,e[hP]=this.currentSerial;let n=this.urlFn(e),r="",o=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+pP+r.length<=fP;){const f=this.pendingSegs.shift();r=r+"&"+d6+o+"="+f.seg+"&"+h6+o+"="+f.ts+"&"+f6+o+"="+f.d,o++}return n=n+r,this.addLongPollTag_(n,this.currentSerial),!0}else return!1}enqueueSegment(e,n,r){this.pendingSegs.push({seg:e,ts:n,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(e,n){this.outstandingRequests.add(n);const r=()=>{this.outstandingRequests.delete(n),this.newRequest_()},o=setTimeout(r,Math.floor(m6)),d=()=>{clearTimeout(o),r()};this.addTag(e,d)}addTag(e,n){setTimeout(()=>{try{if(!this.sendNewPolls)return;const r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){const o=r.readyState;(!o||o==="loaded"||o==="complete")&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),n())},r.onerror=()=>{Ss("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch{}},Math.floor(1))}}const b6=16384,y6=45e3;let Ng=null;typeof MozWebSocket<"u"?Ng=MozWebSocket:typeof WebSocket<"u"&&(Ng=WebSocket);class ni{constructor(e,n,r,o,d,f,g){this.connId=e,this.applicationId=r,this.appCheckToken=o,this.authToken=d,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=ph(this.connId),this.stats_=N2(n),this.connURL=ni.connectionURL_(n,f,g,o,r),this.nodeAdmin=n.nodeAdmin}static connectionURL_(e,n,r,o,d){const f={};return f[Zx]=k2,typeof location<"u"&&location.hostname&&sP.test(location.hostname)&&(f[tP]=nP),n&&(f[eP]=n),r&&(f[rP]=r),o&&(f[j0]=o),d&&(f[iP]=d),cP(e,aP,f)}open(e,n){this.onDisconnect=n,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,ll.set("previous_websocket_failure",!0);try{let r;Y4(),this.mySock=new Ng(this.connURL,[],r)}catch(r){this.log_("Error instantiating WebSocket.");const o=r.message||r.data;o&&this.log_(o),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=r=>{this.handleIncomingFrame(r)},this.mySock.onerror=r=>{this.log_("WebSocket error.  Closing connection.");const o=r.message||r.data;o&&this.log_(o),this.onClosed_()}}start(){}static forceDisallow(){ni.forceDisallow_=!0}static isAvailable(){let e=!1;if(typeof navigator<"u"&&navigator.userAgent){const n=/Android ([0-9]{0,}\.[0-9]{0,})/,r=navigator.userAgent.match(n);r&&r.length>1&&parseFloat(r[1])<4.4&&(e=!0)}return!e&&Ng!==null&&!ni.forceDisallow_}static previouslyFailed(){return ll.isInMemoryStorage||ll.get("previous_websocket_failure")===!0}markConnectionHealthy(){ll.remove("previous_websocket_failure")}appendFrame_(e){if(this.frames.push(e),this.frames.length===this.totalFrames){const n=this.frames.join("");this.frames=null;const r=zd(n);this.onMessage(r)}}handleNewFrameCount_(e){this.totalFrames=e,this.frames=[]}extractFrameCount_(e){if(Ue(this.frames===null,"We already have a frame buffer"),e.length<=6){const n=Number(e);if(!isNaN(n))return this.handleNewFrameCount_(n),null}return this.handleNewFrameCount_(1),e}handleIncomingFrame(e){if(this.mySock===null)return;const n=e.data;if(this.bytesReceived+=n.length,this.stats_.incrementCounter("bytes_received",n.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(n);else{const r=this.extractFrameCount_(n);r!==null&&this.appendFrame_(r)}}send(e){this.resetKeepAlive();const n=is(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const r=Xx(n,b6);r.length>1&&this.sendString_(String(r.length));for(let o=0;o<r.length;o++)this.sendString_(r[o])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(y6))}sendString_(e){try{this.mySock.send(e)}catch(n){this.log_("Exception thrown from WebSocket.send():",n.message||n.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}ni.responsesRequiredToBeHealthy=2;ni.healthyTimeout=3e4;class Wd{static get ALL_TRANSPORTS(){return[_c,ni]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}constructor(e){this.initTransports_(e)}initTransports_(e){const n=ni&&ni.isAvailable();let r=n&&!ni.previouslyFailed();if(e.webSocketOnly&&(n||Ys("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),r=!0),r)this.transports_=[ni];else{const o=this.transports_=[];for(const d of Wd.ALL_TRANSPORTS)d&&d.isAvailable()&&o.push(d);Wd.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}Wd.globalTransportInitialized_=!1;const w6=6e4,x6=5e3,P6=10*1024,_6=100*1024,X1="t",by="d",k6="s",yy="r",N6="e",wy="o",xy="a",Py="n",_y="p",C6="h";class S6{constructor(e,n,r,o,d,f,g,b,w,k){this.id=e,this.repoInfo_=n,this.applicationId_=r,this.appCheckToken_=o,this.authToken_=d,this.onMessage_=f,this.onReady_=g,this.onDisconnect_=b,this.onKill_=w,this.lastSessionId=k,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=ph("c:"+this.id+":"),this.transportManager_=new Wd(n),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(n,r)},Math.floor(0));const o=e.healthyTimeout||0;o>0&&(this.healthyTimeout_=Bd(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>_6?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>P6?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(o)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return n=>{e===this.conn_?this.onConnectionLost_(n):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return n=>{this.state_!==2&&(e===this.rx_?this.onPrimaryMessageReceived_(n):e===this.secondaryConn_?this.onSecondaryMessageReceived_(n):this.log_("message on old connection"))}}sendRequest(e){const n={t:"d",d:e};this.sendData_(n)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if(X1 in e){const n=e[X1];n===xy?this.upgradeIfSecondaryHealthy_():n===yy?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):n===wy&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const n=Nd("t",e),r=Nd("d",e);if(n==="c")this.onSecondaryControl_(r);else if(n==="d")this.pendingDataMessages.push(r);else throw new Error("Unknown protocol layer: "+n)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:_y,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:xy,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:Py,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const n=Nd("t",e),r=Nd("d",e);n==="c"?this.onControl_(r):n==="d"&&this.onDataMessage_(r)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const n=Nd(X1,e);if(by in e){const r=e[by];if(n===C6){const o={...r};this.repoInfo_.isUsingEmulator&&(o.h=this.repoInfo_.host),this.onHandshake_(o)}else if(n===Py){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let o=0;o<this.pendingDataMessages.length;++o)this.onDataMessage_(this.pendingDataMessages[o]);this.pendingDataMessages=[],this.tryCleanupConnection()}else n===k6?this.onConnectionShutdown_(r):n===yy?this.onReset_(r):n===N6?E0("Server Error: "+r):n===wy?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):E0("Unknown control packet command: "+n)}}onHandshake_(e){const n=e.ts,r=e.v,o=e.h;this.sessionId=e.s,this.repoInfo_.host=o,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,n),k2!==r&&Ys("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,r),Bd(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(w6))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,n){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(n,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):Bd(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(x6))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:_y,d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,!e&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(ll.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(e)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class gP{put(e,n,r,o){}merge(e,n,r,o){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,n,r){}onDisconnectMerge(e,n,r){}onDisconnectCancel(e,n){}reportStats(e){}}class mP{constructor(e){this.allowedEvents_=e,this.listeners_={},Ue(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...n){if(Array.isArray(this.listeners_[e])){const r=[...this.listeners_[e]];for(let o=0;o<r.length;o++)r[o].callback.apply(r[o].context,n)}}on(e,n,r){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:n,context:r});const o=this.getInitialEvent(e);o&&n.apply(r,o)}off(e,n,r){this.validateEventType_(e);const o=this.listeners_[e]||[];for(let d=0;d<o.length;d++)if(o[d].callback===n&&(!r||r===o[d].context)){o.splice(d,1);return}}validateEventType_(e){Ue(this.allowedEvents_.find(n=>n===e),"Unknown event: "+e)}}class Cg extends mP{static getInstance(){return new Cg}constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!l2()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}getInitialEvent(e){return Ue(e==="online","Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}const ky=32,Ny=768;class cn{constructor(e,n){if(n===void 0){this.pieces_=e.split("/");let r=0;for(let o=0;o<this.pieces_.length;o++)this.pieces_[o].length>0&&(this.pieces_[r]=this.pieces_[o],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=n}toString(){let e="";for(let n=this.pieceNum_;n<this.pieces_.length;n++)this.pieces_[n]!==""&&(e+="/"+this.pieces_[n]);return e||"/"}}function Ht(){return new cn("")}function Mt(t){return t.pieceNum_>=t.pieces_.length?null:t.pieces_[t.pieceNum_]}function uo(t){return t.pieces_.length-t.pieceNum_}function _n(t){let e=t.pieceNum_;return e<t.pieces_.length&&e++,new cn(t.pieces_,e)}function S2(t){return t.pieceNum_<t.pieces_.length?t.pieces_[t.pieces_.length-1]:null}function R6(t){let e="";for(let n=t.pieceNum_;n<t.pieces_.length;n++)t.pieces_[n]!==""&&(e+="/"+encodeURIComponent(String(t.pieces_[n])));return e||"/"}function Hd(t,e=0){return t.pieces_.slice(t.pieceNum_+e)}function vP(t){if(t.pieceNum_>=t.pieces_.length)return null;const e=[];for(let n=t.pieceNum_;n<t.pieces_.length-1;n++)e.push(t.pieces_[n]);return new cn(e,0)}function On(t,e){const n=[];for(let r=t.pieceNum_;r<t.pieces_.length;r++)n.push(t.pieces_[r]);if(e instanceof cn)for(let r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);else{const r=e.split("/");for(let o=0;o<r.length;o++)r[o].length>0&&n.push(r[o])}return new cn(n,0)}function Ot(t){return t.pieceNum_>=t.pieces_.length}function Hs(t,e){const n=Mt(t),r=Mt(e);if(n===null)return e;if(n===r)return Hs(_n(t),_n(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+t+")")}function T6(t,e){const n=Hd(t,0),r=Hd(e,0);for(let o=0;o<n.length&&o<r.length;o++){const d=Pl(n[o],r[o]);if(d!==0)return d}return n.length===r.length?0:n.length<r.length?-1:1}function R2(t,e){if(uo(t)!==uo(e))return!1;for(let n=t.pieceNum_,r=e.pieceNum_;n<=t.pieces_.length;n++,r++)if(t.pieces_[n]!==e.pieces_[r])return!1;return!0}function Br(t,e){let n=t.pieceNum_,r=e.pieceNum_;if(uo(t)>uo(e))return!1;for(;n<t.pieces_.length;){if(t.pieces_[n]!==e.pieces_[r])return!1;++n,++r}return!0}class E6{constructor(e,n){this.errorPrefix_=n,this.parts_=Hd(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=Wg(this.parts_[r]);bP(this)}}function j6(t,e){t.parts_.length>0&&(t.byteLength_+=1),t.parts_.push(e),t.byteLength_+=Wg(e),bP(t)}function I6(t){const e=t.parts_.pop();t.byteLength_-=Wg(e),t.parts_.length>0&&(t.byteLength_-=1)}function bP(t){if(t.byteLength_>Ny)throw new Error(t.errorPrefix_+"has a key path longer than "+Ny+" bytes ("+t.byteLength_+").");if(t.parts_.length>ky)throw new Error(t.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+ky+") or object contains a cycle "+sl(t))}function sl(t){return t.parts_.length===0?"":"in property '"+t.parts_.join(".")+"'"}class T2 extends mP{static getInstance(){return new T2}constructor(){super(["visible"]);let e,n;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(n="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(n="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(n="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(n="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,n&&document.addEventListener(n,()=>{const r=!document[e];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}getInitialEvent(e){return Ue(e==="visible","Unknown event type: "+e),[this.visible_]}}const Cd=1e3,A6=300*1e3,Cy=30*1e3,M6=1.3,D6=3e4,O6="server_kill",Sy=3;class la extends gP{constructor(e,n,r,o,d,f,g,b){if(super(),this.repoInfo_=e,this.applicationId_=n,this.onDataUpdate_=r,this.onConnectStatus_=o,this.onServerInfoUpdate_=d,this.authTokenProvider_=f,this.appCheckTokenProvider_=g,this.authOverride_=b,this.id=la.nextPersistentConnectionId_++,this.log_=ph("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=Cd,this.maxReconnectDelay_=A6,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,b)throw new Error("Auth override specified in options, but not supported on non Node.js platforms");T2.getInstance().on("visible",this.onVisible_,this),e.host.indexOf("fblocal")===-1&&Cg.getInstance().on("online",this.onOnline_,this)}sendRequest(e,n,r){const o=++this.requestNumber_,d={r:o,a:e,b:n};this.log_(is(d)),Ue(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(d),r&&(this.requestCBHash_[o]=r)}get(e){this.initConnection_();const n=new oh,o={action:"g",request:{p:e._path.toString(),q:e._queryObject},onComplete:f=>{const g=f.d;f.s==="ok"?n.resolve(g):n.reject(g)}};this.outstandingGets_.push(o),this.outstandingGetCount_++;const d=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(d),n.promise}listen(e,n,r,o){this.initConnection_();const d=e._queryIdentifier,f=e._path.toString();this.log_("Listen called for "+f+" "+d),this.listens.has(f)||this.listens.set(f,new Map),Ue(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),Ue(!this.listens.get(f).has(d),"listen() called twice for same path/queryId.");const g={onComplete:o,hashFn:n,query:e,tag:r};this.listens.get(f).set(d,g),this.connected_&&this.sendListen_(g)}sendGet_(e){const n=this.outstandingGets_[e];this.sendRequest("g",n.request,r=>{delete this.outstandingGets_[e],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),n.onComplete&&n.onComplete(r)})}sendListen_(e){const n=e.query,r=n._path.toString(),o=n._queryIdentifier;this.log_("Listen on "+r+" for "+o);const d={p:r},f="q";e.tag&&(d.q=n._queryObject,d.t=e.tag),d.h=e.hashFn(),this.sendRequest(f,d,g=>{const b=g.d,w=g.s;la.warnOnListenWarnings_(b,n),(this.listens.get(r)&&this.listens.get(r).get(o))===e&&(this.log_("listen response",g),w!=="ok"&&this.removeListen_(r,o),e.onComplete&&e.onComplete(w,b))})}static warnOnListenWarnings_(e,n){if(e&&typeof e=="object"&&Mi(e,"w")){const r=Tc(e,"w");if(Array.isArray(r)&&~r.indexOf("no_index")){const o='".indexOn": "'+n._queryParams.getIndex().toString()+'"',d=n._path.toString();Ys(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${o} at ${d} to your security rules for better performance.`)}}}refreshAuthToken(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(e)}reduceReconnectDelayIfAdminCredential_(e){(e&&e.length===40||s5(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=Cy)}refreshAppCheckToken(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const e=this.authToken_,n=n5(e)?"auth":"gauth",r={cred:e};this.authOverride_===null?r.noauth=!0:typeof this.authOverride_=="object"&&(r.authvar=this.authOverride_),this.sendRequest(n,r,o=>{const d=o.s,f=o.d||"error";this.authToken_===e&&(d==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(d,f))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},e=>{const n=e.s,r=e.d||"error";n==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(n,r)})}unlisten(e,n){const r=e._path.toString(),o=e._queryIdentifier;this.log_("Unlisten called for "+r+" "+o),Ue(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(r,o)&&this.connected_&&this.sendUnlisten_(r,o,e._queryObject,n)}sendUnlisten_(e,n,r,o){this.log_("Unlisten on "+e+" for "+n);const d={p:e},f="n";o&&(d.q=r,d.t=o),this.sendRequest(f,d)}onDisconnectPut(e,n,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,n,r):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:n,onComplete:r})}onDisconnectMerge(e,n,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,n,r):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:n,onComplete:r})}onDisconnectCancel(e,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:n})}sendOnDisconnect_(e,n,r,o){const d={p:n,d:r};this.log_("onDisconnect "+e,d),this.sendRequest(e,d,f=>{o&&setTimeout(()=>{o(f.s,f.d)},Math.floor(0))})}put(e,n,r,o){this.putInternal("p",e,n,r,o)}merge(e,n,r,o){this.putInternal("m",e,n,r,o)}putInternal(e,n,r,o,d){this.initConnection_();const f={p:n,d:r};d!==void 0&&(f.h=d),this.outstandingPuts_.push({action:e,request:f,onComplete:o}),this.outstandingPutCount_++;const g=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(g):this.log_("Buffering put: "+n)}sendPut_(e){const n=this.outstandingPuts_[e].action,r=this.outstandingPuts_[e].request,o=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(n,r,d=>{this.log_(n+" response",d),delete this.outstandingPuts_[e],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),o&&o(d.s,d.d)})}reportStats(e){if(this.connected_){const n={c:e};this.log_("reportStats",n),this.sendRequest("s",n,r=>{if(r.s!=="ok"){const d=r.d;this.log_("reportStats","Error sending stats: "+d)}})}}onDataMessage_(e){if("r"in e){this.log_("from server: "+is(e));const n=e.r,r=this.requestCBHash_[n];r&&(delete this.requestCBHash_[n],r(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}onDataPush_(e,n){this.log_("handleServerMessage",e,n),e==="d"?this.onDataUpdate_(n.p,n.d,!1,n.t):e==="m"?this.onDataUpdate_(n.p,n.d,!0,n.t):e==="c"?this.onListenRevoked_(n.p,n.q):e==="ac"?this.onAuthRevoked_(n.s,n.d):e==="apc"?this.onAppCheckRevoked_(n.s,n.d):e==="sd"?this.onSecurityDebugPacket_(n):E0("Unrecognized action received from server: "+is(e)+`
Are you using the latest client?`)}onReady_(e,n){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(e),this.lastSessionId=n,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(e){Ue(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(e))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Cd,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}onOnline_(e){e?(this.log_("Browser went online."),this.reconnectDelay_=Cd,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>D6&&(this.reconnectDelay_=Cd),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());const e=Math.max(0,new Date().getTime()-this.lastConnectionAttemptTime_);let n=Math.max(0,this.reconnectDelay_-e);n=Math.random()*n,this.log_("Trying to reconnect in "+n+"ms"),this.scheduleConnect_(n),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*M6)}this.onConnectStatus_(!1)}async establishConnection_(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;const e=this.onDataMessage_.bind(this),n=this.onReady_.bind(this),r=this.onRealtimeDisconnect_.bind(this),o=this.id+":"+la.nextConnectionId_++,d=this.lastSessionId;let f=!1,g=null;const b=function(){g?g.close():(f=!0,r())},w=function(C){Ue(g,"sendRequest call when we're not connected not allowed."),g.sendRequest(C)};this.realtime_={close:b,sendRequest:w};const k=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{const[C,N]=await Promise.all([this.authTokenProvider_.getToken(k),this.appCheckTokenProvider_.getToken(k)]);f?Ss("getToken() completed but was canceled"):(Ss("getToken() completed. Creating connection."),this.authToken_=C&&C.accessToken,this.appCheckToken_=N&&N.token,g=new S6(o,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,e,n,r,j=>{Ys(j+" ("+this.repoInfo_.toString()+")"),this.interrupt(O6)},d))}catch(C){this.log_("Failed to get token: "+C),f||(this.repoInfo_.nodeAdmin&&Ys(C),b())}}}interrupt(e){Ss("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(e){Ss("Resuming connection for reason: "+e),delete this.interruptReasons_[e],w0(this.interruptReasons_)&&(this.reconnectDelay_=Cd,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(e){const n=e-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:n})}cancelSentTransactions_(){for(let e=0;e<this.outstandingPuts_.length;e++){const n=this.outstandingPuts_[e];n&&"h"in n.request&&n.queued&&(n.onComplete&&n.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(e,n){let r;n?r=n.map(d=>_2(d)).join("$"):r="default";const o=this.removeListen_(e,r);o&&o.onComplete&&o.onComplete("permission_denied")}removeListen_(e,n){const r=new cn(e).toString();let o;if(this.listens.has(r)){const d=this.listens.get(r);o=d.get(n),d.delete(n),d.size===0&&this.listens.delete(r)}else o=void 0;return o}onAuthRevoked_(e,n){Ss("Auth token revoked: "+e+"/"+n),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(e==="invalid_token"||e==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=Sy&&(this.reconnectDelay_=Cy,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(e,n){Ss("App check token revoked: "+e+"/"+n),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(e==="invalid_token"||e==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=Sy&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const e of this.listens.values())for(const n of e.values())this.sendListen_(n);for(let e=0;e<this.outstandingPuts_.length;e++)this.outstandingPuts_[e]&&this.sendPut_(e);for(;this.onDisconnectRequestQueue_.length;){const e=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(e.action,e.pathString,e.data,e.onComplete)}for(let e=0;e<this.outstandingGets_.length;e++)this.outstandingGets_[e]&&this.sendGet_(e)}sendConnectStats_(){const e={};let n="js";e["sdk."+n+"."+Wx.replace(/\./g,"-")]=1,l2()?e["framework.cordova"]=1:ix()&&(e["framework.reactnative"]=1),this.reportStats(e)}shouldReconnect_(){const e=Cg.getInstance().currentlyOnline();return w0(this.interruptReasons_)&&e}}la.nextPersistentConnectionId_=0;la.nextConnectionId_=0;class Dt{constructor(e,n){this.name=e,this.node=n}static Wrap(e,n){return new Dt(e,n)}}class Jg{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,n){const r=new Dt(jc,e),o=new Dt(jc,n);return this.compare(r,o)!==0}minPost(){return Dt.MIN}}let qp;class yP extends Jg{static get __EMPTY_NODE(){return qp}static set __EMPTY_NODE(e){qp=e}compare(e,n){return Pl(e.name,n.name)}isDefinedOn(e){throw Fc("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,n){return!1}minPost(){return Dt.MIN}maxPost(){return new Dt(yl,qp)}makePost(e,n){return Ue(typeof e=="string","KeyIndex indexValue must always be a string."),new Dt(e,qp)}toString(){return".key"}}const Rc=new yP;class Qp{constructor(e,n,r,o,d=null){this.isReverse_=o,this.resultGenerator_=d,this.nodeStack_=[];let f=1;for(;!e.isEmpty();)if(e=e,f=n?r(e.key,n):1,o&&(f*=-1),f<0)this.isReverse_?e=e.left:e=e.right;else if(f===0){this.nodeStack_.push(e);break}else this.nodeStack_.push(e),this.isReverse_?e=e.right:e=e.left}getNext(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_.pop(),n;if(this.resultGenerator_?n=this.resultGenerator_(e.key,e.value):n={key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return n}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}class ys{constructor(e,n,r,o,d){this.key=e,this.value=n,this.color=r??ys.RED,this.left=o??br.EMPTY_NODE,this.right=d??br.EMPTY_NODE}copy(e,n,r,o,d){return new ys(e??this.key,n??this.value,r??this.color,o??this.left,d??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let o=this;const d=r(e,o.key);return d<0?o=o.copy(null,null,null,o.left.insert(e,n,r),null):d===0?o=o.copy(null,n,null,null,null):o=o.copy(null,null,null,null,o.right.insert(e,n,r)),o.fixUp_()}removeMin_(){if(this.left.isEmpty())return br.EMPTY_NODE;let e=this;return!e.left.isRed_()&&!e.left.left.isRed_()&&(e=e.moveRedLeft_()),e=e.copy(null,null,null,e.left.removeMin_(),null),e.fixUp_()}remove(e,n){let r,o;if(r=this,n(e,r.key)<0)!r.left.isEmpty()&&!r.left.isRed_()&&!r.left.left.isRed_()&&(r=r.moveRedLeft_()),r=r.copy(null,null,null,r.left.remove(e,n),null);else{if(r.left.isRed_()&&(r=r.rotateRight_()),!r.right.isEmpty()&&!r.right.isRed_()&&!r.right.left.isRed_()&&(r=r.moveRedRight_()),n(e,r.key)===0){if(r.right.isEmpty())return br.EMPTY_NODE;o=r.right.min_(),r=r.copy(o.key,o.value,null,null,r.right.removeMin_())}r=r.copy(null,null,null,null,r.right.remove(e,n))}return r.fixUp_()}isRed_(){return this.color}fixUp_(){let e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}moveRedLeft_(){let e=this.colorFlip_();return e.right.left.isRed_()&&(e=e.copy(null,null,null,null,e.right.rotateRight_()),e=e.rotateLeft_(),e=e.colorFlip_()),e}moveRedRight_(){let e=this.colorFlip_();return e.left.left.isRed_()&&(e=e.rotateRight_(),e=e.colorFlip_()),e}rotateLeft_(){const e=this.copy(null,null,ys.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight_(){const e=this.copy(null,null,ys.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip_(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth_(){const e=this.check_();return Math.pow(2,e)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}}ys.RED=!0;ys.BLACK=!1;class U6{copy(e,n,r,o,d){return this}insert(e,n,r){return new ys(e,n,null)}remove(e,n){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}}class br{constructor(e,n=br.EMPTY_NODE){this.comparator_=e,this.root_=n}insert(e,n){return new br(this.comparator_,this.root_.insert(e,n,this.comparator_).copy(null,null,ys.BLACK,null,null))}remove(e){return new br(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,ys.BLACK,null,null))}get(e){let n,r=this.root_;for(;!r.isEmpty();){if(n=this.comparator_(e,r.key),n===0)return r.value;n<0?r=r.left:n>0&&(r=r.right)}return null}getPredecessorKey(e){let n,r=this.root_,o=null;for(;!r.isEmpty();)if(n=this.comparator_(e,r.key),n===0){if(r.left.isEmpty())return o?o.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}else n<0?r=r.left:n>0&&(o=r,r=r.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new Qp(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,n){return new Qp(this.root_,e,this.comparator_,!1,n)}getReverseIteratorFrom(e,n){return new Qp(this.root_,e,this.comparator_,!0,n)}getReverseIterator(e){return new Qp(this.root_,null,this.comparator_,!0,e)}}br.EMPTY_NODE=new U6;function B6(t,e){return Pl(t.name,e.name)}function E2(t,e){return Pl(t,e)}let I0;function $6(t){I0=t}const wP=function(t){return typeof t=="number"?"number:"+Jx(t):"string:"+t},xP=function(t){if(t.isLeafNode()){const e=t.val();Ue(typeof e=="string"||typeof e=="number"||typeof e=="object"&&Mi(e,".sv"),"Priority must be a string or number.")}else Ue(t===I0||t.isEmpty(),"priority of unexpected type.");Ue(t===I0||t.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let Ry;class bs{static set __childrenNodeConstructor(e){Ry=e}static get __childrenNodeConstructor(){return Ry}constructor(e,n=bs.__childrenNodeConstructor.EMPTY_NODE){this.value_=e,this.priorityNode_=n,this.lazyHash_=null,Ue(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),xP(this.priorityNode_)}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(e){return new bs(this.value_,e)}getImmediateChild(e){return e===".priority"?this.priorityNode_:bs.__childrenNodeConstructor.EMPTY_NODE}getChild(e){return Ot(e)?this:Mt(e)===".priority"?this.priorityNode_:bs.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(e,n){return null}updateImmediateChild(e,n){return e===".priority"?this.updatePriority(n):n.isEmpty()&&e!==".priority"?this:bs.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,n).updatePriority(this.priorityNode_)}updateChild(e,n){const r=Mt(e);return r===null?n:n.isEmpty()&&r!==".priority"?this:(Ue(r!==".priority"||uo(e)===1,".priority must be the last token in a path"),this.updateImmediateChild(r,bs.__childrenNodeConstructor.EMPTY_NODE.updateChild(_n(e),n)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(e,n){return!1}val(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let e="";this.priorityNode_.isEmpty()||(e+="priority:"+wP(this.priorityNode_.val())+":");const n=typeof this.value_;e+=n+":",n==="number"?e+=Jx(this.value_):e+=this.value_,this.lazyHash_=Yx(e)}return this.lazyHash_}getValue(){return this.value_}compareTo(e){return e===bs.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof bs.__childrenNodeConstructor?-1:(Ue(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))}compareToLeafNode_(e){const n=typeof e.value_,r=typeof this.value_,o=bs.VALUE_TYPE_ORDER.indexOf(n),d=bs.VALUE_TYPE_ORDER.indexOf(r);return Ue(o>=0,"Unknown leaf type: "+n),Ue(d>=0,"Unknown leaf type: "+r),o===d?r==="object"?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:d-o}withIndex(){return this}isIndexed(){return!0}equals(e){if(e===this)return!0;if(e.isLeafNode()){const n=e;return this.value_===n.value_&&this.priorityNode_.equals(n.priorityNode_)}else return!1}}bs.VALUE_TYPE_ORDER=["object","boolean","number","string"];let PP,_P;function L6(t){PP=t}function K6(t){_P=t}class F6 extends Jg{compare(e,n){const r=e.node.getPriority(),o=n.node.getPriority(),d=r.compareTo(o);return d===0?Pl(e.name,n.name):d}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,n){return!e.getPriority().equals(n.getPriority())}minPost(){return Dt.MIN}maxPost(){return new Dt(yl,new bs("[PRIORITY-POST]",_P))}makePost(e,n){const r=PP(e);return new Dt(n,new bs("[PRIORITY-POST]",r))}toString(){return".priority"}}const Un=new F6;const q6=Math.log(2);class Q6{constructor(e){const n=d=>parseInt(Math.log(d)/q6,10),r=d=>parseInt(Array(d+1).join("1"),2);this.count=n(e+1),this.current_=this.count-1;const o=r(this.count);this.bits_=e+1&o}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const Sg=function(t,e,n,r){t.sort(e);const o=function(b,w){const k=w-b;let C,N;if(k===0)return null;if(k===1)return C=t[b],N=n?n(C):C,new ys(N,C.node,ys.BLACK,null,null);{const j=parseInt(k/2,10)+b,M=o(b,j),$=o(j+1,w);return C=t[j],N=n?n(C):C,new ys(N,C.node,ys.BLACK,M,$)}},d=function(b){let w=null,k=null,C=t.length;const N=function(M,$){const Q=C-M,ae=C;C-=M;const X=o(Q+1,ae),P=t[Q],W=n?n(P):P;j(new ys(W,P.node,$,null,X))},j=function(M){w?(w.left=M,w=M):(k=M,w=M)};for(let M=0;M<b.count;++M){const $=b.nextBitIsOne(),Q=Math.pow(2,b.count-(M+1));$?N(Q,ys.BLACK):(N(Q,ys.BLACK),N(Q,ys.RED))}return k},f=new Q6(t.length),g=d(f);return new br(r||e,g)};let J1;const xc={};class oa{static get Default(){return Ue(xc&&Un,"ChildrenNode.ts has not been loaded"),J1=J1||new oa({".priority":xc},{".priority":Un}),J1}constructor(e,n){this.indexes_=e,this.indexSet_=n}get(e){const n=Tc(this.indexes_,e);if(!n)throw new Error("No index defined for "+e);return n instanceof br?n:null}hasIndex(e){return Mi(this.indexSet_,e.toString())}addIndex(e,n){Ue(e!==Rc,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const r=[];let o=!1;const d=n.getIterator(Dt.Wrap);let f=d.getNext();for(;f;)o=o||e.isDefinedOn(f.node),r.push(f),f=d.getNext();let g;o?g=Sg(r,e.getCompare()):g=xc;const b=e.toString(),w={...this.indexSet_};w[b]=e;const k={...this.indexes_};return k[b]=g,new oa(k,w)}addToIndexes(e,n){const r=vg(this.indexes_,(o,d)=>{const f=Tc(this.indexSet_,d);if(Ue(f,"Missing index implementation for "+d),o===xc)if(f.isDefinedOn(e.node)){const g=[],b=n.getIterator(Dt.Wrap);let w=b.getNext();for(;w;)w.name!==e.name&&g.push(w),w=b.getNext();return g.push(e),Sg(g,f.getCompare())}else return xc;else{const g=n.get(e.name);let b=o;return g&&(b=b.remove(new Dt(e.name,g))),b.insert(e,e.node)}});return new oa(r,this.indexSet_)}removeFromIndexes(e,n){const r=vg(this.indexes_,o=>{if(o===xc)return o;{const d=n.get(e.name);return d?o.remove(new Dt(e.name,d)):o}});return new oa(r,this.indexSet_)}}let Sd;class vt{static get EMPTY_NODE(){return Sd||(Sd=new vt(new br(E2),null,oa.Default))}constructor(e,n,r){this.children_=e,this.priorityNode_=n,this.indexMap_=r,this.lazyHash_=null,this.priorityNode_&&xP(this.priorityNode_),this.children_.isEmpty()&&Ue(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}isLeafNode(){return!1}getPriority(){return this.priorityNode_||Sd}updatePriority(e){return this.children_.isEmpty()?this:new vt(this.children_,e,this.indexMap_)}getImmediateChild(e){if(e===".priority")return this.getPriority();{const n=this.children_.get(e);return n===null?Sd:n}}getChild(e){const n=Mt(e);return n===null?this:this.getImmediateChild(n).getChild(_n(e))}hasChild(e){return this.children_.get(e)!==null}updateImmediateChild(e,n){if(Ue(n,"We should always be passing snapshot nodes"),e===".priority")return this.updatePriority(n);{const r=new Dt(e,n);let o,d;n.isEmpty()?(o=this.children_.remove(e),d=this.indexMap_.removeFromIndexes(r,this.children_)):(o=this.children_.insert(e,n),d=this.indexMap_.addToIndexes(r,this.children_));const f=o.isEmpty()?Sd:this.priorityNode_;return new vt(o,f,d)}}updateChild(e,n){const r=Mt(e);if(r===null)return n;{Ue(Mt(e)!==".priority"||uo(e)===1,".priority must be the last token in a path");const o=this.getImmediateChild(r).updateChild(_n(e),n);return this.updateImmediateChild(r,o)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(e){if(this.isEmpty())return null;const n={};let r=0,o=0,d=!0;if(this.forEachChild(Un,(f,g)=>{n[f]=g.val(e),r++,d&&vt.INTEGER_REGEXP_.test(f)?o=Math.max(o,Number(f)):d=!1}),!e&&d&&o<2*r){const f=[];for(const g in n)f[g]=n[g];return f}else return e&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n}hash(){if(this.lazyHash_===null){let e="";this.getPriority().isEmpty()||(e+="priority:"+wP(this.getPriority().val())+":"),this.forEachChild(Un,(n,r)=>{const o=r.hash();o!==""&&(e+=":"+n+":"+o)}),this.lazyHash_=e===""?"":Yx(e)}return this.lazyHash_}getPredecessorChildName(e,n,r){const o=this.resolveIndex_(r);if(o){const d=o.getPredecessorKey(new Dt(e,n));return d?d.name:null}else return this.children_.getPredecessorKey(e)}getFirstChildName(e){const n=this.resolveIndex_(e);if(n){const r=n.minKey();return r&&r.name}else return this.children_.minKey()}getFirstChild(e){const n=this.getFirstChildName(e);return n?new Dt(n,this.children_.get(n)):null}getLastChildName(e){const n=this.resolveIndex_(e);if(n){const r=n.maxKey();return r&&r.name}else return this.children_.maxKey()}getLastChild(e){const n=this.getLastChildName(e);return n?new Dt(n,this.children_.get(n)):null}forEachChild(e,n){const r=this.resolveIndex_(e);return r?r.inorderTraversal(o=>n(o.name,o.node)):this.children_.inorderTraversal(n)}getIterator(e){return this.getIteratorFrom(e.minPost(),e)}getIteratorFrom(e,n){const r=this.resolveIndex_(n);if(r)return r.getIteratorFrom(e,o=>o);{const o=this.children_.getIteratorFrom(e.name,Dt.Wrap);let d=o.peek();for(;d!=null&&n.compare(d,e)<0;)o.getNext(),d=o.peek();return o}}getReverseIterator(e){return this.getReverseIteratorFrom(e.maxPost(),e)}getReverseIteratorFrom(e,n){const r=this.resolveIndex_(n);if(r)return r.getReverseIteratorFrom(e,o=>o);{const o=this.children_.getReverseIteratorFrom(e.name,Dt.Wrap);let d=o.peek();for(;d!=null&&n.compare(d,e)>0;)o.getNext(),d=o.peek();return o}}compareTo(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===gh?-1:0}withIndex(e){if(e===Rc||this.indexMap_.hasIndex(e))return this;{const n=this.indexMap_.addIndex(e,this.children_);return new vt(this.children_,this.priorityNode_,n)}}isIndexed(e){return e===Rc||this.indexMap_.hasIndex(e)}equals(e){if(e===this)return!0;if(e.isLeafNode())return!1;{const n=e;if(this.getPriority().equals(n.getPriority()))if(this.children_.count()===n.children_.count()){const r=this.getIterator(Un),o=n.getIterator(Un);let d=r.getNext(),f=o.getNext();for(;d&&f;){if(d.name!==f.name||!d.node.equals(f.node))return!1;d=r.getNext(),f=o.getNext()}return d===null&&f===null}else return!1;else return!1}}resolveIndex_(e){return e===Rc?null:this.indexMap_.get(e.toString())}}vt.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;class z6 extends vt{constructor(){super(new br(E2),vt.EMPTY_NODE,oa.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return vt.EMPTY_NODE}isEmpty(){return!1}}const gh=new z6;Object.defineProperties(Dt,{MIN:{value:new Dt(jc,vt.EMPTY_NODE)},MAX:{value:new Dt(yl,gh)}});yP.__EMPTY_NODE=vt.EMPTY_NODE;bs.__childrenNodeConstructor=vt;$6(gh);K6(gh);const G6=!0;function rs(t,e=null){if(t===null)return vt.EMPTY_NODE;if(typeof t=="object"&&".priority"in t&&(e=t[".priority"]),Ue(e===null||typeof e=="string"||typeof e=="number"||typeof e=="object"&&".sv"in e,"Invalid priority type found: "+typeof e),typeof t=="object"&&".value"in t&&t[".value"]!==null&&(t=t[".value"]),typeof t!="object"||".sv"in t){const n=t;return new bs(n,rs(e))}if(!(t instanceof Array)&&G6){const n=[];let r=!1;if(Rs(t,(f,g)=>{if(f.substring(0,1)!=="."){const b=rs(g);b.isEmpty()||(r=r||!b.getPriority().isEmpty(),n.push(new Dt(f,b)))}}),n.length===0)return vt.EMPTY_NODE;const d=Sg(n,B6,f=>f.name,E2);if(r){const f=Sg(n,Un.getCompare());return new vt(d,rs(e),new oa({".priority":f},{".priority":Un}))}else return new vt(d,rs(e),oa.Default)}else{let n=vt.EMPTY_NODE;return Rs(t,(r,o)=>{if(Mi(t,r)&&r.substring(0,1)!=="."){const d=rs(o);(d.isLeafNode()||!d.isEmpty())&&(n=n.updateImmediateChild(r,d))}}),n.updatePriority(rs(e))}}L6(rs);class V6 extends Jg{constructor(e){super(),this.indexPath_=e,Ue(!Ot(e)&&Mt(e)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,n){const r=this.extractChild(e.node),o=this.extractChild(n.node),d=r.compareTo(o);return d===0?Pl(e.name,n.name):d}makePost(e,n){const r=rs(e),o=vt.EMPTY_NODE.updateChild(this.indexPath_,r);return new Dt(n,o)}maxPost(){const e=vt.EMPTY_NODE.updateChild(this.indexPath_,gh);return new Dt(yl,e)}toString(){return Hd(this.indexPath_,0).join("/")}}class W6 extends Jg{compare(e,n){const r=e.node.compareTo(n.node);return r===0?Pl(e.name,n.name):r}isDefinedOn(e){return!0}indexedValueChanged(e,n){return!e.equals(n)}minPost(){return Dt.MIN}maxPost(){return Dt.MAX}makePost(e,n){const r=rs(e);return new Dt(n,r)}toString(){return".value"}}const H6=new W6;function kP(t){return{type:"value",snapshotNode:t}}function Ic(t,e){return{type:"child_added",snapshotNode:e,childName:t}}function Yd(t,e){return{type:"child_removed",snapshotNode:e,childName:t}}function Xd(t,e,n){return{type:"child_changed",snapshotNode:e,childName:t,oldSnap:n}}function Y6(t,e){return{type:"child_moved",snapshotNode:e,childName:t}}class j2{constructor(e){this.index_=e}updateChild(e,n,r,o,d,f){Ue(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const g=e.getImmediateChild(n);return g.getChild(o).equals(r.getChild(o))&&g.isEmpty()===r.isEmpty()||(f!=null&&(r.isEmpty()?e.hasChild(n)?f.trackChildChange(Yd(n,g)):Ue(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):g.isEmpty()?f.trackChildChange(Ic(n,r)):f.trackChildChange(Xd(n,r,g))),e.isLeafNode()&&r.isEmpty())?e:e.updateImmediateChild(n,r).withIndex(this.index_)}updateFullNode(e,n,r){return r!=null&&(e.isLeafNode()||e.forEachChild(Un,(o,d)=>{n.hasChild(o)||r.trackChildChange(Yd(o,d))}),n.isLeafNode()||n.forEachChild(Un,(o,d)=>{if(e.hasChild(o)){const f=e.getImmediateChild(o);f.equals(d)||r.trackChildChange(Xd(o,d,f))}else r.trackChildChange(Ic(o,d))})),n.withIndex(this.index_)}updatePriority(e,n){return e.isEmpty()?vt.EMPTY_NODE:e.updatePriority(n)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}class Jd{constructor(e){this.indexedFilter_=new j2(e.getIndex()),this.index_=e.getIndex(),this.startPost_=Jd.getStartPost_(e),this.endPost_=Jd.getEndPost_(e),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){const n=this.startIsInclusive_?this.index_.compare(this.getStartPost(),e)<=0:this.index_.compare(this.getStartPost(),e)<0,r=this.endIsInclusive_?this.index_.compare(e,this.getEndPost())<=0:this.index_.compare(e,this.getEndPost())<0;return n&&r}updateChild(e,n,r,o,d,f){return this.matches(new Dt(n,r))||(r=vt.EMPTY_NODE),this.indexedFilter_.updateChild(e,n,r,o,d,f)}updateFullNode(e,n,r){n.isLeafNode()&&(n=vt.EMPTY_NODE);let o=n.withIndex(this.index_);o=o.updatePriority(vt.EMPTY_NODE);const d=this;return n.forEachChild(Un,(f,g)=>{d.matches(new Dt(f,g))||(o=o.updateImmediateChild(f,vt.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,o,r)}updatePriority(e,n){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const n=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),n)}else return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const n=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),n)}else return e.getIndex().maxPost()}}class X6{constructor(e){this.withinDirectionalStart=n=>this.reverse_?this.withinEndPost(n):this.withinStartPost(n),this.withinDirectionalEnd=n=>this.reverse_?this.withinStartPost(n):this.withinEndPost(n),this.withinStartPost=n=>{const r=this.index_.compare(this.rangedFilter_.getStartPost(),n);return this.startIsInclusive_?r<=0:r<0},this.withinEndPost=n=>{const r=this.index_.compare(n,this.rangedFilter_.getEndPost());return this.endIsInclusive_?r<=0:r<0},this.rangedFilter_=new Jd(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft(),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}updateChild(e,n,r,o,d,f){return this.rangedFilter_.matches(new Dt(n,r))||(r=vt.EMPTY_NODE),e.getImmediateChild(n).equals(r)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,n,r,o,d,f):this.fullLimitUpdateChild_(e,n,r,d,f)}updateFullNode(e,n,r){let o;if(n.isLeafNode()||n.isEmpty())o=vt.EMPTY_NODE.withIndex(this.index_);else if(this.limit_*2<n.numChildren()&&n.isIndexed(this.index_)){o=vt.EMPTY_NODE.withIndex(this.index_);let d;this.reverse_?d=n.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):d=n.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let f=0;for(;d.hasNext()&&f<this.limit_;){const g=d.getNext();if(this.withinDirectionalStart(g))if(this.withinDirectionalEnd(g))o=o.updateImmediateChild(g.name,g.node),f++;else break;else continue}}else{o=n.withIndex(this.index_),o=o.updatePriority(vt.EMPTY_NODE);let d;this.reverse_?d=o.getReverseIterator(this.index_):d=o.getIterator(this.index_);let f=0;for(;d.hasNext();){const g=d.getNext();f<this.limit_&&this.withinDirectionalStart(g)&&this.withinDirectionalEnd(g)?f++:o=o.updateImmediateChild(g.name,vt.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,o,r)}updatePriority(e,n){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,n,r,o,d){let f;if(this.reverse_){const C=this.index_.getCompare();f=(N,j)=>C(j,N)}else f=this.index_.getCompare();const g=e;Ue(g.numChildren()===this.limit_,"");const b=new Dt(n,r),w=this.reverse_?g.getFirstChild(this.index_):g.getLastChild(this.index_),k=this.rangedFilter_.matches(b);if(g.hasChild(n)){const C=g.getImmediateChild(n);let N=o.getChildAfterChild(this.index_,w,this.reverse_);for(;N!=null&&(N.name===n||g.hasChild(N.name));)N=o.getChildAfterChild(this.index_,N,this.reverse_);const j=N==null?1:f(N,b);if(k&&!r.isEmpty()&&j>=0)return d?.trackChildChange(Xd(n,r,C)),g.updateImmediateChild(n,r);{d?.trackChildChange(Yd(n,C));const $=g.updateImmediateChild(n,vt.EMPTY_NODE);return N!=null&&this.rangedFilter_.matches(N)?(d?.trackChildChange(Ic(N.name,N.node)),$.updateImmediateChild(N.name,N.node)):$}}else return r.isEmpty()?e:k&&f(w,b)>=0?(d!=null&&(d.trackChildChange(Yd(w.name,w.node)),d.trackChildChange(Ic(n,r))),g.updateImmediateChild(n,r).updateImmediateChild(w.name,vt.EMPTY_NODE)):e}}class I2{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Un}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return Ue(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return Ue(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:jc}hasEnd(){return this.endSet_}getIndexEndValue(){return Ue(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return Ue(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:yl}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return Ue(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===Un}copy(){const e=new I2;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function J6(t){return t.loadsAllData()?new j2(t.getIndex()):t.hasLimit()?new X6(t):new Jd(t)}function Ty(t){const e={};if(t.isDefault())return e;let n;if(t.index_===Un?n="$priority":t.index_===H6?n="$value":t.index_===Rc?n="$key":(Ue(t.index_ instanceof V6,"Unrecognized index type!"),n=t.index_.toString()),e.orderBy=is(n),t.startSet_){const r=t.startAfterSet_?"startAfter":"startAt";e[r]=is(t.indexStartValue_),t.startNameSet_&&(e[r]+=","+is(t.indexStartName_))}if(t.endSet_){const r=t.endBeforeSet_?"endBefore":"endAt";e[r]=is(t.indexEndValue_),t.endNameSet_&&(e[r]+=","+is(t.indexEndName_))}return t.limitSet_&&(t.isViewFromLeft()?e.limitToFirst=t.limit_:e.limitToLast=t.limit_),e}function Ey(t){const e={};if(t.startSet_&&(e.sp=t.indexStartValue_,t.startNameSet_&&(e.sn=t.indexStartName_),e.sin=!t.startAfterSet_),t.endSet_&&(e.ep=t.indexEndValue_,t.endNameSet_&&(e.en=t.indexEndName_),e.ein=!t.endBeforeSet_),t.limitSet_){e.l=t.limit_;let n=t.viewFrom_;n===""&&(t.isViewFromLeft()?n="l":n="r"),e.vf=n}return t.index_!==Un&&(e.i=t.index_.toString()),e}class Rg extends gP{reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,n){return n!==void 0?"tag$"+n:(Ue(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}constructor(e,n,r,o){super(),this.repoInfo_=e,this.onDataUpdate_=n,this.authTokenProvider_=r,this.appCheckTokenProvider_=o,this.log_=ph("p:rest:"),this.listens_={}}listen(e,n,r,o){const d=e._path.toString();this.log_("Listen called for "+d+" "+e._queryIdentifier);const f=Rg.getListenId_(e,r),g={};this.listens_[f]=g;const b=Ty(e._queryParams);this.restRequest_(d+".json",b,(w,k)=>{let C=k;if(w===404&&(C=null,w=null),w===null&&this.onDataUpdate_(d,C,!1,r),Tc(this.listens_,f)===g){let N;w?w===401?N="permission_denied":N="rest_error:"+w:N="ok",o(N,null)}})}unlisten(e,n){const r=Rg.getListenId_(e,n);delete this.listens_[r]}get(e){const n=Ty(e._queryParams),r=e._path.toString(),o=new oh;return this.restRequest_(r+".json",n,(d,f)=>{let g=f;d===404&&(g=null,d=null),d===null?(this.onDataUpdate_(r,g,!1,null),o.resolve(g)):o.reject(new Error(g))}),o.promise}refreshAuthToken(e){}restRequest_(e,n={},r){return n.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([o,d])=>{o&&o.accessToken&&(n.auth=o.accessToken),d&&d.token&&(n.ac=d.token);const f=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+Qc(n);this.log_("Sending REST request for "+f);const g=new XMLHttpRequest;g.onreadystatechange=()=>{if(r&&g.readyState===4){this.log_("REST Response for "+f+" received. status:",g.status,"response:",g.responseText);let b=null;if(g.status>=200&&g.status<300){try{b=zd(g.responseText)}catch{Ys("Failed to parse JSON response for "+f+": "+g.responseText)}r(null,b)}else g.status!==401&&g.status!==404&&Ys("Got unsuccessful REST response for "+f+" Status: "+g.status),r(g.status);r=null}},g.open("GET",f,!0),g.send()})}}class Z6{constructor(){this.rootNode_=vt.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,n){this.rootNode_=this.rootNode_.updateChild(e,n)}}function Tg(){return{value:null,children:new Map}}function NP(t,e,n){if(Ot(e))t.value=n,t.children.clear();else if(t.value!==null)t.value=t.value.updateChild(e,n);else{const r=Mt(e);t.children.has(r)||t.children.set(r,Tg());const o=t.children.get(r);e=_n(e),NP(o,e,n)}}function A0(t,e,n){t.value!==null?n(e,t.value):eR(t,(r,o)=>{const d=new cn(e.toString()+"/"+r);A0(o,d,n)})}function eR(t,e){t.children.forEach((n,r)=>{e(r,n)})}class tR{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),n={...e};return this.last_&&Rs(this.last_,(r,o)=>{n[r]=n[r]-o}),this.last_=e,n}}const jy=10*1e3,nR=30*1e3,sR=300*1e3;class rR{constructor(e,n){this.server_=n,this.statsToReport_={},this.statsListener_=new tR(e);const r=jy+(nR-jy)*Math.random();Bd(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){const e=this.statsListener_.get(),n={};let r=!1;Rs(e,(o,d)=>{d>0&&Mi(this.statsToReport_,o)&&(n[o]=d,r=!0)}),r&&this.server_.reportStats(n),Bd(this.reportStats_.bind(this),Math.floor(Math.random()*2*sR))}}var ri;(function(t){t[t.OVERWRITE=0]="OVERWRITE",t[t.MERGE=1]="MERGE",t[t.ACK_USER_WRITE=2]="ACK_USER_WRITE",t[t.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"})(ri||(ri={}));function A2(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function M2(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function D2(t){return{fromUser:!1,fromServer:!0,queryId:t,tagged:!0}}class Eg{constructor(e,n,r){this.path=e,this.affectedTree=n,this.revert=r,this.type=ri.ACK_USER_WRITE,this.source=A2()}operationForChild(e){if(Ot(this.path)){if(this.affectedTree.value!=null)return Ue(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const n=this.affectedTree.subtree(new cn(e));return new Eg(Ht(),n,this.revert)}}else return Ue(Mt(this.path)===e,"operationForChild called for unrelated child."),new Eg(_n(this.path),this.affectedTree,this.revert)}}class Zd{constructor(e,n){this.source=e,this.path=n,this.type=ri.LISTEN_COMPLETE}operationForChild(e){return Ot(this.path)?new Zd(this.source,Ht()):new Zd(this.source,_n(this.path))}}class wl{constructor(e,n,r){this.source=e,this.path=n,this.snap=r,this.type=ri.OVERWRITE}operationForChild(e){return Ot(this.path)?new wl(this.source,Ht(),this.snap.getImmediateChild(e)):new wl(this.source,_n(this.path),this.snap)}}class Ac{constructor(e,n,r){this.source=e,this.path=n,this.children=r,this.type=ri.MERGE}operationForChild(e){if(Ot(this.path)){const n=this.children.subtree(new cn(e));return n.isEmpty()?null:n.value?new wl(this.source,Ht(),n.value):new Ac(this.source,Ht(),n)}else return Ue(Mt(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new Ac(this.source,_n(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class ho{constructor(e,n,r){this.node_=e,this.fullyInitialized_=n,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(Ot(e))return this.isFullyInitialized()&&!this.filtered_;const n=Mt(e);return this.isCompleteForChild(n)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}class iR{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function aR(t,e,n,r){const o=[],d=[];return e.forEach(f=>{f.type==="child_changed"&&t.index_.indexedValueChanged(f.oldSnap,f.snapshotNode)&&d.push(Y6(f.childName,f.snapshotNode))}),Rd(t,o,"child_removed",e,r,n),Rd(t,o,"child_added",e,r,n),Rd(t,o,"child_moved",d,r,n),Rd(t,o,"child_changed",e,r,n),Rd(t,o,"value",e,r,n),o}function Rd(t,e,n,r,o,d){const f=r.filter(g=>g.type===n);f.sort((g,b)=>lR(t,g,b)),f.forEach(g=>{const b=oR(t,g,d);o.forEach(w=>{w.respondsTo(g.type)&&e.push(w.createEvent(b,t.query_))})})}function oR(t,e,n){return e.type==="value"||e.type==="child_removed"||(e.prevName=n.getPredecessorChildName(e.childName,e.snapshotNode,t.index_)),e}function lR(t,e,n){if(e.childName==null||n.childName==null)throw Fc("Should only compare child_ events.");const r=new Dt(e.childName,e.snapshotNode),o=new Dt(n.childName,n.snapshotNode);return t.index_.compare(r,o)}function Zg(t,e){return{eventCache:t,serverCache:e}}function $d(t,e,n,r){return Zg(new ho(e,n,r),t.serverCache)}function CP(t,e,n,r){return Zg(t.eventCache,new ho(e,n,r))}function jg(t){return t.eventCache.isFullyInitialized()?t.eventCache.getNode():null}function xl(t){return t.serverCache.isFullyInitialized()?t.serverCache.getNode():null}let Z1;const cR=()=>(Z1||(Z1=new br(VS)),Z1);class Pn{static fromObject(e){let n=new Pn(null);return Rs(e,(r,o)=>{n=n.set(new cn(r),o)}),n}constructor(e,n=cR()){this.value=e,this.children=n}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,n){if(this.value!=null&&n(this.value))return{path:Ht(),value:this.value};if(Ot(e))return null;{const r=Mt(e),o=this.children.get(r);if(o!==null){const d=o.findRootMostMatchingPathAndValue(_n(e),n);return d!=null?{path:On(new cn(r),d.path),value:d.value}:null}else return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(Ot(e))return this;{const n=Mt(e),r=this.children.get(n);return r!==null?r.subtree(_n(e)):new Pn(null)}}set(e,n){if(Ot(e))return new Pn(n,this.children);{const r=Mt(e),d=(this.children.get(r)||new Pn(null)).set(_n(e),n),f=this.children.insert(r,d);return new Pn(this.value,f)}}remove(e){if(Ot(e))return this.children.isEmpty()?new Pn(null):new Pn(null,this.children);{const n=Mt(e),r=this.children.get(n);if(r){const o=r.remove(_n(e));let d;return o.isEmpty()?d=this.children.remove(n):d=this.children.insert(n,o),this.value===null&&d.isEmpty()?new Pn(null):new Pn(this.value,d)}else return this}}get(e){if(Ot(e))return this.value;{const n=Mt(e),r=this.children.get(n);return r?r.get(_n(e)):null}}setTree(e,n){if(Ot(e))return n;{const r=Mt(e),d=(this.children.get(r)||new Pn(null)).setTree(_n(e),n);let f;return d.isEmpty()?f=this.children.remove(r):f=this.children.insert(r,d),new Pn(this.value,f)}}fold(e){return this.fold_(Ht(),e)}fold_(e,n){const r={};return this.children.inorderTraversal((o,d)=>{r[o]=d.fold_(On(e,o),n)}),n(e,this.value,r)}findOnPath(e,n){return this.findOnPath_(e,Ht(),n)}findOnPath_(e,n,r){const o=this.value?r(n,this.value):!1;if(o)return o;if(Ot(e))return null;{const d=Mt(e),f=this.children.get(d);return f?f.findOnPath_(_n(e),On(n,d),r):null}}foreachOnPath(e,n){return this.foreachOnPath_(e,Ht(),n)}foreachOnPath_(e,n,r){if(Ot(e))return this;{this.value&&r(n,this.value);const o=Mt(e),d=this.children.get(o);return d?d.foreachOnPath_(_n(e),On(n,o),r):new Pn(null)}}foreach(e){this.foreach_(Ht(),e)}foreach_(e,n){this.children.inorderTraversal((r,o)=>{o.foreach_(On(e,r),n)}),this.value&&n(e,this.value)}foreachChild(e){this.children.inorderTraversal((n,r)=>{r.value&&e(n,r.value)})}}class ai{constructor(e){this.writeTree_=e}static empty(){return new ai(new Pn(null))}}function Ld(t,e,n){if(Ot(e))return new ai(new Pn(n));{const r=t.writeTree_.findRootMostValueAndPath(e);if(r!=null){const o=r.path;let d=r.value;const f=Hs(o,e);return d=d.updateChild(f,n),new ai(t.writeTree_.set(o,d))}else{const o=new Pn(n),d=t.writeTree_.setTree(e,o);return new ai(d)}}}function M0(t,e,n){let r=t;return Rs(n,(o,d)=>{r=Ld(r,On(e,o),d)}),r}function Iy(t,e){if(Ot(e))return ai.empty();{const n=t.writeTree_.setTree(e,new Pn(null));return new ai(n)}}function D0(t,e){return _l(t,e)!=null}function _l(t,e){const n=t.writeTree_.findRootMostValueAndPath(e);return n!=null?t.writeTree_.get(n.path).getChild(Hs(n.path,e)):null}function Ay(t){const e=[],n=t.writeTree_.value;return n!=null?n.isLeafNode()||n.forEachChild(Un,(r,o)=>{e.push(new Dt(r,o))}):t.writeTree_.children.inorderTraversal((r,o)=>{o.value!=null&&e.push(new Dt(r,o.value))}),e}function lo(t,e){if(Ot(e))return t;{const n=_l(t,e);return n!=null?new ai(new Pn(n)):new ai(t.writeTree_.subtree(e))}}function O0(t){return t.writeTree_.isEmpty()}function Mc(t,e){return SP(Ht(),t.writeTree_,e)}function SP(t,e,n){if(e.value!=null)return n.updateChild(t,e.value);{let r=null;return e.children.inorderTraversal((o,d)=>{o===".priority"?(Ue(d.value!==null,"Priority writes must always be leaf nodes"),r=d.value):n=SP(On(t,o),d,n)}),!n.getChild(t).isEmpty()&&r!==null&&(n=n.updateChild(On(t,".priority"),r)),n}}function em(t,e){return jP(e,t)}function uR(t,e,n,r,o){Ue(r>t.lastWriteId,"Stacking an older write on top of newer ones"),o===void 0&&(o=!0),t.allWrites.push({path:e,snap:n,writeId:r,visible:o}),o&&(t.visibleWrites=Ld(t.visibleWrites,e,n)),t.lastWriteId=r}function dR(t,e,n,r){Ue(r>t.lastWriteId,"Stacking an older merge on top of newer ones"),t.allWrites.push({path:e,children:n,writeId:r,visible:!0}),t.visibleWrites=M0(t.visibleWrites,e,n),t.lastWriteId=r}function hR(t,e){for(let n=0;n<t.allWrites.length;n++){const r=t.allWrites[n];if(r.writeId===e)return r}return null}function fR(t,e){const n=t.allWrites.findIndex(g=>g.writeId===e);Ue(n>=0,"removeWrite called with nonexistent writeId.");const r=t.allWrites[n];t.allWrites.splice(n,1);let o=r.visible,d=!1,f=t.allWrites.length-1;for(;o&&f>=0;){const g=t.allWrites[f];g.visible&&(f>=n&&pR(g,r.path)?o=!1:Br(r.path,g.path)&&(d=!0)),f--}if(o){if(d)return gR(t),!0;if(r.snap)t.visibleWrites=Iy(t.visibleWrites,r.path);else{const g=r.children;Rs(g,b=>{t.visibleWrites=Iy(t.visibleWrites,On(r.path,b))})}return!0}else return!1}function pR(t,e){if(t.snap)return Br(t.path,e);for(const n in t.children)if(t.children.hasOwnProperty(n)&&Br(On(t.path,n),e))return!0;return!1}function gR(t){t.visibleWrites=RP(t.allWrites,mR,Ht()),t.allWrites.length>0?t.lastWriteId=t.allWrites[t.allWrites.length-1].writeId:t.lastWriteId=-1}function mR(t){return t.visible}function RP(t,e,n){let r=ai.empty();for(let o=0;o<t.length;++o){const d=t[o];if(e(d)){const f=d.path;let g;if(d.snap)Br(n,f)?(g=Hs(n,f),r=Ld(r,g,d.snap)):Br(f,n)&&(g=Hs(f,n),r=Ld(r,Ht(),d.snap.getChild(g)));else if(d.children){if(Br(n,f))g=Hs(n,f),r=M0(r,g,d.children);else if(Br(f,n))if(g=Hs(f,n),Ot(g))r=M0(r,Ht(),d.children);else{const b=Tc(d.children,Mt(g));if(b){const w=b.getChild(_n(g));r=Ld(r,Ht(),w)}}}else throw Fc("WriteRecord should have .snap or .children")}}return r}function TP(t,e,n,r,o){if(!r&&!o){const d=_l(t.visibleWrites,e);if(d!=null)return d;{const f=lo(t.visibleWrites,e);if(O0(f))return n;if(n==null&&!D0(f,Ht()))return null;{const g=n||vt.EMPTY_NODE;return Mc(f,g)}}}else{const d=lo(t.visibleWrites,e);if(!o&&O0(d))return n;if(!o&&n==null&&!D0(d,Ht()))return null;{const f=function(w){return(w.visible||o)&&(!r||!~r.indexOf(w.writeId))&&(Br(w.path,e)||Br(e,w.path))},g=RP(t.allWrites,f,e),b=n||vt.EMPTY_NODE;return Mc(g,b)}}}function vR(t,e,n){let r=vt.EMPTY_NODE;const o=_l(t.visibleWrites,e);if(o)return o.isLeafNode()||o.forEachChild(Un,(d,f)=>{r=r.updateImmediateChild(d,f)}),r;if(n){const d=lo(t.visibleWrites,e);return n.forEachChild(Un,(f,g)=>{const b=Mc(lo(d,new cn(f)),g);r=r.updateImmediateChild(f,b)}),Ay(d).forEach(f=>{r=r.updateImmediateChild(f.name,f.node)}),r}else{const d=lo(t.visibleWrites,e);return Ay(d).forEach(f=>{r=r.updateImmediateChild(f.name,f.node)}),r}}function bR(t,e,n,r,o){Ue(r||o,"Either existingEventSnap or existingServerSnap must exist");const d=On(e,n);if(D0(t.visibleWrites,d))return null;{const f=lo(t.visibleWrites,d);return O0(f)?o.getChild(n):Mc(f,o.getChild(n))}}function yR(t,e,n,r){const o=On(e,n),d=_l(t.visibleWrites,o);if(d!=null)return d;if(r.isCompleteForChild(n)){const f=lo(t.visibleWrites,o);return Mc(f,r.getNode().getImmediateChild(n))}else return null}function wR(t,e){return _l(t.visibleWrites,e)}function xR(t,e,n,r,o,d,f){let g;const b=lo(t.visibleWrites,e),w=_l(b,Ht());if(w!=null)g=w;else if(n!=null)g=Mc(b,n);else return[];if(g=g.withIndex(f),!g.isEmpty()&&!g.isLeafNode()){const k=[],C=f.getCompare(),N=d?g.getReverseIteratorFrom(r,f):g.getIteratorFrom(r,f);let j=N.getNext();for(;j&&k.length<o;)C(j,r)!==0&&k.push(j),j=N.getNext();return k}else return[]}function PR(){return{visibleWrites:ai.empty(),allWrites:[],lastWriteId:-1}}function Ig(t,e,n,r){return TP(t.writeTree,t.treePath,e,n,r)}function O2(t,e){return vR(t.writeTree,t.treePath,e)}function My(t,e,n,r){return bR(t.writeTree,t.treePath,e,n,r)}function Ag(t,e){return wR(t.writeTree,On(t.treePath,e))}function _R(t,e,n,r,o,d){return xR(t.writeTree,t.treePath,e,n,r,o,d)}function U2(t,e,n){return yR(t.writeTree,t.treePath,e,n)}function EP(t,e){return jP(On(t.treePath,e),t.writeTree)}function jP(t,e){return{treePath:t,writeTree:e}}class kR{constructor(){this.changeMap=new Map}trackChildChange(e){const n=e.type,r=e.childName;Ue(n==="child_added"||n==="child_changed"||n==="child_removed","Only child changes supported for tracking"),Ue(r!==".priority","Only non-priority child changes can be tracked.");const o=this.changeMap.get(r);if(o){const d=o.type;if(n==="child_added"&&d==="child_removed")this.changeMap.set(r,Xd(r,e.snapshotNode,o.snapshotNode));else if(n==="child_removed"&&d==="child_added")this.changeMap.delete(r);else if(n==="child_removed"&&d==="child_changed")this.changeMap.set(r,Yd(r,o.oldSnap));else if(n==="child_changed"&&d==="child_added")this.changeMap.set(r,Ic(r,e.snapshotNode));else if(n==="child_changed"&&d==="child_changed")this.changeMap.set(r,Xd(r,e.snapshotNode,o.oldSnap));else throw Fc("Illegal combination of changes: "+e+" occurred after "+o)}else this.changeMap.set(r,e)}getChanges(){return Array.from(this.changeMap.values())}}class NR{getCompleteChild(e){return null}getChildAfterChild(e,n,r){return null}}const IP=new NR;class B2{constructor(e,n,r=null){this.writes_=e,this.viewCache_=n,this.optCompleteServerCache_=r}getCompleteChild(e){const n=this.viewCache_.eventCache;if(n.isCompleteForChild(e))return n.getNode().getImmediateChild(e);{const r=this.optCompleteServerCache_!=null?new ho(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return U2(this.writes_,e,r)}}getChildAfterChild(e,n,r){const o=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:xl(this.viewCache_),d=_R(this.writes_,o,n,1,r,e);return d.length===0?null:d[0]}}function CR(t){return{filter:t}}function SR(t,e){Ue(e.eventCache.getNode().isIndexed(t.filter.getIndex()),"Event snap not indexed"),Ue(e.serverCache.getNode().isIndexed(t.filter.getIndex()),"Server snap not indexed")}function RR(t,e,n,r,o){const d=new kR;let f,g;if(n.type===ri.OVERWRITE){const w=n;w.source.fromUser?f=U0(t,e,w.path,w.snap,r,o,d):(Ue(w.source.fromServer,"Unknown source."),g=w.source.tagged||e.serverCache.isFiltered()&&!Ot(w.path),f=Mg(t,e,w.path,w.snap,r,o,g,d))}else if(n.type===ri.MERGE){const w=n;w.source.fromUser?f=ER(t,e,w.path,w.children,r,o,d):(Ue(w.source.fromServer,"Unknown source."),g=w.source.tagged||e.serverCache.isFiltered(),f=B0(t,e,w.path,w.children,r,o,g,d))}else if(n.type===ri.ACK_USER_WRITE){const w=n;w.revert?f=AR(t,e,w.path,r,o,d):f=jR(t,e,w.path,w.affectedTree,r,o,d)}else if(n.type===ri.LISTEN_COMPLETE)f=IR(t,e,n.path,r,d);else throw Fc("Unknown operation type: "+n.type);const b=d.getChanges();return TR(e,f,b),{viewCache:f,changes:b}}function TR(t,e,n){const r=e.eventCache;if(r.isFullyInitialized()){const o=r.getNode().isLeafNode()||r.getNode().isEmpty(),d=jg(t);(n.length>0||!t.eventCache.isFullyInitialized()||o&&!r.getNode().equals(d)||!r.getNode().getPriority().equals(d.getPriority()))&&n.push(kP(jg(e)))}}function AP(t,e,n,r,o,d){const f=e.eventCache;if(Ag(r,n)!=null)return e;{let g,b;if(Ot(n))if(Ue(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const w=xl(e),k=w instanceof vt?w:vt.EMPTY_NODE,C=O2(r,k);g=t.filter.updateFullNode(e.eventCache.getNode(),C,d)}else{const w=Ig(r,xl(e));g=t.filter.updateFullNode(e.eventCache.getNode(),w,d)}else{const w=Mt(n);if(w===".priority"){Ue(uo(n)===1,"Can't have a priority with additional path components");const k=f.getNode();b=e.serverCache.getNode();const C=My(r,n,k,b);C!=null?g=t.filter.updatePriority(k,C):g=f.getNode()}else{const k=_n(n);let C;if(f.isCompleteForChild(w)){b=e.serverCache.getNode();const N=My(r,n,f.getNode(),b);N!=null?C=f.getNode().getImmediateChild(w).updateChild(k,N):C=f.getNode().getImmediateChild(w)}else C=U2(r,w,e.serverCache);C!=null?g=t.filter.updateChild(f.getNode(),w,C,k,o,d):g=f.getNode()}}return $d(e,g,f.isFullyInitialized()||Ot(n),t.filter.filtersNodes())}}function Mg(t,e,n,r,o,d,f,g){const b=e.serverCache;let w;const k=f?t.filter:t.filter.getIndexedFilter();if(Ot(n))w=k.updateFullNode(b.getNode(),r,null);else if(k.filtersNodes()&&!b.isFiltered()){const j=b.getNode().updateChild(n,r);w=k.updateFullNode(b.getNode(),j,null)}else{const j=Mt(n);if(!b.isCompleteForPath(n)&&uo(n)>1)return e;const M=_n(n),Q=b.getNode().getImmediateChild(j).updateChild(M,r);j===".priority"?w=k.updatePriority(b.getNode(),Q):w=k.updateChild(b.getNode(),j,Q,M,IP,null)}const C=CP(e,w,b.isFullyInitialized()||Ot(n),k.filtersNodes()),N=new B2(o,C,d);return AP(t,C,n,o,N,g)}function U0(t,e,n,r,o,d,f){const g=e.eventCache;let b,w;const k=new B2(o,e,d);if(Ot(n))w=t.filter.updateFullNode(e.eventCache.getNode(),r,f),b=$d(e,w,!0,t.filter.filtersNodes());else{const C=Mt(n);if(C===".priority")w=t.filter.updatePriority(e.eventCache.getNode(),r),b=$d(e,w,g.isFullyInitialized(),g.isFiltered());else{const N=_n(n),j=g.getNode().getImmediateChild(C);let M;if(Ot(N))M=r;else{const $=k.getCompleteChild(C);$!=null?S2(N)===".priority"&&$.getChild(vP(N)).isEmpty()?M=$:M=$.updateChild(N,r):M=vt.EMPTY_NODE}if(j.equals(M))b=e;else{const $=t.filter.updateChild(g.getNode(),C,M,N,k,f);b=$d(e,$,g.isFullyInitialized(),t.filter.filtersNodes())}}}return b}function Dy(t,e){return t.eventCache.isCompleteForChild(e)}function ER(t,e,n,r,o,d,f){let g=e;return r.foreach((b,w)=>{const k=On(n,b);Dy(e,Mt(k))&&(g=U0(t,g,k,w,o,d,f))}),r.foreach((b,w)=>{const k=On(n,b);Dy(e,Mt(k))||(g=U0(t,g,k,w,o,d,f))}),g}function Oy(t,e,n){return n.foreach((r,o)=>{e=e.updateChild(r,o)}),e}function B0(t,e,n,r,o,d,f,g){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let b=e,w;Ot(n)?w=r:w=new Pn(null).setTree(n,r);const k=e.serverCache.getNode();return w.children.inorderTraversal((C,N)=>{if(k.hasChild(C)){const j=e.serverCache.getNode().getImmediateChild(C),M=Oy(t,j,N);b=Mg(t,b,new cn(C),M,o,d,f,g)}}),w.children.inorderTraversal((C,N)=>{const j=!e.serverCache.isCompleteForChild(C)&&N.value===null;if(!k.hasChild(C)&&!j){const M=e.serverCache.getNode().getImmediateChild(C),$=Oy(t,M,N);b=Mg(t,b,new cn(C),$,o,d,f,g)}}),b}function jR(t,e,n,r,o,d,f){if(Ag(o,n)!=null)return e;const g=e.serverCache.isFiltered(),b=e.serverCache;if(r.value!=null){if(Ot(n)&&b.isFullyInitialized()||b.isCompleteForPath(n))return Mg(t,e,n,b.getNode().getChild(n),o,d,g,f);if(Ot(n)){let w=new Pn(null);return b.getNode().forEachChild(Rc,(k,C)=>{w=w.set(new cn(k),C)}),B0(t,e,n,w,o,d,g,f)}else return e}else{let w=new Pn(null);return r.foreach((k,C)=>{const N=On(n,k);b.isCompleteForPath(N)&&(w=w.set(k,b.getNode().getChild(N)))}),B0(t,e,n,w,o,d,g,f)}}function IR(t,e,n,r,o){const d=e.serverCache,f=CP(e,d.getNode(),d.isFullyInitialized()||Ot(n),d.isFiltered());return AP(t,f,n,r,IP,o)}function AR(t,e,n,r,o,d){let f;if(Ag(r,n)!=null)return e;{const g=new B2(r,e,o),b=e.eventCache.getNode();let w;if(Ot(n)||Mt(n)===".priority"){let k;if(e.serverCache.isFullyInitialized())k=Ig(r,xl(e));else{const C=e.serverCache.getNode();Ue(C instanceof vt,"serverChildren would be complete if leaf node"),k=O2(r,C)}k=k,w=t.filter.updateFullNode(b,k,d)}else{const k=Mt(n);let C=U2(r,k,e.serverCache);C==null&&e.serverCache.isCompleteForChild(k)&&(C=b.getImmediateChild(k)),C!=null?w=t.filter.updateChild(b,k,C,_n(n),g,d):e.eventCache.getNode().hasChild(k)?w=t.filter.updateChild(b,k,vt.EMPTY_NODE,_n(n),g,d):w=b,w.isEmpty()&&e.serverCache.isFullyInitialized()&&(f=Ig(r,xl(e)),f.isLeafNode()&&(w=t.filter.updateFullNode(w,f,d)))}return f=e.serverCache.isFullyInitialized()||Ag(r,Ht())!=null,$d(e,w,f,t.filter.filtersNodes())}}class MR{constructor(e,n){this.query_=e,this.eventRegistrations_=[];const r=this.query_._queryParams,o=new j2(r.getIndex()),d=J6(r);this.processor_=CR(d);const f=n.serverCache,g=n.eventCache,b=o.updateFullNode(vt.EMPTY_NODE,f.getNode(),null),w=d.updateFullNode(vt.EMPTY_NODE,g.getNode(),null),k=new ho(b,f.isFullyInitialized(),o.filtersNodes()),C=new ho(w,g.isFullyInitialized(),d.filtersNodes());this.viewCache_=Zg(C,k),this.eventGenerator_=new iR(this.query_)}get query(){return this.query_}}function DR(t){return t.viewCache_.serverCache.getNode()}function OR(t){return jg(t.viewCache_)}function UR(t,e){const n=xl(t.viewCache_);return n&&(t.query._queryParams.loadsAllData()||!Ot(e)&&!n.getImmediateChild(Mt(e)).isEmpty())?n.getChild(e):null}function Uy(t){return t.eventRegistrations_.length===0}function BR(t,e){t.eventRegistrations_.push(e)}function By(t,e,n){const r=[];if(n){Ue(e==null,"A cancel should cancel all event registrations.");const o=t.query._path;t.eventRegistrations_.forEach(d=>{const f=d.createCancelEvent(n,o);f&&r.push(f)})}if(e){let o=[];for(let d=0;d<t.eventRegistrations_.length;++d){const f=t.eventRegistrations_[d];if(!f.matches(e))o.push(f);else if(e.hasAnyCallback()){o=o.concat(t.eventRegistrations_.slice(d+1));break}}t.eventRegistrations_=o}else t.eventRegistrations_=[];return r}function $y(t,e,n,r){e.type===ri.MERGE&&e.source.queryId!==null&&(Ue(xl(t.viewCache_),"We should always have a full cache before handling merges"),Ue(jg(t.viewCache_),"Missing event cache, even though we have a server cache"));const o=t.viewCache_,d=RR(t.processor_,o,e,n,r);return SR(t.processor_,d.viewCache),Ue(d.viewCache.serverCache.isFullyInitialized()||!o.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),t.viewCache_=d.viewCache,MP(t,d.changes,d.viewCache.eventCache.getNode(),null)}function $R(t,e){const n=t.viewCache_.eventCache,r=[];return n.getNode().isLeafNode()||n.getNode().forEachChild(Un,(d,f)=>{r.push(Ic(d,f))}),n.isFullyInitialized()&&r.push(kP(n.getNode())),MP(t,r,n.getNode(),e)}function MP(t,e,n,r){const o=r?[r]:t.eventRegistrations_;return aR(t.eventGenerator_,e,n,o)}let Dg;class DP{constructor(){this.views=new Map}}function LR(t){Ue(!Dg,"__referenceConstructor has already been defined"),Dg=t}function KR(){return Ue(Dg,"Reference.ts has not been loaded"),Dg}function FR(t){return t.views.size===0}function $2(t,e,n,r){const o=e.source.queryId;if(o!==null){const d=t.views.get(o);return Ue(d!=null,"SyncTree gave us an op for an invalid query."),$y(d,e,n,r)}else{let d=[];for(const f of t.views.values())d=d.concat($y(f,e,n,r));return d}}function OP(t,e,n,r,o){const d=e._queryIdentifier,f=t.views.get(d);if(!f){let g=Ig(n,o?r:null),b=!1;g?b=!0:r instanceof vt?(g=O2(n,r),b=!1):(g=vt.EMPTY_NODE,b=!1);const w=Zg(new ho(g,b,!1),new ho(r,o,!1));return new MR(e,w)}return f}function qR(t,e,n,r,o,d){const f=OP(t,e,r,o,d);return t.views.has(e._queryIdentifier)||t.views.set(e._queryIdentifier,f),BR(f,n),$R(f,n)}function QR(t,e,n,r){const o=e._queryIdentifier,d=[];let f=[];const g=fo(t);if(o==="default")for(const[b,w]of t.views.entries())f=f.concat(By(w,n,r)),Uy(w)&&(t.views.delete(b),w.query._queryParams.loadsAllData()||d.push(w.query));else{const b=t.views.get(o);b&&(f=f.concat(By(b,n,r)),Uy(b)&&(t.views.delete(o),b.query._queryParams.loadsAllData()||d.push(b.query)))}return g&&!fo(t)&&d.push(new(KR())(e._repo,e._path)),{removed:d,events:f}}function UP(t){const e=[];for(const n of t.views.values())n.query._queryParams.loadsAllData()||e.push(n);return e}function co(t,e){let n=null;for(const r of t.views.values())n=n||UR(r,e);return n}function BP(t,e){if(e._queryParams.loadsAllData())return tm(t);{const r=e._queryIdentifier;return t.views.get(r)}}function $P(t,e){return BP(t,e)!=null}function fo(t){return tm(t)!=null}function tm(t){for(const e of t.views.values())if(e.query._queryParams.loadsAllData())return e;return null}let Og;function zR(t){Ue(!Og,"__referenceConstructor has already been defined"),Og=t}function GR(){return Ue(Og,"Reference.ts has not been loaded"),Og}let VR=1;class Ly{constructor(e){this.listenProvider_=e,this.syncPointTree_=new Pn(null),this.pendingWriteTree_=PR(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function LP(t,e,n,r,o){return uR(t.pendingWriteTree_,e,n,r,o),o?Wc(t,new wl(A2(),e,n)):[]}function WR(t,e,n,r){dR(t.pendingWriteTree_,e,n,r);const o=Pn.fromObject(n);return Wc(t,new Ac(A2(),e,o))}function so(t,e,n=!1){const r=hR(t.pendingWriteTree_,e);if(fR(t.pendingWriteTree_,e)){let d=new Pn(null);return r.snap!=null?d=d.set(Ht(),!0):Rs(r.children,f=>{d=d.set(new cn(f),!0)}),Wc(t,new Eg(r.path,d,n))}else return[]}function mh(t,e,n){return Wc(t,new wl(M2(),e,n))}function HR(t,e,n){const r=Pn.fromObject(n);return Wc(t,new Ac(M2(),e,r))}function YR(t,e){return Wc(t,new Zd(M2(),e))}function XR(t,e,n){const r=K2(t,n);if(r){const o=F2(r),d=o.path,f=o.queryId,g=Hs(d,e),b=new Zd(D2(f),g);return q2(t,d,b)}else return[]}function Ug(t,e,n,r,o=!1){const d=e._path,f=t.syncPointTree_.get(d);let g=[];if(f&&(e._queryIdentifier==="default"||$P(f,e))){const b=QR(f,e,n,r);FR(f)&&(t.syncPointTree_=t.syncPointTree_.remove(d));const w=b.removed;if(g=b.events,!o){const k=w.findIndex(N=>N._queryParams.loadsAllData())!==-1,C=t.syncPointTree_.findOnPath(d,(N,j)=>fo(j));if(k&&!C){const N=t.syncPointTree_.subtree(d);if(!N.isEmpty()){const j=eT(N);for(let M=0;M<j.length;++M){const $=j[M],Q=$.query,ae=QP(t,$);t.listenProvider_.startListening(Kd(Q),eh(t,Q),ae.hashFn,ae.onComplete)}}}!C&&w.length>0&&!r&&(k?t.listenProvider_.stopListening(Kd(e),null):w.forEach(N=>{const j=t.queryToTagMap.get(nm(N));t.listenProvider_.stopListening(Kd(N),j)}))}tT(t,w)}return g}function KP(t,e,n,r){const o=K2(t,r);if(o!=null){const d=F2(o),f=d.path,g=d.queryId,b=Hs(f,e),w=new wl(D2(g),b,n);return q2(t,f,w)}else return[]}function JR(t,e,n,r){const o=K2(t,r);if(o){const d=F2(o),f=d.path,g=d.queryId,b=Hs(f,e),w=Pn.fromObject(n),k=new Ac(D2(g),b,w);return q2(t,f,k)}else return[]}function $0(t,e,n,r=!1){const o=e._path;let d=null,f=!1;t.syncPointTree_.foreachOnPath(o,(N,j)=>{const M=Hs(N,o);d=d||co(j,M),f=f||fo(j)});let g=t.syncPointTree_.get(o);g?(f=f||fo(g),d=d||co(g,Ht())):(g=new DP,t.syncPointTree_=t.syncPointTree_.set(o,g));let b;d!=null?b=!0:(b=!1,d=vt.EMPTY_NODE,t.syncPointTree_.subtree(o).foreachChild((j,M)=>{const $=co(M,Ht());$&&(d=d.updateImmediateChild(j,$))}));const w=$P(g,e);if(!w&&!e._queryParams.loadsAllData()){const N=nm(e);Ue(!t.queryToTagMap.has(N),"View does not exist, but we have a tag");const j=nT();t.queryToTagMap.set(N,j),t.tagToQueryMap.set(j,N)}const k=em(t.pendingWriteTree_,o);let C=qR(g,e,n,k,d,b);if(!w&&!f&&!r){const N=BP(g,e);C=C.concat(sT(t,e,N))}return C}function L2(t,e,n){const o=t.pendingWriteTree_,d=t.syncPointTree_.findOnPath(e,(f,g)=>{const b=Hs(f,e),w=co(g,b);if(w)return w});return TP(o,e,d,n,!0)}function ZR(t,e){const n=e._path;let r=null;t.syncPointTree_.foreachOnPath(n,(w,k)=>{const C=Hs(w,n);r=r||co(k,C)});let o=t.syncPointTree_.get(n);o?r=r||co(o,Ht()):(o=new DP,t.syncPointTree_=t.syncPointTree_.set(n,o));const d=r!=null,f=d?new ho(r,!0,!1):null,g=em(t.pendingWriteTree_,e._path),b=OP(o,e,g,d?f.getNode():vt.EMPTY_NODE,d);return OR(b)}function Wc(t,e){return FP(e,t.syncPointTree_,null,em(t.pendingWriteTree_,Ht()))}function FP(t,e,n,r){if(Ot(t.path))return qP(t,e,n,r);{const o=e.get(Ht());n==null&&o!=null&&(n=co(o,Ht()));let d=[];const f=Mt(t.path),g=t.operationForChild(f),b=e.children.get(f);if(b&&g){const w=n?n.getImmediateChild(f):null,k=EP(r,f);d=d.concat(FP(g,b,w,k))}return o&&(d=d.concat($2(o,t,r,n))),d}}function qP(t,e,n,r){const o=e.get(Ht());n==null&&o!=null&&(n=co(o,Ht()));let d=[];return e.children.inorderTraversal((f,g)=>{const b=n?n.getImmediateChild(f):null,w=EP(r,f),k=t.operationForChild(f);k&&(d=d.concat(qP(k,g,b,w)))}),o&&(d=d.concat($2(o,t,r,n))),d}function QP(t,e){const n=e.query,r=eh(t,n);return{hashFn:()=>(DR(e)||vt.EMPTY_NODE).hash(),onComplete:o=>{if(o==="ok")return r?XR(t,n._path,r):YR(t,n._path);{const d=YS(o,n);return Ug(t,n,null,d)}}}}function eh(t,e){const n=nm(e);return t.queryToTagMap.get(n)}function nm(t){return t._path.toString()+"$"+t._queryIdentifier}function K2(t,e){return t.tagToQueryMap.get(e)}function F2(t){const e=t.indexOf("$");return Ue(e!==-1&&e<t.length-1,"Bad queryKey."),{queryId:t.substr(e+1),path:new cn(t.substr(0,e))}}function q2(t,e,n){const r=t.syncPointTree_.get(e);Ue(r,"Missing sync point for query tag that we're tracking");const o=em(t.pendingWriteTree_,e);return $2(r,n,o,null)}function eT(t){return t.fold((e,n,r)=>{if(n&&fo(n))return[tm(n)];{let o=[];return n&&(o=UP(n)),Rs(r,(d,f)=>{o=o.concat(f)}),o}})}function Kd(t){return t._queryParams.loadsAllData()&&!t._queryParams.isDefault()?new(GR())(t._repo,t._path):t}function tT(t,e){for(let n=0;n<e.length;++n){const r=e[n];if(!r._queryParams.loadsAllData()){const o=nm(r),d=t.queryToTagMap.get(o);t.queryToTagMap.delete(o),t.tagToQueryMap.delete(d)}}}function nT(){return VR++}function sT(t,e,n){const r=e._path,o=eh(t,e),d=QP(t,n),f=t.listenProvider_.startListening(Kd(e),o,d.hashFn,d.onComplete),g=t.syncPointTree_.subtree(r);if(o)Ue(!fo(g.value),"If we're adding a query, it shouldn't be shadowed");else{const b=g.fold((w,k,C)=>{if(!Ot(w)&&k&&fo(k))return[tm(k).query];{let N=[];return k&&(N=N.concat(UP(k).map(j=>j.query))),Rs(C,(j,M)=>{N=N.concat(M)}),N}});for(let w=0;w<b.length;++w){const k=b[w];t.listenProvider_.stopListening(Kd(k),eh(t,k))}}return f}class Q2{constructor(e){this.node_=e}getImmediateChild(e){const n=this.node_.getImmediateChild(e);return new Q2(n)}node(){return this.node_}}class z2{constructor(e,n){this.syncTree_=e,this.path_=n}getImmediateChild(e){const n=On(this.path_,e);return new z2(this.syncTree_,n)}node(){return L2(this.syncTree_,this.path_)}}const rT=function(t){return t=t||{},t.timestamp=t.timestamp||new Date().getTime(),t},Ky=function(t,e,n){if(!t||typeof t!="object")return t;if(Ue(".sv"in t,"Unexpected leaf node or priority contents"),typeof t[".sv"]=="string")return iT(t[".sv"],e,n);if(typeof t[".sv"]=="object")return aT(t[".sv"],e);Ue(!1,"Unexpected server value: "+JSON.stringify(t,null,2))},iT=function(t,e,n){switch(t){case"timestamp":return n.timestamp;default:Ue(!1,"Unexpected server value: "+t)}},aT=function(t,e,n){t.hasOwnProperty("increment")||Ue(!1,"Unexpected server value: "+JSON.stringify(t,null,2));const r=t.increment;typeof r!="number"&&Ue(!1,"Unexpected increment value: "+r);const o=e.node();if(Ue(o!==null&&typeof o<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!o.isLeafNode())return r;const f=o.getValue();return typeof f!="number"?r:f+r},zP=function(t,e,n,r){return G2(e,new z2(n,t),r)},GP=function(t,e,n){return G2(t,new Q2(e),n)};function G2(t,e,n){const r=t.getPriority().val(),o=Ky(r,e.getImmediateChild(".priority"),n);let d;if(t.isLeafNode()){const f=t,g=Ky(f.getValue(),e,n);return g!==f.getValue()||o!==f.getPriority().val()?new bs(g,rs(o)):t}else{const f=t;return d=f,o!==f.getPriority().val()&&(d=d.updatePriority(new bs(o))),f.forEachChild(Un,(g,b)=>{const w=G2(b,e.getImmediateChild(g),n);w!==b&&(d=d.updateImmediateChild(g,w))}),d}}class V2{constructor(e="",n=null,r={children:{},childCount:0}){this.name=e,this.parent=n,this.node=r}}function W2(t,e){let n=e instanceof cn?e:new cn(e),r=t,o=Mt(n);for(;o!==null;){const d=Tc(r.node.children,o)||{children:{},childCount:0};r=new V2(o,r,d),n=_n(n),o=Mt(n)}return r}function Hc(t){return t.node.value}function VP(t,e){t.node.value=e,L0(t)}function WP(t){return t.node.childCount>0}function oT(t){return Hc(t)===void 0&&!WP(t)}function sm(t,e){Rs(t.node.children,(n,r)=>{e(new V2(n,t,r))})}function HP(t,e,n,r){n&&e(t),sm(t,o=>{HP(o,e,!0)})}function lT(t,e,n){let r=t.parent;for(;r!==null;){if(e(r))return!0;r=r.parent}return!1}function vh(t){return new cn(t.parent===null?t.name:vh(t.parent)+"/"+t.name)}function L0(t){t.parent!==null&&cT(t.parent,t.name,t)}function cT(t,e,n){const r=oT(n),o=Mi(t.node.children,e);r&&o?(delete t.node.children[e],t.node.childCount--,L0(t)):!r&&!o&&(t.node.children[e]=n.node,t.node.childCount++,L0(t))}const uT=/[\[\].#$\/\u0000-\u001F\u007F]/,dT=/[\[\].#$\u0000-\u001F\u007F]/,e0=10*1024*1024,H2=function(t){return typeof t=="string"&&t.length!==0&&!uT.test(t)},YP=function(t){return typeof t=="string"&&t.length!==0&&!dT.test(t)},hT=function(t){return t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),YP(t)},fT=function(t){return t===null||typeof t=="string"||typeof t=="number"&&!P2(t)||t&&typeof t=="object"&&Mi(t,".sv")},pT=function(t,e,n,r){rm(Vg(t,"value"),e,n)},rm=function(t,e,n){const r=n instanceof cn?new E6(n,t):n;if(e===void 0)throw new Error(t+"contains undefined "+sl(r));if(typeof e=="function")throw new Error(t+"contains a function "+sl(r)+" with contents = "+e.toString());if(P2(e))throw new Error(t+"contains "+e.toString()+" "+sl(r));if(typeof e=="string"&&e.length>e0/3&&Wg(e)>e0)throw new Error(t+"contains a string greater than "+e0+" utf8 bytes "+sl(r)+" ('"+e.substring(0,50)+"...')");if(e&&typeof e=="object"){let o=!1,d=!1;if(Rs(e,(f,g)=>{if(f===".value")o=!0;else if(f!==".priority"&&f!==".sv"&&(d=!0,!H2(f)))throw new Error(t+" contains an invalid key ("+f+") "+sl(r)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);j6(r,f),rm(t,g,r),I6(r)}),o&&d)throw new Error(t+' contains ".value" child '+sl(r)+" in addition to actual children.")}},gT=function(t,e){let n,r;for(n=0;n<e.length;n++){r=e[n];const d=Hd(r);for(let f=0;f<d.length;f++)if(!(d[f]===".priority"&&f===d.length-1)){if(!H2(d[f]))throw new Error(t+"contains an invalid key ("+d[f]+") in path "+r.toString()+`. Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`)}}e.sort(T6);let o=null;for(n=0;n<e.length;n++){if(r=e[n],o!==null&&Br(o,r))throw new Error(t+"contains a path "+o.toString()+" that is ancestor of another path "+r.toString());o=r}},mT=function(t,e,n,r){const o=Vg(t,"values");if(!(e&&typeof e=="object")||Array.isArray(e))throw new Error(o+" must be an object containing the children to replace.");const d=[];Rs(e,(f,g)=>{const b=new cn(f);if(rm(o,g,On(n,b)),S2(b)===".priority"&&!fT(g))throw new Error(o+"contains an invalid value for '"+b.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");d.push(b)}),gT(o,d)},XP=function(t,e,n,r){if(!YP(n))throw new Error(Vg(t,e)+'was an invalid path = "'+n+`". Paths must be non-empty strings and can't contain ".", "#", "$", "[", or "]"`)},vT=function(t,e,n,r){n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),XP(t,e,n)},JP=function(t,e){if(Mt(e)===".info")throw new Error(t+" failed = Can't modify data under /.info/")},bT=function(t,e){const n=e.path.toString();if(typeof e.repoInfo.host!="string"||e.repoInfo.host.length===0||!H2(e.repoInfo.namespace)&&e.repoInfo.host.split(":")[0]!=="localhost"||n.length!==0&&!hT(n))throw new Error(Vg(t,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};class yT{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function im(t,e){let n=null;for(let r=0;r<e.length;r++){const o=e[r],d=o.getPath();n!==null&&!R2(d,n.path)&&(t.eventLists_.push(n),n=null),n===null&&(n={events:[],path:d}),n.events.push(o)}n&&t.eventLists_.push(n)}function ZP(t,e,n){im(t,n),e_(t,r=>R2(r,e))}function Kr(t,e,n){im(t,n),e_(t,r=>Br(r,e)||Br(e,r))}function e_(t,e){t.recursionDepth_++;let n=!0;for(let r=0;r<t.eventLists_.length;r++){const o=t.eventLists_[r];if(o){const d=o.path;e(d)?(wT(t.eventLists_[r]),t.eventLists_[r]=null):n=!1}}n&&(t.eventLists_=[]),t.recursionDepth_--}function wT(t){for(let e=0;e<t.events.length;e++){const n=t.events[e];if(n!==null){t.events[e]=null;const r=n.getEventRunner();Ud&&Ss("event: "+n.toString()),Vc(r)}}}const xT="repo_interrupt",PT=25;class _T{constructor(e,n,r,o){this.repoInfo_=e,this.forceRestClient_=n,this.authTokenProvider_=r,this.appCheckProvider_=o,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new yT,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=Tg(),this.transactionQueueTree_=new V2,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function kT(t,e,n){if(t.stats_=N2(t.repoInfo_),t.forceRestClient_||e6())t.server_=new Rg(t.repoInfo_,(r,o,d,f)=>{Fy(t,r,o,d,f)},t.authTokenProvider_,t.appCheckProvider_),setTimeout(()=>qy(t,!0),0);else{if(typeof n<"u"&&n!==null){if(typeof n!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{is(n)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}t.persistentConnection_=new la(t.repoInfo_,e,(r,o,d,f)=>{Fy(t,r,o,d,f)},r=>{qy(t,r)},r=>{CT(t,r)},t.authTokenProvider_,t.appCheckProvider_,n),t.server_=t.persistentConnection_}t.authTokenProvider_.addTokenChangeListener(r=>{t.server_.refreshAuthToken(r)}),t.appCheckProvider_.addTokenChangeListener(r=>{t.server_.refreshAppCheckToken(r.token)}),t.statsReporter_=i6(t.repoInfo_,()=>new rR(t.stats_,t.server_)),t.infoData_=new Z6,t.infoSyncTree_=new Ly({startListening:(r,o,d,f)=>{let g=[];const b=t.infoData_.getNode(r._path);return b.isEmpty()||(g=mh(t.infoSyncTree_,r._path,b),setTimeout(()=>{f("ok")},0)),g},stopListening:()=>{}}),Y2(t,"connected",!1),t.serverSyncTree_=new Ly({startListening:(r,o,d,f)=>(t.server_.listen(r,d,o,(g,b)=>{const w=f(g,b);Kr(t.eventQueue_,r._path,w)}),[]),stopListening:(r,o)=>{t.server_.unlisten(r,o)}})}function NT(t){const n=t.infoData_.getNode(new cn(".info/serverTimeOffset")).val()||0;return new Date().getTime()+n}function am(t){return rT({timestamp:NT(t)})}function Fy(t,e,n,r,o){t.dataUpdateCount++;const d=new cn(e);n=t.interceptServerDataCallback_?t.interceptServerDataCallback_(e,n):n;let f=[];if(o)if(r){const b=vg(n,w=>rs(w));f=JR(t.serverSyncTree_,d,b,o)}else{const b=rs(n);f=KP(t.serverSyncTree_,d,b,o)}else if(r){const b=vg(n,w=>rs(w));f=HR(t.serverSyncTree_,d,b)}else{const b=rs(n);f=mh(t.serverSyncTree_,d,b)}let g=d;f.length>0&&(g=Dc(t,d)),Kr(t.eventQueue_,g,f)}function qy(t,e){Y2(t,"connected",e),e===!1&&ET(t)}function CT(t,e){Rs(e,(n,r)=>{Y2(t,n,r)})}function Y2(t,e,n){const r=new cn("/.info/"+e),o=rs(n);t.infoData_.updateSnapshot(r,o);const d=mh(t.infoSyncTree_,r,o);Kr(t.eventQueue_,r,d)}function X2(t){return t.nextWriteId_++}function ST(t,e,n){const r=ZR(t.serverSyncTree_,e);return r!=null?Promise.resolve(r):t.server_.get(e).then(o=>{const d=rs(o).withIndex(e._queryParams.getIndex());$0(t.serverSyncTree_,e,n,!0);let f;if(e._queryParams.loadsAllData())f=mh(t.serverSyncTree_,e._path,d);else{const g=eh(t.serverSyncTree_,e);f=KP(t.serverSyncTree_,e._path,d,g)}return Kr(t.eventQueue_,e._path,f),Ug(t.serverSyncTree_,e,n,null,!0),d},o=>(bh(t,"get for query "+is(e)+" failed: "+o),Promise.reject(new Error(o))))}function RT(t,e,n,r,o){bh(t,"set",{path:e.toString(),value:n,priority:r});const d=am(t),f=rs(n,r),g=L2(t.serverSyncTree_,e),b=GP(f,g,d),w=X2(t),k=LP(t.serverSyncTree_,e,b,w,!0);im(t.eventQueue_,k),t.server_.put(e.toString(),f.val(!0),(N,j)=>{const M=N==="ok";M||Ys("set at "+e+" failed: "+N);const $=so(t.serverSyncTree_,w,!M);Kr(t.eventQueue_,e,$),K0(t,o,N,j)});const C=Z2(t,e);Dc(t,C),Kr(t.eventQueue_,C,[])}function TT(t,e,n,r){bh(t,"update",{path:e.toString(),value:n});let o=!0;const d=am(t),f={};if(Rs(n,(g,b)=>{o=!1,f[g]=zP(On(e,g),rs(b),t.serverSyncTree_,d)}),o)Ss("update() called with empty data.  Don't do anything."),K0(t,r,"ok",void 0);else{const g=X2(t),b=WR(t.serverSyncTree_,e,f,g);im(t.eventQueue_,b),t.server_.merge(e.toString(),n,(w,k)=>{const C=w==="ok";C||Ys("update at "+e+" failed: "+w);const N=so(t.serverSyncTree_,g,!C),j=N.length>0?Dc(t,e):e;Kr(t.eventQueue_,j,N),K0(t,r,w,k)}),Rs(n,w=>{const k=Z2(t,On(e,w));Dc(t,k)}),Kr(t.eventQueue_,e,[])}}function ET(t){bh(t,"onDisconnectEvents");const e=am(t),n=Tg();A0(t.onDisconnect_,Ht(),(o,d)=>{const f=zP(o,d,t.serverSyncTree_,e);NP(n,o,f)});let r=[];A0(n,Ht(),(o,d)=>{r=r.concat(mh(t.serverSyncTree_,o,d));const f=Z2(t,o);Dc(t,f)}),t.onDisconnect_=Tg(),Kr(t.eventQueue_,Ht(),r)}function jT(t,e,n){let r;Mt(e._path)===".info"?r=$0(t.infoSyncTree_,e,n):r=$0(t.serverSyncTree_,e,n),ZP(t.eventQueue_,e._path,r)}function Qy(t,e,n){let r;Mt(e._path)===".info"?r=Ug(t.infoSyncTree_,e,n):r=Ug(t.serverSyncTree_,e,n),ZP(t.eventQueue_,e._path,r)}function IT(t){t.persistentConnection_&&t.persistentConnection_.interrupt(xT)}function bh(t,...e){let n="";t.persistentConnection_&&(n=t.persistentConnection_.id+":"),Ss(n,...e)}function K0(t,e,n,r){e&&Vc(()=>{if(n==="ok")e(null);else{const o=(n||"error").toUpperCase();let d=o;r&&(d+=": "+r);const f=new Error(d);f.code=o,e(f)}})}function t_(t,e,n){return L2(t.serverSyncTree_,e,n)||vt.EMPTY_NODE}function J2(t,e=t.transactionQueueTree_){if(e||om(t,e),Hc(e)){const n=s_(t,e);Ue(n.length>0,"Sending zero length transaction queue"),n.every(o=>o.status===0)&&AT(t,vh(e),n)}else WP(e)&&sm(e,n=>{J2(t,n)})}function AT(t,e,n){const r=n.map(w=>w.currentWriteId),o=t_(t,e,r);let d=o;const f=o.hash();for(let w=0;w<n.length;w++){const k=n[w];Ue(k.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),k.status=1,k.retryCount++;const C=Hs(e,k.path);d=d.updateChild(C,k.currentOutputSnapshotRaw)}const g=d.val(!0),b=e;t.server_.put(b.toString(),g,w=>{bh(t,"transaction put response",{path:b.toString(),status:w});let k=[];if(w==="ok"){const C=[];for(let N=0;N<n.length;N++)n[N].status=2,k=k.concat(so(t.serverSyncTree_,n[N].currentWriteId)),n[N].onComplete&&C.push(()=>n[N].onComplete(null,!0,n[N].currentOutputSnapshotResolved)),n[N].unwatcher();om(t,W2(t.transactionQueueTree_,e)),J2(t,t.transactionQueueTree_),Kr(t.eventQueue_,e,k);for(let N=0;N<C.length;N++)Vc(C[N])}else{if(w==="datastale")for(let C=0;C<n.length;C++)n[C].status===3?n[C].status=4:n[C].status=0;else{Ys("transaction at "+b.toString()+" failed: "+w);for(let C=0;C<n.length;C++)n[C].status=4,n[C].abortReason=w}Dc(t,e)}},f)}function Dc(t,e){const n=n_(t,e),r=vh(n),o=s_(t,n);return MT(t,o,r),r}function MT(t,e,n){if(e.length===0)return;const r=[];let o=[];const f=e.filter(g=>g.status===0).map(g=>g.currentWriteId);for(let g=0;g<e.length;g++){const b=e[g],w=Hs(n,b.path);let k=!1,C;if(Ue(w!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),b.status===4)k=!0,C=b.abortReason,o=o.concat(so(t.serverSyncTree_,b.currentWriteId,!0));else if(b.status===0)if(b.retryCount>=PT)k=!0,C="maxretry",o=o.concat(so(t.serverSyncTree_,b.currentWriteId,!0));else{const N=t_(t,b.path,f);b.currentInputSnapshot=N;const j=e[g].update(N.val());if(j!==void 0){rm("transaction failed: Data returned ",j,b.path);let M=rs(j);typeof j=="object"&&j!=null&&Mi(j,".priority")||(M=M.updatePriority(N.getPriority()));const Q=b.currentWriteId,ae=am(t),X=GP(M,N,ae);b.currentOutputSnapshotRaw=M,b.currentOutputSnapshotResolved=X,b.currentWriteId=X2(t),f.splice(f.indexOf(Q),1),o=o.concat(LP(t.serverSyncTree_,b.path,X,b.currentWriteId,b.applyLocally)),o=o.concat(so(t.serverSyncTree_,Q,!0))}else k=!0,C="nodata",o=o.concat(so(t.serverSyncTree_,b.currentWriteId,!0))}Kr(t.eventQueue_,n,o),o=[],k&&(e[g].status=2,(function(N){setTimeout(N,Math.floor(0))})(e[g].unwatcher),e[g].onComplete&&(C==="nodata"?r.push(()=>e[g].onComplete(null,!1,e[g].currentInputSnapshot)):r.push(()=>e[g].onComplete(new Error(C),!1,null))))}om(t,t.transactionQueueTree_);for(let g=0;g<r.length;g++)Vc(r[g]);J2(t,t.transactionQueueTree_)}function n_(t,e){let n,r=t.transactionQueueTree_;for(n=Mt(e);n!==null&&Hc(r)===void 0;)r=W2(r,n),e=_n(e),n=Mt(e);return r}function s_(t,e){const n=[];return r_(t,e,n),n.sort((r,o)=>r.order-o.order),n}function r_(t,e,n){const r=Hc(e);if(r)for(let o=0;o<r.length;o++)n.push(r[o]);sm(e,o=>{r_(t,o,n)})}function om(t,e){const n=Hc(e);if(n){let r=0;for(let o=0;o<n.length;o++)n[o].status!==2&&(n[r]=n[o],r++);n.length=r,VP(e,n.length>0?n:void 0)}sm(e,r=>{om(t,r)})}function Z2(t,e){const n=vh(n_(t,e)),r=W2(t.transactionQueueTree_,e);return lT(r,o=>{t0(t,o)}),t0(t,r),HP(r,o=>{t0(t,o)}),n}function t0(t,e){const n=Hc(e);if(n){const r=[];let o=[],d=-1;for(let f=0;f<n.length;f++)n[f].status===3||(n[f].status===1?(Ue(d===f-1,"All SENT items should be at beginning of queue."),d=f,n[f].status=3,n[f].abortReason="set"):(Ue(n[f].status===0,"Unexpected transaction status in abort"),n[f].unwatcher(),o=o.concat(so(t.serverSyncTree_,n[f].currentWriteId,!0)),n[f].onComplete&&r.push(n[f].onComplete.bind(null,new Error("set"),!1,null))));d===-1?VP(e,void 0):n.length=d+1,Kr(t.eventQueue_,vh(e),o);for(let f=0;f<r.length;f++)Vc(r[f])}}function DT(t){let e="";const n=t.split("/");for(let r=0;r<n.length;r++)if(n[r].length>0){let o=n[r];try{o=decodeURIComponent(o.replace(/\+/g," "))}catch{}e+="/"+o}return e}function OT(t){const e={};t.charAt(0)==="?"&&(t=t.substring(1));for(const n of t.split("&")){if(n.length===0)continue;const r=n.split("=");r.length===2?e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):Ys(`Invalid query segment '${n}' in query '${t}'`)}return e}const zy=function(t,e){const n=UT(t),r=n.namespace;n.domain==="firebase.com"&&da(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||r==="undefined")&&n.domain!=="localhost"&&da("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||zS();const o=n.scheme==="ws"||n.scheme==="wss";return{repoInfo:new lP(n.host,n.secure,r,o,e,"",r!==n.subdomain),path:new cn(n.pathString)}},UT=function(t){let e="",n="",r="",o="",d="",f=!0,g="https",b=443;if(typeof t=="string"){let w=t.indexOf("//");w>=0&&(g=t.substring(0,w-1),t=t.substring(w+2));let k=t.indexOf("/");k===-1&&(k=t.length);let C=t.indexOf("?");C===-1&&(C=t.length),e=t.substring(0,Math.min(k,C)),k<C&&(o=DT(t.substring(k,C)));const N=OT(t.substring(Math.min(t.length,C)));w=e.indexOf(":"),w>=0?(f=g==="https"||g==="wss",b=parseInt(e.substring(w+1),10)):w=e.length;const j=e.slice(0,w);if(j.toLowerCase()==="localhost")n="localhost";else if(j.split(".").length<=2)n=j;else{const M=e.indexOf(".");r=e.substring(0,M).toLowerCase(),n=e.substring(M+1),d=r}"ns"in N&&(d=N.ns)}return{host:e,port:b,domain:n,subdomain:r,secure:f,scheme:g,pathString:o,namespace:d}};class BT{constructor(e,n,r,o){this.eventType=e,this.eventRegistration=n,this.snapshot=r,this.prevName=o}getPath(){const e=this.snapshot.ref;return this.eventType==="value"?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+is(this.snapshot.exportVal())}}class $T{constructor(e,n,r){this.eventRegistration=e,this.error=n,this.path=r}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}class i_{constructor(e,n){this.snapshotCallback=e,this.cancelCallback=n}onValue(e,n){this.snapshotCallback.call(null,e,n)}onCancel(e){return Ue(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||this.snapshotCallback.userCallback!==void 0&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}class ev{constructor(e,n,r,o){this._repo=e,this._path=n,this._queryParams=r,this._orderByCalled=o}get key(){return Ot(this._path)?null:S2(this._path)}get ref(){return new pa(this._repo,this._path)}get _queryIdentifier(){const e=Ey(this._queryParams),n=_2(e);return n==="{}"?"default":n}get _queryObject(){return Ey(this._queryParams)}isEqual(e){if(e=ws(e),!(e instanceof ev))return!1;const n=this._repo===e._repo,r=R2(this._path,e._path),o=this._queryIdentifier===e._queryIdentifier;return n&&r&&o}toJSON(){return this.toString()}toString(){return this._repo.toString()+R6(this._path)}}class pa extends ev{constructor(e,n){super(e,n,new I2,!1)}get parent(){const e=vP(this._path);return e===null?null:new pa(this._repo,e)}get root(){let e=this;for(;e.parent!==null;)e=e.parent;return e}}class th{constructor(e,n,r){this._node=e,this.ref=n,this._index=r}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const n=new cn(e),r=F0(this.ref,e);return new th(this._node.getChild(n),r,Un)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return this._node.isLeafNode()?!1:!!this._node.forEachChild(this._index,(r,o)=>e(new th(o,F0(this.ref,r),Un)))}hasChild(e){const n=new cn(e);return!this._node.getChild(n).isEmpty()}hasChildren(){return this._node.isLeafNode()?!1:!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function ct(t,e){return t=ws(t),t._checkNotDeleted("ref"),e!==void 0?F0(t._root,e):t._root}function F0(t,e){return t=ws(t),Mt(t._path)===null?vT("child","path",e):XP("child","path",e),new pa(t._repo,On(t._path,e))}function Oc(t){return JP("remove",t._path),Fr(t,null)}function Fr(t,e){t=ws(t),JP("set",t._path),pT("set",e,t._path);const n=new oh;return RT(t._repo,t._path,e,null,n.wrapCallback(()=>{})),n.promise}function Wn(t,e){mT("update",e,t._path);const n=new oh;return TT(t._repo,t._path,e,n.wrapCallback(()=>{})),n.promise}function yr(t){t=ws(t);const e=new i_(()=>{}),n=new lm(e);return ST(t._repo,t,n).then(r=>new th(r,new pa(t._repo,t._path),t._queryParams.getIndex()))}class lm{constructor(e){this.callbackContext=e}respondsTo(e){return e==="value"}createEvent(e,n){const r=n._queryParams.getIndex();return new BT("value",this,new th(e.snapshotNode,new pa(n._repo,n._path),r))}getEventRunner(e){return e.getEventType()==="cancel"?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,n){return this.callbackContext.hasCancelCallback?new $T(this,e,n):null}matches(e){return e instanceof lm?!e.callbackContext||!this.callbackContext?!0:e.callbackContext.matches(this.callbackContext):!1}hasAnyCallback(){return this.callbackContext!==null}}function LT(t,e,n,r,o){let d;if(typeof r=="object"&&(d=void 0,o=r),typeof r=="function"&&(d=r),o&&o.onlyOnce){const b=n,w=(k,C)=>{Qy(t._repo,t,g),b(k,C)};w.userCallback=n.userCallback,w.context=n.context,n=w}const f=new i_(n,d||void 0),g=new lm(f);return jT(t._repo,t,g),()=>Qy(t._repo,t,g)}function Bg(t,e,n,r){return LT(t,"value",e,n,r)}LR(pa);zR(pa);const KT="FIREBASE_DATABASE_EMULATOR_HOST",q0={};let FT=!1;function qT(t,e,n,r){const o=e.lastIndexOf(":"),d=e.substring(0,o),f=qc(d);t.repoInfo_=new lP(e,f,t.repoInfo_.namespace,t.repoInfo_.webSocketOnly,t.repoInfo_.nodeAdmin,t.repoInfo_.persistenceKey,t.repoInfo_.includeNamespaceInQueryParams,!0,n),r&&(t.authTokenProvider_=r)}function QT(t,e,n,r,o){let d=r||t.options.databaseURL;d===void 0&&(t.options.projectId||da("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Ss("Using default host for project ",t.options.projectId),d=`${t.options.projectId}-default-rtdb.firebaseio.com`);let f=zy(d,o),g=f.repoInfo,b;typeof process<"u"&&hy&&(b=hy[KT]),b?(d=`http://${b}?ns=${g.namespace}`,f=zy(d,o),g=f.repoInfo):f.repoInfo.secure;const w=new n6(t.name,t.options,e);bT("Invalid Firebase Database URL",f),Ot(f.path)||da("Database URL must point to the root of a Firebase Database (not including a child path).");const k=GT(g,t,w,new t6(t,n));return new VT(k,t)}function zT(t,e){const n=q0[e];(!n||n[t.key]!==t)&&da(`Database ${e}(${t.repoInfo_}) has already been deleted.`),IT(t),delete n[t.key]}function GT(t,e,n,r){let o=q0[e.name];o||(o={},q0[e.name]=o);let d=o[t.toURLString()];return d&&da("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),d=new _T(t,FT,n,r),o[t.toURLString()]=d,d}class VT{constructor(e,n){this._repoInternal=e,this.app=n,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(kT(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new pa(this._repo,Ht())),this._rootInternal}_delete(){return this._rootInternal!==null&&(zT(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){this._rootInternal===null&&da("Cannot call "+e+" on a deleted database.")}}function WT(t=ux(),e){const n=d2(t,"database").getImmediate({identifier:e});if(!n._instanceStarted){const r=q4("database");r&&HT(n,...r)}return n}function HT(t,e,n,r={}){t=ws(t),t._checkNotDeleted("useEmulator");const o=`${e}:${n}`,d=t._repoInternal;if(t._instanceStarted){if(o===t._repoInternal.repoInfo_.host&&pl(r,d.repoInfo_.emulatorOptions))return;da("connectDatabaseEmulator() cannot initialize or alter the emulator configuration after the database instance has started.")}let f;if(d.repoInfo_.nodeAdmin)r.mockUserToken&&da('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),f=new sg(sg.OWNER);else if(r.mockUserToken){const g=typeof r.mockUserToken=="string"?r.mockUserToken:Q4(r.mockUserToken,t.app.options.projectId);f=new sg(g)}qc(e)&&(sx(e),rx("Database",!0)),qT(d,o,r,f)}function YT(t){$S(zc),Ec(new gl("database",(e,{instanceIdentifier:n})=>{const r=e.getProvider("app").getImmediate(),o=e.getProvider("auth-internal"),d=e.getProvider("app-check-internal");return QT(r,o,d,n)},"PUBLIC").setMultipleInstances(!0)),oo(fy,py,t),oo(fy,py,"esm2020")}la.prototype.simpleListen=function(t,e){this.sendRequest("q",{p:t},e)};la.prototype.echo=function(t,e){this.sendRequest("echo",{d:t},e)};YT();const XT={apiKey:"AIzaSyApZcKZtqIkR1lMF4Ynavf0AJJb-rjNYBg",authDomain:"flowbuddy-vi7rt.firebaseapp.com",databaseURL:"https://flowbuddy-vi7rt-default-rtdb.firebaseio.com",projectId:"flowbuddy-vi7rt",storageBucket:"flowbuddy-vi7rt.firebasestorage.app",messagingSenderId:"885170360423",appId:"1:885170360423:web:e94217a42c9c6eaac184c2"},a_=cx(XT),rl=DS(a_),ut=WT(a_);function Er(t=12){const e="abcdefghijklmnopqrstuvwxyz0123456789";let n="";return crypto.getRandomValues(new Uint8Array(t)).forEach(r=>{n+=e[r%e.length]}),n}const $g={brown:{light:"#f4e3c7",dark:"#a27355"},blue:{light:"#e2ecf7",dark:"#5b6f8c"},green:{light:"#e5f2e0",dark:"#6a8b6a"}},o_="brown";function $r(t){const e=t&&$g[t]?t:o_;return{key:e,colors:$g[e]}}const JT="/assets/White%20Pawn-CsxYRWps.png",ZT="/assets/White%20Rook-Bo7aN8jK.png",eE="/assets/White%20Knight-DNZQZ2iP.png",tE="/assets/White%20Bishop-DpinRom7.png",nE="/assets/White%20Queen-BemhFu2x.png",sE="/assets/White%20King-CC7LKORR.png",rE="/assets/Black%20Pawn-BvkQ8cBr.png",iE="/assets/Black%20Rook-B15T88c8.png",aE="/assets/Black%20Knight-fCWnImSB.png",oE="/assets/Black%20Bishop-CY89vPKV.png",lE="/assets/Black%20Queen-B0QwyR23.png",cE="/assets/Black%20King-BYuYmXG4.png",uE="/assets/Freestyle%20White%20Pawn-DQs2ozLP.png",dE="/assets/Freestyle%20White%20Rook-cFEcTf9D.png",hE="/assets/Freestyle%20White%20Knight-CGp3GcZI.png",fE="/assets/Freestyle%20White%20Bishop-omNqahjR.png",pE="/assets/Freestyle%20White%20Queen-BmEImOqm.png",gE="/assets/Freestyle%20White%20King-DrFFolR7.png",mE="/assets/Freestyle%20Black%20Pawn-CGWGnBiM.png",vE="/assets/Freestyle%20Black%20Rook-0YZE8Pge.png",bE="/assets/Freestyle%20Black%20Knight-YLsk7VZm.png",yE="/assets/Freestyle%20Black%20Bishop-Ds-t94xf.png",wE="/assets/Freestyle%20Black%20Queen-STJDFxnw.png",xE="/assets/Freestyle%20Black%20King-3DRjg-29.png",PE="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2045%2045'%3e%3cpath%20fill='%23fff'%20stroke='%23000'%20stroke-linecap='round'%20stroke-width='1.5'%20d='M22.5%209c-2.21%200-4%201.79-4%204%200%20.89.29%201.71.78%202.38C17.33%2016.5%2016%2018.59%2016%2021c0%202.03.94%203.84%202.41%205.03-3%201.06-7.41%205.55-7.41%2013.47h23c0-7.92-4.41-12.41-7.41-13.47%201.47-1.19%202.41-3%202.41-5.03%200-2.41-1.33-4.5-3.28-5.62.49-.67.78-1.49.78-2.38%200-2.21-1.79-4-4-4z'/%3e%3c/svg%3e",_E="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2045%2045'%3e%3cg%20fill='%23fff'%20fill-rule='evenodd'%20stroke='%23000'%20stroke-linecap='round'%20stroke-linejoin='round'%20stroke-width='1.5'%3e%3cpath%20stroke-linecap='butt'%20d='M9%2039h27v-3H9v3zm3-3v-4h21v4H12zm-1-22V9h4v2h5V9h5v2h5V9h4v5'/%3e%3cpath%20d='m34%2014-3%203H14l-3-3'/%3e%3cpath%20stroke-linecap='butt'%20stroke-linejoin='miter'%20d='M31%2017v12.5H14V17'/%3e%3cpath%20d='m31%2029.5%201.5%202.5h-20l1.5-2.5'/%3e%3cpath%20fill='none'%20stroke-linejoin='miter'%20d='M11%2014h23'/%3e%3c/g%3e%3c/svg%3e",kE="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2045%2045'%3e%3cg%20fill='none'%20fill-rule='evenodd'%20stroke='%23000'%20stroke-linecap='round'%20stroke-linejoin='round'%20stroke-width='1.5'%3e%3cpath%20fill='%23fff'%20d='M22%2010c10.5%201%2016.5%208%2016%2029H15c0-9%2010-6.5%208-21'/%3e%3cpath%20fill='%23fff'%20d='M24%2018c.38%202.91-5.55%207.37-8%209-3%202-2.82%204.34-5%204-1.042-.94%201.41-3.04%200-3-1%200%20.19%201.23-1%202-1%200-4.003%201-4-4%200-2%206-12%206-12s1.89-1.9%202-3.5c-.73-.994-.5-2-.5-3%201-1%203%202.5%203%202.5h2s.78-1.992%202.5-3c1%200%201%203%201%203'/%3e%3cpath%20fill='%23000'%20d='M9.5%2025.5a.5.5%200%201%201-1%200%20.5.5%200%201%201%201%200zm5.433-9.75a.5%201.5%2030%201%201-.866-.5.5%201.5%2030%201%201%20.866.5z'/%3e%3c/g%3e%3c/svg%3e",NE="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2045%2045'%3e%3cg%20fill='none'%20fill-rule='evenodd'%20stroke='%23000'%20stroke-linecap='round'%20stroke-linejoin='round'%20stroke-width='1.5'%3e%3cg%20fill='%23fff'%20stroke-linecap='butt'%3e%3cpath%20d='M9%2036c3.39-.97%2010.11.43%2013.5-2%203.39%202.43%2010.11%201.03%2013.5%202%200%200%201.65.54%203%202-.68.97-1.65.99-3%20.5-3.39-.97-10.11.46-13.5-1-3.39%201.46-10.11.03-13.5%201-1.35.49-2.32.47-3-.5%201.35-1.94%203-2%203-2z'/%3e%3cpath%20d='M15%2032c2.5%202.5%2012.5%202.5%2015%200%20.5-1.5%200-2%200-2%200-2.5-2.5-4-2.5-4%205.5-1.5%206-11.5-5-15.5-11%204-10.5%2014-5%2015.5%200%200-2.5%201.5-2.5%204%200%200-.5.5%200%202z'/%3e%3cpath%20d='M25%208a2.5%202.5%200%201%201-5%200%202.5%202.5%200%201%201%205%200z'/%3e%3c/g%3e%3cpath%20stroke-linejoin='miter'%20d='M17.5%2026h10M15%2030h15m-7.5-14.5v5M20%2018h5'/%3e%3c/g%3e%3c/svg%3e",CE="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2045%2045'%3e%3cg%20fill='%23fff'%20fill-rule='evenodd'%20stroke='%23000'%20stroke-linecap='round'%20stroke-linejoin='round'%20stroke-width='1.5'%3e%3cpath%20d='M8%2012a2%202%200%201%201-4%200%202%202%200%201%201%204%200zm16.5-4.5a2%202%200%201%201-4%200%202%202%200%201%201%204%200zM41%2012a2%202%200%201%201-4%200%202%202%200%201%201%204%200zM16%208.5a2%202%200%201%201-4%200%202%202%200%201%201%204%200zM33%209a2%202%200%201%201-4%200%202%202%200%201%201%204%200z'/%3e%3cpath%20stroke-linecap='butt'%20d='M9%2026c8.5-1.5%2021-1.5%2027%200l2-12-7%2011V11l-5.5%2013.5-3-15-3%2015-5.5-14V25L7%2014l2%2012z'/%3e%3cpath%20stroke-linecap='butt'%20d='M9%2026c0%202%201.5%202%202.5%204%201%201.5%201%201%20.5%203.5-1.5%201-1.5%202.5-1.5%202.5-1.5%201.5.5%202.5.5%202.5%206.5%201%2016.5%201%2023%200%200%200%201.5-1%200-2.5%200%200%20.5-1.5-1-2.5-.5-2.5-.5-2%20.5-3.5%201-2%202.5-2%202.5-4-8.5-1.5-18.5-1.5-27%200z'/%3e%3cpath%20fill='none'%20d='M11.5%2030c3.5-1%2018.5-1%2022%200M12%2033.5c6-1%2015-1%2021%200'/%3e%3c/g%3e%3c/svg%3e",SE="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2045%2045'%3e%3cg%20fill='none'%20fill-rule='evenodd'%20stroke='%23000'%20stroke-linecap='round'%20stroke-linejoin='round'%20stroke-width='1.5'%3e%3cpath%20stroke-linejoin='miter'%20d='M22.5%2011.63V6M20%208h5'/%3e%3cpath%20fill='%23fff'%20stroke-linecap='butt'%20stroke-linejoin='miter'%20d='M22.5%2025s4.5-7.5%203-10.5c0%200-1-2.5-3-2.5s-3%202.5-3%202.5c-1.5%203%203%2010.5%203%2010.5'/%3e%3cpath%20fill='%23fff'%20d='M11.5%2037c5.5%203.5%2015.5%203.5%2021%200v-7s9-4.5%206-10.5c-4-6.5-13.5-3.5-16%204V27v-3.5c-3.5-7.5-13-10.5-16-4-3%206%205%2010%205%2010V37z'/%3e%3cpath%20d='M11.5%2030c5.5-3%2015.5-3%2021%200m-21%203.5c5.5-3%2015.5-3%2021%200m-21%203.5c5.5-3%2015.5-3%2021%200'/%3e%3c/g%3e%3c/svg%3e",RE="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2045%2045'%3e%3cpath%20stroke='%23000'%20stroke-linecap='round'%20stroke-width='1.5'%20d='M22.5%209a4%204%200%200%200-3.22%206.38%206.48%206.48%200%200%200-.87%2010.65c-3%201.06-7.41%205.55-7.41%2013.47h23c0-7.92-4.41-12.41-7.41-13.47a6.46%206.46%200%200%200-.87-10.65A4.01%204.01%200%200%200%2022.5%209z'/%3e%3c/svg%3e",TE="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2045%2045'%3e%3cg%20fill-rule='evenodd'%20stroke='%23000'%20stroke-linecap='round'%20stroke-linejoin='round'%20stroke-width='1.5'%3e%3cpath%20stroke-linecap='butt'%20d='M9%2039h27v-3H9v3zm3.5-7%201.5-2.5h17l1.5%202.5h-20zm-.5%204v-4h21v4H12z'/%3e%3cpath%20stroke-linecap='butt'%20stroke-linejoin='miter'%20d='M14%2029.5v-13h17v13H14z'/%3e%3cpath%20stroke-linecap='butt'%20d='M14%2016.5%2011%2014h23l-3%202.5H14zM11%2014V9h4v2h5V9h5v2h5V9h4v5H11z'/%3e%3cpath%20fill='none'%20stroke='%23ececec'%20stroke-linejoin='miter'%20stroke-width='1'%20d='M12%2035.5h21m-20-4h19m-18-2h17m-17-13h17M11%2014h23'/%3e%3c/g%3e%3c/svg%3e",EE="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2045%2045'%3e%3cg%20fill='none'%20fill-rule='evenodd'%20stroke='%23000'%20stroke-linecap='round'%20stroke-linejoin='round'%20stroke-width='1.5'%3e%3cpath%20fill='%23000'%20d='M22%2010c10.5%201%2016.5%208%2016%2029H15c0-9%2010-6.5%208-21'/%3e%3cpath%20fill='%23000'%20d='M24%2018c.38%202.91-5.55%207.37-8%209-3%202-2.82%204.34-5%204-1.04-.94%201.41-3.04%200-3-1%200%20.19%201.23-1%202-1%200-4%201-4-4%200-2%206-12%206-12s1.89-1.9%202-3.5c-.73-1-.5-2-.5-3%201-1%203%202.5%203%202.5h2s.78-2%202.5-3c1%200%201%203%201%203'/%3e%3cpath%20fill='%23ececec'%20stroke='%23ececec'%20d='M9.5%2025.5a.5.5%200%201%201-1%200%20.5.5%200%201%201%201%200zm5.43-9.75a.5%201.5%2030%201%201-.86-.5.5%201.5%2030%201%201%20.86.5z'/%3e%3cpath%20fill='%23ececec'%20stroke='none'%20d='m24.55%2010.4-.45%201.45.5.15c3.15%201%205.65%202.49%207.9%206.75S35.75%2029.06%2035.25%2039l-.05.5h2.25l.05-.5c.5-10.06-.88-16.85-3.25-21.34-2.37-4.49-5.79-6.64-9.19-7.16l-.51-.1z'/%3e%3c/g%3e%3c/svg%3e",jE="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2045%2045'%3e%3cg%20fill='none'%20fill-rule='evenodd'%20stroke='%23000'%20stroke-linecap='round'%20stroke-linejoin='round'%20stroke-width='1.5'%3e%3cg%20fill='%23000'%20stroke-linecap='butt'%3e%3cpath%20d='M9%2036c3.4-1%2010.1.4%2013.5-2%203.4%202.4%2010.1%201%2013.5%202%200%200%201.6.5%203%202-.7%201-1.6%201-3%20.5-3.4-1-10.1.5-13.5-1-3.4%201.5-10.1%200-13.5%201-1.4.5-2.3.5-3-.5%201.4-2%203-2%203-2z'/%3e%3cpath%20d='M15%2032c2.5%202.5%2012.5%202.5%2015%200%20.5-1.5%200-2%200-2%200-2.5-2.5-4-2.5-4%205.5-1.5%206-11.5-5-15.5-11%204-10.5%2014-5%2015.5%200%200-2.5%201.5-2.5%204%200%200-.5.5%200%202z'/%3e%3cpath%20d='M25%208a2.5%202.5%200%201%201-5%200%202.5%202.5%200%201%201%205%200z'/%3e%3c/g%3e%3cpath%20stroke='%23ececec'%20stroke-linejoin='miter'%20d='M17.5%2026h10M15%2030h15m-7.5-14.5v5M20%2018h5'/%3e%3c/g%3e%3c/svg%3e",IE="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2045%2045'%3e%3cg%20fill-rule='evenodd'%20stroke='%23000'%20stroke-linecap='round'%20stroke-linejoin='round'%20stroke-width='1.5'%3e%3cg%20stroke='none'%3e%3ccircle%20cx='6'%20cy='12'%20r='2.75'/%3e%3ccircle%20cx='14'%20cy='9'%20r='2.75'/%3e%3ccircle%20cx='22.5'%20cy='8'%20r='2.75'/%3e%3ccircle%20cx='31'%20cy='9'%20r='2.75'/%3e%3ccircle%20cx='39'%20cy='12'%20r='2.75'/%3e%3c/g%3e%3cpath%20stroke-linecap='butt'%20d='M9%2026c8.5-1.5%2021-1.5%2027%200l2.5-12.5L31%2025l-.3-14.1-5.2%2013.6-3-14.5-3%2014.5-5.2-13.6L14%2025%206.5%2013.5%209%2026z'/%3e%3cpath%20stroke-linecap='butt'%20d='M9%2026c0%202%201.5%202%202.5%204%201%201.5%201%201%20.5%203.5-1.5%201-1.5%202.5-1.5%202.5-1.5%201.5.5%202.5.5%202.5%206.5%201%2016.5%201%2023%200%200%200%201.5-1%200-2.5%200%200%20.5-1.5-1-2.5-.5-2.5-.5-2%20.5-3.5%201-2%202.5-2%202.5-4-8.5-1.5-18.5-1.5-27%200z'/%3e%3cpath%20fill='none'%20stroke-linecap='butt'%20d='M11%2038.5a35%2035%201%200%200%2023%200'/%3e%3cpath%20fill='none'%20stroke='%23ececec'%20d='M11%2029a35%2035%201%200%201%2023%200m-21.5%202.5h20m-21%203a35%2035%201%200%200%2022%200m-23%203a35%2035%201%200%200%2024%200'/%3e%3c/g%3e%3c/svg%3e",AE="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2045%2045'%3e%3cg%20fill='none'%20fill-rule='evenodd'%20stroke='%23000'%20stroke-linecap='round'%20stroke-linejoin='round'%20stroke-width='1.5'%3e%3cpath%20stroke-linejoin='miter'%20d='M22.5%2011.6V6'/%3e%3cpath%20fill='%23000'%20stroke-linecap='butt'%20stroke-linejoin='miter'%20d='M22.5%2025s4.5-7.5%203-10.5c0%200-1-2.5-3-2.5s-3%202.5-3%202.5c-1.5%203%203%2010.5%203%2010.5'/%3e%3cpath%20fill='%23000'%20d='M11.5%2037a22.3%2022.3%200%200%200%2021%200v-7s9-4.5%206-10.5c-4-6.5-13.5-3.5-16%204V27v-3.5c-3.5-7.5-13-10.5-16-4-3%206%205%2010%205%2010V37z'/%3e%3cpath%20stroke-linejoin='miter'%20d='M20%208h5'/%3e%3cpath%20stroke='%23ececec'%20d='M32%2029.5s8.5-4%206-9.7C34.1%2014%2025%2018%2022.5%2024.6v2.1-2.1C20%2018%209.9%2014%207%2019.9c-2.5%205.6%204.8%209%204.8%209'/%3e%3cpath%20stroke='%23ececec'%20d='M11.5%2030c5.5-3%2015.5-3%2021%200m-21%203.5c5.5-3%2015.5-3%2021%200m-21%203.5c5.5-3%2015.5-3%2021%200'/%3e%3c/g%3e%3c/svg%3e",Q0={chesscom:{w:{p:JT,r:ZT,n:eE,b:tE,q:nE,k:sE},b:{p:rE,r:iE,n:aE,b:oE,q:lE,k:cE}},freestyle:{w:{p:uE,r:dE,n:hE,b:fE,q:pE,k:gE},b:{p:mE,r:vE,n:bE,b:yE,q:wE,k:xE}},lichess:{w:{p:PE,r:_E,n:kE,b:NE,q:CE,k:SE},b:{p:RE,r:TE,n:EE,b:jE,q:IE,k:AE}}},l_="chesscom";function Tr(t){const e=t&&Q0[t]?t:l_;return{key:e,pieces:Q0[e]}}const Zs={user:"pawnpoint_user",progress:"pawnpoint_progress",courses:"pawnpoint_courses",suggestions:"pawnpoint_suggestions",xpHistory:"pawnpoint_xp_history",clubLeaderboard:"pawnpoint_club_leaderboard",squareBase:"pawnpoint_square_base"},ul="/pieces/wQ.png",tv="courses",c_="xpHistory",nv="squareBaseBooks",ME=["/pieces/wB.png","/pieces/bQ.png","/pieces/wN.png","/pieces/bK.png"],DE="My Group",OE=[{id:"course-london",title:"The London System",description:"Club-ready white repertoire that keeps pressure and teaches universal plans.",category:"white_opening",difficulty:"beginner",thumbnailUrl:ME[0],accentColor:"#ec4899",lessons:[{id:"l1",title:"Why Play the London",summary:"Principles and key themes."},{id:"l2",title:"Typical Structures",summary:"Plans in classical pawn chains."},{id:"l3",title:"Model Game Review",summary:"Club-level example with blunders fixed."}],chapters:{"london-1":{id:"london-1",title:"Foundations",index:0,subsections:{"london-video-1":{id:"london-video-1",type:"video",title:"Why play the London",videoUrl:"https://www.youtube.com/embed/GlOQ8k8ZHbM",index:0}}},"london-2":{id:"london-2",title:"Plans vs ...d5 and ...g6",index:1,subsections:{"london-video-2":{id:"london-video-2",type:"video",title:"Hitting kingside fianchettos",videoUrl:"https://www.youtube.com/embed/oo8g52D0F8E",index:0}}}}}];function Lg(t){const e=(t||"").replace(/[^0-9]/g,"");return e?e.slice(-4).padStart(4,"0"):""}function rg(t){const e=Lg(t);return e?`#${e}`:""}function Ts(t){const e=t||Zt();return e?.groupId?{scope:"group",cacheKey:`group-${e.groupId}`,groupId:e.groupId,userId:e.id}:e?.id?{scope:"personal",cacheKey:`user-${e.id}`,userId:e.id}:{scope:"public",cacheKey:"public"}}function Oi(t,e){const n=Ts(e),r=n.scope==="group"?`groups/${n.groupId}/`:n.scope==="personal"?`users/${n.userId}/`:"";return{...n,path:`${r}${t}`}}function Yc(t,e){return`${t}:${e.cacheKey}`}function Zt(){const t=localStorage.getItem(Zs.user);if(!t)return null;try{const e=JSON.parse(t);e.isAdmin===void 0&&(e.isAdmin=!1,Tn(e)),e.createdAt===void 0&&(e.createdAt=Date.now(),Tn(e)),e.lastStreakAt===void 0&&(e.lastStreakAt=ji(new Date(e.createdAt||Date.now())),Tn(e));const n=ji(new Date),r=ji(new Date(e.lastStreakAt||e.createdAt||Date.now()));return n-r>1440*60*1e3&&(e.streak=0,e.lastStreakAt=r,Tn(e)),e.pawns===void 0&&(e.pawns=0,Tn(e)),e.accountType===void 0&&(e.accountType=e.groupId?"group":void 0,Tn(e)),e.groupId=e.groupId??null,e.groupCode=e.groupCode??null,e.groupName=e.groupName??null,e.groupRole=e.groupRole??null,e.unlockedPfps=e.unlockedPfps||[],e.unlockedTaglines=e.unlockedTaglines||[],e.unlockedVideos=e.unlockedVideos||[],e.unlockedSets=e.unlockedSets||[],e.taglinesEnabled=e.taglinesEnabled??!0,e.selectedTagline=e.selectedTagline??"",e.onlineRating=typeof e.onlineRating=="number"?e.onlineRating:1e3,e.boardTheme=$r(e.boardTheme).key,e.pieceTheme=Tr(e.pieceTheme).key,Tn(e),e.xpReachedAt===void 0&&(e.xpReachedAt=e.createdAt??Date.now(),Tn(e)),e}catch{return null}}function Tn(t){localStorage.setItem(Zs.user,JSON.stringify(t))}function UE(){try{const t=localStorage.getItem(Zs.suggestions);if(!t)return null;const e=JSON.parse(t);return Array.isArray(e?.courseIds)?{courseIds:e.courseIds,source:e.source}:null}catch{return null}}function BE(t,e){localStorage.setItem(Zs.suggestions,JSON.stringify({courseIds:t.slice(0,5),source:e||"manual"}))}function sv(t){return{id:t.id||Er(),title:(t.title||"").trim(),url:(t.url||"").trim(),addedBy:t.addedBy,addedByName:t.addedByName,createdAt:t.createdAt||Date.now()}}function cm(t){return{id:t.id||Er(),name:(t.name||"").trim()||"Player",rating:Math.max(0,Math.round(t.rating||0)),performance:t.performance!==void 0?Math.round(t.performance):void 0,addedBy:t.addedBy,createdAt:t.createdAt||Date.now()}}function um(t){const e=t||Ts();try{const n=localStorage.getItem(Yc(Zs.clubLeaderboard,e));if(!n)return[];const r=JSON.parse(n);return Array.isArray(r)?r.map(o=>cm(o||{})):[]}catch{return[]}}function dm(t,e){const n=e||Ts();try{localStorage.setItem(Yc(Zs.clubLeaderboard,n),JSON.stringify(t))}catch{}}function rv(t){const e=t||Ts();try{const n=localStorage.getItem(Yc(Zs.squareBase,e));if(!n)return[];const r=JSON.parse(n);return Array.isArray(r)?r.map(o=>sv(o||{})):[]}catch{return[]}}function iv(t,e){const n=e||Ts();try{localStorage.setItem(Yc(Zs.squareBase,n),JSON.stringify(t))}catch{}}function av(t){if(!t)return ul;const e=t.trim();return e&&(e.startsWith("/")||e.startsWith("data:"))?e:ul}function z0(t){const e={...t};if(typeof e.index!="number"&&delete e.index,"fen"in e){const n=typeof e.fen=="string"?e.fen.trim():"";n?e.fen=n:delete e.fen}if("trainerNote"in e){const n=typeof e.trainerNote=="string"?e.trainerNote.trim():"";n?e.trainerNote=n:delete e.trainerNote}return Object.keys(e).forEach(n=>{e[n]===void 0&&delete e[n]}),e}function ov(t,e){const n=new Set,r=[],o=(f,g)=>{const b=typeof t[f]?.index=="number"?t[f].index:Number.MAX_SAFE_INTEGER,w=typeof t[g]?.index=="number"?t[g].index:Number.MAX_SAFE_INTEGER;return b!==w?b-w:f.localeCompare(g)},d=f=>{f.forEach(g=>{t[g]&&!n.has(g)&&(r.push(g),n.add(g))})};return e?.length&&d(e),d(Object.keys(t).sort(o)),r.reduce((f,g,b)=>(f[g]={...t[g],index:b},f),{})}function po(t){const e={};return Object.entries(t||{}).forEach(([n,r])=>{if(!r)return;const o={};Object.entries(r.chapters||{}).forEach(([d,f])=>{if(!f)return;const g={};Object.entries(f.subsections||{}).forEach(([b,w])=>{w&&(g[b]=z0(w))}),o[d]={...f,subsections:ov(g)}}),e[n]={...r,thumbnailUrl:av(r.thumbnailUrl),chapters:o}}),e}function go(t){return Array.isArray(t)?t.map(e=>go(e)):t&&typeof t=="object"?Object.entries(t).reduce((n,[r,o])=>(o===void 0||(n[r]=go(o)),n),{}):t}function hm(t){const e={};return Object.entries(t||{}).forEach(([n,r])=>{r!==void 0&&(e[n]=r)}),e}const $E=new Set(["course-trompowsky","course-pieces","course-dragon","course-skills","course-endgame"]);go(po(lv(OE)));function Gy(t){let e=!1;const n={};return Object.entries(t).forEach(([r,o])=>{if($E.has(r)){e=!0;return}n[r]=o}),{record:n,changed:e}}function lv(t){return t.reduce((e,n)=>(e[n.id]=n,e),{})}function LE(t){return Object.values(t||{})}function u_(t){const e=t||Ts(),n=localStorage.getItem(Yc(Zs.courses,e));if(!n)return{};try{const r=JSON.parse(n);return Array.isArray(r)?po(lv(r.filter(Boolean))):po(r||{})}catch{return{}}}function Kg(t,e){const n=e||Ts();try{const r=po(t),o=go(r);localStorage.setItem(Yc(Zs.courses,n),JSON.stringify(o))}catch{}}async function Bs(t){const e=Ts(t),{path:n}=Oi(tv,t);try{const r=await yr(ct(ut,n));if(r.exists()){const o=r.val(),d=Array.isArray(o)?lv(o.filter(Boolean)):o||{},f=go(po(d)),{record:g,changed:b}=Gy(f);if(b)try{await Ui(g,t)}catch(w){console.warn("Failed to persist patched course record; using local copy.",w),Kg(g,e)}return g}return{}}catch(r){const o=go(po(u_(e)));if(Object.keys(o).length){const{record:d,changed:f}=Gy(o);return f&&Kg(d,e),d}return console.warn("Failed to fetch courses; returning local/empty.",r),{}}}async function Ui(t,e){const n=Ts(e),{path:r}=Oi(tv,e),o=po(t),d=go(o);try{await Fr(ct(ut,r),d),Kg(d,n)}catch(f){throw Kg(d,n),console.error("Failed to write courses to Firebase; saved locally instead.",f),new Error("Cloud save failed. Check network/Firebase rules.")}}function KE(t,e,n){const r=Ts(n),{path:o}=Oi(`${tv}/${t}`,n),d=ct(ut,o),f=Bg(d,g=>{const b=g.val(),w=b&&b.id?go(po({[b.id]:b})[b.id]):b?{...b,thumbnailUrl:ul}:null;e(w||null)},()=>{const g=u_(r);e(g[t]||null)});return()=>f()}function d_(){const t=localStorage.getItem(Zs.progress);if(!t)return{};try{return JSON.parse(t)}catch{return{}}}function FE(t){localStorage.setItem(Zs.progress,JSON.stringify(t))}const qE=7;function ji(t){const e=new Date(t);return e.setHours(0,0,0,0),e.getTime()}function fm(t,e=qE){const n=Date.now()-e*24*60*60*1e3;return(t||[]).filter(r=>(r?.ts||0)>=n&&typeof r.amount=="number")}function h_(t){try{const e=localStorage.getItem(`${Zs.xpHistory}:${t}`);if(!e)return[];const n=JSON.parse(e);return fm(Array.isArray(n)?n:[])}catch{return[]}}function f_(t,e){try{localStorage.setItem(`${Zs.xpHistory}:${t}`,JSON.stringify(fm(e)))}catch{}}async function p_(t,e){const r={ts:e.ts||Date.now(),amount:Math.max(0,e.amount)};e.courseId&&(r.courseId=e.courseId),e.subsectionId&&(r.subsectionId=e.subsectionId),e.type&&(r.type=e.type),e.source&&(r.source=e.source);const o=Er();try{await Fr(ct(ut,`${c_}/${t}/${o}`),r)}catch(g){console.warn("Failed to write XP event to Firebase; keeping local only",g)}const d=h_(t),f=fm([...d,{...r,id:o}]);f_(t,f)}async function G0(t,e,n){const r=Date.now(),o=Math.floor(e/100)+1,d={totalXp:e,level:o,xpReachedAt:r,...n||{}},f=ct(ut,`users/${t}`);try{await Wn(f,d)}catch(b){console.warn("Failed to update XP in Firebase",b)}const g=Zt();if(g&&g.id===t){const b={...g,...d};Tn(b)}return d}async function cv(t,e,n){const r=Math.max(0,e);if(!r)return;const o=ji(new Date),d=ct(ut,`users/${t}`);let f=1;try{const b=(await yr(d)).val()||{},w=b.streak||0,k=ji(new Date(b.lastStreakAt||b.xpReachedAt||b.createdAt||0));k===o?f=w||1:o-k===1440*60*1e3?f=(w||0)+1:f=1;const C=(b.totalXp||0)+r;await G0(t,C,{streak:f,lastStreakAt:o})}catch(g){console.warn("Failed to update XP in Firebase, continuing locally",g);const b=Zt(),w=b&&b.id===t&&b.totalXp||0,k=b?.lastStreakAt!==void 0?ji(new Date(b.lastStreakAt)):ji(new Date(b?.xpReachedAt||b?.createdAt||0));b&&(k===o?f=b.streak||1:o-k===1440*60*1e3?f=(b.streak||0)+1:f=1),await G0(t,w+r,{streak:f,lastStreakAt:o})}try{await p_(t,{amount:r,courseId:n?.courseId,subsectionId:n?.subsectionId,type:n?.type,source:n?.source||"general"})}catch(g){console.warn("Failed to log XP event",g)}}async function QE(t){const e=Zt();if(!e||e.id!==t)return null;const n=Math.floor((e.totalXp||0)/25);if(n<=0)return{pawnsAdded:0,remainingXp:e.totalXp};const r=n*25,o=Math.max(0,(e.totalXp||0)-r),d=(e.pawns||0)+n;await G0(t,o);const f=Zt(),g=f&&f.id===t?{...f,pawns:d}:{...e,pawns:d};Tn(g);const b=ct(ut,`users/${t}`);try{await Wn(b,{pawns:d})}catch(w){console.warn("Failed to update pawns/XP in Firebase",w)}try{await p_(t,{amount:0,courseId:void 0,subsectionId:"xp_to_pawn_claim",source:"xp_to_pawns",type:void 0})}catch(w){console.warn("Failed to log XP-to-pawn claim",w)}return{pawnsAdded:n,remainingXp:o}}async function zE(t){const e=()=>h_(t);try{const n=await yr(ct(ut,`${c_}/${t}`));if(n.exists()){const r=n.val(),o=Object.entries(r||{}).map(([f,g])=>({...g,id:f,ts:g&&g.ts||g&&g.timestamp||0,amount:(g&&g.amount)??0})),d=fm(o);return f_(t,d),d}return e()}catch(n){return console.warn("Failed to fetch XP history, using local cache",n),e()}}function GE(t,e){const n=new Date;n.setHours(0,0,0,0);const r=n.getTime(),o=r-8640*60*1e3,d=Math.min(r,Math.max(o,e?.startFrom??o)),f=[];let g=d;for(;g<=r;){const k=new Date(g).toLocaleDateString("en-US",{weekday:"short"});f.push({key:g,label:k,total:0}),g+=1440*60*1e3}if(!f.length){const w=n.toLocaleDateString("en-US",{weekday:"short"});f.push({key:r,label:w,total:0})}const b=new Map(f.map((w,k)=>[w.key,k]));return(t||[]).forEach(w=>{if(!w?.ts)return;const k=ji(new Date(w.ts)),C=b.get(k);C!==void 0&&(f[C].total+=Math.max(0,w.amount))}),f.map(w=>({day:w.label,label:w.label,total:Math.round(w.total)}))}function VE(t){const e={};(t||[]).forEach(r=>{if(!r?.amount)return;const o=r.type,d=(r.source||"").toLowerCase();let f="Other";o==="quiz"||d.includes("quiz")?f="Quizzes":o==="video"||d.includes("video")?f="Videos":d.includes("game")||d.includes("practice")||d.includes("match")?f="Games":(d.includes("course")||o==="study")&&(f="Courses"),e[f]=(e[f]||0)+r.amount});const n={Quizzes:"#60a5fa",Videos:"#a855f7",Games:"#f59e0b",Courses:"#22d3ee",Other:"#94a3b8"};return Object.entries(e).map(([r,o])=>({label:r,value:Math.round(o),color:n[r]||"#94a3b8"}))}async function pm(t){try{const e=await yr(ct(ut,`progress/${t}`));return e.exists()?e.val():{}}catch{const e=d_(),n={};return Object.entries(e).forEach(([r,o])=>{const[d]=r.split(":").slice(-1);n[d]={completedSubsections:o.completedLessonIds.reduce((f,g)=>({...f,[g]:!0}),{}),percent:o.progressPercent}}),n}}async function g_(t,e){try{await Fr(ct(ut,`progress/${t}`),e)}catch(n){console.error("Failed to write progress to Firebase",n)}}function uv(t){return t?.chapters?Object.values(t.chapters).reduce((e,n)=>e+Object.keys(n.subsections||{}).length,0):0}function dv(t){return t?.chapters?Object.values(t.chapters).flatMap(e=>Object.keys(e.subsections||{})):[]}function WE(t){return t==="video"?100:t==="study"?150:200}async function zp(t,e,n){const r=Zt(),o=r&&r.email===t?{...r,accountType:r.accountType??(r.groupId?"group":void 0),groupId:r.groupId??null,groupCode:r.groupCode??null,groupName:r.groupName??null,groupRole:r.groupRole??(r.groupId?"member":null),isAdmin:r.isAdmin??!1,chessUsername:r.chessUsername||r.displayName||r.email.split("@")[0],createdAt:r.createdAt??Date.now(),xpReachedAt:r.xpReachedAt??r.createdAt??Date.now(),unlockedPfps:r.unlockedPfps||[],unlockedTaglines:r.unlockedTaglines||[],unlockedVideos:r.unlockedVideos||[],unlockedSets:r.unlockedSets||[],selectedTagline:r.selectedTagline??"",taglinesEnabled:r.taglinesEnabled??!0,onlineRating:typeof r.onlineRating=="number"?r.onlineRating:1e3,boardTheme:$r(r.boardTheme).key,pieceTheme:Tr(r.pieceTheme).key}:{id:n||Er(),email:t,displayName:e||t.split("@")[0],chessUsername:e||t.split("@")[0],avatarUrl:void 0,totalXp:120,level:2,streak:1,pawns:0,onlineRating:1e3,isAdmin:!1,createdAt:Date.now(),xpReachedAt:Date.now(),accountType:void 0,groupId:null,groupCode:null,groupName:null,groupRole:null,unlockedPfps:[],unlockedTaglines:[],unlockedVideos:[],unlockedSets:[],selectedTagline:"",taglinesEnabled:!0,lastStreakAt:ji(new Date),boardTheme:o_,pieceTheme:l_},d=ct(ut,`users/${o.id}`);try{const g=(await yr(d)).val(),b=g?.accountType??o.accountType??(g?.groupId||o.groupId?"group":void 0),w={...o,...g||{},email:o.email,displayName:o.displayName||g?.displayName||o.email.split("@")[0],chessUsername:g?.chessUsername||o.chessUsername||o.displayName||o.email.split("@")[0],createdAt:g?.createdAt??o.createdAt,xpReachedAt:g?.xpReachedAt??o.xpReachedAt??o.createdAt??Date.now(),pawns:g?.pawns??o.pawns??0,onlineRating:g?.onlineRating??o.onlineRating??1e3,totalXp:g?.totalXp??o.totalXp,level:g?.level??o.level,accountType:b,groupId:g?.groupId??o.groupId??null,groupCode:g?.groupCode??o.groupCode??null,groupName:g?.groupName??o.groupName??null,groupRole:g?.groupRole??o.groupRole??(g?.groupId||o.groupId?"member":null),unlockedPfps:g?.unlockedPfps||o.unlockedPfps||[],unlockedTaglines:g?.unlockedTaglines||o.unlockedTaglines||[],unlockedVideos:g?.unlockedVideos||o.unlockedVideos||[],unlockedSets:g?.unlockedSets||o.unlockedSets||[],selectedTagline:g?.selectedTagline??o.selectedTagline??"",taglinesEnabled:g?.taglinesEnabled??o.taglinesEnabled??!0,lastStreakAt:g?.lastStreakAt??o.lastStreakAt??ji(new Date),boardTheme:$r(g?.boardTheme||o.boardTheme).key,pieceTheme:Tr(g?.pieceTheme||o.pieceTheme).key};Tn(w);const k=hm(w);return await Wn(d,k),w}catch(f){return console.warn("Failed to sync profile with Firebase, using local only",f),Tn(o),o}}async function Vy(t){const e=Zt();if(!e)return null;const n={...e,isAdmin:t};return Tn(n),n}async function HE(t){const e=Zt();if(!e)return null;const n={...e,chessUsername:t,displayName:e.displayName||t};Tn(n);try{await Wn(ct(ut,`users/${e.id}`),{chessUsername:t})}catch(r){console.warn("Failed to sync chess username to Firebase",r)}return n}async function YE(t){const e=Zt();if(!e)return null;const n=t.trim(),r=n.includes("@")?n.split("@")[0]:n,o=__({...e,email:n,displayName:e.displayName||r,chessUsername:e.chessUsername||e.displayName||r});Tn(o);try{await Wn(ct(ut,`users/${e.id}`),{email:o.email,displayName:o.displayName,chessUsername:o.chessUsername})}catch(d){console.warn("Failed to sync email change",d)}return o}async function XE(){try{const e=(await yr(ct(ut,"users"))).val()||{},n={};Object.entries(e).forEach(([o,d])=>{n[o]={...d,totalXp:0,level:1,xpReachedAt:Date.now()}}),await Wn(ct(ut,"users"),n);const r=Zt();if(r&&n[r.id]){const o={...r,...n[r.id]};Tn(o)}}catch(t){console.warn("Failed to reset XP for all users",t)}}async function JE(t,e){const n=Zt();if(!n)return null;const r=$r(t).key,o=Tr(e||n.pieceTheme).key,d={...n,boardTheme:r,pieceTheme:o};Tn(d);try{await Wn(ct(ut,`users/${n.id}`),{boardTheme:r,pieceTheme:o})}catch(f){console.warn("Failed to sync board theme",f)}return d}async function ZE(){localStorage.removeItem(Zs.user)}async function e8(){for(let t=0;t<25;t++){const e=Math.floor(Math.random()*1e4).toString().padStart(4,"0"),n=ct(ut,`groupCodes/${e}`);if(!(await yr(n)).exists())return{code:rg(e),digits:e}}throw new Error("Could not generate a unique group code. Please try again.")}async function hv(t){try{const e=await yr(ct(ut,`groups/${t}`));return e.exists()?e.val():null}catch{return null}}async function t8(){const t=Zt();if(!t)return null;const e=t.groupRole==="admin"?!1:t.isAdmin,n={...t,accountType:"personal",groupId:null,groupCode:null,groupName:null,groupRole:null,isAdmin:e};Tn(n);try{await Wn(ct(ut,`users/${t.id}`),{accountType:"personal",groupId:null,groupCode:null,groupName:null,groupRole:null,isAdmin:n.isAdmin})}catch(r){console.warn("Failed to persist personal account choice",r)}return await Bs(n).catch(()=>{}),n}async function m_(t){const e=Zt();if(!e)return null;const n=(t||"").trim()||`${e.displayName||"My"} Group`,{code:r,digits:o}=await e8(),d=Er(),f={id:d,name:n,code:r,createdBy:e.id,createdAt:Date.now()},g={id:e.id,displayName:e.displayName,email:e.email,role:"admin",joinedAt:Date.now()};try{await Fr(ct(ut,`groups/${d}`),{...f,members:{[e.id]:g}}),await Fr(ct(ut,`groupCodes/${o}`),d)}catch(w){console.warn("Failed to create group in Firebase",w)}const b={...e,accountType:"group",groupId:d,groupCode:f.code,groupName:f.name,groupRole:"admin",isAdmin:!0};Tn(b);try{await Wn(ct(ut,`users/${e.id}`),{accountType:"group",groupId:d,groupCode:f.code,groupName:f.name,groupRole:"admin",isAdmin:!0})}catch(w){console.warn("Failed to sync group details to user profile",w)}return await Bs(b).catch(()=>{}),{group:f,profile:b}}async function v_(t){const e=Zt();if(!e)return null;const n=Lg(t);if(n.length!==4)throw new Error("Enter a valid 4-digit code.");const r=ct(ut,`groupCodes/${n}`),o=await yr(r),d=async()=>{const C="south-knight",N=ct(ut,`groups/${C}`);let j=null;try{j=(await yr(N)).val()||{id:C,name:"South Knight",code:rg(n),createdBy:"system",createdAt:Date.now(),members:{}},await Fr(N,j),await Fr(r,C)}catch{j={id:C,name:"South Knight",code:rg(n),createdBy:"system",createdAt:Date.now(),members:{}}}return j};let f,g=null;if(o.exists()){if(f=o.val(),g=await hv(f),!g)if(n==="0055")g=await d();else throw new Error("That group no longer exists.")}else if(n==="0055")g=await d(),f=g.id;else throw new Error("No group found for that code.");const b={id:f,name:g.name||DE,code:g.code||rg(n),createdBy:g.createdBy,createdAt:g.createdAt||Date.now()},w={id:e.id,displayName:e.displayName,email:e.email,role:"member",joinedAt:Date.now()};try{await Wn(ct(ut,`groups/${f}/members/${e.id}`),w)}catch(C){console.warn("Failed to record membership in Firebase",C)}const k={...e,accountType:"group",groupId:f,groupCode:b.code,groupName:b.name,groupRole:"member"};Tn(k);try{await Wn(ct(ut,`users/${e.id}`),{accountType:"group",groupId:f,groupCode:b.code,groupName:b.name,groupRole:"member"})}catch(C){console.warn("Failed to sync group join to user profile",C)}return await Bs(k).catch(()=>{}),{group:b,profile:k}}async function n8(){const t=Zt();if(!t?.groupId)return t;try{await Oc(ct(ut,`groups/${t.groupId}/members/${t.id}`))}catch(r){console.warn("Failed to remove membership from Firebase",r)}const e=t.groupRole==="admin"?!1:t.isAdmin,n={...t,accountType:"personal",groupId:null,groupCode:null,groupName:null,groupRole:null,isAdmin:e};Tn(n);try{await Wn(ct(ut,`users/${t.id}`),{accountType:"personal",groupId:null,groupCode:null,groupName:null,groupRole:null,isAdmin:n.isAdmin})}catch(r){console.warn("Failed to sync group exit",r)}return await Bs(n).catch(()=>{}),n}async function nh(t){const e=t||Zt()?.groupId;if(!e)return[];try{const n=await yr(ct(ut,`groups/${e}/members`));if(!n.exists())return[];const r=n.val();return Object.values(r||{}).map(o=>({...o,role:o.role==="admin"?"admin":"member"}))}catch(n){return console.warn("Failed to load group members",n),[]}}async function s8(t,e){if(!t?.groupId||t.groupRole!=="admin")throw new Error("Only group admins can rename the group.");const n=e.trim();if(!n)throw new Error("Enter a group name.");const r=ct(ut,`groups/${t.groupId}`);try{await Wn(r,{name:n})}catch(g){console.warn("Failed to rename group in Firebase",g)}const o=await nh(t.groupId);await Promise.all(o.map(async g=>{try{await Wn(ct(ut,`users/${g.id}`),{groupName:n})}catch(b){console.warn("Failed to sync member name update",b)}}));const d={...t,groupName:n};t.id===Zt()?.id&&Tn(d);const f=await hv(t.groupId);return{id:t.groupId,name:n,code:f?.code||t.groupCode||"",createdBy:f?.createdBy||t.id,createdAt:f?.createdAt||Date.now()}}async function r8(t,e){if(!t?.groupId||t.groupRole!=="admin")throw new Error("Only admins can manage members.");if(e===t.id)return nh(t.groupId);try{await Oc(ct(ut,`groups/${t.groupId}/members/${e}`))}catch(n){console.warn("Failed to remove member from group",n)}try{await Wn(ct(ut,`users/${e}`),{accountType:"personal",groupId:null,groupCode:null,groupName:null,groupRole:null,isAdmin:!1})}catch(n){console.warn("Failed to reset member profile after removal",n)}return nh(t.groupId)}async function i8(t){if(!t?.groupId||t.groupRole!=="admin")throw new Error("Only group admins can delete the group.");let e=[],n=Lg(t.groupCode||"");const r=await hv(t.groupId);r&&(e=Object.values(r.members||{}).map(f=>({...f,role:f.role==="admin"?"admin":"member"})),n=n||Lg(r.code||""));try{await Oc(ct(ut,`groups/${t.groupId}`))}catch(f){console.warn("Failed to delete group from Firebase",f)}if(n)try{await Oc(ct(ut,`groupCodes/${n}`))}catch(f){console.warn("Failed to clear group code mapping",f)}await Promise.all(e.map(async f=>{try{await Wn(ct(ut,`users/${f.id}`),{accountType:"personal",groupId:null,groupCode:null,groupName:null,groupRole:null,isAdmin:!1})}catch(g){console.warn("Failed to reset member after deletion",g)}}));const o=t.groupRole==="admin"?!1:t.isAdmin,d={...t,accountType:"personal",groupId:null,groupCode:null,groupName:null,groupRole:null,isAdmin:o};Tn(d);try{await Wn(ct(ut,`users/${t.id}`),{accountType:"personal",groupId:null,groupCode:null,groupName:null,groupRole:null,isAdmin:d.isAdmin})}catch(f){console.warn("Failed to sync profile after deleting group",f)}return await Bs(d).catch(()=>{}),d}async function Fg(t,e,n){const r=await Bs(n);let o=LE(r);if(e&&e!=="all"&&(o=o.filter(d=>d.category===e)),t){const d=t.toLowerCase();o=o.filter(f=>f.title.toLowerCase().includes(d))}return o}async function yh(t,e){return(await Bs(e))[t]||null}async function a8(t){const e=Zt(),n=await Bs(e),r={...t,id:t.id||Er(),lessons:t.lessons.map(d=>({...d,id:d.id||Er()}))},o={...r,thumbnailUrl:av(r.thumbnailUrl)};return n[o.id]=o,await Ui(n,e),o}async function o8(t){const e=Zt(),n=await Bs(e),r={...t,thumbnailUrl:av(t.thumbnailUrl)};return n[r.id]=r,await Ui(n,e),n[t.id]}async function l8(t){const e=Zt(),n=await Bs(e);delete n[t],await Ui(n,e)}async function b_(t,e,n){const r=Zt(),o=await Bs(r),d=o[t];if(!d)return null;const f=Er(),g={id:f,title:e,index:n,subsections:{}},b=d.chapters||{};return b[f]=g,o[t]={...d,chapters:b},await Ui(o,r),g}async function y_(t,e){const n=Zt(),r=await Bs(n),o=r[t];o?.chapters&&(delete o.chapters[e],r[t]={...o},await Ui(r,n))}async function c8(t,e,n){const r=Zt(),o=await Bs(r),d=o[t];if(!d?.chapters?.[e])return null;const f={...d.chapters[e],...n};return d.chapters[e]=f,o[t]={...d},await Ui(o,r),f}async function w_(t,e,n){const r=Zt(),o=await Bs(r),d=o[t];if(!d)return null;const f=d.chapters||{},g=f[e];if(!g)return null;const b=g.subsections||{},w=Object.fromEntries(Object.entries(b).map(([j,M])=>[j,z0(M)])),k=n.id||Er(),C=typeof n.index=="number"?n.index:Object.keys(w).length;w[k]=z0({...n,id:k,index:C});const N=ov(w);return f[e]={...g,subsections:N},o[t]={...d,chapters:f},await Ui(o,r),N[k]}async function u8(t,e,n){const r=Zt(),o=await Bs(r),d=o[t],f=d?.chapters?.[e],g=f?.subsections;if(!d||!f||!g)return null;const b=new Set,w=[];n.forEach(N=>{g[N]&&!b.has(N)&&(w.push([N,g[N]]),b.add(N))}),Object.entries(g).forEach(([N,j])=>{b.has(N)||(w.push([N,j]),b.add(N))});const k=w.reduce((N,[j,M])=>(N[j]=M,N),{}),C=ov(k,n);return d.chapters[e]={...f,subsections:C},o[t]={...d},await Ui(o,r),C}async function x_(t,e,n){const r=Zt(),o=await Bs(r),d=o[t];d?.chapters?.[e]?.subsections&&(delete d.chapters[e].subsections[n],o[t]={...d},await Ui(o,r))}async function d8(t){const e=await pm(t),n={};return await Promise.all(Object.entries(e).map(async([r,o])=>{const d=await yh(r,Zt()),f=uv(d),g=dv(d),b=Object.keys(o.completedSubsections||{}).filter(w=>g.includes(w));n[r]={courseId:r,completedLessonIds:b,progressPercent:f>0?Math.round(b.length/f*100):0,lastLessonId:b[b.length-1]}})),n}async function P_(t,e){const r=(await pm(t))[e],o=await yh(e,Zt()),d=uv(o),f=dv(o);if(!r)return null;const g=Object.keys(r.completedSubsections||{}).filter(b=>f.includes(b));return{courseId:e,completedLessonIds:g,progressPercent:d>0?Math.round(g.length/d*100):0,lastLessonId:g[g.length-1]}}async function h8(t,e){const n=await pm(t);n[e]&&(delete n[e],await g_(t,n));const r=d_();r[e]&&(delete r[e],FE(r))}function __(t){return{...t,unlockedPfps:t.unlockedPfps||[],unlockedTaglines:t.unlockedTaglines||[],unlockedVideos:t.unlockedVideos||[],unlockedSets:t.unlockedSets||[],selectedTagline:t.selectedTagline??"",taglinesEnabled:t.taglinesEnabled??!0,onlineRating:typeof t.onlineRating=="number"?t.onlineRating:1e3,pieceTheme:Tr(t.pieceTheme).key,boardTheme:$r(t.boardTheme).key}}async function f8(t,e){const n=Zt();if(!n||n.id!==t)return null;const r=__(n);e.type==="pfp"?r.unlockedPfps.includes(e.value)||r.unlockedPfps.push(e.value):e.type==="tagline"?e.value&&!r.unlockedTaglines.includes(e.value)&&r.unlockedTaglines.push(e.value):e.type==="video"?e.value&&!r.unlockedVideos.includes(e.value)&&r.unlockedVideos.push(e.value):e.type==="piece"&&e.value&&!r.unlockedSets.includes(e.value)&&r.unlockedSets.push(e.value),Tn(r);try{await Wn(ct(ut,`users/${t}`),{unlockedPfps:r.unlockedPfps,unlockedTaglines:r.unlockedTaglines,unlockedVideos:r.unlockedVideos,unlockedSets:r.unlockedSets})}catch(o){console.warn("Failed to sync unlocked gifts",o)}return r}async function p8(t,e,n){return ig(t,e,n,"study")}async function k_(t){const e=await zE(t.id),n=GE(e,{startFrom:t.createdAt}),r=VE(e),o=await Fg(void 0,void 0,t),d=UE();let f=o.slice(0,3);if(d?.courseIds?.length){const b=d.courseIds.map(w=>o.find(k=>k.id===w)).filter(Boolean);b.length&&(f=b.slice(0,3))}const g=Math.min(3,o.length);if(f.length<g){const b=new Set(f.map(w=>w.id));for(const w of o){if(f.length>=g)break;b.has(w.id)||(f.push(w),b.add(w.id))}}return{profile:t,xpHistory:n,xpDistribution:r,suggested:f}}function g8(t,e){BE(t,e)}async function m8(t=500){try{const n=(await yr(ct(ut,"users"))).val()||{};return Object.values(n||{}).filter(d=>typeof d?.totalXp=="number").sort((d,f)=>{const g=(f.totalXp||0)-(d.totalXp||0);if(g!==0)return g;const b=d.xpReachedAt??d.createdAt??0,w=f.xpReachedAt??f.createdAt??0;return b-w}).slice(0,t)}catch(e){return console.warn("Failed to load global leaderboard from Firebase",e),[{id:"u1",displayName:"AceKnight",email:"ace@example.com",totalXp:52e3,level:521,pawns:0,streak:0,isAdmin:!1},{id:"u2",displayName:"DiamondDynamo",email:"dynamo@example.com",totalXp:18e3,level:181,pawns:0,streak:0,isAdmin:!1},{id:"u3",displayName:"GoldGrinder",email:"grinder@example.com",totalXp:4500,level:46,pawns:0,streak:0,isAdmin:!1}]}}async function v8(t){const e=Ts(t),{path:n}=Oi("clubLeaderboard",t),r=()=>um(e);try{const o=await yr(ct(ut,n));if(o.exists()){const d=o.val(),f=Object.values(d||{}).map(g=>cm(g||{}));return dm(f,e),f}return r()}catch(o){return console.warn("Failed to load club leaderboard from Firebase",o),r()}}async function b8(t,e){if(!t?.isAdmin)throw new Error("Only admins can add participants.");const n=cm({...e,addedBy:t.id}),r=Ts(t),{path:o}=Oi("clubLeaderboard",t),d=[...um(r),n];dm(d,r);try{await Fr(ct(ut,`${o}/${n.id}`),hm(n))}catch(f){console.warn("Failed to sync club participant to Firebase",f)}return d}async function y8(t,e,n){if(!t?.isAdmin)throw new Error("Only admins can update performance.");const r=Ts(t),{path:o}=Oi("clubLeaderboard",t),f=um(r).map(b=>b.id===e?cm({...b,rating:n.rating!==void 0?n.rating:b.rating,performance:n.performance!==void 0?n.performance:b.performance}):b);dm(f);const g=hm({rating:n.rating!==void 0?Math.max(0,Math.round(n.rating)):void 0,performance:n.performance!==void 0?Math.round(n.performance):void 0});try{await Wn(ct(ut,`${o}/${e}`),g)}catch(b){console.warn("Failed to update club performance",b)}return f}async function w8(t,e){if(!t?.isAdmin)throw new Error("Only admins can remove participants.");const n=Ts(t),{path:r}=Oi("clubLeaderboard",t),o=um(n).filter(d=>d.id!==e);dm(o,n);try{await Oc(ct(ut,`${r}/${e}`))}catch(d){console.warn("Failed to remove club participant from Firebase",d)}return o}function x8(t,e){const n=Ts(e),{path:r}=Oi(nv,e),o=ct(ut,r),d=Bg(o,f=>{const g=f.val(),b=Object.values(g||{}).map(w=>sv(w||{}));iv(b,n),t(b.sort((w,k)=>(k.createdAt||0)-(w.createdAt||0)))},()=>{t(rv(n))});return()=>d()}async function P8(t,e){if(!t?.isAdmin)throw new Error("Only admins can add books.");const n=(e.url||"").trim();if(!n)throw new Error("PDF URL is required.");const r=sv({...e,url:n,addedBy:t.id,addedByName:t.displayName||t.email||"Admin"}),o=Ts(t),{path:d}=Oi(nv,t),f=[...rv(o),r];iv(f,o);try{await Fr(ct(ut,`${d}/${r.id}`),hm(r))}catch(g){console.warn("Failed to sync Square Base book to Firebase",g)}return r}async function _8(t,e){if(!t?.isAdmin)throw new Error("Only admins can remove books.");const n=Ts(t),{path:r}=Oi(nv,t),o=rv(n).filter(d=>d.id!==e);iv(o,n);try{await Oc(ct(ut,`${r}/${e}`))}catch(d){console.warn("Failed to remove Square Base book from Firebase",d)}}async function ig(t,e,n,r){const o=await pm(t),d=await yh(e,Zt()),f=uv(d),g=dv(d),b=o[e]||{completedSubsections:{},percent:0};b.completedSubsections=Object.fromEntries(Object.keys(b.completedSubsections||{}).filter(C=>g.includes(C)).map(C=>[C,!0]));const w=!!b.completedSubsections[n];b.completedSubsections[n]=!0;const k=Object.keys(b.completedSubsections).length;if(b.percent=f>0?Math.min(100,Math.round(k/f*100)):0,b.lastUpdated=Date.now(),o[e]=b,await g_(t,o),!w){const C=WE(r);await cv(t,C,{source:"course_progress",courseId:e,subsectionId:n,type:r})}return{courseId:e,completedLessonIds:Object.keys(b.completedSubsections),progressPercent:b.percent,lastLessonId:n}}const N_=T.createContext(void 0),k8={user:null,loading:!1,login:async()=>{},loginWithGoogle:async()=>{},logout:async()=>{},setUser:()=>{}};function N8({children:t}){const[e,n]=T.useState(null),[r,o]=T.useState(!0),d=new ra,f=new Date().toDateString();T.useEffect(()=>{PC(rl,Ux).catch(C=>{console.warn("Failed to set auth persistence",C)})},[]);const g=C=>{if(!C||localStorage.getItem("pawnpoint_last_login_day")===f)return C;const j={...C,streak:(C.streak||0)+1};return localStorage.setItem("pawnpoint_last_login_day",f),localStorage.setItem("pawnpoint_user",JSON.stringify(j)),j};T.useEffect(()=>{const C=NC(rl,async N=>{if(N?.email){const j=await zp(N.email,N.displayName||N.email.split("@")[0],N.uid),M=g(j);n(M)}else n(null);o(!1)});return()=>C()},[f]);const b=async(C,N,j,M="login")=>{o(!0);try{if(M==="signup"){const $=await mC(rl,C,N);j&&await yC($.user,{displayName:j});const Q=await zp($.user.email||C,j||$.user.displayName||C.split("@")[0],$.user.uid),ae=g(Q);n(ae)}else{const $=await vC(rl,C,N),Q=await zp($.user.email||C,$.user.displayName||j||C.split("@")[0],$.user.uid),ae=g(Q);n(ae)}}finally{o(!1)}},w=async()=>{o(!0);try{const C=await zC(rl,d,Vx),N=C.user.email||"",j=await zp(N,C.user.displayName||N.split("@")[0],C.user.uid),M=g(j);n(M)}finally{o(!1)}},k=async()=>{await CC(rl),await ZE(),n(null)};return l.jsx(N_.Provider,{value:{user:e,loading:r,login:b,loginWithGoogle:w,logout:k,setUser:n},children:t})}function $s(){const t=T.useContext(N_);return t||(console.error("useAuth must be used inside AuthProvider. Falling back to a safe default context."),k8)}const C_="/assets/Login%20screen-3VPFw6PG.png";function Wy({mode:t}){const{user:e,login:n,loginWithGoogle:r,loading:o}=$s(),[,d]=fa(),[f,g]=T.useState(""),[b,w]=T.useState(""),[k,C]=T.useState(""),[N,j]=T.useState(""),[M,$]=T.useState(0),Q=t==="login",ae=Date.now(),X=M>ae,[P,W]=T.useState(0);T.useEffect(()=>{if(!X){W(0);return}const ve=()=>{const Ye=Math.max(0,Math.ceil((M-Date.now())/1e3));W(Ye)};ve();const be=window.setInterval(ve,1e3);return()=>window.clearInterval(be)},[X,M]),T.useEffect(()=>{e&&d("/dashboard")},[e,d]);const u=async()=>{if(!f||!Q&&!b||!k){j("Please fill in all required fields.");return}if(X){const ve=Math.max(1,Math.ceil((M-Date.now())/1e3));j(`Too many attempts. Please wait ${ve}s before trying again.`);return}try{j(""),await n(f,k,b||f.split("@")[0],Q?"login":"signup"),d("/dashboard")}catch(ve){console.error("Auth error",ve);const be=ve?.code||"";be==="auth/email-already-in-use"?j("That email is already registered. Try logging in instead."):be==="auth/invalid-credential"||be==="auth/wrong-password"?j("Invalid email or password. Please try again."):be==="auth/too-many-requests"?(j("Too many attempts. Please wait a minute and try again."),$(Date.now()+6e4)):j("Sign-in failed. Please check your details and try again.")}},ye=async()=>{try{j(""),await r(),d("/dashboard")}catch(ve){console.error("Google auth error",ve);const be=ve?.code||"";be==="auth/popup-closed-by-user"?j("Google popup was closed. Please try again."):be==="auth/too-many-requests"?(j("Too many attempts. Please wait a minute and try again."),$(Date.now()+6e4)):j("Google sign-in failed. Please try again or use email/password.")}};return l.jsxs("div",{className:"min-h-screen relative bg-slate-950 text-white flex items-center justify-center px-4",children:[l.jsx("div",{className:"absolute inset-0 bg-cover bg-center opacity-40",style:{backgroundImage:`url(${C_})`}}),l.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-slate-900/40 via-slate-950/50 to-black/60"}),l.jsxs("div",{className:"relative z-10 w-full max-w-lg rounded-3xl p-8 shadow-2xl border border-white/10 bg-white/5 backdrop-blur-xl",children:[l.jsxs("div",{className:"text-center mb-6 space-y-2",children:[l.jsxs("div",{className:"pill glass inline-flex items-center gap-2 border-white/10",children:[l.jsx("div",{className:"h-2 w-2 rounded-full bg-brand.pink"}),l.jsx("span",{children:"Pawn Point"})]}),l.jsx("h1",{className:"text-3xl font-semibold",children:Q?"Log In":"Create Account"}),l.jsx("p",{className:"text-white/70 text-sm",children:"Train, track XP, and climb the club leaderboard."})]}),l.jsxs("div",{className:"space-y-3",children:[l.jsxs(Oe,{variant:"outline",className:"w-full justify-center",onClick:ye,disabled:o||X,children:[l.jsx(s4,{className:"h-4 w-4 mr-2"}),o?"Please wait...":"Continue with Google"]}),l.jsxs("div",{className:"flex items-center gap-3 text-xs text-white/60",children:[l.jsx("span",{className:"h-px flex-1 bg-white/10"}),"or",l.jsx("span",{className:"h-px flex-1 bg-white/10"})]}),N&&l.jsxs("div",{className:"rounded-xl border border-amber-400/40 bg-amber-400/10 text-amber-100 px-3 py-2 text-sm",children:[N," ",X&&P>0?`(wait ${P}s)`:""]}),!Q&&l.jsxs("div",{children:[l.jsx("label",{className:"text-sm text-white/80",children:"Display name"}),l.jsx("div",{className:"mt-1 relative",children:l.jsx("input",{className:"w-full rounded-xl bg-white/10 border border-white/10 px-3 py-3 focus:outline-none focus:ring-2 focus:ring-brand.pink",placeholder:"Chess Shark",value:b,onChange:ve=>w(ve.target.value)})})]}),l.jsxs("div",{children:[l.jsx("label",{className:"text-sm text-white/80",children:"Email"}),l.jsxs("div",{className:"mt-1 relative",children:[l.jsx(Gw,{className:"absolute left-3 top-3 h-4 w-4 text-white/50"}),l.jsx("input",{type:"email",className:"w-full rounded-xl bg-white/10 border border-white/10 px-10 py-3 focus:outline-none focus:ring-2 focus:ring-brand.pink",placeholder:"you@example.com",value:f,onChange:ve=>g(ve.target.value)})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"text-sm text-white/80",children:"Password"}),l.jsxs("div",{className:"mt-1 relative",children:[l.jsx(zw,{className:"absolute left-3 top-3 h-4 w-4 text-white/50"}),l.jsx("input",{type:"password",className:"w-full rounded-xl bg-white/10 border border-white/10 px-10 py-3 focus:outline-none focus:ring-2 focus:ring-brand.pink",placeholder:"",value:k,onChange:ve=>C(ve.target.value)})]})]}),l.jsx(Oe,{className:"w-full justify-center",onClick:u,disabled:o||X,children:o?"One moment...":X?`Please wait${P?` (${P}s)`:"..."}`:Q?"Log In":"Create Account"}),l.jsxs("div",{className:"text-sm text-white/70 text-center",children:[Q?"New to Pawn Point?":"Already have an account?"," ",l.jsx("button",{className:"text-brand.pink underline",onClick:()=>d(Q?"/signup":"/login"),children:Q?"Create account":"Log in"})]})]})]})]})}function ha({children:t,className:e}){const r=e?.includes("card-solid")?"rounded-2xl":"glass rounded-2xl";return l.jsx("div",{className:Kc(r,e),children:t})}function Uc({children:t,className:e}){return l.jsx("div",{className:Kc("px-5 py-4 border-b border-white/10",e),children:t})}function mo({children:t,className:e}){return l.jsx("div",{className:Kc("px-5 py-4 space-y-3",e),children:t})}function Bc({children:t,className:e}){return l.jsx("div",{className:Kc("text-lg font-semibold",e),children:t})}function V0(t){return l.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:1.6,strokeLinecap:"round",strokeLinejoin:"round",...t,children:[l.jsx("rect",{x:"4",y:"12.2",width:"4.6",height:"7.6",rx:"1.6"}),l.jsx("rect",{x:"10",y:"6.2",width:"4.6",height:"13.6",rx:"1.6"}),l.jsx("rect",{x:"16",y:"9.2",width:"4.6",height:"10.6",rx:"1.6"})]})}const S_=[{label:"Home",href:"/dashboard",icon:l4},{label:"All Courses",href:"/courses",icon:Ed},{label:"Leaderboards",href:"/leaderboard",icon:V0},{label:"Ranks",href:"/ranks",icon:Kw},{label:"Practice",href:"/practice",icon:qw}],C8=[...S_,{label:"Profile",href:"/profile",icon:i2},{label:"Settings",href:"/settings",icon:Ww}];function Js({children:t}){const{user:e,logout:n,setUser:r}=$s(),[,o]=fa(),[d,f]=T.useState(!1),[g,b]=T.useState(!1),[w,k]=T.useState(()=>typeof window>"u"?!1:localStorage.getItem("pawnpoint_theme")==="light"),[C,N]=T.useState(!1),[j,M]=T.useState(!1),[$,Q]=T.useState("Meh"),[ae,X]=T.useState(""),[P,W]=T.useState(""),[u,ye]=T.useState(!1),[ve,be]=T.useState("choose"),[Ye,me]=T.useState(""),[Me,Ce]=T.useState(""),[$e,ce]=T.useState(""),[ue,ne]=T.useState(!1),V=e?.chessUsername||e?.displayName||e?.email?.split("@")[0]||"Player",z=V?.split(" ").map(Ie=>Ie[0]).join("").slice(0,2).toUpperCase()||"PP",fe=e?.level??1,oe=e?.totalXp??0,U=!!e&&!e.accountType,Z=[{label:"Angry",emoji:""},{label:"Dislike",emoji:""},{label:"Meh",emoji:""},{label:"Happy",emoji:""},{label:"Excited",emoji:""}],xe=w?"bg-slate-50 text-slate-900":"bg-[#101319] text-white",Be=w?"border-slate-200 bg-white/90":"border-white/10 bg-[#111724]",Ze=w?"text-slate-700":"text-white/80",Ve=$==="Meh",O=ae.trim().length>0;T.useEffect(()=>{U&&(ye(!0),be("choose"),ce(""),me(e?.groupName||""),Ce(""))},[U,e?.groupName]),T.useEffect(()=>{const Ie=w?"light":"dark";document.body.classList.toggle("theme-light",w),document.body.classList.toggle("theme-dark",!w),document.documentElement.style.colorScheme=Ie,localStorage.setItem("pawnpoint_theme",Ie)},[w]);const ge=T.useRef(null);T.useEffect(()=>{const Ie=Xe=>{C&&ge.current&&!ge.current.contains(Xe.target)&&N(!1)};return window.addEventListener("mousedown",Ie),()=>window.removeEventListener("mousedown",Ie)},[C]);const Se=()=>{M(!1),Q("Meh"),X(""),W("")},Te=async()=>{if(!O)return;const Ie=ae.trim(),Xe=Ie==="TSEC0ADMIN",nt=Ie==="TSEC0STANDARD";if(!Ve&&(Xe||nt)){W("Admin keys only work when MEH is selected.");return}if(Ve&&(Xe||nt)){if(Xe){const Ut=await Vy(!0);Ut?(r(Ut),W("Admin privileges unlocked. Editing tools are now visible.")):W("Key rejected. No status change applied.")}else if(nt){const Ut=await Vy(!1);Ut?(r(Ut),W("Admin privileges removed. You are back to standard access.")):W("Key rejected. No status change applied.")}X("");return}ae.trim()&&Se()},Ke=()=>{U||(ye(!1),ce(""),be("choose"))},J=async()=>{ne(!0),ce("");try{const Ie=await t8();Ie&&r(Ie),ye(!1)}catch(Ie){ce(Ie?.message||"Could not switch to a personal account.")}finally{ne(!1)}},De=async Ie=>{ne(!0),ce("");try{const Xe=await m_(Ie);Xe?.profile&&(r(Xe.profile),ye(!1))}catch(Xe){ce(Xe?.message||"Could not create the group. Try again.")}finally{ne(!1)}},qe=async()=>{if(!Ye.trim()){ce("Name your group to continue.");return}await De(Ye.trim())},bt=async()=>{if(!Me.trim()){ce("Enter the group code shown to you.");return}ne(!0),ce("");try{const Ie=await v_(Me.trim());Ie?.profile&&(r(Ie.profile),ye(!1))}catch(Ie){ce(Ie?.message||"Could not join that group.")}finally{ne(!1)}};return l.jsxs("div",{className:`min-h-screen ${xe}`,children:[l.jsxs("header",{className:`sticky top-0 z-20 border-b ${Be} backdrop-blur`,children:[l.jsxs("div",{className:"max-w-6xl w-full mx-auto px-4 sm:px-6 py-3 sm:py-4 flex items-center justify-between gap-3",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:"h-12 w-12 overflow-hidden",children:l.jsx("img",{src:y0,alt:"Pawn Point logo",className:"h-full w-full object-cover"})}),l.jsx("span",{className:"text-2xl font-extrabold tracking-tight",children:"Pawn Point"})]}),l.jsx("nav",{className:`hidden md:flex items-center gap-4 text-base font-semibold ${Ze}`,children:S_.map(({href:Ie,label:Xe,icon:nt})=>{const Ut=nt===V0?"h-6 w-6":"h-4 w-4";return Xe==="Practice"?l.jsxs("div",{className:"relative",ref:ge,children:[l.jsxs("button",{onClick:()=>{N(Kt=>!Kt),b(!1)},className:`flex items-center gap-2 rounded-full px-4 py-2 transition ${w?"hover:text-slate-900 hover:bg-slate-200/70":"hover:text-white hover:bg-white/10"}`,children:[l.jsx(nt,{className:Ut}),Xe,l.jsx(Gg,{className:`h-4 w-4 transition ${C?"rotate-180":""}`})]}),C&&l.jsxs("div",{className:"absolute left-1/2 -translate-x-1/2 top-12 w-56 rounded-2xl bg-slate-800 shadow-2xl border border-white/10 py-3 transform",children:[l.jsxs("button",{className:"w-full flex items-center gap-3 px-4 py-2 text-sm text-white hover:bg-white/10",onClick:()=>{o("/practice"),N(!1)},children:[l.jsx(qw,{className:"h-4 w-4"}),"Play AI"]}),l.jsxs("button",{className:"w-full flex items-center gap-3 px-4 py-2 text-sm text-white hover:bg-white/10",onClick:()=>{o("/puzzles"),N(!1)},children:[l.jsx(b4,{className:"h-4 w-4"}),"Puzzles"]}),l.jsxs("button",{className:"w-full flex items-center gap-3 px-4 py-2 text-sm text-white hover:bg-white/10",onClick:()=>{o("/square-base"),N(!1)},children:[l.jsx(Qw,{className:"h-4 w-4"}),"Square Base"]})]})]},Ie):l.jsxs(Ab,{href:Ie,className:`flex items-center gap-2 rounded-full px-4 py-2 transition ${w?"hover:text-slate-900 hover:bg-slate-200/70":"hover:text-white hover:bg-white/10"}`,children:[l.jsx(nt,{className:Ut}),Xe]},Ie)})}),l.jsxs("div",{className:"hidden md:flex items-center gap-3 relative",children:[l.jsxs("button",{onClick:()=>b(Ie=>!Ie),className:`relative flex items-center gap-3 rounded-full border px-3 py-2 hover:bg-white/10 transition ${w?"border-slate-200 bg-white text-slate-900":"border-white/10 bg-white/5 text-white"}`,"aria-haspopup":"menu","aria-expanded":g,children:[e?.avatarUrl?l.jsx("div",{className:"h-9 w-9 rounded-full overflow-hidden border border-white/20",children:l.jsx("img",{src:e.avatarUrl,alt:"Profile avatar",className:"h-full w-full object-cover"})}):l.jsx("div",{className:"h-9 w-9 rounded-full bg-gradient-to-br from-pink-500 to-purple-500 flex items-center justify-center text-sm font-bold text-white",children:z}),l.jsxs("div",{className:"text-left",children:[l.jsxs("div",{className:"text-xs text-white/60",children:["Level ",fe]}),l.jsxs("div",{className:"text-sm font-semibold text-white/90",children:[oe," XP"]})]})]}),g&&l.jsxs("div",{className:"absolute left-1/2 -translate-x-1/2 top-14 w-56 rounded-2xl bg-slate-800 shadow-2xl border border-white/10 py-3 transform",children:[l.jsx("div",{className:"px-4 pb-3",children:l.jsxs("div",{className:"flex items-center gap-3",children:[e?.avatarUrl?l.jsx("div",{className:"h-8 w-8 rounded-full overflow-hidden border border-white/20",children:l.jsx("img",{src:e.avatarUrl,alt:"Profile avatar",className:"h-full w-full object-cover"})}):l.jsx("div",{className:"h-8 w-8 rounded-full bg-slate-700 flex items-center justify-center text-xs font-bold text-white",children:z}),l.jsxs("div",{children:[l.jsx("div",{className:"text-sm font-semibold text-white",children:V}),l.jsxs("div",{className:"text-xs text-emerald-300 font-semibold",children:["LVL ",fe," | ",oe," XP"]}),e?.accountType&&l.jsx("div",{className:"text-[10px] uppercase text-white/50",children:e.accountType==="group"?"Group account":"Personal account"})]})]})}),l.jsxs("div",{className:"px-2 space-y-1 text-sm text-white/80",children:[l.jsxs("button",{className:"w-full flex items-center gap-3 px-3 py-2 rounded-xl hover:bg-white/10 text-left",onClick:()=>{o("/profile"),b(!1)},children:[l.jsx(i2,{className:"h-4 w-4"}),"My Profile"]}),l.jsxs("button",{className:"w-full flex items-center gap-3 px-3 py-2 rounded-xl hover:bg-white/10 text-left",onClick:()=>{o("/settings"),b(!1)},children:[l.jsx(Ww,{className:"h-4 w-4"}),"Settings"]}),l.jsxs("button",{className:"w-full flex items-center gap-3 px-3 py-2 rounded-xl hover:bg-white/10 text-left",onClick:()=>{M(!0),Q("Meh"),X(""),W("")},children:[l.jsx(m4,{className:"h-4 w-4"}),"Feedback"]}),l.jsxs("button",{className:"w-full flex items-center gap-3 px-3 py-2 rounded-xl hover:bg-white/10 text-left",onClick:()=>{n(),o("/login")},children:[l.jsx(b0,{className:"h-4 w-4"}),"Sign out"]})]}),l.jsxs("div",{className:"flex items-center justify-between px-4 pt-3 text-xs text-white/60",children:[l.jsx("span",{children:"Theme"}),l.jsx("button",{className:"flex items-center gap-2 rounded-full bg-white/10 px-2 py-1 text-white hover:bg-white/20 transition",onClick:()=>k(Ie=>!Ie),children:w?l.jsx(pg,{className:"h-4 w-4 text-amber-300"}):l.jsx(hg,{className:"h-4 w-4 text-amber-300"})})]})]})]}),l.jsx("button",{className:"md:hidden text-white/80",onClick:()=>f(Ie=>!Ie),"aria-label":"Toggle navigation",children:d?l.jsx(vr,{}):l.jsx(g4,{})})]}),d&&l.jsx("div",{className:"md:hidden border-t border-white/10 bg-slate-900/95 backdrop-blur",children:l.jsxs("div",{className:"px-4 py-4 space-y-4",children:[e&&l.jsxs("div",{className:"flex items-center gap-3 rounded-xl border border-white/10 bg-white/5 px-3 py-2",children:[e?.avatarUrl?l.jsx("div",{className:"h-10 w-10 rounded-full overflow-hidden border border-white/15",children:l.jsx("img",{src:e.avatarUrl,alt:"Profile avatar",className:"h-full w-full object-cover"})}):l.jsx("div",{className:"h-10 w-10 rounded-full bg-gradient-to-br from-pink-500 to-purple-500 flex items-center justify-center text-sm font-bold text-white",children:z}),l.jsxs("div",{children:[l.jsx("div",{className:"text-sm font-semibold",children:V}),l.jsxs("div",{className:"text-xs text-white/60",children:["LVL ",fe,"  ",oe," XP"]})]})]}),l.jsx("div",{className:"grid grid-cols-2 gap-2 text-base font-semibold",children:C8.map(({href:Ie,label:Xe,icon:nt})=>{const Ut=nt===V0?"h-6 w-6":"h-4 w-4";return l.jsxs(Ab,{href:Ie,className:"flex items-center gap-2 rounded-full border border-white/10 bg-white/5 px-4 py-3 text-white/80 hover:bg-white/10 hover:text-white transition",onClick:()=>f(!1),children:[l.jsx(nt,{className:Ut}),Xe]},Ie)})}),l.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[l.jsxs("button",{className:"flex items-center gap-2 rounded-full border border-white/10 bg-white/5 px-3 py-2 text-sm text-white hover:bg-white/10",onClick:()=>k(Ie=>!Ie),children:[w?l.jsx(pg,{className:"h-4 w-4 text-amber-300"}):l.jsx(hg,{className:"h-4 w-4 text-amber-300"}),l.jsx("span",{children:"Theme"})]}),l.jsxs(Oe,{variant:"ghost",onClick:()=>{n(),o("/login")},className:"flex-1 min-w-[140px]",children:[l.jsx(b0,{className:"h-4 w-4 mr-2"}),"Log out"]})]})]})})]}),l.jsx("main",{className:"w-full max-w-6xl xl:max-w-7xl 2xl:max-w-[1500px] mx-auto px-4 sm:px-6 py-6 sm:py-8",children:t}),u&&l.jsx("div",{className:"fixed inset-0 z-40 flex items-center justify-center bg-black/70 px-4",children:l.jsxs("div",{className:"w-full max-w-lg rounded-2xl bg-slate-900 text-white border border-white/10 shadow-2xl p-6 space-y-4",children:[l.jsxs("div",{className:"flex items-start justify-between gap-3",children:[l.jsxs("div",{children:[l.jsx("div",{className:"text-xl font-semibold",children:U?"Choose your account type":"Switch account"}),l.jsx("div",{className:"text-sm text-white/70",children:"Pick personal to keep your data private, or join/create a group to share courses and leaderboards only with members."})]}),!U&&l.jsx("button",{className:"h-9 w-9 rounded-full bg-white/10 hover:bg-white/20 text-white flex items-center justify-center",onClick:Ke,"aria-label":"Close group dialog",children:l.jsx(vr,{className:"h-4 w-4"})})]}),$e&&l.jsx("div",{className:"rounded-xl border border-amber-400/40 bg-amber-400/10 text-amber-100 px-3 py-2 text-sm",children:$e}),ve==="choose"&&l.jsxs("div",{className:"space-y-2",children:[l.jsx(Oe,{variant:"outline",className:"w-full !justify-start !items-start text-left px-5",onClick:J,disabled:ue,children:l.jsxs("div",{className:"text-left flex flex-col items-start",children:[l.jsx("div",{className:"font-semibold",children:"Personal Account"}),l.jsx("div",{className:"text-xs text-white/80",children:"Only you can see your courses and leaderboard data."})]})}),l.jsx(Oe,{variant:"outline",className:"w-full !justify-start !items-start text-left px-5",onClick:()=>{be("join"),ce("")},disabled:ue,children:l.jsxs("div",{className:"text-left flex flex-col items-start",children:[l.jsx("div",{className:"font-semibold",children:"Join a Group"}),l.jsx("div",{className:"text-xs text-white/80",children:"Use a #1234 code that was shared with you."})]})}),l.jsx(Oe,{variant:"outline",className:"w-full !justify-start !items-start text-left px-5",onClick:()=>{be("create"),ce("")},disabled:ue,children:l.jsxs("div",{className:"text-left flex flex-col items-start",children:[l.jsx("div",{className:"font-semibold",children:"Create a Group"}),l.jsx("div",{className:"text-xs text-white/80",children:"Generate a private code and invite teammates."})]})})]}),ve==="join"&&l.jsxs("div",{className:"space-y-3",children:[l.jsxs("div",{className:"flex items-center justify-between text-sm text-white/70",children:[l.jsx("span",{children:"Enter the group code"}),l.jsxs("button",{className:"flex items-center gap-1 text-white/70 hover:text-white text-xs",onClick:()=>be("choose"),children:[l.jsx(v0,{className:"h-3 w-3"}),"Back to options"]})]}),l.jsx("input",{value:Me,onChange:Ie=>Ce(Ie.target.value),className:"w-full rounded-xl border border-white/10 bg-white/5 px-3 py-3 text-sm outline-none focus:ring-2 focus:ring-pink-400",placeholder:"#1234"}),l.jsx(Oe,{className:"w-full justify-center",onClick:bt,disabled:ue,children:ue?"Joining...":"Join Group"})]}),ve==="create"&&l.jsxs("div",{className:"space-y-3",children:[l.jsxs("div",{className:"flex items-center justify-between text-sm text-white/70",children:[l.jsx("span",{children:"Name your group"}),l.jsxs("button",{className:"flex items-center gap-1 text-white/70 hover:text-white text-xs",onClick:()=>be("choose"),children:[l.jsx(v0,{className:"h-3 w-3"}),"Back to options"]})]}),l.jsx("input",{value:Ye,onChange:Ie=>me(Ie.target.value),className:"w-full rounded-xl border border-white/10 bg-white/5 px-3 py-3 text-sm outline-none focus:ring-2 focus:ring-pink-400",placeholder:"Team Knights"}),l.jsx(Oe,{className:"w-full justify-center",onClick:qe,disabled:ue,children:ue?"Creating...":"Create Group"})]})]})}),j&&l.jsx("div",{className:"fixed inset-0 z-30 flex items-center justify-center bg-black/60 px-4",children:l.jsxs("div",{className:"w-full max-w-md rounded-2xl bg-slate-800 text-white shadow-2xl border border-white/10 p-6",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx("h2",{className:"text-xl font-semibold",children:"Feedback"}),l.jsx("button",{onClick:Se,className:"p-1 rounded-full hover:bg-white/10 text-white/70",children:l.jsx(i4,{className:"h-5 w-5"})})]}),l.jsx("div",{className:"mt-4 text-sm text-white/80",children:"How do you feel about Pawn Point?"}),l.jsx("div",{className:"mt-3 grid grid-cols-5 gap-2",children:Z.map(({label:Ie,emoji:Xe})=>{const nt=$===Ie;return l.jsxs("button",{onClick:()=>{Q(Ie),W("")},className:`flex flex-col items-center gap-1 rounded-xl border px-3 py-2 text-xs ${nt?"border-blue-400 bg-blue-500/20 text-white":"border-white/10 bg-white/5 text-white/80 hover:bg-white/10"}`,children:[l.jsx("span",{className:"text-lg",children:Xe}),l.jsx("span",{children:Ie})]},Ie)})}),l.jsx("div",{className:"mt-4 text-sm text-white/80",children:"Tell us why"}),l.jsxs("div",{className:"mt-2",children:[l.jsx("textarea",{value:ae,onChange:Ie=>X(Ie.target.value.slice(0,500)),className:"w-full rounded-xl border border-white/10 bg-white/5 px-3 py-3 text-sm text-white outline-none focus:ring-2 focus:ring-pink-400",rows:4,placeholder:"Share your thoughts..."}),l.jsxs("div",{className:"text-right text-xs text-white/60",children:[ae.length,"/500"]})]}),l.jsx(Oe,{className:`w-full mt-4 justify-center ${O?"":"bg-white/10 text-white/50 shadow-none pointer-events-none"}`,onClick:Te,children:"Submit Feedback"}),P&&l.jsx("div",{className:"mt-3 text-sm text-emerald-200 bg-emerald-500/10 border border-emerald-300/30 rounded-xl px-3 py-2",children:P})]})})]})}const qg="/assets/The%20South%20Knight-CRvLsmO-.png";function S8(){const{user:t}=$s(),[,e]=fa(),[n,r]=T.useState(null),o=T.useMemo(()=>["gothamchess","gmhikaru","jesse_feb","chesscom","botezlive","chessbrah","annacramling","thechessnerd","dinabelenkaya","chessdojo","chesstopia1","chess24","wittyalien","ericrosen"],[]),d=T.useMemo(()=>typeof window<"u"&&window.location.hostname||"localhost",[]);T.useEffect(()=>{t||e("/login")},[t,e]);const{data:f}=qd({queryKey:["dashboard",t?.id,t?.groupId,t?.accountType],enabled:!!t,queryFn:()=>k_(t)});if(!t)return null;T.useEffect(()=>{let b=!1;return(async()=>{try{const C={query:`query FeaturedLive { ${o.map((Q,ae)=>`
            c${ae}: user(login: "${Q}") {
              login
              displayName
              stream {
                id
                viewersCount
              }
            }`).join(`
`)} }`},M=(await(await fetch("https://gql.twitch.tv/gql",{method:"POST",headers:{"Client-ID":"kimne78kx3ncx6brgo4mv6wki5h1ko","Content-Type":"application/json"},body:JSON.stringify(C)})).json())?.data||{},$=Object.values(M).map(Q=>!Q?.stream?.id||!Q?.login?null:{login:Q.login.toLowerCase(),viewers:Q.stream.viewersCount??0}).filter(Boolean);if(!b)if($.length>0){const Q=$[Math.floor(Math.random()*$.length)];r(Q.login)}else r("chess")}catch(k){console.warn("Failed to fetch top chess stream, using default channel.",k),b||r("chess")}})(),()=>{b=!0}},[]);const g=T.useMemo(()=>{if(!n)return"";const b=`https://player.twitch.tv/?channel=${encodeURIComponent(n)}`,w=`&parent=${encodeURIComponent(d)}&muted=true&autoplay=true&playsinline=true`;return b+w},[n,d]);return l.jsx(Js,{children:l.jsxs("div",{className:"grid lg:grid-cols-3 gap-6",children:[l.jsxs(ha,{className:"card-solid lg:col-span-1 bg-[#2d3749] border border-white/10",children:[l.jsx(Uc,{children:l.jsxs("div",{className:"flex items-center gap-3 flex-wrap",children:[l.jsxs(Bc,{className:"text-xl sm:text-2xl",children:["Hi, ",t.chessUsername||t.displayName]}),l.jsxs("div",{className:"px-3 py-1 rounded-full bg-emerald-500/20 text-emerald-200 border border-emerald-400/30 text-sm",children:["Level ",t.level]})]})}),l.jsxs(mo,{className:"space-y-3",children:[l.jsxs("div",{className:"flex items-center justify-between text-sm text-white/70",children:[l.jsx("span",{children:"Total XP"}),l.jsx("span",{className:"text-white font-semibold",children:t.totalXp})]}),l.jsxs("div",{className:"rounded-xl overflow-hidden border shadow-inner",style:{backgroundColor:"#111724",borderColor:"#111724"},children:[l.jsx("div",{className:"flex items-center justify-between px-3 py-3 text-xs text-white/70 border-b border-white/10",children:l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("span",{className:"font-semibold text-white text-sm",children:"Chess TV"}),l.jsx("span",{className:"uppercase tracking-wide text-[10px] text-white/60",children:"Live on Twitch"})]})}),l.jsx("div",{className:"aspect-video bg-black",children:l.jsx("iframe",{title:"Chess TV",src:g,allow:"accelerometer; autoplay; clipboard-write; encrypted-media; picture-in-picture",allowFullScreen:!0,className:"w-full h-full"})}),l.jsxs("div",{className:"flex items-center justify-between px-3 py-3 text-white border-t border-white/10",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(o4,{className:"h-8 w-8 text-amber-400 animate-pulse drop-shadow-lg"}),l.jsxs("div",{children:[l.jsx("div",{className:"text-xs text-white/70",children:"Daily streak"}),l.jsxs("div",{className:"text-base font-semibold leading-none",children:[t.streak||0," days"]})]})]}),l.jsx("div",{className:"text-[11px] text-white/60",children:"Earn XP each day to keep the flame lit."})]})]})]})]}),l.jsx("div",{className:"lg:col-span-2",children:l.jsxs(ha,{className:"card-solid bg-[#2d3749] border border-white/10",children:[l.jsxs(Uc,{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-2",children:[l.jsx(Bc,{children:"Suggested Courses"}),l.jsx(Oe,{variant:"outline",className:"bg-white/5 hover:bg-white/10 border-white/20",onClick:()=>e("/courses"),children:"Browse all"})]}),l.jsxs(mo,{className:"space-y-6",children:[l.jsxs("div",{className:"grid md:grid-cols-3 gap-4",children:[(f?.suggested||[]).map(b=>l.jsxs("div",{className:"rounded-xl border overflow-hidden flex flex-col h-full",style:{backgroundColor:"#111724",borderColor:"#111724"},children:[l.jsx("img",{src:b.thumbnailUrl,alt:b.title,className:"h-28 w-full object-cover"}),l.jsxs("div",{className:"p-4 flex flex-col gap-2 flex-1",children:[l.jsx("div",{className:"text-sm text-brand.pink uppercase tracking-wide",children:"Suggested"}),l.jsx("div",{className:"font-semibold text-white",children:b.title}),l.jsx("p",{className:"text-sm text-white/80 line-clamp-3 flex-1",children:b.description}),l.jsx(Oe,{className:"w-full mt-2 bg-white/10 hover:bg-white/20 border border-white/20 text-white shadow-none",onClick:()=>e(`/courses/${b.id}`),children:"Continue"})]})]},b.id)),!f&&l.jsx("div",{className:"text-white/70 text-sm",children:"Loading dashboard..."})]}),l.jsxs("div",{className:"rounded-xl border p-4 grid md:grid-cols-[1fr_auto] gap-4 items-center",style:{backgroundColor:"#111724",borderColor:"#111724"},children:[l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsx("div",{className:"h-20 w-20 rounded-full overflow-hidden border border-white/10 shadow-lg",children:l.jsx("img",{src:qg,alt:"The South Knight",className:"h-full w-full object-cover"})}),l.jsxs("div",{className:"space-y-1",children:[l.jsxs("div",{className:"text-sm text-white/70 flex items-center gap-2",children:[l.jsx(Vw,{className:"h-4 w-4 text-emerald-300"}),"AI Practice"]}),l.jsx("div",{className:"text-base font-semibold text-white",children:"Custom sparring sessions, instant XP."})]})]}),l.jsx("div",{className:"flex flex-col gap-3 w-full md:w-auto",children:l.jsx(Oe,{size:"lg",className:"bg-white/10 hover:bg-white/20 border border-white/20 text-white shadow-none",onClick:()=>e("/practice"),children:"Play Training Bot"})})]})]})]})})]})})}function W0({value:t,className:e}){return l.jsx("div",{className:Kc("w-full h-2 rounded-full bg-white/10 overflow-hidden",e),children:l.jsx("div",{className:"h-full rounded-full bg-gradient-to-r from-emerald-400 to-emerald-500 transition-all",style:{width:`${Math.min(Math.max(t,0),100)}%`}})})}const n0=[{key:"all",label:"All"},{key:"white_opening",label:"White Openings"},{key:"black_opening",label:"Black Openings"},{key:"beginner",label:"Beginners"},{key:"middlegame",label:"Middlegame"},{key:"endgame",label:"Endgame"},{key:"skills",label:"Skills"}],s0=()=>({title:"",description:"",category:"beginner",difficulty:"beginner",thumbnailUrl:ul,accentColor:"#ec4899",lessons:[{id:Er(),title:"Lesson 1",summary:"Add content inside the course."},{id:Er(),title:"Lesson 2",summary:"Add content inside the course."}]});function R8(){const[,t]=fa(),e=ih(),{user:n}=$s(),r=!!n?.isAdmin,o=n?.accountType==="group"&&!!n?.groupId,[d,f]=T.useState(""),[g,b]=T.useState("all"),[w,k]=T.useState(!1),[C,N]=T.useState(null),[j,M]=T.useState(s0()),[$,Q]=T.useState(!1),[ae,X]=T.useState(!1),[P,W]=T.useState(""),u=5e6,{data:ye=[]}=qd({queryKey:["courses",d,g,n?.groupId,n?.id,n?.accountType],queryFn:()=>Fg(d,g)}),ve=()=>{e.invalidateQueries({queryKey:["courses"]}),e.invalidateQueries({queryKey:["course"]}),e.invalidateQueries({queryKey:["dashboard"]})},be=Jp({mutationFn:a8,onSuccess:()=>{W(""),ve(),Me()},onError:V=>{const z=V instanceof Error?V.message:"Could not save the course. Try again or clear some data and retry.";W(z)}}),Ye=Jp({mutationFn:o8,onSuccess:()=>{W(""),ve(),Me()},onError:V=>{const z=V instanceof Error?V.message:"Could not save the course. Try again or clear some data and retry.";W(z)}}),me=Jp({mutationFn:l8,onSuccess:(V,z)=>{ve(),C&&C.id===z&&Me()}}),Me=()=>{k(!1),N(null),M(s0()),W(""),Q(!1),X(!1)},Ce=V=>{V?(N(V),M({...V,lessons:V.lessons.map(z=>({...z}))})):(N(null),M(s0())),k(!0),W(""),Q(!1),X(!1)},$e=()=>{if(!r)return;if(W(""),Q(!1),X(!1),j.thumbnailUrl.startsWith("data:image/")&&j.thumbnailUrl.length>u){W("Thumbnail too large. Try a smaller PNG or a hosted link under ~5MB.");return}const V=(j.lessons||[]).length>0?j.lessons:[{id:Er(),title:"Lesson 1",summary:"Add content inside the course."}],z={id:C?.id||j.id||Er(),title:j.title.trim()||"Untitled Course",description:j.description.trim()||"No description yet.",category:j.category,difficulty:j.difficulty,thumbnailUrl:j.thumbnailUrl.trim()||ul,accentColor:j.accentColor||"#ec4899",lessons:V};C?Ye.mutate(z):be.mutate(z)},ce=V=>{!r||!window.confirm(`Delete "${V.title}"? This cannot be undone.`)||me.mutate(V.id)},ue=be.isPending||Ye.isPending,ne=me.isPending;return l.jsx(Js,{children:l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[l.jsxs("div",{children:[l.jsx("h1",{className:"text-2xl font-semibold",children:"All Courses"}),l.jsx("p",{className:"text-white/70 text-sm",children:"Search, filter, and pick up where you left off."})]}),l.jsxs("div",{className:"flex items-center gap-2 text-white/70 text-sm",children:[l.jsx(a4,{className:"h-4 w-4"}),o?"Group catalog":"Personal catalog"]})]}),r&&l.jsxs("div",{className:"rounded-xl border border-emerald-400/30 bg-emerald-500/10 px-4 py-3 flex flex-col md:flex-row md:items-center md:justify-between gap-3",children:[l.jsxs("div",{children:[l.jsx("div",{className:"text-sm font-semibold text-emerald-100",children:"Admin mode active"}),l.jsx("div",{className:"text-xs text-emerald-50/80",children:"Add, edit, delete courses, and update thumbnails directly from the catalog."})]}),l.jsx("div",{className:"flex items-center gap-2",children:l.jsxs(Oe,{variant:"outline",onClick:()=>Ce(),children:[l.jsx(fg,{className:"h-4 w-4 mr-2"}),"Add course"]})})]}),l.jsxs("div",{className:"flex flex-col lg:flex-row gap-3 lg:items-center",children:[l.jsxs("div",{className:"relative flex-1",children:[l.jsx(w4,{className:"absolute left-3 top-3 h-4 w-4 text-white/50"}),l.jsx("input",{placeholder:"Search courses",value:d,onChange:V=>f(V.target.value),className:"w-full rounded-xl bg-white/5 border border-white/10 px-10 py-3 text-sm focus:outline-none focus:ring-2 focus:ring-brand.pink"})]}),l.jsx("div",{className:"flex flex-wrap gap-2",children:n0.map(V=>l.jsx(Oe,{variant:g===V.key?"primary":"outline",onClick:()=>b(V.key),children:V.label},V.key))})]}),ye.length===0?l.jsxs("div",{className:"rounded-2xl border border-white/10 bg-white/5 p-6 text-center text-white/80",children:[o?"No courses available for this group yet.":"Create your first course to get started.",r&&!o&&l.jsx("div",{className:"mt-3",children:l.jsxs(Oe,{variant:"outline",onClick:()=>Ce(),children:[l.jsx(fg,{className:"h-4 w-4 mr-2"}),"Add course"]})})]}):l.jsx("div",{className:"grid md:grid-cols-3 gap-4",children:ye.map(V=>l.jsx(T8,{course:V,onOpen:()=>t(`/courses/${V.id}`),isAdmin:r,onEdit:()=>Ce(V),onDelete:ce},V.id))}),w&&l.jsx("div",{className:"fixed inset-0 z-30 flex items-center justify-center bg-black/70 px-4",children:l.jsxs("div",{className:"w-full max-w-4xl max-h-[90vh] overflow-y-auto rounded-2xl bg-slate-900 text-white border border-white/10 shadow-2xl",children:[l.jsxs("div",{className:"flex items-center justify-between px-5 py-4 border-b border-white/10",children:[l.jsxs("div",{children:[l.jsx("div",{className:"text-lg font-semibold",children:C?"Edit course":"Add new course"}),l.jsx("div",{className:"text-xs text-white/60",children:"Admin-only course management"})]}),l.jsx("button",{onClick:Me,className:"p-2 rounded-full hover:bg-white/10 text-white/70","aria-label":"Close editor",children:l.jsx(vr,{className:"h-4 w-4"})})]}),l.jsxs("div",{className:"p-5 space-y-4",children:[l.jsxs("div",{className:"grid md:grid-cols-2 gap-3",children:[l.jsxs("div",{className:"space-y-2",children:[l.jsx("label",{className:"text-sm text-white/80",children:"Title"}),l.jsx("input",{value:j.title,onChange:V=>M(z=>({...z,title:V.target.value})),className:"w-full rounded-xl border border-white/10 bg-white/5 px-3 py-3 text-sm outline-none focus:ring-2 focus:ring-pink-400",placeholder:"Course title"})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx("label",{className:"text-sm text-white/80",children:"Thumbnail URL or PNG upload"}),l.jsx("input",{value:j.thumbnailUrl,onChange:V=>M(z=>({...z,thumbnailUrl:V.target.value})),className:"w-full rounded-xl border border-white/10 bg-white/5 px-3 py-3 text-sm outline-none focus:ring-2 focus:ring-pink-400",placeholder:"Paste a link to the cover image"}),l.jsx("input",{type:"file",accept:"image/png",onChange:V=>{const z=V.target.files?.[0];if(!z)return;const fe=new FileReader;fe.onload=oe=>{const U=oe.target?.result;typeof U=="string"&&M(Z=>({...Z,thumbnailUrl:U}))},fe.readAsDataURL(z)},className:"w-full text-sm text-white/80 file:mr-3 file:rounded-lg file:border-none file:bg-white/10 file:px-3 file:py-2 file:text-white hover:file:bg-white/20"}),l.jsx("div",{className:"text-xs text-white/60",children:"Use a link or upload a PNG to show on the card."})]})]}),l.jsxs("div",{className:"grid md:grid-cols-2 gap-3",children:[l.jsxs("div",{className:"space-y-2",children:[l.jsx("label",{className:"text-sm text-white/80",children:"Category"}),l.jsxs("div",{className:"relative",children:[l.jsxs("button",{type:"button",onClick:()=>Q(V=>!V),className:"w-full rounded-xl border border-white/10 bg-white/5 px-3 py-3 text-sm outline-none hover:border-white/20 flex items-center justify-between",children:[l.jsx("span",{children:n0.find(V=>V.key===j.category)?.label||"Select category"}),l.jsx("span",{className:"text-xs text-white/60",children:$?"Hide":"Show"})]}),$&&l.jsx("div",{className:"absolute z-20 mt-2 w-full rounded-2xl bg-slate-800 border border-white/10 shadow-2xl overflow-hidden",children:n0.filter(V=>V.key!=="all").map(V=>l.jsx("button",{onClick:()=>{M(z=>({...z,category:V.key})),Q(!1)},className:"w-full text-left px-4 py-2 text-sm text-white hover:bg-white/10",children:V.label},V.key))})]})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx("label",{className:"text-sm text-white/80",children:"Difficulty"}),l.jsxs("div",{className:"relative",children:[l.jsxs("button",{type:"button",onClick:()=>X(V=>!V),className:"w-full rounded-xl border border-white/10 bg-white/5 px-3 py-3 text-sm outline-none hover:border-white/20 flex items-center justify-between",children:[l.jsx("span",{className:"capitalize",children:j.difficulty}),l.jsx("span",{className:"text-xs text-white/60",children:ae?"Hide":"Show"})]}),ae&&l.jsx("div",{className:"absolute z-20 mt-2 w-full rounded-2xl bg-slate-800 border border-white/10 shadow-2xl overflow-hidden",children:["beginner","intermediate","advanced"].map(V=>l.jsx("button",{onClick:()=>{M(z=>({...z,difficulty:V})),X(!1)},className:"w-full text-left px-4 py-2 text-sm text-white hover:bg-white/10 capitalize",children:V},V))})]})]})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx("label",{className:"text-sm text-white/80",children:"Description"}),l.jsx("textarea",{value:j.description,onChange:V=>M(z=>({...z,description:V.target.value})),className:"w-full rounded-xl border border-white/10 bg-white/5 px-3 py-3 text-sm outline-none focus:ring-2 focus:ring-pink-400",rows:3,placeholder:"What will learners get from this course?"})]}),l.jsxs("div",{className:"flex items-center justify-between pt-2",children:[C&&l.jsxs(Oe,{variant:"ghost",onClick:()=>ce(C),className:ne?"opacity-50 pointer-events-none":"text-red-200 hover:text-red-100",disabled:ne,children:[l.jsx(al,{className:"h-4 w-4 mr-2"}),"Delete course"]}),l.jsxs("div",{className:"flex items-center gap-2 ml-auto",children:[l.jsx(Oe,{variant:"outline",onClick:Me,children:"Cancel"}),l.jsx(Oe,{onClick:$e,className:ue?"opacity-60 pointer-events-none":"",disabled:ue,children:ue?"Saving...":"Save course"})]})]}),P&&l.jsx("div",{className:"text-sm text-red-200 bg-red-500/10 border border-red-400/40 rounded-xl px-3 py-2",children:P})]})]})})]})})}function T8({course:t,onOpen:e,isAdmin:n,onEdit:r,onDelete:o}){const d=t.thumbnailUrl||ul;return l.jsxs(ha,{className:"relative overflow-hidden transition flex flex-col card-solid border",style:{backgroundColor:"#111724",borderColor:"#111724"},children:[n&&l.jsxs("div",{className:"absolute right-2 top-2 z-10 flex items-center gap-1 rounded-full bg-black/50 px-2 py-1",children:[l.jsx("button",{onClick:()=>r(t),className:"p-1 rounded-md hover:bg-white/10 text-white","aria-label":"Edit course",children:l.jsx(Qd,{className:"h-4 w-4"})}),l.jsx("button",{onClick:()=>o(t),className:"p-1 rounded-md hover:bg-white/10 text-red-200","aria-label":"Delete course",children:l.jsx(al,{className:"h-4 w-4"})})]}),l.jsx("img",{src:d,alt:t.title,className:"h-32 w-full object-cover"}),l.jsxs(mo,{className:"space-y-3 flex flex-col h-full",children:[l.jsx("div",{className:"text-sm text-brand.pink uppercase tracking-wide text-white/80",children:t.category.replace("_"," ")}),l.jsx("div",{className:"font-semibold text-white",children:t.title}),l.jsx("p",{className:"text-sm text-white/80 line-clamp-3 flex-1",children:t.description}),l.jsx(W0,{value:0}),l.jsx(Oe,{className:"w-full mt-auto shadow-none bg-white/10 hover:bg-white/20 border border-white/20 text-white",onClick:e,children:"Start Course"})]})]})}function E8({id:t}){const{user:e}=$s(),[,n]=fa(),r=ih(),[o,d]=T.useState(null),[f,g]=T.useState(!1),[b,w]=T.useState("study"),[k,C]=T.useState(""),[N,j]=T.useState(""),[M,$]=T.useState(""),[Q,ae]=T.useState(""),[X,P]=T.useState(["Option A","Option B","Option C","Option D"]),[W,u]=T.useState(0),[ye,ve]=T.useState(null),[be,Ye]=T.useState(""),[me,Me]=T.useState(null),[Ce,$e]=T.useState(!1),[ce,ue]=T.useState(null),{data:ne}=qd({queryKey:["course",t,e?.groupId,e?.accountType],queryFn:()=>yh(t,e||void 0)}),{data:V}=qd({queryKey:["progress",t,e?.groupId,e?.accountType],enabled:!!e,queryFn:()=>P_(e.id,t)});Jp({mutationFn:J=>p8(e.id,t,J),onSuccess:()=>{r.invalidateQueries({queryKey:["course",t]}),r.invalidateQueries({queryKey:["progress",t]}),r.invalidateQueries({queryKey:["dashboard"]})}});const z=T.useMemo(()=>(ne?.chapters?Object.values(ne.chapters).sort((De,qe)=>(De.index??0)-(qe.index??0)):[]).map(De=>({...De,subsections:De.subsections||{}})),[ne]);T.useEffect(()=>{!ye&&z.length&&ve(z[0].id)},[z,ye]),T.useEffect(()=>{Me(null)},[ye]);const fe=T.useMemo(()=>{const J={};return z.forEach(De=>{const qe=Object.values(De.subsections||{}),bt=qe.filter(Xe=>Xe.type==="pgn"),Ie=qe.filter(Xe=>Xe.type==="quiz");J[De.id]={pgns:bt,quizzes:Ie}}),J},[z]),oe=T.useMemo(()=>Object.values(fe).flatMap(J=>[...J.pgns,...J.quizzes]).map(J=>J.id),[fe]),U=T.useMemo(()=>new Set(V?.completedLessonIds||[]),[V]),Z=T.useMemo(()=>new Set(oe.filter(J=>U.has(J))),[oe,U]),xe=T.useMemo(()=>{const J={};return z.forEach(De=>{const qe=fe[De.id]||{pgns:[],quizzes:[]},bt=[...qe.pgns,...qe.quizzes];if(!bt.length){J[De.id]=0;return}const Ie=bt.filter(nt=>Z.has(nt.id)).length,Xe=Math.min(100,Math.round(Ie/bt.length*100));J[De.id]=Xe}),J},[fe,Z,z]),Be=Object.values(xe),Ze=Be.length===0?0:Be.length===1?Be[0]:Math.round(Be.reduce((J,De)=>J+De,0)/Be.length),Ve=J=>xe[J.id]??0,O=J=>J.type==="quiz"?{icon:r4,label:"Quiz"}:J.type==="pgn"?{icon:Ed,label:"PGN"}:{icon:Ed,label:"Study"},ge=async()=>{if(!ye){ue("Select a chapter first.");return}if((b==="pgn"||b==="quiz")&&!me){ue("Select a study to attach this item.");return}const J=k.trim()||(b==="quiz"?"New Quiz":"New Study"),De=z.find(nt=>nt.id===ye)?.subsections||{},qe=Object.values(De).filter(nt=>nt.type==="study"),bt=Object.values(De).sort((nt,Ut)=>(nt.index??0)-(Ut.index??0)),Ie=me&&bt.length?Math.min(bt.findIndex(nt=>nt.id===me)+1||bt.length,bt.length):bt.length;let Xe;if(b==="quiz"){if(!Q.trim())return;Xe={id:"",type:"quiz",title:J,fen:Q.trim()||void 0,questions:[{id:"q1",prompt:M.trim()||"Sample question",options:(()=>{const nt=X.map(Ut=>Ut.trim()).filter(Boolean);return nt.length<2?["Option A","Option B"]:nt})(),correctIndex:(()=>{const nt=X.map(Kt=>Kt.trim()).filter(Boolean),Ut=Math.min(Math.max(W,0),Math.max(nt.length-1,0));return nt.length<2?0:Ut})(),parentStudyId:me||void 0}],index:Ie,parentStudyId:me||void 0}}else b==="pgn"?Xe={id:"",type:"pgn",title:J,pgn:N.trim()||`[Event "New Study"]
[Site "?"]
[Result "*"]
1.e4 e5 2.Nf3 Nc6 3.Bb5 *`,index:Ie,parentStudyId:me||void 0}:Xe={id:"",type:"study",title:J,index:qe.length};await w_(ne.id,ye,Xe),await r.invalidateQueries({queryKey:["course",t]}),await r.invalidateQueries({queryKey:["progress",t]}),ue("Added successfully"),C(""),j(""),$(""),ae(""),P(["Option A","Option B","Option C","Option D"]),u(0),Me(null)},Se=async(J,De)=>{await x_(ne.id,J,De),await r.invalidateQueries({queryKey:["course",t]}),await r.invalidateQueries({queryKey:["progress",t]})},Te=async J=>{await y_(ne.id,J),await r.invalidateQueries({queryKey:["course",t]}),await r.invalidateQueries({queryKey:["progress",t]})},Ke=async()=>{const J=be.trim()||`Chapter ${z.length+1}`,De=z.length,qe=await b_(ne.id,J,De);qe&&(await r.invalidateQueries({queryKey:["course",t]}),ve(qe.id),Ye(""),ue("Chapter added successfully"))};return ne?l.jsxs(Js,{children:[l.jsxs("button",{onClick:()=>n("/courses"),className:"text-white/70 hover:text-white flex items-center gap-2 mb-4 text-sm",children:[l.jsx(v0,{className:"h-4 w-4"}),"Back to courses"]}),l.jsxs("div",{className:"grid lg:grid-cols-[2fr_1fr] gap-4",children:[l.jsxs(ha,{className:"card-solid border border-white/10",children:[l.jsx(Uc,{className:"flex flex-col gap-4",children:l.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 sm:items-center",children:[l.jsx("div",{className:"h-24 w-24 rounded-xl overflow-hidden border border-white/10",children:l.jsx("img",{src:ne.thumbnailUrl,alt:ne.title,className:"h-full w-full object-cover"})}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(Bc,{className:"text-3xl",children:ne.title}),l.jsx("p",{className:"text-white/70 text-sm max-w-2xl",children:ne.description}),l.jsxs("div",{className:"space-y-2",children:[l.jsxs("div",{className:"flex items-center gap-2 text-sm text-white/80",children:[l.jsx("span",{children:"Your progress:"}),l.jsxs("span",{className:"text-white font-semibold",children:[Ze,"%"]}),l.jsx("button",{className:"ml-2 p-1 rounded-full hover:bg-white/10 text-white",onClick:()=>g(!0),"aria-label":"Add subsection",children:l.jsx(Mb,{className:"h-4 w-4"})})]}),l.jsx(W0,{value:Ze})]})]})]})}),l.jsxs(mo,{className:"space-y-3",children:[z.map((J,De)=>{const qe=o===J.id,bt=Ve(J);return l.jsxs("div",{className:"rounded-xl border border-white/10 bg-[#2d3749]",children:[l.jsxs("button",{className:"w-full flex items-center gap-3 px-4 py-3 text-left",onClick:()=>d(qe?null:J.id),children:[l.jsxs("div",{className:"flex flex-col gap-1 flex-1",children:[l.jsxs("div",{className:"text-xs text-white/60",children:["Chapter ",De+1]}),l.jsx("div",{className:"font-semibold text-white",children:J.title})]}),l.jsxs("div",{className:"w-40 hidden sm:flex flex-col gap-1",children:[l.jsx("div",{className:"flex items-center justify-between text-xs text-white/70",children:l.jsxs("span",{children:[bt,"%"]})}),l.jsx(W0,{value:bt})]}),l.jsx("button",{className:"p-1 rounded-full hover:bg-white/10 text-white/70",onClick:Ie=>{Ie.stopPropagation(),Te(J.id)},"aria-label":"Delete chapter",children:l.jsx(al,{className:"h-4 w-4"})}),qe?l.jsx(n4,{className:"h-4 w-4 text-white/70"}):l.jsx(Gg,{className:"h-4 w-4 text-white/70"})]}),qe&&l.jsx("div",{className:"border-t border-white/10 px-4 py-3 space-y-3",children:(()=>{const Ie=Object.values(J.subsections||{}).sort((dt,Ft)=>(dt.index??0)-(Ft.index??0)),Xe=Ie.filter(dt=>dt.type==="study"),nt=Ie.filter(dt=>dt.type==="pgn"&&!dt.parentStudyId),Ut=Ie.filter(dt=>dt.type==="quiz"&&!dt.parentStudyId),Kt=Xe.length?Xe.map(dt=>({study:dt,pgns:Ie.filter(Ft=>Ft.type==="pgn"&&Ft.parentStudyId===dt.id),quizzes:Ie.filter(Ft=>Ft.type==="quiz"&&Ft.parentStudyId===dt.id)})):[{study:null,pgns:nt,quizzes:Ut}];return Kt.length?Kt.map((dt,Ft)=>{const zt=dt.study,Cn=dt.pgns,qn=dt.quizzes;return zt?.type,zt&&O(zt),zt?.type==="pgn"&&Z.has(zt.id),qn.filter(xt=>Z.has(xt.id)).length,Cn.filter(xt=>Z.has(xt.id)).length,Cn.length+qn.length,l.jsxs("div",{className:"rounded-lg border border-white/10 bg-[#202736] p-3 space-y-2",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsxs("div",{className:"text-xs text-white/60 min-w-[64px]",children:["Study ",Ft+1]}),l.jsx("div",{className:"font-semibold text-white flex items-center gap-2",children:zt?.title||"Lesson"})]}),l.jsx("button",{className:"text-white/60 hover:text-red-300 ml-2",onClick:()=>zt&&Se(J.id,zt.id),"aria-label":"Delete study",children:l.jsx(al,{className:"h-4 w-4"})})]}),l.jsx("div",{className:"space-y-3 text-sm text-white/80",children:l.jsxs("div",{className:"flex flex-wrap justify-center gap-3",children:[zt?.type==="pgn"&&l.jsxs("button",{className:"flex items-center gap-3 text-left rounded-lg px-4 py-3 border border-transparent hover:border-white/20 hover:bg-white/10 transition text-base",onClick:()=>n(`/lesson/${ne.id}?sub=${zt.id}`),children:[l.jsx(Ed,{className:"h-5 w-5 text-white"}),l.jsx("span",{className:"text-white",children:zt.title})]}),Cn.map(xt=>{const vn=Z.has(xt.id);return l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsxs("button",{className:"flex items-center gap-3 text-left rounded-lg px-4 py-3 border border-transparent hover:border-white/20 hover:bg-white/10 transition text-base",onClick:()=>n(`/lesson/${ne.id}?sub=${xt.id}`),children:[l.jsx(Ed,{className:"h-5 w-5 text-white"}),l.jsx("span",{className:"text-white",children:xt.title})]}),l.jsx("button",{className:"text-white/60 hover:text-red-300",onClick:()=>Se(J.id,xt.id),"aria-label":"Delete PGN",children:l.jsx(al,{className:"h-4 w-4"})}),vn&&l.jsx("span",{className:"text-xs text-emerald-300",children:""})]},xt.id)}),qn.map(xt=>{const vn=Z.has(xt.id),Ls=O(xt).icon;return l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsxs("button",{className:"flex items-center gap-3 text-left rounded-lg px-4 py-3 border border-transparent hover:border-white/20 hover:bg-white/10 transition text-base",onClick:()=>n(`/lesson/${ne.id}?sub=${xt.id}`),children:[l.jsx(Ls,{className:"h-5 w-5 text-white"}),l.jsx("span",{className:"text-white",children:xt.title})]}),l.jsx("button",{className:"text-white/60 hover:text-red-300",onClick:()=>Se(J.id,xt.id),"aria-label":"Delete quiz",children:l.jsx(al,{className:"h-4 w-4"})}),vn&&l.jsx("span",{className:"text-xs text-emerald-300",children:""})]},xt.id)})]})})]},zt?.id||`group-${Ft}`)}):l.jsx("div",{className:"text-white/60 text-sm",children:"No studies added yet."})})()})]},J.id)}),z.length===0&&l.jsx("div",{className:"text-white/70 text-sm",children:"No chapters available for this course."})]})]}),l.jsxs(ha,{className:"card-solid border border-white/10 h-fit",children:[l.jsx(Uc,{children:l.jsxs(Bc,{className:"text-xl flex items-center gap-2",children:[l.jsx(u4,{className:"h-5 w-5"}),"Practice"]})}),l.jsx(mo,{className:"space-y-3",children:l.jsxs("div",{className:"rounded-xl border border-white/10 bg-[#202736] p-3 space-y-2",children:[l.jsx("div",{className:"text-sm text-white/80",children:"Play this opening against the AI"}),l.jsx(Oe,{className:"w-full",variant:"outline",onClick:()=>n("/practice"),children:"Play vs AI"})]})})]})]}),ce&&l.jsx("div",{className:"fixed bottom-4 right-4 z-50",children:l.jsxs("div",{className:"bg-emerald-500 text-white rounded-lg px-4 py-2 shadow-lg border border-emerald-300/50 flex items-center gap-2",children:[l.jsx("span",{children:ce}),l.jsx("button",{className:"text-white/80 hover:text-white ml-2",onClick:()=>ue(null),"aria-label":"Dismiss",children:"X"})]})}),f&&l.jsx("div",{className:"fixed inset-0 z-40 flex items-center justify-center bg-black/70 px-4",children:l.jsxs("div",{className:"w-full max-w-lg rounded-2xl bg-[#1b2230] text-white border border-white/10 shadow-2xl p-5 space-y-4",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{children:[l.jsx("div",{className:"text-lg font-semibold",children:"Add new content"}),l.jsx("div",{className:"text-xs text-white/60",children:"Create a study (PGN) or quiz for this course."})]}),l.jsx("button",{className:"p-2 rounded-full hover:bg-white/10 text-white/70",onClick:()=>g(!1),"aria-label":"Close",children:""})]}),l.jsxs("div",{className:"space-y-3",children:[l.jsxs("label",{className:"text-sm text-white/70 flex flex-col gap-1",children:["Chapter",l.jsx("select",{className:"bg-[#111724] border border-white/10 rounded-lg px-3 py-2 text-sm",value:ye||"",onChange:J=>ve(J.target.value||null),children:z.map((J,De)=>l.jsxs("option",{value:J.id,children:["Chapter ",De+1,": ",J.title]},J.id))})]}),l.jsxs("label",{className:"text-sm text-white/70 flex flex-col gap-1",children:["Study (for placement)",l.jsxs("select",{className:"bg-[#111724] border border-white/10 rounded-lg px-3 py-2 text-sm",value:me||"",onChange:J=>Me(J.target.value||null),children:[l.jsx("option",{value:"",children:"None"}),z.find(J=>J.id===ye)?.subsections&&Object.values(z.find(J=>J.id===ye)?.subsections||{}).filter(J=>J.type==="study").sort((J,De)=>(J.index??0)-(De.index??0)).map((J,De)=>l.jsxs("option",{value:J.id,children:["Study ",De+1,": ",J.title]},J.id))]})]}),l.jsxs("div",{className:"flex items-end gap-2",children:[l.jsxs("label",{className:"text-sm text-white/70 flex flex-col gap-1 flex-1",children:["New chapter title",l.jsx("input",{className:"bg-[#111724] border border-white/10 rounded-lg px-3 py-2 text-sm",value:be,onChange:J=>Ye(J.target.value),placeholder:"Chapter title"})]}),l.jsxs(Oe,{variant:"outline",className:"shrink-0",onClick:Ke,children:[l.jsx(Mb,{className:"h-4 w-4 mr-1"}),"Add chapter"]})]}),l.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[l.jsx("button",{className:`rounded-lg border px-3 py-2 text-sm ${b==="study"?"border-emerald-400 text-white":"border-white/10 text-white/70"}`,onClick:()=>w("study"),type:"button",children:"Add Study"}),l.jsx("button",{className:`rounded-lg border px-3 py-2 text-sm ${b==="pgn"?"border-emerald-400 text-white":"border-white/10 text-white/70"}`,onClick:()=>w("pgn"),type:"button",children:"Add PGN"}),l.jsx("button",{className:`rounded-lg border px-3 py-2 text-sm ${b==="quiz"?"border-emerald-400 text-white":"border-white/10 text-white/70"}`,onClick:()=>w("quiz"),type:"button",children:"Add Quiz"})]}),l.jsxs("div",{className:"text-xs text-white/60",children:["New ",b==="quiz"?"quiz":"study"," will be created inside the selected chapter",ye?` (${z.find(J=>J.id===ye)?.title||"Current"})`:"","."]}),l.jsxs("label",{className:"text-sm text-white/70 flex flex-col gap-1",children:["Title",l.jsx("input",{className:"bg-[#111724] border border-white/10 rounded-lg px-3 py-2 text-sm",value:k,onChange:J=>C(J.target.value),placeholder:"Enter a title"})]}),b==="pgn"&&l.jsxs("label",{className:`text-sm text-white/70 flex flex-col gap-1 rounded-lg border ${Ce?"border-emerald-400 bg-[#111724]/60":"border-white/10"} p-2`,onDragOver:J=>{J.preventDefault(),$e(!0)},onDragLeave:()=>$e(!1),onDrop:J=>{J.preventDefault(),$e(!1);const De=J.dataTransfer.files?.[0];De&&De.text().then(qe=>j(qe))},children:[l.jsx("span",{children:"PGN (paste or drop a .pgn file)"}),l.jsx("textarea",{className:"bg-[#111724] border border-white/10 rounded-lg px-3 py-2 text-sm h-28",value:N,onChange:J=>j(J.target.value),placeholder:'[Event "?"] ...'})]}),b==="quiz"&&l.jsxs("div",{className:"space-y-2",children:[l.jsxs("label",{className:"text-sm text-white/70 flex flex-col gap-1",children:["Question prompt",l.jsx("input",{className:"bg-[#111724] border border-white/10 rounded-lg px-3 py-2 text-sm",value:M,onChange:J=>$(J.target.value),placeholder:"Enter a question"})]}),l.jsxs("label",{className:"text-sm text-white/70 flex flex-col gap-1",children:["FEN (required)",l.jsx("input",{className:"bg-[#111724] border border-white/10 rounded-lg px-3 py-2 text-sm",value:Q,onChange:J=>ae(J.target.value),placeholder:"Position FEN (required)"})]}),l.jsxs("label",{className:"text-sm text-white/70 flex flex-col gap-1",children:["Choices",l.jsxs("div",{className:"space-y-2",children:[X.map((J,De)=>l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("input",{type:"radio",name:"correctOption",className:"h-4 w-4",checked:W===De,onChange:()=>u(De)}),l.jsx("input",{className:"flex-1 bg-[#111724] border border-white/10 rounded-lg px-3 py-2 text-sm",value:J,onChange:qe=>{const bt=[...X];bt[De]=qe.target.value,P(bt)},placeholder:`Option ${De+1}`}),X.length>2&&l.jsx("button",{className:"text-white/60 hover:text-red-300 text-xs",onClick:()=>{const qe=X.filter((bt,Ie)=>Ie!==De);P(qe),W>=qe.length&&u(Math.max(0,qe.length-1))},type:"button",children:"Remove"})]},De)),l.jsx(Oe,{variant:"outline",className:"w-full",onClick:()=>P(J=>[...J,""]),type:"button",children:"Add option"})]})]})]})]}),l.jsxs("div",{className:"flex justify-end gap-2",children:[l.jsx(Oe,{variant:"ghost",onClick:()=>g(!1),children:"Cancel"}),l.jsx(Oe,{onClick:ge,disabled:!ye,children:"Save to Chapter"})]})]})})]}):l.jsx(Js,{children:l.jsx("div",{className:"text-white/70 text-sm",children:"Loading course..."})})}function j8(){const{user:t}=$s(),[e,n]=T.useState([]),[r,o]=T.useState(!0),[d,f]=T.useState("xp"),[g,b]=T.useState([]),[w,k]=T.useState(!0),[C,N]=T.useState(""),[j,M]=T.useState(""),[$,Q]=T.useState(""),[ae,X]=T.useState(""),[P,W]=T.useState(!1),[u,ye]=T.useState({}),[ve,be]=T.useState(null),[Ye,me]=T.useState(null),[Me,Ce]=T.useState(""),[$e,ce]=T.useState(""),ue=!!t?.groupId&&t?.accountType==="group",ne=t?.groupId?`groups/${t.groupId}/clubLeaderboard`:t?`users/${t.id}/clubLeaderboard`:"clubLeaderboard",[V,z]=T.useState(!1);T.useEffect(()=>{const O="pawnpoint_xp_reset_v1";localStorage.getItem(O)||XE().finally(()=>localStorage.setItem(O,"done"))},[]),T.useEffect(()=>{if(!t||d!=="xp")return;const O=ct(ut,"users"),ge=Bg(O,Se=>{const Te=Se.val()||{};let Ke=Object.values(Te||{}).filter(De=>typeof De?.totalXp=="number");ue?Ke=Ke.filter(De=>De.groupId===t.groupId):Ke=Ke.filter(De=>De.id===t.id);const J=Ke.sort((De,qe)=>{const bt=(qe.totalXp||0)-(De.totalXp||0);if(bt!==0)return bt;const Ie=De.xpReachedAt??De.createdAt??0,Xe=qe.xpReachedAt??qe.createdAt??0;return Ie-Xe});n(J),o(!1)},()=>o(!1));return()=>ge()},[t,d,ue]),T.useEffect(()=>{if(!t||d!=="club")return;k(!0),N(""),v8(t).then(Se=>b(Se)).catch(()=>N("Could not load club leaderboard.")).finally(()=>k(!1));const O=ct(ut,ne),ge=Bg(O,Se=>{const Te=Se.val()||{},Ke=Object.values(Te||{}).map(J=>({...J,rating:Math.max(0,Math.round(J.rating||0)),performance:J.performance!==void 0&&J.performance!==null?Math.round(J.performance):void 0}));b(Ke),k(!1)},()=>k(!1));return()=>ge()},[t,d,ne]);const fe=T.useMemo(()=>[...g].sort((O,ge)=>{const Se=(ge.rating||0)-(O.rating||0);if(Se!==0)return Se;const Te=(ge.performance||0)-(O.performance||0);return Te!==0?Te:(O.name||"").localeCompare(ge.name||"")}),[g]),oe=T.useMemo(()=>e.map((O,ge)=>({entry:O,rank:ge+1})),[e]),U=T.useMemo(()=>{const O=Me.trim().toLowerCase();return O?oe.filter(({entry:ge})=>(ge.chessUsername||ge.displayName||(ge.email?ge.email.split("@")[0]:"Player")).toLowerCase().includes(O)):oe},[oe,Me]),Z=T.useMemo(()=>fe.map((O,ge)=>({entry:O,rank:ge+1})),[fe]),xe=T.useMemo(()=>{const O=$e.trim().toLowerCase();return O?Z.filter(({entry:ge})=>ge.name.toLowerCase().includes(O)):Z},[Z,$e]),Be=async O=>{if(O.preventDefault(),!t?.isAdmin){N("Only admins can add participants.");return}const ge=Number($),Se=ae.trim()?Number(ae):void 0;if(!j.trim()){N("Name is required.");return}if(!Number.isFinite(ge)){N("Rating must be a number.");return}W(!0),N("");try{await b8(t,{name:j,rating:ge,performance:Se}),M(""),Q(""),X("")}catch(Te){N(Te?.message||"Failed to add participant.")}finally{W(!1)}},Ze=async O=>{if(!t?.isAdmin){N("Only admins can update performance.");return}const ge=u[O],Se=ge!==void 0?Number(ge):void 0;if(ge!==void 0&&ge!==""&&!Number.isFinite(Se)){N("Performance must be a number.");return}be(O),N("");try{await y8(t,O,{performance:Se})}catch(Te){N(Te?.message||"Failed to update performance.")}finally{be(null)}},Ve=async O=>{if(!t?.isAdmin){N("Only admins can remove participants.");return}me(O),N("");try{await w8(t,O)}catch(ge){N(ge?.message||"Failed to remove participant.")}finally{me(null)}};return!t||d==="xp"&&r?l.jsx(Js,{children:l.jsx("div",{className:"text-white/70 text-sm",children:"Loading leaderboard..."})}):l.jsx(Js,{children:l.jsxs("div",{className:"grid lg:grid-cols-3 gap-6",children:[l.jsx(ha,{className:"w-full max-w-xs self-start justify-self-center",children:l.jsxs(Uc,{className:"flex flex-col items-center gap-4",children:[l.jsx(Bc,{className:"text-3xl font-extrabold text-white text-center",children:t.chessUsername||t.displayName}),l.jsxs("div",{className:"relative h-28 w-28",children:[l.jsx("div",{className:"absolute inset-0 rounded-full bg-gradient-to-tr from-emerald-400 via-blue-400 to-purple-500 opacity-80"}),l.jsx("div",{className:"relative h-full w-full rounded-full bg-slate-900 p-1",children:l.jsx("div",{className:"h-full w-full rounded-full overflow-hidden bg-slate-800 border border-white/10",children:t.avatarUrl?l.jsx("img",{src:t.avatarUrl,alt:"Avatar",className:"h-full w-full object-cover"}):l.jsx("div",{className:"h-full w-full flex items-center justify-center text-2xl font-bold text-white",children:(t.chessUsername||t.displayName||"Player").slice(0,2).toUpperCase()})})})]}),l.jsxs("div",{className:"relative h-32 w-32 flex items-center justify-center",children:[l.jsx("div",{className:"absolute inset-0 rounded-full border-4 border-purple-500/60 blur-sm"}),l.jsx("div",{className:"absolute inset-1 rounded-full border-2 border-purple-400/80 animate-pulse"}),l.jsx("div",{className:"absolute inset-0 rounded-full bg-purple-600/20 animate-[spin_6s_linear_infinite]"}),l.jsxs("div",{className:"relative z-10 flex flex-col items-center justify-center rounded-full h-24 w-24 bg-slate-900 border border-purple-300/40 shadow-[0_0_20px_rgba(168,85,247,0.35)]",children:[l.jsx(I4,{className:"h-6 w-6 text-purple-300"}),l.jsx("div",{className:"text-xl font-bold text-white",children:t.totalXp}),l.jsx("div",{className:"text-[11px] uppercase tracking-wide text-purple-200/80",children:"XP"})]})]})]})}),l.jsxs(ha,{className:"lg:col-span-2",children:[l.jsxs(Uc,{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-2",children:[l.jsxs(Bc,{className:"flex items-center gap-2",children:[l.jsx(_4,{className:"h-5 w-5 text-brand.pink"}),"Leaderboard"]}),l.jsxs("div",{className:"relative",children:[l.jsxs("button",{className:"flex items-center gap-2 rounded-full border border-white/15 bg-white/5 px-3 py-2 text-sm text-white/90 hover:bg-white/10",onClick:()=>z(O=>!O),"aria-haspopup":"menu","aria-expanded":V,children:[l.jsx("span",{className:"text-white/80",children:d==="xp"?"XP Leaderboard":"Club Leaderboard"}),l.jsx(Gg,{className:`h-4 w-4 transition ${V?"rotate-180":""}`})]}),V&&l.jsx("div",{className:"absolute right-0 mt-2 w-48 rounded-2xl border border-white/10 bg-slate-900/95 shadow-2xl backdrop-blur-sm py-2 text-sm text-white",children:[{key:"xp",label:"XP Leaderboard"},{key:"club",label:"Club Leaderboard"}].map(O=>l.jsx("button",{className:`w-full text-left px-4 py-2 hover:bg-white/10 ${d===O.key?"bg-white/5 text-white":"text-white/80"}`,onClick:()=>{f(O.key),z(!1)},children:O.label},O.key))})]})]}),l.jsxs(mo,{className:"space-y-3",children:[l.jsx("div",{className:"text-xs text-white/60",children:ue?"You are viewing private rankings for your group only.":"Personal account: only your own stats appear here."}),d==="xp"?l.jsx("div",{className:"flex items-center gap-2",children:l.jsx("input",{value:Me,onChange:O=>Ce(O.target.value),placeholder:"Search players",className:"w-full rounded-lg border border-white/10 bg-white/5 px-3 py-2 text-sm text-white outline-none focus:ring-2 focus:ring-pink-400"})}):l.jsx("div",{className:"flex items-center gap-2",children:l.jsx("input",{value:$e,onChange:O=>ce(O.target.value),placeholder:"Search club players",className:"w-full rounded-lg border border-white/10 bg-white/5 px-3 py-2 text-sm text-white outline-none focus:ring-2 focus:ring-pink-400"})}),d==="xp"?l.jsx("div",{className:"space-y-3 max-h-[420px] overflow-y-auto pr-1",children:U.map(({entry:O,rank:ge})=>{const Se=O.chessUsername||O.displayName||(O.email?O.email.split("@")[0]:"Player");return l.jsxs("div",{className:"flex items-center justify-between rounded-lg border border-white/10 bg-white/5 p-3",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:"h-9 w-9 rounded-full bg-white/10 flex items-center justify-center",children:ge}),l.jsxs("div",{children:[l.jsx("div",{className:"font-semibold text-white",children:Se}),l.jsxs("div",{className:"text-xs text-white/60",children:["Level ",O.level]})]})]}),l.jsxs("div",{className:"font-semibold text-emerald-200",children:[O.totalXp," XP"]})]},`${O.id||O.email||O.displayName||ge}`)})}):l.jsxs(l.Fragment,{children:[t?.isAdmin&&l.jsxs("form",{onSubmit:Be,className:"space-y-2 rounded-xl border border-white/10 bg-white/5 p-3",children:[l.jsx("div",{className:"text-sm font-semibold text-white",children:"Club Leaderboard Controls (Admin)"}),l.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-2",children:[l.jsx("input",{value:j,onChange:O=>M(O.target.value),placeholder:"Name",className:"rounded-lg border border-white/10 bg-slate-900 px-3 py-2 text-sm text-white outline-none focus:ring-2 focus:ring-pink-400"}),l.jsx("input",{value:$,onChange:O=>Q(O.target.value),placeholder:"Rating",type:"number",className:"rounded-lg border border-white/10 bg-slate-900 px-3 py-2 text-sm text-white outline-none focus:ring-2 focus:ring-pink-400"}),l.jsx("input",{value:ae,onChange:O=>X(O.target.value),placeholder:"Performance",type:"number",className:"rounded-lg border border-white/10 bg-slate-900 px-3 py-2 text-sm text-white outline-none focus:ring-2 focus:ring-pink-400"})]}),l.jsxs("div",{className:"flex items-center justify-between gap-2 text-xs text-white/60",children:[l.jsx("span",{children:"Add participants and set their performance."}),l.jsx(Oe,{type:"submit",size:"sm",disabled:P,children:P?"Saving...":"Add participant"})]}),C&&l.jsx("div",{className:"text-xs text-amber-300",children:C})]}),w?l.jsx("div",{className:"text-white/70 text-sm",children:"Loading club leaderboard..."}):fe.length===0?l.jsx("div",{className:"text-white/60 text-sm",children:"No club entries yet."}):l.jsx("div",{className:"space-y-3 max-h-[420px] overflow-y-auto pr-1",children:xe.map(({entry:O,rank:ge})=>l.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3 rounded-lg border border-white/10 bg-white/5 p-3",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:"h-9 w-9 rounded-full bg-white/10 flex items-center justify-center",children:ge}),l.jsxs("div",{children:[l.jsx("div",{className:"font-semibold text-white",children:O.name}),l.jsxs("div",{className:"text-xs text-white/60",children:["Rating ",O.rating,O.performance!==void 0?`  Performance ${O.performance}`:""]})]})]}),t?.isAdmin?l.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-2 w-full sm:w-auto",children:[l.jsx("input",{type:"number",value:u[O.id]!==void 0?u[O.id]:O.performance??"",onChange:Se=>ye(Te=>({...Te,[O.id]:Se.target.value})),className:"w-full sm:w-28 rounded-lg border border-white/10 bg-slate-900 px-3 py-2 text-sm text-white outline-none focus:ring-2 focus:ring-pink-400",placeholder:"Performance"}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(Oe,{size:"sm",variant:"outline",onClick:()=>Ze(O.id),disabled:ve===O.id,children:ve===O.id?"Saving...":"Save"}),l.jsx(Oe,{size:"sm",variant:"ghost",onClick:()=>Ve(O.id),disabled:Ye===O.id,children:Ye===O.id?"Removing...":"Delete"})]})]}):l.jsxs("div",{className:"text-sm font-semibold text-emerald-200",children:["Performance ",O.performance??"N/A"]})]},O.id))})]})]})]})]})})}function I8(t){return t!==null?{comment:t,variations:[]}:{variations:[]}}function A8(t,e,n,r,o){const d={move:t,variations:o};return e&&(d.suffix=e),n&&(d.nag=n),r!==null&&(d.comment=r),d}function M8(...t){const[e,...n]=t;let r=e;for(const o of n)o!==null&&(r.variations=[o,...o.variations],o.variations=[],r=o);return e}function D8(t,e){if(e.marker&&e.marker.comment){let n=e.root;for(;;){const r=n.variations[0];if(!r){n.comment=e.marker.comment;break}n=r}}return{headers:t,root:e.root,result:(e.marker&&e.marker.result)??void 0}}function O8(t,e){function n(){this.constructor=t}n.prototype=e.prototype,t.prototype=new n}function $c(t,e,n,r){var o=Error.call(this,t);return Object.setPrototypeOf&&Object.setPrototypeOf(o,$c.prototype),o.expected=e,o.found=n,o.location=r,o.name="SyntaxError",o}O8($c,Error);function r0(t,e,n){return n=n||" ",t.length>e?t:(e-=t.length,n+=n.repeat(e),t+n.slice(0,e))}$c.prototype.format=function(t){var e="Error: "+this.message;if(this.location){var n=null,r;for(r=0;r<t.length;r++)if(t[r].source===this.location.source){n=t[r].text.split(/\r\n|\n|\r/g);break}var o=this.location.start,d=this.location.source&&typeof this.location.source.offset=="function"?this.location.source.offset(o):o,f=this.location.source+":"+d.line+":"+d.column;if(n){var g=this.location.end,b=r0("",d.line.toString().length," "),w=n[o.line-1],k=o.line===g.line?g.column:w.length+1,C=k-o.column||1;e+=`
 --> `+f+`
`+b+` |
`+d.line+" | "+w+`
`+b+" | "+r0("",o.column-1," ")+r0("",C,"^")}else e+=`
 at `+f}return e};$c.buildMessage=function(t,e){var n={literal:function(w){return'"'+o(w.text)+'"'},class:function(w){var k=w.parts.map(function(C){return Array.isArray(C)?d(C[0])+"-"+d(C[1]):d(C)});return"["+(w.inverted?"^":"")+k.join("")+"]"},any:function(){return"any character"},end:function(){return"end of input"},other:function(w){return w.description}};function r(w){return w.charCodeAt(0).toString(16).toUpperCase()}function o(w){return w.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(k){return"\\x0"+r(k)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(k){return"\\x"+r(k)})}function d(w){return w.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(k){return"\\x0"+r(k)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(k){return"\\x"+r(k)})}function f(w){return n[w.type](w)}function g(w){var k=w.map(f),C,N;if(k.sort(),k.length>0){for(C=1,N=1;C<k.length;C++)k[C-1]!==k[C]&&(k[N]=k[C],N++);k.length=N}switch(k.length){case 1:return k[0];case 2:return k[0]+" or "+k[1];default:return k.slice(0,-1).join(", ")+", or "+k[k.length-1]}}function b(w){return w?'"'+o(w)+'"':"end of input"}return"Expected "+g(t)+" but "+b(e)+" found."};function U8(t,e){e=e!==void 0?e:{};var n={},r=e.grammarSource,o={pgn:$t},d=$t,f="[",g='"',b="]",w=".",k="O-O-O",C="O-O",N="0-0-0",j="0-0",M="$",$="{",Q="}",ae=";",X="(",P=")",W="1-0",u="0-1",ye="1/2-1/2",ve="*",be=/^[a-zA-Z]/,Ye=/^[^"]/,me=/^[0-9]/,Me=/^[.]/,Ce=/^[a-zA-Z1-8\-=]/,$e=/^[+#]/,ce=/^[!?]/,ue=/^[^}]/,ne=/^[^\r\n]/,V=/^[ \t\r\n]/,z=de("tag pair"),fe=Ct("[",!1),oe=Ct('"',!1),U=Ct("]",!1),Z=de("tag name"),xe=G([["a","z"],["A","Z"]],!1,!1),Be=de("tag value"),Ze=G(['"'],!0,!1),Ve=de("move number"),O=G([["0","9"]],!1,!1),ge=Ct(".",!1),Se=G(["."],!1,!1),Te=de("standard algebraic notation"),Ke=Ct("O-O-O",!1),J=Ct("O-O",!1),De=Ct("0-0-0",!1),qe=Ct("0-0",!1),bt=G([["a","z"],["A","Z"],["1","8"],"-","="],!1,!1),Ie=G(["+","#"],!1,!1),Xe=de("suffix annotation"),nt=G(["!","?"],!1,!1),Ut=de("NAG"),Kt=Ct("$",!1),dt=de("brace comment"),Ft=Ct("{",!1),zt=G(["}"],!0,!1),Cn=Ct("}",!1),qn=de("rest of line comment"),xt=Ct(";",!1),vn=G(["\r",`
`],!0,!1),Mn=de("variation"),Ls=Ct("(",!1),as=Ct(")",!1),bn=de("game termination marker"),os=Ct("1-0",!1),xs=Ct("0-1",!1),Ps=Ct("1/2-1/2",!1),er=Ct("*",!1),Bn=de("whitespace"),Hn=G([" ","	","\r",`
`],!1,!1),ls=function(q,re){return D8(q,re)},Ks=function(q){return Object.fromEntries(q)},$n=function(q,re){return[q,re]},Yn=function(q,re){return{root:q,marker:re}},kn=function(q,re){return M8(I8(q),...re.flat())},_s=function(q,re,se,et,Je){return A8(q,re,se,et,Je)},ie=function(q){return q},lt=function(q){return q.replace(/[\r\n]+/g," ")},Pt=function(q){return q.trim()},Bt=function(q){return q},Gt=function(q,re){return{result:q,comment:re}},H=e.peg$currPos|0,sn=[{line:1,column:1}],jt=H,Yt=e.peg$maxFailExpected||[],je=e.peg$silentFails|0,Dn;if(e.startRule){if(!(e.startRule in o))throw new Error(`Can't start parsing from rule "`+e.startRule+'".');d=o[e.startRule]}function Ct(q,re){return{type:"literal",text:q,ignoreCase:re}}function G(q,re,se){return{type:"class",parts:q,inverted:re,ignoreCase:se}}function pe(){return{type:"end"}}function de(q){return{type:"other",description:q}}function Ae(q){var re=sn[q],se;if(re)return re;if(q>=sn.length)se=sn.length-1;else for(se=q;!sn[--se];);for(re=sn[se],re={line:re.line,column:re.column};se<q;)t.charCodeAt(se)===10?(re.line++,re.column=1):re.column++,se++;return sn[q]=re,re}function tt(q,re,se){var et=Ae(q),Je=Ae(re),kt={source:r,start:{offset:q,line:et.line,column:et.column},end:{offset:re,line:Je.line,column:Je.column}};return kt}function Re(q){H<jt||(H>jt&&(jt=H,Yt=[]),Yt.push(q))}function Vt(q,re,se){return new $c($c.buildMessage(q,re),q,re,se)}function $t(){var q,re,se;return q=H,re=Nn(),se=St(),q=ls(re,se),q}function Nn(){var q,re,se;for(q=H,re=[],se=ht();se!==n;)re.push(se),se=ht();return se=un(),q=Ks(re),q}function ht(){var q,re,se,et,Je,kt,us;return je++,q=H,un(),t.charCodeAt(H)===91?(re=f,H++):(re=n,je===0&&Re(fe)),re!==n?(un(),se=st(),se!==n?(un(),t.charCodeAt(H)===34?(et=g,H++):(et=n,je===0&&Re(oe)),et!==n?(Je=ft(),t.charCodeAt(H)===34?(kt=g,H++):(kt=n,je===0&&Re(oe)),kt!==n?(un(),t.charCodeAt(H)===93?(us=b,H++):(us=n,je===0&&Re(U)),us!==n?q=$n(se,Je):(H=q,q=n)):(H=q,q=n)):(H=q,q=n)):(H=q,q=n)):(H=q,q=n),je--,q===n&&je===0&&Re(z),q}function st(){var q,re,se;if(je++,q=H,re=[],se=t.charAt(H),be.test(se)?H++:(se=n,je===0&&Re(xe)),se!==n)for(;se!==n;)re.push(se),se=t.charAt(H),be.test(se)?H++:(se=n,je===0&&Re(xe));else re=n;return re!==n?q=t.substring(q,H):q=re,je--,q===n&&(re=n,je===0&&Re(Z)),q}function ft(){var q,re,se;for(je++,q=H,re=[],se=t.charAt(H),Ye.test(se)?H++:(se=n,je===0&&Re(Ze));se!==n;)re.push(se),se=t.charAt(H),Ye.test(se)?H++:(se=n,je===0&&Re(Ze));return q=t.substring(q,H),je--,re=n,je===0&&Re(Be),q}function St(){var q,re,se;return q=H,re=Tt(),un(),se=Jt(),se===n&&(se=null),un(),q=Yn(re,se),q}function Tt(){var q,re,se,et;for(q=H,re=cs(),re===n&&(re=null),se=[],et=Xt();et!==n;)se.push(et),et=Xt();return q=kn(re,se),q}function Xt(){var q,re,se,et,Je,kt,us,nr;if(q=H,un(),qt(),un(),re=tr(),re!==n){for(se=Sn(),se===n&&(se=null),et=[],Je=rn();Je!==n;)et.push(Je),Je=rn();for(Je=un(),kt=cs(),kt===n&&(kt=null),us=[],nr=Es();nr!==n;)us.push(nr),nr=Es();q=_s(re,se,et,kt,us)}else H=q,q=n;return q}function qt(){var q,re,se,et,Je,kt;for(je++,q=H,re=[],se=t.charAt(H),me.test(se)?H++:(se=n,je===0&&Re(O));se!==n;)re.push(se),se=t.charAt(H),me.test(se)?H++:(se=n,je===0&&Re(O));if(t.charCodeAt(H)===46?(se=w,H++):(se=n,je===0&&Re(ge)),se!==n){for(et=un(),Je=[],kt=t.charAt(H),Me.test(kt)?H++:(kt=n,je===0&&Re(Se));kt!==n;)Je.push(kt),kt=t.charAt(H),Me.test(kt)?H++:(kt=n,je===0&&Re(Se));re=[re,se,et,Je],q=re}else H=q,q=n;return je--,q===n&&(re=n,je===0&&Re(Ve)),q}function tr(){var q,re,se,et,Je,kt;if(je++,q=H,re=H,t.substr(H,5)===k?(se=k,H+=5):(se=n,je===0&&Re(Ke)),se===n&&(t.substr(H,3)===C?(se=C,H+=3):(se=n,je===0&&Re(J)),se===n&&(t.substr(H,5)===N?(se=N,H+=5):(se=n,je===0&&Re(De)),se===n&&(t.substr(H,3)===j?(se=j,H+=3):(se=n,je===0&&Re(qe)),se===n))))if(se=H,et=t.charAt(H),be.test(et)?H++:(et=n,je===0&&Re(xe)),et!==n){if(Je=[],kt=t.charAt(H),Ce.test(kt)?H++:(kt=n,je===0&&Re(bt)),kt!==n)for(;kt!==n;)Je.push(kt),kt=t.charAt(H),Ce.test(kt)?H++:(kt=n,je===0&&Re(bt));else Je=n;Je!==n?(et=[et,Je],se=et):(H=se,se=n)}else H=se,se=n;return se!==n?(et=t.charAt(H),$e.test(et)?H++:(et=n,je===0&&Re(Ie)),et===n&&(et=null),se=[se,et],re=se):(H=re,re=n),re!==n?q=t.substring(q,H):q=re,je--,q===n&&(re=n,je===0&&Re(Te)),q}function Sn(){var q,re,se;for(je++,q=H,re=[],se=t.charAt(H),ce.test(se)?H++:(se=n,je===0&&Re(nt));se!==n;)re.push(se),re.length>=2?se=n:(se=t.charAt(H),ce.test(se)?H++:(se=n,je===0&&Re(nt)));return re.length<1?(H=q,q=n):q=re,je--,q===n&&(re=n,je===0&&Re(Xe)),q}function rn(){var q,re,se,et,Je;if(je++,q=H,un(),t.charCodeAt(H)===36?(re=M,H++):(re=n,je===0&&Re(Kt)),re!==n){if(se=H,et=[],Je=t.charAt(H),me.test(Je)?H++:(Je=n,je===0&&Re(O)),Je!==n)for(;Je!==n;)et.push(Je),Je=t.charAt(H),me.test(Je)?H++:(Je=n,je===0&&Re(O));else et=n;et!==n?se=t.substring(se,H):se=et,se!==n?q=ie(se):(H=q,q=n)}else H=q,q=n;return je--,q===n&&je===0&&Re(Ut),q}function cs(){var q;return q=En(),q===n&&(q=en()),q}function En(){var q,re,se,et,Je;if(je++,q=H,t.charCodeAt(H)===123?(re=$,H++):(re=n,je===0&&Re(Ft)),re!==n){for(se=H,et=[],Je=t.charAt(H),ue.test(Je)?H++:(Je=n,je===0&&Re(zt));Je!==n;)et.push(Je),Je=t.charAt(H),ue.test(Je)?H++:(Je=n,je===0&&Re(zt));se=t.substring(se,H),t.charCodeAt(H)===125?(et=Q,H++):(et=n,je===0&&Re(Cn)),et!==n?q=lt(se):(H=q,q=n)}else H=q,q=n;return je--,q===n&&(re=n,je===0&&Re(dt)),q}function en(){var q,re,se,et,Je;if(je++,q=H,t.charCodeAt(H)===59?(re=ae,H++):(re=n,je===0&&Re(xt)),re!==n){for(se=H,et=[],Je=t.charAt(H),ne.test(Je)?H++:(Je=n,je===0&&Re(vn));Je!==n;)et.push(Je),Je=t.charAt(H),ne.test(Je)?H++:(Je=n,je===0&&Re(vn));se=t.substring(se,H),q=Pt(se)}else H=q,q=n;return je--,q===n&&(re=n,je===0&&Re(qn)),q}function Es(){var q,re,se,et;return je++,q=H,un(),t.charCodeAt(H)===40?(re=X,H++):(re=n,je===0&&Re(Ls)),re!==n?(se=Tt(),se!==n?(un(),t.charCodeAt(H)===41?(et=P,H++):(et=n,je===0&&Re(as)),et!==n?q=Bt(se):(H=q,q=n)):(H=q,q=n)):(H=q,q=n),je--,q===n&&je===0&&Re(Mn),q}function Jt(){var q,re,se;return je++,q=H,t.substr(H,3)===W?(re=W,H+=3):(re=n,je===0&&Re(os)),re===n&&(t.substr(H,3)===u?(re=u,H+=3):(re=n,je===0&&Re(xs)),re===n&&(t.substr(H,7)===ye?(re=ye,H+=7):(re=n,je===0&&Re(Ps)),re===n&&(t.charCodeAt(H)===42?(re=ve,H++):(re=n,je===0&&Re(er))))),re!==n?(un(),se=cs(),se===n&&(se=null),q=Gt(re,se)):(H=q,q=n),je--,q===n&&(re=n,je===0&&Re(bn)),q}function un(){var q,re;for(je++,q=[],re=t.charAt(H),V.test(re)?H++:(re=n,je===0&&Re(Hn));re!==n;)q.push(re),re=t.charAt(H),V.test(re)?H++:(re=n,je===0&&Re(Hn));return je--,re=n,je===0&&Re(Bn),q}if(Dn=d(),e.peg$library)return{peg$result:Dn,peg$currPos:H,peg$FAILED:n,peg$maxFailExpected:Yt,peg$maxFailPos:jt};if(Dn!==n&&H===t.length)return Dn;throw Dn!==n&&H<t.length&&Re(pe()),Vt(Yt,jt<t.length?t.charAt(jt):null,jt<t.length?tt(jt,jt+1):tt(jt,jt))}const ag=0xffffffffffffffffn;function i0(t,e){return(t<<e|t>>64n-e)&0xffffffffffffffffn}function Hy(t,e){return t*e&ag}function B8(t){return function(){let e=BigInt(t&ag),n=BigInt(t>>64n&ag);const r=Hy(i0(Hy(e,5n),7n),9n);return n^=e,e=(i0(e,24n)^n^n<<16n)&ag,n=i0(n,37n),t=n<<64n|e,r}}const gm=B8(0xa187eb39cdcaed8f31c4b365b102e01en),$8=Array.from({length:2},()=>Array.from({length:6},()=>Array.from({length:128},()=>gm()))),L8=Array.from({length:8},()=>gm()),K8=Array.from({length:16},()=>gm()),a0=gm(),Us="w",Rr="b",Vn="p",H0="n",og="b",Ad="r",Za="q",ns="k",o0="rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR w KQkq - 0 1";class Gp{color;from;to;piece;captured;promotion;flags;san;lan;before;after;constructor(e,n){const{color:r,piece:o,from:d,to:f,flags:g,captured:b,promotion:w}=n,k=vs(d),C=vs(f);this.color=r,this.piece=o,this.from=k,this.to=C,this.san=e._moveToSan(n,e._moves({legal:!0})),this.lan=k+C,this.before=e.fen(),e._makeMove(n),this.after=e.fen(),e._undoMove(),this.flags="";for(const N in _t)_t[N]&g&&(this.flags+=tl[N]);b&&(this.captured=b),w&&(this.promotion=w,this.lan+=w)}isCapture(){return this.flags.indexOf(tl.CAPTURE)>-1}isPromotion(){return this.flags.indexOf(tl.PROMOTION)>-1}isEnPassant(){return this.flags.indexOf(tl.EP_CAPTURE)>-1}isKingsideCastle(){return this.flags.indexOf(tl.KSIDE_CASTLE)>-1}isQueensideCastle(){return this.flags.indexOf(tl.QSIDE_CASTLE)>-1}isBigPawn(){return this.flags.indexOf(tl.BIG_PAWN)>-1}}const Cs=-1,tl={NORMAL:"n",CAPTURE:"c",BIG_PAWN:"b",EP_CAPTURE:"e",PROMOTION:"p",KSIDE_CASTLE:"k",QSIDE_CASTLE:"q",NULL_MOVE:"-"},_t={NORMAL:1,CAPTURE:2,BIG_PAWN:4,EP_CAPTURE:8,PROMOTION:16,KSIDE_CASTLE:32,QSIDE_CASTLE:64,NULL_MOVE:128},Y0={Event:"?",Site:"?",Date:"????.??.??",Round:"?",White:"?",Black:"?",Result:"*"},F8={WhiteTitle:null,BlackTitle:null,WhiteElo:null,BlackElo:null,WhiteUSCF:null,BlackUSCF:null,WhiteNA:null,BlackNA:null,WhiteType:null,BlackType:null,EventDate:null,EventSponsor:null,Section:null,Stage:null,Board:null,Opening:null,Variation:null,SubVariation:null,ECO:null,NIC:null,Time:null,UTCTime:null,UTCDate:null,TimeControl:null,SetUp:null,FEN:null,Termination:null,Annotator:null,Mode:null,PlyCount:null},q8={...Y0,...F8},yt={a8:0,b8:1,c8:2,d8:3,e8:4,f8:5,g8:6,h8:7,a7:16,b7:17,c7:18,d7:19,e7:20,f7:21,g7:22,h7:23,a6:32,b6:33,c6:34,d6:35,e6:36,f6:37,g6:38,h6:39,a5:48,b5:49,c5:50,d5:51,e5:52,f5:53,g5:54,h5:55,a4:64,b4:65,c4:66,d4:67,e4:68,f4:69,g4:70,h4:71,a3:80,b3:81,c3:82,d3:83,e3:84,f3:85,g3:86,h3:87,a2:96,b2:97,c2:98,d2:99,e2:100,f2:101,g2:102,h2:103,a1:112,b1:113,c1:114,d1:115,e1:116,f1:117,g1:118,h1:119},l0={b:[16,32,17,15],w:[-16,-32,-17,-15]},Yy={n:[-18,-33,-31,-14,18,33,31,14],b:[-17,-15,17,15],r:[-16,1,16,-1],q:[-17,-16,-15,1,17,16,15,-1],k:[-17,-16,-15,1,17,16,15,-1]},Q8=[20,0,0,0,0,0,0,24,0,0,0,0,0,0,20,0,0,20,0,0,0,0,0,24,0,0,0,0,0,20,0,0,0,0,20,0,0,0,0,24,0,0,0,0,20,0,0,0,0,0,0,20,0,0,0,24,0,0,0,20,0,0,0,0,0,0,0,0,20,0,0,24,0,0,20,0,0,0,0,0,0,0,0,0,0,20,2,24,2,20,0,0,0,0,0,0,0,0,0,0,0,2,53,56,53,2,0,0,0,0,0,0,24,24,24,24,24,24,56,0,56,24,24,24,24,24,24,0,0,0,0,0,0,2,53,56,53,2,0,0,0,0,0,0,0,0,0,0,0,20,2,24,2,20,0,0,0,0,0,0,0,0,0,0,20,0,0,24,0,0,20,0,0,0,0,0,0,0,0,20,0,0,0,24,0,0,0,20,0,0,0,0,0,0,20,0,0,0,0,24,0,0,0,0,20,0,0,0,0,20,0,0,0,0,0,24,0,0,0,0,0,20,0,0,20,0,0,0,0,0,0,24,0,0,0,0,0,0,20],z8=[17,0,0,0,0,0,0,16,0,0,0,0,0,0,15,0,0,17,0,0,0,0,0,16,0,0,0,0,0,15,0,0,0,0,17,0,0,0,0,16,0,0,0,0,15,0,0,0,0,0,0,17,0,0,0,16,0,0,0,15,0,0,0,0,0,0,0,0,17,0,0,16,0,0,15,0,0,0,0,0,0,0,0,0,0,17,0,16,0,15,0,0,0,0,0,0,0,0,0,0,0,0,17,16,15,0,0,0,0,0,0,0,1,1,1,1,1,1,1,0,-1,-1,-1,-1,-1,-1,-1,0,0,0,0,0,0,0,-15,-16,-17,0,0,0,0,0,0,0,0,0,0,0,0,-15,0,-16,0,-17,0,0,0,0,0,0,0,0,0,0,-15,0,0,-16,0,0,-17,0,0,0,0,0,0,0,0,-15,0,0,0,-16,0,0,0,-17,0,0,0,0,0,0,-15,0,0,0,0,-16,0,0,0,0,-17,0,0,0,0,-15,0,0,0,0,0,-16,0,0,0,0,0,-17,0,0,-15,0,0,0,0,0,0,-16,0,0,0,0,0,0,-17],G8={p:1,n:2,b:4,r:8,q:16,k:32},V8="pnbrqkPNBRQK",Xy=[H0,og,Ad,Za],W8=7,H8=6,Y8=1,X8=0,Vp={[ns]:_t.KSIDE_CASTLE,[Za]:_t.QSIDE_CASTLE},Xa={w:[{square:yt.a1,flag:_t.QSIDE_CASTLE},{square:yt.h1,flag:_t.KSIDE_CASTLE}],b:[{square:yt.a8,flag:_t.QSIDE_CASTLE},{square:yt.h8,flag:_t.KSIDE_CASTLE}]},J8={b:Y8,w:H8},c0="--";function dl(t){return t>>4}function sh(t){return t&15}function R_(t){return"0123456789".indexOf(t)!==-1}function vs(t){const e=sh(t),n=dl(t);return"abcdefgh".substring(e,e+1)+"87654321".substring(n,n+1)}function Td(t){return t===Us?Rr:Us}function Z8(t){const e=t.split(/\s+/);if(e.length!==6)return{ok:!1,error:"Invalid FEN: must contain six space-delimited fields"};const n=parseInt(e[5],10);if(isNaN(n)||n<=0)return{ok:!1,error:"Invalid FEN: move number must be a positive integer"};const r=parseInt(e[4],10);if(isNaN(r)||r<0)return{ok:!1,error:"Invalid FEN: half move counter number must be a non-negative integer"};if(!/^(-|[abcdefgh][36])$/.test(e[3]))return{ok:!1,error:"Invalid FEN: en-passant square is invalid"};if(/[^kKqQ-]/.test(e[2]))return{ok:!1,error:"Invalid FEN: castling availability is invalid"};if(!/^(w|b)$/.test(e[1]))return{ok:!1,error:"Invalid FEN: side-to-move is invalid"};const o=e[0].split("/");if(o.length!==8)return{ok:!1,error:"Invalid FEN: piece data does not contain 8 '/'-delimited rows"};for(let f=0;f<o.length;f++){let g=0,b=!1;for(let w=0;w<o[f].length;w++)if(R_(o[f][w])){if(b)return{ok:!1,error:"Invalid FEN: piece data is invalid (consecutive number)"};g+=parseInt(o[f][w],10),b=!0}else{if(!/^[prnbqkPRNBQK]$/.test(o[f][w]))return{ok:!1,error:"Invalid FEN: piece data is invalid (invalid piece)"};g+=1,b=!1}if(g!==8)return{ok:!1,error:"Invalid FEN: piece data is invalid (too many squares in rank)"}}if(e[3][1]=="3"&&e[1]=="w"||e[3][1]=="6"&&e[1]=="b")return{ok:!1,error:"Invalid FEN: illegal en-passant square"};const d=[{color:"white",regex:/K/g},{color:"black",regex:/k/g}];for(const{color:f,regex:g}of d){if(!g.test(e[0]))return{ok:!1,error:`Invalid FEN: missing ${f} king`};if((e[0].match(g)||[]).length>1)return{ok:!1,error:`Invalid FEN: too many ${f} kings`}}return Array.from(o[0]+o[7]).some(f=>f.toUpperCase()==="P")?{ok:!1,error:"Invalid FEN: some pawns are on the edge rows"}:{ok:!0}}function ej(t,e){const n=t.from,r=t.to,o=t.piece;let d=0,f=0,g=0;for(let b=0,w=e.length;b<w;b++){const k=e[b].from,C=e[b].to,N=e[b].piece;o===N&&n!==k&&r===C&&(d++,dl(n)===dl(k)&&f++,sh(n)===sh(k)&&g++)}return d>0?f>0&&g>0?vs(n):g>0?vs(n).charAt(1):vs(n).charAt(0):""}function Ja(t,e,n,r,o,d=void 0,f=_t.NORMAL){const g=dl(r);if(o===Vn&&(g===W8||g===X8))for(let b=0;b<Xy.length;b++){const w=Xy[b];t.push({color:e,from:n,to:r,piece:o,captured:d,promotion:w,flags:f|_t.PROMOTION})}else t.push({color:e,from:n,to:r,piece:o,captured:d,flags:f})}function Jy(t){let e=t.charAt(0);return e>="a"&&e<="h"?t.match(/[a-h]\d.*[a-h]\d/)?void 0:Vn:(e=e.toLowerCase(),e==="o"?ns:e)}function u0(t){return t.replace(/=/,"").replace(/[+#]?[?!]*$/,"")}class wt{_board=new Array(128);_turn=Us;_header={};_kings={w:Cs,b:Cs};_epSquare=-1;_halfMoves=0;_moveNumber=0;_history=[];_comments={};_castling={w:0,b:0};_hash=0n;_positionCount=new Map;constructor(e=o0,{skipValidation:n=!1}={}){this.load(e,{skipValidation:n})}clear({preserveHeaders:e=!1}={}){this._board=new Array(128),this._kings={w:Cs,b:Cs},this._turn=Us,this._castling={w:0,b:0},this._epSquare=Cs,this._halfMoves=0,this._moveNumber=1,this._history=[],this._comments={},this._header=e?this._header:{...q8},this._hash=this._computeHash(),this._positionCount=new Map,this._header.SetUp=null,this._header.FEN=null}load(e,{skipValidation:n=!1,preserveHeaders:r=!1}={}){let o=e.split(/\s+/);if(o.length>=2&&o.length<6){const g=["-","-","0","1"];e=o.concat(g.slice(-(6-o.length))).join(" ")}if(o=e.split(/\s+/),!n){const{ok:g,error:b}=Z8(e);if(!g)throw new Error(b)}const d=o[0];let f=0;this.clear({preserveHeaders:r});for(let g=0;g<d.length;g++){const b=d.charAt(g);if(b==="/")f+=8;else if(R_(b))f+=parseInt(b,10);else{const w=b<"a"?Us:Rr;this._put({type:b.toLowerCase(),color:w},vs(f)),f++}}this._turn=o[1],o[2].indexOf("K")>-1&&(this._castling.w|=_t.KSIDE_CASTLE),o[2].indexOf("Q")>-1&&(this._castling.w|=_t.QSIDE_CASTLE),o[2].indexOf("k")>-1&&(this._castling.b|=_t.KSIDE_CASTLE),o[2].indexOf("q")>-1&&(this._castling.b|=_t.QSIDE_CASTLE),this._epSquare=o[3]==="-"?Cs:yt[o[3]],this._halfMoves=parseInt(o[4],10),this._moveNumber=parseInt(o[5],10),this._hash=this._computeHash(),this._updateSetup(e),this._incPositionCount()}fen({forceEnpassantSquare:e=!1}={}){let n=0,r="";for(let f=yt.a8;f<=yt.h1;f++){if(this._board[f]){n>0&&(r+=n,n=0);const{color:g,type:b}=this._board[f];r+=g===Us?b.toUpperCase():b.toLowerCase()}else n++;f+1&136&&(n>0&&(r+=n),f!==yt.h1&&(r+="/"),n=0,f+=8)}let o="";this._castling[Us]&_t.KSIDE_CASTLE&&(o+="K"),this._castling[Us]&_t.QSIDE_CASTLE&&(o+="Q"),this._castling[Rr]&_t.KSIDE_CASTLE&&(o+="k"),this._castling[Rr]&_t.QSIDE_CASTLE&&(o+="q"),o=o||"-";let d="-";if(this._epSquare!==Cs)if(e)d=vs(this._epSquare);else{const f=this._epSquare+(this._turn===Us?16:-16),g=[f+1,f-1];for(const b of g){if(b&136)continue;const w=this._turn;if(this._board[b]?.color===w&&this._board[b]?.type===Vn){this._makeMove({color:w,from:b,to:this._epSquare,piece:Vn,captured:Vn,flags:_t.EP_CAPTURE});const k=!this._isKingAttacked(w);if(this._undoMove(),k){d=vs(this._epSquare);break}}}}return[r,this._turn,o,d,this._halfMoves,this._moveNumber].join(" ")}_pieceKey(e){if(!this._board[e])return 0n;const{color:n,type:r}=this._board[e],o={w:0,b:1}[n],d={p:0,n:1,b:2,r:3,q:4,k:5}[r];return $8[o][d][e]}_epKey(){return this._epSquare===Cs?0n:L8[this._epSquare&7]}_castlingKey(){const e=this._castling.w>>5|this._castling.b>>3;return K8[e]}_computeHash(){let e=0n;for(let n=yt.a8;n<=yt.h1;n++){if(n&136){n+=7;continue}this._board[n]&&(e^=this._pieceKey(n))}return e^=this._epKey(),e^=this._castlingKey(),this._turn==="b"&&(e^=a0),e}_updateSetup(e){this._history.length>0||(e!==o0?(this._header.SetUp="1",this._header.FEN=e):(this._header.SetUp=null,this._header.FEN=null))}reset(){this.load(o0)}get(e){return this._board[yt[e]]}findPiece(e){const n=[];for(let r=yt.a8;r<=yt.h1;r++){if(r&136){r+=7;continue}!this._board[r]||this._board[r]?.color!==e.color||this._board[r].color===e.color&&this._board[r].type===e.type&&n.push(vs(r))}return n}put({type:e,color:n},r){return this._put({type:e,color:n},r)?(this._updateCastlingRights(),this._updateEnPassantSquare(),this._updateSetup(this.fen()),!0):!1}_set(e,n){this._hash^=this._pieceKey(e),this._board[e]=n,this._hash^=this._pieceKey(e)}_put({type:e,color:n},r){if(V8.indexOf(e.toLowerCase())===-1||!(r in yt))return!1;const o=yt[r];if(e==ns&&!(this._kings[n]==Cs||this._kings[n]==o))return!1;const d=this._board[o];return d&&d.type===ns&&(this._kings[d.color]=Cs),this._set(o,{type:e,color:n}),e===ns&&(this._kings[n]=o),!0}_clear(e){this._hash^=this._pieceKey(e),delete this._board[e]}remove(e){const n=this.get(e);return this._clear(yt[e]),n&&n.type===ns&&(this._kings[n.color]=Cs),this._updateCastlingRights(),this._updateEnPassantSquare(),this._updateSetup(this.fen()),n}_updateCastlingRights(){this._hash^=this._castlingKey();const e=this._board[yt.e1]?.type===ns&&this._board[yt.e1]?.color===Us,n=this._board[yt.e8]?.type===ns&&this._board[yt.e8]?.color===Rr;(!e||this._board[yt.a1]?.type!==Ad||this._board[yt.a1]?.color!==Us)&&(this._castling.w&=-65),(!e||this._board[yt.h1]?.type!==Ad||this._board[yt.h1]?.color!==Us)&&(this._castling.w&=-33),(!n||this._board[yt.a8]?.type!==Ad||this._board[yt.a8]?.color!==Rr)&&(this._castling.b&=-65),(!n||this._board[yt.h8]?.type!==Ad||this._board[yt.h8]?.color!==Rr)&&(this._castling.b&=-33),this._hash^=this._castlingKey()}_updateEnPassantSquare(){if(this._epSquare===Cs)return;const e=this._epSquare+(this._turn===Us?-16:16),n=this._epSquare+(this._turn===Us?16:-16),r=[n+1,n-1];if(this._board[e]!==null||this._board[this._epSquare]!==null||this._board[n]?.color!==Td(this._turn)||this._board[n]?.type!==Vn){this._hash^=this._epKey(),this._epSquare=Cs;return}const o=d=>!(d&136)&&this._board[d]?.color===this._turn&&this._board[d]?.type===Vn;r.some(o)||(this._hash^=this._epKey(),this._epSquare=Cs)}_attacked(e,n,r){const o=[];for(let d=yt.a8;d<=yt.h1;d++){if(d&136){d+=7;continue}if(this._board[d]===void 0||this._board[d].color!==e)continue;const f=this._board[d],g=d-n;if(g===0)continue;const b=g+119;if(Q8[b]&G8[f.type]){if(f.type===Vn){if(g>0&&f.color===Us||g<=0&&f.color===Rr)if(r)o.push(vs(d));else return!0;continue}if(f.type==="n"||f.type==="k")if(r){o.push(vs(d));continue}else return!0;const w=z8[b];let k=d+w,C=!1;for(;k!==n;){if(this._board[k]!=null){C=!0;break}k+=w}if(!C)if(r){o.push(vs(d));continue}else return!0}}return r?o:!1}attackers(e,n){return n?this._attacked(n,yt[e],!0):this._attacked(this._turn,yt[e],!0)}_isKingAttacked(e){const n=this._kings[e];return n===-1?!1:this._attacked(Td(e),n)}hash(){return this._hash.toString(16)}isAttacked(e,n){return this._attacked(n,yt[e])}isCheck(){return this._isKingAttacked(this._turn)}inCheck(){return this.isCheck()}isCheckmate(){return this.isCheck()&&this._moves().length===0}isStalemate(){return!this.isCheck()&&this._moves().length===0}isInsufficientMaterial(){const e={b:0,n:0,r:0,q:0,k:0,p:0},n=[];let r=0,o=0;for(let d=yt.a8;d<=yt.h1;d++){if(o=(o+1)%2,d&136){d+=7;continue}const f=this._board[d];f&&(e[f.type]=f.type in e?e[f.type]+1:1,f.type===og&&n.push(o),r++)}if(r===2)return!0;if(r===3&&(e[og]===1||e[H0]===1))return!0;if(r===e[og]+2){let d=0;const f=n.length;for(let g=0;g<f;g++)d+=n[g];if(d===0||d===f)return!0}return!1}isThreefoldRepetition(){return this._getPositionCount(this._hash)>=3}isDrawByFiftyMoves(){return this._halfMoves>=100}isDraw(){return this.isDrawByFiftyMoves()||this.isStalemate()||this.isInsufficientMaterial()||this.isThreefoldRepetition()}isGameOver(){return this.isCheckmate()||this.isDraw()}moves({verbose:e=!1,square:n=void 0,piece:r=void 0}={}){const o=this._moves({square:n,piece:r});return e?o.map(d=>new Gp(this,d)):o.map(d=>this._moveToSan(d,o))}_moves({legal:e=!0,piece:n=void 0,square:r=void 0}={}){const o=r?r.toLowerCase():void 0,d=n?.toLowerCase(),f=[],g=this._turn,b=Td(g);let w=yt.a8,k=yt.h1,C=!1;if(o)if(o in yt)w=k=yt[o],C=!0;else return[];for(let j=w;j<=k;j++){if(j&136){j+=7;continue}if(!this._board[j]||this._board[j].color===b)continue;const{type:M}=this._board[j];let $;if(M===Vn){if(d&&d!==M)continue;$=j+l0[g][0],this._board[$]||(Ja(f,g,j,$,Vn),$=j+l0[g][1],J8[g]===dl(j)&&!this._board[$]&&Ja(f,g,j,$,Vn,void 0,_t.BIG_PAWN));for(let Q=2;Q<4;Q++)$=j+l0[g][Q],!($&136)&&(this._board[$]?.color===b?Ja(f,g,j,$,Vn,this._board[$].type,_t.CAPTURE):$===this._epSquare&&Ja(f,g,j,$,Vn,Vn,_t.EP_CAPTURE))}else{if(d&&d!==M)continue;for(let Q=0,ae=Yy[M].length;Q<ae;Q++){const X=Yy[M][Q];for($=j;$+=X,!($&136);){if(!this._board[$])Ja(f,g,j,$,M);else{if(this._board[$].color===g)break;Ja(f,g,j,$,M,this._board[$].type,_t.CAPTURE);break}if(M===H0||M===ns)break}}}}if((d===void 0||d===ns)&&(!C||k===this._kings[g])){if(this._castling[g]&_t.KSIDE_CASTLE){const j=this._kings[g],M=j+2;!this._board[j+1]&&!this._board[M]&&!this._attacked(b,this._kings[g])&&!this._attacked(b,j+1)&&!this._attacked(b,M)&&Ja(f,g,this._kings[g],M,ns,void 0,_t.KSIDE_CASTLE)}if(this._castling[g]&_t.QSIDE_CASTLE){const j=this._kings[g],M=j-2;!this._board[j-1]&&!this._board[j-2]&&!this._board[j-3]&&!this._attacked(b,this._kings[g])&&!this._attacked(b,j-1)&&!this._attacked(b,M)&&Ja(f,g,this._kings[g],M,ns,void 0,_t.QSIDE_CASTLE)}}if(!e||this._kings[g]===-1)return f;const N=[];for(let j=0,M=f.length;j<M;j++)this._makeMove(f[j]),this._isKingAttacked(g)||N.push(f[j]),this._undoMove();return N}move(e,{strict:n=!1}={}){let r=null;if(typeof e=="string")r=this._moveFromSan(e,n);else if(e===null)r=this._moveFromSan(c0,n);else if(typeof e=="object"){const d=this._moves();for(let f=0,g=d.length;f<g;f++)if(e.from===vs(d[f].from)&&e.to===vs(d[f].to)&&(!("promotion"in d[f])||e.promotion===d[f].promotion)){r=d[f];break}}if(!r)throw typeof e=="string"?new Error(`Invalid move: ${e}`):new Error(`Invalid move: ${JSON.stringify(e)}`);if(this.isCheck()&&r.flags&_t.NULL_MOVE)throw new Error("Null move not allowed when in check");const o=new Gp(this,r);return this._makeMove(r),this._incPositionCount(),o}_push(e){this._history.push({move:e,kings:{b:this._kings.b,w:this._kings.w},turn:this._turn,castling:{b:this._castling.b,w:this._castling.w},epSquare:this._epSquare,halfMoves:this._halfMoves,moveNumber:this._moveNumber})}_movePiece(e,n){this._hash^=this._pieceKey(e),this._board[n]=this._board[e],delete this._board[e],this._hash^=this._pieceKey(n)}_makeMove(e){const n=this._turn,r=Td(n);if(this._push(e),e.flags&_t.NULL_MOVE){n===Rr&&this._moveNumber++,this._halfMoves++,this._turn=r,this._epSquare=Cs;return}if(this._hash^=this._epKey(),this._hash^=this._castlingKey(),e.captured&&(this._hash^=this._pieceKey(e.to)),this._movePiece(e.from,e.to),e.flags&_t.EP_CAPTURE&&(this._turn===Rr?this._clear(e.to-16):this._clear(e.to+16)),e.promotion&&(this._clear(e.to),this._set(e.to,{type:e.promotion,color:n})),this._board[e.to].type===ns){if(this._kings[n]=e.to,e.flags&_t.KSIDE_CASTLE){const o=e.to-1,d=e.to+1;this._movePiece(d,o)}else if(e.flags&_t.QSIDE_CASTLE){const o=e.to+1,d=e.to-2;this._movePiece(d,o)}this._castling[n]=0}if(this._castling[n]){for(let o=0,d=Xa[n].length;o<d;o++)if(e.from===Xa[n][o].square&&this._castling[n]&Xa[n][o].flag){this._castling[n]^=Xa[n][o].flag;break}}if(this._castling[r]){for(let o=0,d=Xa[r].length;o<d;o++)if(e.to===Xa[r][o].square&&this._castling[r]&Xa[r][o].flag){this._castling[r]^=Xa[r][o].flag;break}}if(this._hash^=this._castlingKey(),e.flags&_t.BIG_PAWN){let o;n===Rr?o=e.to-16:o=e.to+16,!(e.to-1&136)&&this._board[e.to-1]?.type===Vn&&this._board[e.to-1]?.color===r||!(e.to+1&136)&&this._board[e.to+1]?.type===Vn&&this._board[e.to+1]?.color===r?(this._epSquare=o,this._hash^=this._epKey()):this._epSquare=Cs}else this._epSquare=Cs;e.piece===Vn?this._halfMoves=0:e.flags&(_t.CAPTURE|_t.EP_CAPTURE)?this._halfMoves=0:this._halfMoves++,n===Rr&&this._moveNumber++,this._turn=r,this._hash^=a0}undo(){const e=this._hash,n=this._undoMove();if(n){const r=new Gp(this,n);return this._decPositionCount(e),r}return null}_undoMove(){const e=this._history.pop();if(e===void 0)return null;this._hash^=this._epKey(),this._hash^=this._castlingKey();const n=e.move;this._kings=e.kings,this._turn=e.turn,this._castling=e.castling,this._epSquare=e.epSquare,this._halfMoves=e.halfMoves,this._moveNumber=e.moveNumber,this._hash^=this._epKey(),this._hash^=this._castlingKey(),this._hash^=a0;const r=this._turn,o=Td(r);if(n.flags&_t.NULL_MOVE)return n;if(this._movePiece(n.to,n.from),n.piece&&(this._clear(n.from),this._set(n.from,{type:n.piece,color:r})),n.captured)if(n.flags&_t.EP_CAPTURE){let d;r===Rr?d=n.to-16:d=n.to+16,this._set(d,{type:Vn,color:o})}else this._set(n.to,{type:n.captured,color:o});if(n.flags&(_t.KSIDE_CASTLE|_t.QSIDE_CASTLE)){let d,f;n.flags&_t.KSIDE_CASTLE?(d=n.to+1,f=n.to-1):(d=n.to-2,f=n.to+1),this._movePiece(f,d)}return n}pgn({newline:e=`
`,maxWidth:n=0}={}){const r=[];let o=!1;for(const N in this._header)this._header[N]&&r.push(`[${N} "${this._header[N]}"]`+e),o=!0;o&&this._history.length&&r.push(e);const d=N=>{const j=this._comments[this.fen()];if(typeof j<"u"){const M=N.length>0?" ":"";N=`${N}${M}{${j}}`}return N},f=[];for(;this._history.length>0;)f.push(this._undoMove());const g=[];let b="";for(f.length===0&&g.push(d(""));f.length>0;){b=d(b);const N=f.pop();if(!N)break;if(!this._history.length&&N.color==="b"){const j=`${this._moveNumber}. ...`;b=b?`${b} ${j}`:j}else N.color==="w"&&(b.length&&g.push(b),b=this._moveNumber+".");b=b+" "+this._moveToSan(N,this._moves({legal:!0})),this._makeMove(N)}if(b.length&&g.push(d(b)),g.push(this._header.Result||"*"),n===0)return r.join("")+g.join(" ");const w=function(){return r.length>0&&r[r.length-1]===" "?(r.pop(),!0):!1},k=function(N,j){for(const M of j.split(" "))if(M){if(N+M.length>n){for(;w();)N--;r.push(e),N=0}r.push(M),N+=M.length,r.push(" "),N++}return w()&&N--,N};let C=0;for(let N=0;N<g.length;N++){if(C+g[N].length>n&&g[N].includes("{")){C=k(C,g[N]);continue}C+g[N].length>n&&N!==0?(r[r.length-1]===" "&&r.pop(),r.push(e),C=0):N!==0&&(r.push(" "),C++),r.push(g[N]),C+=g[N].length}return r.join("")}header(...e){for(let n=0;n<e.length;n+=2)typeof e[n]=="string"&&typeof e[n+1]=="string"&&(this._header[e[n]]=e[n+1]);return this._header}setHeader(e,n){return this._header[e]=n??Y0[e]??null,this.getHeaders()}removeHeader(e){return e in this._header?(this._header[e]=Y0[e]||null,!0):!1}getHeaders(){const e={};for(const[n,r]of Object.entries(this._header))r!==null&&(e[n]=r);return e}loadPgn(e,{strict:n=!1,newlineChar:r=`\r?
`}={}){r!==`\r?
`&&(e=e.replace(new RegExp(r,"g"),`
`));const o=U8(e);this.reset();const d=o.headers;let f="";for(const w in d)w.toLowerCase()==="fen"&&(f=d[w]),this.header(w,d[w]);if(!n)f&&this.load(f,{preserveHeaders:!0});else if(d.SetUp==="1"){if(!("FEN"in d))throw new Error("Invalid PGN: FEN tag must be supplied with SetUp tag");this.load(d.FEN,{preserveHeaders:!0})}let g=o.root;for(;g;){if(g.move){const w=this._moveFromSan(g.move,n);if(w==null)throw new Error(`Invalid move in PGN: ${g.move}`);this._makeMove(w),this._incPositionCount()}g.comment!==void 0&&(this._comments[this.fen()]=g.comment),g=g.variations[0]}const b=o.result;b&&Object.keys(this._header).length&&this._header.Result!==b&&this.setHeader("Result",b)}_moveToSan(e,n){let r="";if(e.flags&_t.KSIDE_CASTLE)r="O-O";else if(e.flags&_t.QSIDE_CASTLE)r="O-O-O";else{if(e.flags&_t.NULL_MOVE)return c0;if(e.piece!==Vn){const o=ej(e,n);r+=e.piece.toUpperCase()+o}e.flags&(_t.CAPTURE|_t.EP_CAPTURE)&&(e.piece===Vn&&(r+=vs(e.from)[0]),r+="x"),r+=vs(e.to),e.promotion&&(r+="="+e.promotion.toUpperCase())}return this._makeMove(e),this.isCheck()&&(this.isCheckmate()?r+="#":r+="+"),this._undoMove(),r}_moveFromSan(e,n=!1){let r=u0(e);if(n||(r==="0-0"?r="O-O":r==="0-0-0"&&(r="O-O-O")),r==c0)return{color:this._turn,from:0,to:0,piece:"k",flags:_t.NULL_MOVE};let o=Jy(r),d=this._moves({legal:!0,piece:o});for(let N=0,j=d.length;N<j;N++)if(r===u0(this._moveToSan(d[N],d)))return d[N];if(n)return null;let f,g,b,w,k,C=!1;if(g=r.match(/([pnbrqkPNBRQK])?([a-h][1-8])x?-?([a-h][1-8])([qrbnQRBN])?/),g?(f=g[1],b=g[2],w=g[3],k=g[4],b.length==1&&(C=!0)):(g=r.match(/([pnbrqkPNBRQK])?([a-h]?[1-8]?)x?-?([a-h][1-8])([qrbnQRBN])?/),g&&(f=g[1],b=g[2],w=g[3],k=g[4],b.length==1&&(C=!0))),o=Jy(r),d=this._moves({legal:!0,piece:f||o}),!w)return null;for(let N=0,j=d.length;N<j;N++)if(b){if((!f||f.toLowerCase()==d[N].piece)&&yt[b]==d[N].from&&yt[w]==d[N].to&&(!k||k.toLowerCase()==d[N].promotion))return d[N];if(C){const M=vs(d[N].from);if((!f||f.toLowerCase()==d[N].piece)&&yt[w]==d[N].to&&(b==M[0]||b==M[1])&&(!k||k.toLowerCase()==d[N].promotion))return d[N]}}else if(r===u0(this._moveToSan(d[N],d)).replace("x",""))return d[N];return null}ascii(){let e=`   +------------------------+
`;for(let n=yt.a8;n<=yt.h1;n++){if(sh(n)===0&&(e+=" "+"87654321"[dl(n)]+" |"),this._board[n]){const r=this._board[n].type,d=this._board[n].color===Us?r.toUpperCase():r.toLowerCase();e+=" "+d+" "}else e+=" . ";n+1&136&&(e+=`|
`,n+=8)}return e+=`   +------------------------+
`,e+="     a  b  c  d  e  f  g  h",e}perft(e){const n=this._moves({legal:!1});let r=0;const o=this._turn;for(let d=0,f=n.length;d<f;d++)this._makeMove(n[d]),this._isKingAttacked(o)||(e-1>0?r+=this.perft(e-1):r++),this._undoMove();return r}setTurn(e){return this._turn==e?!1:(this.move("--"),!0)}turn(){return this._turn}board(){const e=[];let n=[];for(let r=yt.a8;r<=yt.h1;r++)this._board[r]==null?n.push(null):n.push({square:vs(r),type:this._board[r].type,color:this._board[r].color}),r+1&136&&(e.push(n),n=[],r+=8);return e}squareColor(e){if(e in yt){const n=yt[e];return(dl(n)+sh(n))%2===0?"light":"dark"}return null}history({verbose:e=!1}={}){const n=[],r=[];for(;this._history.length>0;)n.push(this._undoMove());for(;;){const o=n.pop();if(!o)break;e?r.push(new Gp(this,o)):r.push(this._moveToSan(o,this._moves())),this._makeMove(o)}return r}_getPositionCount(e){return this._positionCount.get(e)??0}_incPositionCount(){this._positionCount.set(this._hash,(this._positionCount.get(this._hash)??0)+1)}_decPositionCount(e){const n=this._positionCount.get(e)??0;n===1?this._positionCount.delete(e):this._positionCount.set(e,n-1)}_pruneComments(){const e=[],n={},r=o=>{o in this._comments&&(n[o]=this._comments[o])};for(;this._history.length>0;)e.push(this._undoMove());for(r(this.fen());;){const o=e.pop();if(!o)break;this._makeMove(o),r(this.fen())}this._comments=n}getComment(){return this._comments[this.fen()]}setComment(e){this._comments[this.fen()]=e.replace("{","[").replace("}","]")}deleteComment(){return this.removeComment()}removeComment(){const e=this._comments[this.fen()];return delete this._comments[this.fen()],e}getComments(){return this._pruneComments(),Object.keys(this._comments).map(e=>({fen:e,comment:this._comments[e]}))}deleteComments(){return this.removeComments()}removeComments(){return this._pruneComments(),Object.keys(this._comments).map(e=>{const n=this._comments[e];return delete this._comments[e],{fen:e,comment:n}})}setCastlingRights(e,n){for(const o of[ns,Za])n[o]!==void 0&&(n[o]?this._castling[e]|=Vp[o]:this._castling[e]&=~Vp[o]);this._updateCastlingRights();const r=this.getCastlingRights(e);return(n[ns]===void 0||n[ns]===r[ns])&&(n[Za]===void 0||n[Za]===r[Za])}getCastlingRights(e){return{[ns]:(this._castling[e]&Vp[ns])!==0,[Za]:(this._castling[e]&Vp[Za])!==0}}moveNumber(){return this._moveNumber}}const fv="/assets/Mac%20Cursor%20Open%20Hand-C_Ak_Ehz.png",rh="/assets/Mac%20Cursor%20Closed%20Hand-DIpKCVw4.png",tj="/assets/The%20South%20Pawn-DhRHQMOC.png",nj="/assets/The%20South%20Bishop-BtagzYob.png",sj={opening:["Welcome to the board. Don't blink-you'll miss your chance.","The South Knight arrives. Let's see if you survive more than ten moves.","I hope you brought a plan. You'll need more than hope to beat me.","I don't take prisoners. Make your first move count.","The game begins. Step carefully-I strike from angles you can't see."],neutral:["Your move reveals more than you think.","I see through your strategy like glass.","That square belongs to me now.","You're playing checkers-I'm playing war.","The board is shrinking for you.","Pressure makes diamonds-or it breaks players.","Every move you make is another chance for me to punish you.","You're opening doors you won't be able to close."],weak:["You sure about that?","I've seen better moves in the pawn section.","That move screams panic.","I smelled that blunder from the opening.","Your pieces look uncomfortable.","Bold. Wrong, but bold.","That's the kind of move I feed on."],strong:["Impressive. But you won't keep that up.","A good move-finally.","Even the sun shines on a pawn some days.","I felt that one. Let's see what else you've got.","Alright, you earned my attention."],attack:["I warned you-I strike from the side.","Your king looks lonely. Let me help.","Check is just the beginning.","I'm not here to trade. I'm here to crush.","You opened the door. I'm walking through."],sacrifice:["A little chaos never hurt me.","I don't need pieces. I need initiative.","Sacrifices are the language of the brave.","I'm all-in. Try to keep up."],endgame:["This board belongs to me now.","Your king is running out of places to hide.","No more tricks. Just consequences.","Every move brings you closer to checkmate.","I already see the end. Do you?"],win:["Game over. Welcome to the South.","Checkmate. Remember the name-South Knight.","Another challenger falls.","You played well. I played better.","That's how a knight ends a battle."],defeat:["Well played. Even warriors fall.","You earned that one. Respect.","I'll be back-stronger.","Good game. Don't get comfortable."]},ea={opening:["Small? Me? Watch closely. I become anything I want on the 8th rank.","I may start as a pawn but I dont plan on staying one.","Everyone underestimates the pawnperfect. Makes my victories feel better.","Lets see what youve prepared. Im curious. Curious and ready."],neutral:["I only need one square. One step. One chance. Then I take the whole board.","You think you stopped me? Cute. I have seven more brothers.","Ah, strategy I like watching you try.","Move aside, big pieces. Let the future queen through.","Every file is a battlefield, and Im built for war."],capture:["Out of my way. The throne is calling.","Another one falls. My path gets clearer.","Tiny? Yes. Harmless? No."],blunder:["Hmm that didnt look right. Whatever. Still winning.","Oh? Was that bad? I learn by doing and you learn by losing.","Mistake? I call it improvisation."],winning:["This board feels small or maybe Im just too strong.","I told you: underestimate the pawn, overpay in losses.","Look at thatone step closer to greatness."],endgame:["Only a few of us remain. Perfect. Less noise while I rise.","Endgame? Thats where pawns become monsters.","One square. One dream. One crown."],win:["From pawn to ruler. Story of my life.","I warned youI dont stay weak for long.","This board is mine now. Next opponent.","Promotion achieved. Checkmate delivered."],defeat:["Even kings fall. Ill rise again.","You won this one but my ambition doesnt die.","A setback? Hardly. I start every game reborn."]},rj={opening:["The diagonals are mine to command. Shall we begin?","Lets see if you can navigate the subtleties of long-range warfare.","Be carefulmy influence often arrives before I do.","A single diagonal can decide a game. I intend to control them all."],neutral:["Your position is developing in interestingly exploitable ways.","Long-term pressure is my specialty. I hope youre patient.","I see lines you havent even imagined yet.","A bishop doesnt rush. We wait, and then we strike.","Every square you weaken becomes my invitation."],attack:["Elegant. Precise. Expected.","You left that diagonal open? Ill make use of it.","Ah, a weakness. How thoughtful of you.","Ill take initiative from here.","Feel that tension? Thats me, tightening the diagonals.","You're running out of safe squares.","Your king seems uncomfortable. Shall I assist with that?","Pressure is a language, and I speak it fluently.","Removed. Efficiently.","One less obstacle between us.","Control the diagonals, control the game."],sacrifice:["Hmm that may not have been ideal. But the game continues.","Even vision can blur. Lets correct the course.","Curious. I misjudged that plan. Lets see how you answer."],endgame:["Fewer pieces clearer diagonals.","Now we see who truly understands structure.","Precision matters most in the end."],win:["The diagonals favor me today.","Your position collapses exactly as predicted.","Order restored. The board is mine once again.","All lines converged to this moment. Checkmate.","A beautiful finish. I hope you took notes.","Strategy triumphs again."],defeat:["Even masters misjudge a position. I will adjust.","Youve gained the advantage for now.","A strategic setback, nothing more.","Even the wisest fall. I will return sharper.","A rare miscalculation. Well played.","I concede for now."]},ta=(t,e)=>{if(t==="pawn")switch(e){case"opening":return ea.opening;case"neutral":return ea.neutral;case"attack":return[...ea.capture,...ea.winning];case"sacrifice":return ea.blunder;case"endgame":return ea.endgame;case"win":return ea.win;case"defeat":return ea.defeat;default:return ea.neutral}else if(t==="bishop")return rj[e]||[];return sj[e]||[]},cl={knight:{id:"knight",name:"The South Knight",avatar:qg,skill:20,depth:20,label:"2500 Elo",difficulty:"2500 Elo"},bishop:{id:"bishop",name:"The South Bishop",avatar:nj,skill:10,depth:12,label:"1500 Elo",difficulty:"1500 Elo"},pawn:{id:"pawn",name:"The South Pawn",avatar:tj,skill:2,depth:5,label:"800 Elo",difficulty:"800 Elo"}},Wp=[cl.knight,cl.bishop,cl.pawn],Zy=()=>({pawn:{losingMode:!1,lastEvalCp:0,lastMateThreat:!1},bishop:{losingMode:!1,lastEvalCp:0,lastMateThreat:!1},knight:{losingMode:!1,lastEvalCp:0,lastMateThreat:!1}});function na(t,e){return Math.floor(Math.random()*(e-t+1))+t}function ew(t){const e=t.trim().split(/\s+/),n=e.indexOf("bestmove");if(n===-1||!e[n+1])return null;const r=e[n+1];if(r.length<4)return null;const o=r.slice(0,2),d=r.slice(2,4),f=r[4];return{from:o,to:d,promotion:f||void 0}}function ij(){const{user:t}=$s(),e=T.useRef(new wt),n=T.useRef(e.current.fen()),r=T.useRef(null),o=T.useRef({value:0}),d=T.useRef(null),f=T.useRef({gameId:0,entries:[]}),[g,b]=T.useState(!1),[w,k]=T.useState("w"),[C,N]=T.useState(""),[j,M]=T.useState(""),[$,Q]=T.useState(e.current.fen()),[ae,X]=T.useState(null),[P,W]=T.useState(null),[u,ye]=T.useState("Engine loading..."),[ve,be]=T.useState(!1),[Ye,me]=T.useState("Booting Stockfish..."),[Me,Ce]=T.useState(!1),[$e,ce]=T.useState("w"),[ue,ne]=T.useState([]),V=T.useRef({value:0}),[z,fe]=T.useState([]),oe=T.useRef({value:!1}),[U,Z]=T.useState(new Set),[xe,Be]=T.useState(null),[Ze,Ve]=T.useState(null),[O,ge]=T.useState([]),[Se,Te]=T.useState(!1),[Ke,J]=T.useState(!1),De=$r(t?.boardTheme).colors,{key:qe,pieces:bt}=T.useMemo(()=>Tr(t?.pieceTheme),[t?.pieceTheme]),[Ie,Xe]=T.useState(!1),[nt,Ut]=T.useState(Wp[0].id),Kt=Wp.find(G=>G.id===nt)||Wp[0],dt=T.useRef(nt),Ft=T.useRef(Zy()),[zt,Cn]=T.useState(null),[qn,xt]=T.useState([]);T.useEffect(()=>{dt.current=nt,Ft.current[nt]={losingMode:!1,lastEvalCp:0,lastMateThreat:!1}},[nt]);const vn=G=>{typeof document>"u"||(document.body.style.cursor=G?`url(${rh}) 8 8, grabbing`:"")};T.useEffect(()=>()=>{vn(!1)},[]),T.useEffect(()=>{const G=()=>vn(!1);return window.addEventListener("mouseup",G),window.addEventListener("dragend",G),()=>{window.removeEventListener("mouseup",G),window.removeEventListener("dragend",G)}},[]);const Mn=G=>{if(oe.current.value)return;oe.current.value=!0;const pe=G==="win"?150:G==="loss"?75:112;t&&cv(t.id,pe,{source:`practice_${G}`})},Ls=G=>G?G.color==="w"?bt.w[G.type]:bt.b[G.type]:null,as=G=>{if(!G)return"";if(qe==="chesscom"){if(G.type==="p")return G.color==="w"?"scale-110":"scale-90";if(G.type==="k"&&G.color==="b")return"scale-110 translate-y-[1px]"}return qe==="freestyle"&&G.type==="p"&&G.color==="b"?"scale-110":""},bn=(G,pe)=>{const de="abcdefgh"[$e==="w"?pe:7-pe],Ae=$e==="w"?8-G:G+1;return`${de}${Ae}`},os=T.useMemo(()=>{const pe=new wt($).board();return $e==="w"?pe:pe.slice().reverse().map(de=>de.slice().reverse())},[$,$e]),xs=T.useMemo(()=>ae?new wt($).moves({square:ae,verbose:!0}):[],[$,ae]),Ps=T.useMemo(()=>qn.reduce((G,pe,de)=>(de%2===0?G.push({num:G.length+1,white:pe,black:""}):G[G.length-1].black=pe,G),[]),[qn]),er=G=>{ne(G?[G]:[])},Bn=(G,pe)=>{const de=pe?ta(dt.current,pe):G;if(!de.length)return;const Ae=de[Math.floor(Math.random()*de.length)];er(Ae)},Hn=(G,pe)=>{const de=V.current.value;de>0&&de%5===0&&Bn(G,pe)},ls=(G,pe)=>{const de=bn(G,pe);Z(Ae=>{const tt=new Set(Ae);return tt.has(de)?tt.delete(de):tt.add(de),tt})},Ks=(G,pe)=>{const de=bn(G,pe);Be({row:G,col:pe,square:de}),Ve(null),Te(!1)},$n=(G,pe,de)=>{if(!xe||de!==2)return;const Ae=bn(G,pe);if(xe.square===Ae){Te(!1),Ve(null);return}Te(!0),Ve({row:G,col:pe,square:Ae})},Yn=()=>{xe&&Se&&Ze?(ge(G=>[...G,{start:xe,end:Ze}]),J(!0)):xe&&!Se&&(ls(xe.row,xe.col),J(!0)),Te(!1),Be(null),Ve(null)},kn=(G,pe)=>{const de=new wt(G),Ae={p:1,n:3,b:3,r:5,q:9,k:0};let tt=0;return de.board().forEach(Re=>Re.forEach(Vt=>{if(!Vt)return;const $t=Ae[Vt.type];tt+=Vt.color===pe?$t:-$t})),tt},_s=G=>{const pe=n.current,de=pe?new wt(pe):new wt;if(qn.forEach(Ae=>{try{de.move(Ae,{sloppy:!0})}catch{}}),G&&de.fen()!==G)try{return new wt(G)}catch{return de}return de},ie=G=>G.filter(pe=>pe&&pe.move).map(pe=>({...pe})).sort((pe,de)=>(de?.score??-999999)-(pe?.score??-999999)),lt=G=>{const pe=ie(G.entries),de=pe[0];if(!de)return{move:null,bestScore:0,mateThreat:!1,aboutToLose:!1};const Ae=de.score??0,tt=de.type==="mate"&&de.score<0,Re=tt||Ae<=-500||G.materialBalance<=-5;if(G.botState.losingMode||Re)return{move:de,bestScore:Ae,mateThreat:tt,aboutToLose:Re};const $t=300,Nn=pe.filter((ft,St)=>{if(St===0||ft.type==="mate"&&ft.score<0)return!1;const Tt=(de.score??0)-(ft.score??0);return Tt>=60&&Tt<=$t}),ht=pe.filter((ft,St)=>St>0&&!(ft.type==="mate"&&ft.score<0));let st=Nn.length?Nn[na(0,Nn.length-1)]:null;return!st&&ht.length&&(st=ht[na(0,ht.length-1)]),st?(de.score??0)-(st.score??0)>$t&&(st=pe.find((Tt,Xt)=>Xt>0&&(de.score??0)-(Tt.score??0)<=$t&&!(Tt.type==="mate"&&Tt.score<0))||de):st=de,{move:st,bestScore:Ae,mateThreat:tt,aboutToLose:!1}},Pt=G=>{const pe=ie(G.entries),de=pe[0];if(!de)return{move:null,bestScore:0,mateThreat:!1,aboutToLose:!1};const Ae=de.score??0,tt=de.type==="mate"&&de.score<0,Re=tt||Ae<=-400||G.materialBalance<=-3;if(G.botState.losingMode||Re)return{move:de,bestScore:Ae,mateThreat:tt,aboutToLose:Re};const $t=pe.filter((St,Tt)=>{const Xt=(de.score??0)-(St.score??0);return Tt===0||Xt<=150&&!(St.type==="mate"&&St.score<0)}),Nn=pe.filter((St,Tt)=>{if(Tt===0||St.type==="mate"&&St.score<0)return!1;const Xt=(de.score??0)-(St.score??0);return Xt>150&&Xt<=300});let ht=null;return Math.random()<.75&&$t.length?ht=$t[na(0,$t.length-1)]:Nn.length?ht=Nn[na(0,Nn.length-1)]:$t.length&&(ht=$t[na(0,$t.length-1)]),ht||(ht=de),((de.score??0)-(ht?.score??de.score??0)>350||ht?.type==="mate"&&ht.score<0)&&(ht=$t[0]||de),{move:ht,bestScore:Ae,mateThreat:tt,aboutToLose:!1}},Bt=G=>{const pe=ie(G.entries),de=pe[0];if(!de)return{move:null,bestScore:0,mateThreat:!1,aboutToLose:!1};const Ae=de.score??0,tt=de.type==="mate"&&de.score<0,Re=tt&&Ae<0,Vt=pe.find((ht,st)=>st>0&&!(ht.type==="mate"&&ht.score<0)),$t=[de];return Vt&&(de.score??0)-(Vt.score??de.score??0)<=35&&$t.push(Vt),{move:$t[na(0,$t.length-1)],bestScore:Ae,mateThreat:tt,aboutToLose:Re}},Gt=(G,pe)=>G==="pawn"?lt(pe):G==="bishop"?Pt(pe):Bt(pe),H=(G,pe)=>{const de=pe.includes(" w ")?"b":"w",Ae=kn(pe,de),tt=Ft.current[G];return G==="pawn"?tt.losingMode||tt.lastMateThreat||tt.lastEvalCp<=-500||Ae<=-5?22:na(4,6):G==="bishop"?tt.losingMode||tt.lastMateThreat||tt.lastEvalCp<=-400||Ae<=-3?22:na(10,14):na(18,22)};T.useEffect(()=>{if(typeof Worker>"u"){me("Workers are not supported in this browser."),ye("Engine unavailable in this browser.");return}const pe=[typeof SharedArrayBuffer=="function"&&crossOriginIsolated?"/stockfish/stockfish.js":null,"/stockfish/stockfish-lite-single.js","/stockfish/stockfish-asm.js"].filter(Boolean),de=ht=>new Worker(ht);let Ae=null;const tt=()=>{Ae&&(window.clearTimeout(Ae),Ae=null),Ae=window.setTimeout(()=>{me(ht=>`${ht} (no response yet, trying fallback...)`),$t()},4e3)},Re=de(pe[0]);me(`Loading engine from ${pe[0]}...`),r.current=Re;let Vt=0;const $t=()=>{const ht=Vt+1;if(ht>=pe.length){me("Engine failed to load."),ye("Engine unavailable. Check console for details."),be(!1);return}r.current?.terminate(),Vt=ht;const st=pe[ht];me(`Retrying with fallback engine (${st}).`);const ft=de(st);r.current=ft,ft.onmessage=Re.onmessage,ft.onerror=Re.onerror,ft.postMessage("uci"),ft.postMessage("isready"),tt()},Nn=ht=>{const st=typeof ht.data=="string"?ht.data:typeof ht.data?.data=="string"?ht.data.data:"";if(st){if(st.includes(" multipv ")){const ft=d.current,St=st.match(/multipv\s+(\d+).*?score\s+(cp|mate)\s+(-?\d+).*?\spv\s+([a-h][1-8][a-h][1-8][qrbn]?)/i);if(ft&&St){const Tt=Math.max(1,parseInt(St[1],10))-1,Xt=St[3],qt=St[4],tr=Math.random()*5*(Math.random()<.5?-1:1),Sn=parseInt(Xt,10)+tr,rn=St[2]==="mate"?"mate":"cp",cs=rn==="mate"?Sn>=0?1e5-Math.abs(Sn):-1e5+Math.abs(Sn):Sn,en=[...f.current.gameId===ft.gameId?f.current.entries:[]];en[Tt]={move:qt,score:cs,type:rn},f.current={gameId:ft.gameId,entries:en}}}if(st==="uciok"){me("Engine online. Initialising..."),tt();return}if(st==="readyok"){be(!0),me("Stockfish ready. Start a game to play."),ye("Ready to play."),Ae&&(window.clearTimeout(Ae),Ae=null);return}if(st.startsWith("bestmove")){Ce(!1),me("Bot moved.");const ft=d.current;if(!ft||ft.gameId!==o.current.value)return;const St=f.current;let Tt=null;if(St.gameId===ft.gameId&&St.entries.length){const En=dt.current,en=ft.fen.includes(" w ")?"b":"w",Es=kn(ft.fen,en),Jt=Gt(En,{entries:St.entries,moveNumber:V.current.value+1,materialBalance:Es,botState:Ft.current[En]});Jt.move&&(Tt=ew(`bestmove ${Jt.move.move}`));const un=Ft.current[En],q=En==="pawn"&&un.losingMode&&!Jt.aboutToLose&&Jt.bestScore>-300&&!Jt.mateThreat&&Es>-4,re=En==="bishop"&&un.losingMode&&!Jt.aboutToLose&&Jt.bestScore>-200&&!Jt.mateThreat&&Es>-2,se=En==="pawn"?Jt.aboutToLose?!0:q?!1:un.losingMode:En==="bishop"?Jt.aboutToLose?!0:re?!1:un.losingMode:!1;Ft.current[En]={losingMode:se,lastEvalCp:Jt.bestScore,lastMateThreat:Jt.mateThreat}}if(Tt||(Tt=ew(st)),!Tt){ye("Bot could not find a move.");return}let Xt=_s(ft.fen);const qt=ft.fen.includes(" w ")?"b":"w",tr=kn(ft.fen,qt);let Sn=null;try{Sn=Xt.move({from:Tt.from,to:Tt.to,promotion:Tt.promotion||"q"})}catch{Sn=null}if(!Sn)try{Xt=new wt(ft.fen),Sn=Xt.move({from:Tt.from,to:Tt.to,promotion:Tt.promotion||"q"})}catch{Sn=null}if(!Sn){ye("Bot produced an invalid move.");return}e.current=Xt,Q(Xt.fen()),X(null),W(null),fe([Tt.from,Tt.to]),Sn?.san&&xt(En=>[...En,Sn.san]);const rn=kn(Xt.fen(),qt),cs=rn-tr;V.current.value+=1,V.current.value===1&&Bn([],"opening"),Xt.isCheckmate()?(Bn(ta(dt.current,"win"),"win"),Mn("loss")):Xt.isDraw()?(Mn("draw"),ye("Draw. Your move.")):(Xt.isCheck()?Hn(ta(dt.current,"attack"),"attack"):cs<=-1?Hn(ta(dt.current,"sacrifice"),"sacrifice"):cs>=1?Hn(ta(dt.current,"attack"),"attack"):Xt.board().flat().filter(Boolean).length<=10&&rn>1?Hn(ta(dt.current,"endgame"),"endgame"):Hn(ta(dt.current,"neutral"),"neutral"),ye(Xt.isCheck()?"Your move (check).":"Your move.")),d.current=null}}};return Re.onmessage=Nn,Re.onerror=ht=>{console.error("Stockfish worker error",ht);const st=pe[Vt];me(`Engine failed to load from ${st}. If on localhost, keep the Vite dev server running so the file is served.`),ye("Engine unavailable. Trying fallback..."),be(!1),$t()},Re.postMessage("uci"),Re.postMessage("isready"),tt(),()=>{Ae&&window.clearTimeout(Ae),Re.terminate()}},[]);const sn=G=>{try{const pe=G.trim().split(/\s+/),de=parseInt(pe[5],10);return Number.isFinite(de)?de:1}catch{return 1}},jt=G=>{if(!r.current||!ve){ye("Engine is not ready yet.");return}const pe=cl[dt.current]||cl.knight,de=sn(G);d.current={fen:G,gameId:o.current.value,fullmove:de},f.current={gameId:o.current.value,entries:[]},Ce(!0),me(`Thinking (${pe.label})...`),r.current.postMessage("stop"),r.current.postMessage(`setoption name Skill Level value ${pe.skill}`),r.current.postMessage("setoption name MultiPV value 5"),r.current.postMessage(`position fen ${G}`);const Ae=H(dt.current,G);r.current.postMessage(`go depth ${Ae}`)},Yt=()=>{try{const G=e.current.pgn(),pe=new Blob([G],{type:"application/x-chess-pgn"}),de=URL.createObjectURL(pe),Ae=document.createElement("a");Ae.href=de,Ae.download=`practice-${Date.now()}.pgn`,document.body.appendChild(Ae),Ae.click(),document.body.removeChild(Ae),setTimeout(()=>URL.revokeObjectURL(de),2e3)}catch(G){console.warn("Failed to download PGN",G),ye("Could not download PGN right now.")}},je=()=>{if(!ve){ye("Engine still loading. Please wait a moment.");return}M(""),o.current.value+=1,V.current.value=0,Ft.current=Zy();let G="";const pe=C.trim();if(pe)try{G=new wt(pe).fen()}catch{M("Invalid FEN. Please check the format.");return}const de=G?new wt(G):new wt;n.current=de.fen(),e.current=de,Q(de.fen()),X(null),W(null),fe([]),xt([]),Cn(null),oe.current.value=!1,ce(w),Ce(!1),ye(w==="b"?"Bot thinking...":"Your move."),b(!1),d.current=null,r.current?.postMessage("ucinewgame");const Ae=cl[dt.current]||cl.knight;r.current?.postMessage(`setoption name Skill Level value ${Ae.skill}`),r.current?.postMessage(`setoption name Skill Level Probability value ${Math.min(100,Ae.skill*5)}`),Bn(ta(dt.current,"opening"),"opening"),w==="b"&&window.setTimeout(()=>jt(de.fen()),250)},Dn=(G,pe)=>{Be(null),Ve(null),ge([]),Z(new Set);const de=bn(G,pe),Ae=new wt($);if(Ae.turn()!==w)return;if(ae===de){X(null);return}const tt=Ae.get(de);if(ae){Ct(ae,de);return}tt&&tt.color===Ae.turn()&&X(de)},Ct=(G,pe,de)=>{const Ae=_s($);if(Ae.turn()!==w)return;if(kn($,w),G===pe){X(null),W(null);return}let tt=null;try{const Vt=Ae.moves({square:G,verbose:!0}).find(ht=>ht.to===pe);if(Vt?.flags?.includes("p")&&!de){Cn({from:G,to:pe}),ye("Choose promotion piece."),X(null),W(null);return}const Nn=de||Vt?.promotion||"q";tt=Ae.move({from:G,to:pe,promotion:Nn})}catch{tt=null}if(!tt){X(null);return}if(e.current=Ae,Q(Ae.fen()),X(null),fe([G,pe]),Cn(null),tt?.san&&xt(Re=>[...Re,tt.san]),kn(Ae.fen(),w),ye(Ae.isCheckmate()?"You delivered mate!":Ae.isCheck()?"Bot in check. Bot thinking...":"Bot thinking..."),Ae.isGameOver()){Ae.isCheckmate()?(Bn(ta(dt.current,"defeat"),"defeat"),Mn("win")):Ae.isDraw()&&Mn("draw");return}jt(Ae.fen())};return T.useEffect(()=>{const G=new wt($);G.isGameOver()&&(G.isCheckmate()?ye(G.turn()===w?"You are checkmated.":"You delivered checkmate!"):ye("Game over."))},[$,w]),l.jsxs(Js,{children:[l.jsxs("div",{className:"flex flex-col gap-4 text-white",children:[l.jsx("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-2",children:l.jsx("div",{children:l.jsx("div",{className:"text-xl font-bold flex items-center gap-2",children:l.jsx("span",{className:"sr-only",children:"Practice"})})})}),l.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-[minmax(360px,1fr)_320px] gap-4 items-start",children:[l.jsx("div",{className:"relative",children:l.jsxs("div",{className:"relative block pl-6 sm:pl-8 pb-6 sm:pb-8 w-full max-w-[720px] mx-auto",children:[l.jsx("div",{className:"rounded-[28px] overflow-hidden border border-white/10 shadow-[0_20px_60px_rgba(0,0,0,0.45)] w-full",style:{backgroundColor:De.dark},children:l.jsxs("div",{className:"relative grid grid-cols-8 grid-rows-8 w-full max-w-[720px] aspect-square mx-auto",children:[os.map((G,pe)=>G.map((de,Ae)=>{const tt=bn(pe,Ae),Re=(pe+Ae)%2===0,Vt=ae===tt,$t=xs.some(st=>st.to===tt),Nn=z.includes(tt),ht=U.has(tt);return l.jsxs("button",{onClick:()=>Dn(pe,Ae),draggable:!!de,onDragStart:st=>{const ft=new wt($),St=bn(pe,Ae),Tt=ft.get(St);Tt&&Tt.color===ft.turn()&&ft.turn()===w?(W(St),st.dataTransfer?.setData("text/plain",St)):st.preventDefault()},onDragOver:st=>{P&&st.preventDefault()},onDrop:st=>{st.preventDefault();const ft=P||st.dataTransfer?.getData("text/plain"),St=bn(pe,Ae);ft&&Ct(ft,St),W(null),vn(!1)},onDragEnd:()=>{W(null),vn(!1)},onContextMenu:st=>{if(st.preventDefault(),Ke){J(!1);return}!xe&&!Se&&ls(pe,Ae)},onMouseDown:st=>{st.button===2?(st.preventDefault(),vn(!0),Ks(pe,Ae)):st.button===0&&de&&vn(!0)},onMouseEnter:st=>$n(pe,Ae,st.buttons),onMouseMove:st=>$n(pe,Ae,st.buttons),onMouseUp:st=>{st.button===2&&(st.preventDefault(),Yn(),vn(!1))},className:`w-full h-full flex items-center justify-center text-2xl font-semibold relative overflow-hidden ${Vt?"ring-2 ring-pink-400":""} ${de?"cursor-piece":"cursor-auto"}`,style:{backgroundColor:ht?"#ef4444":Re?De.light:De.dark,...de?{"--cursor-open":`url(${fv}) 8 8, grab`,"--cursor-closed":`url(${rh}) 8 8, grabbing`}:{}},children:[Nn&&!ht&&l.jsx("div",{className:"absolute inset-0 bg-yellow-400/50 pointer-events-none z-0"}),$t&&l.jsx("div",{className:"absolute inset-0 z-20 pointer-events-none flex items-center justify-center",children:l.jsx("div",{className:"h-3 w-3 rounded-full bg-pink-400/80"})}),de?l.jsx("img",{src:Ls(de)||"",alt:"",className:`relative z-10 w-full h-full object-contain p-1 ${as(de)}`}):null]},`${pe}-${Ae}`)})),xe&&Ze&&l.jsxs("svg",{className:"absolute inset-0 pointer-events-none",viewBox:"0 0 100 100",children:[l.jsx("defs",{children:l.jsx("marker",{id:"arrowhead-practice-current",markerWidth:"4",markerHeight:"4",refX:"2",refY:"2",orient:"auto",children:l.jsx("path",{d:"M0,0 L0,4 L4,2 z",fill:"rgba(234,179,8,0.8)"})})}),(()=>{const G=(Ae,tt)=>({x:(tt+.5)/8*100,y:(Ae+.5)/8*100}),pe=G(xe.row,xe.col),de=G(Ze.row,Ze.col);return l.jsx("line",{x1:pe.x,y1:pe.y,x2:de.x,y2:de.y,stroke:"rgba(234,179,8,0.8)",strokeWidth:"1",markerEnd:"url(#arrowhead-practice-current)"})})()]}),O.map((G,pe)=>l.jsxs("svg",{className:"absolute inset-0 pointer-events-none",viewBox:"0 0 100 100",children:[l.jsx("defs",{children:l.jsx("marker",{id:`arrowhead-practice-${pe}`,markerWidth:"4",markerHeight:"4",refX:"2",refY:"2",orient:"auto",children:l.jsx("path",{d:"M0,0 L0,4 L4,2 z",fill:"rgba(234,179,8,0.8)"})})}),(()=>{const de=(Re,Vt)=>({x:(Vt+.5)/8*100,y:(Re+.5)/8*100}),Ae=de(G.start.row,G.start.col),tt=de(G.end.row,G.end.col);return l.jsx("line",{x1:Ae.x,y1:Ae.y,x2:tt.x,y2:tt.y,stroke:"rgba(234,179,8,0.8)",strokeWidth:"1",markerEnd:`url(#arrowhead-practice-${pe})`})})()]},`arrow-${pe}`))]})}),l.jsx("div",{className:"pointer-events-none absolute left-0 top-0 bottom-6 grid grid-rows-8 text-xs font-semibold text-white/80",children:($e==="w"?Array.from({length:8},(G,pe)=>8-pe):Array.from({length:8},(G,pe)=>pe+1)).map(G=>l.jsx("span",{className:"flex items-center justify-end pr-2",children:G},`rank-${G}`))}),l.jsx("div",{className:"pointer-events-none absolute left-6 right-0 bottom-0 grid grid-cols-8 text-xs font-semibold text-white/80",children:($e==="w"?"abcdefgh".split(""):"hgfedcba".split("")).map(G=>l.jsx("span",{className:"text-center pt-1",children:G},`file-${G}`))})]})}),l.jsxs("div",{className:"flex flex-col gap-4",children:[l.jsxs("div",{className:"rounded-2xl bg-black border border-white/10 text-white p-4 shadow-xl space-y-3",children:[l.jsxs("div",{className:"w-full flex flex-col items-center gap-3",children:[l.jsx("div",{className:"w-24 h-24 rounded-2xl overflow-hidden border border-white/10 bg-white/5 shadow-lg",children:l.jsx("img",{src:Kt.avatar,alt:"Bot avatar",className:"w-full h-full object-cover"})}),l.jsx("div",{className:"text-sm text-white/70",children:Kt.name})]}),l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx("div",{className:"font-semibold",children:"Session"}),l.jsx("div",{className:"flex items-center gap-2 text-xs text-white/70",children:l.jsxs("span",{className:"flex items-center gap-1",children:[l.jsx(k4,{className:"h-4 w-4"}),w==="w"?"White":"Black"]})})]}),l.jsxs("div",{className:"rounded-xl bg-white/5 border border-white/10 p-3 text-sm text-white/80 min-h-[64px]",children:[l.jsx("div",{className:"font-semibold text-white",children:u}),ue.length?l.jsx("div",{className:"mt-2 space-y-1",children:ue.map((G,pe)=>l.jsx("div",{className:"leading-relaxed text-white/80",children:G},`${G}-${pe}`))}):l.jsx("div",{className:"mt-1 text-white/60",children:"Awaiting moves..."})]}),l.jsxs("div",{className:"flex gap-2",children:[l.jsx(Oe,{variant:"ghost",className:"w-full",onClick:()=>Xe(!0),children:"Choose Bot"}),l.jsx(Oe,{variant:"outline",className:"w-full",onClick:()=>b(!0),children:"New Game"})]})]}),l.jsxs("div",{className:"rounded-2xl bg-black border border-white/10 p-4 shadow-xl space-y-3",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx("div",{className:"font-semibold",children:"Moves"}),l.jsxs(Oe,{variant:"ghost",size:"sm",onClick:Yt,className:"gap-2",children:[l.jsx(Fw,{className:"h-4 w-4"}),"PGN"]})]}),l.jsx("div",{className:"rounded-xl border border-white/10 bg-black p-3 max-h-60 overflow-y-auto text-sm text-white/80",children:Ps.length===0?l.jsx("div",{className:"text-white/60 text-sm",children:"No moves yet."}):l.jsx("div",{className:"space-y-1",children:Ps.map(G=>l.jsxs("div",{className:"flex gap-2",children:[l.jsxs("span",{className:"text-white/60 w-8 shrink-0",children:[G.num,"."]}),l.jsx("span",{className:"w-20",children:G.white}),l.jsx("span",{className:"w-20",children:G.black})]},G.num))})})]})]})]})]}),Ie&&l.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 px-4",children:l.jsxs("div",{className:"w-full max-w-md rounded-2xl bg-slate-900 text-white border border-white/10 shadow-2xl",children:[l.jsxs("div",{className:"flex items-center justify-between px-5 py-4 border-b border-white/10",children:[l.jsxs("div",{children:[l.jsx("div",{className:"text-lg font-semibold",children:"Choose Bot"}),l.jsx("div",{className:"text-xs text-white/60",children:"Pick who you want to spar with."})]}),l.jsx("button",{className:"p-2 rounded-full hover:bg-white/10 text-white/70",onClick:()=>Xe(!1),"aria-label":"Close",children:l.jsx(vr,{className:"h-4 w-4"})})]}),l.jsx("div",{className:"p-5 space-y-3",children:Wp.map(G=>l.jsxs("button",{onClick:()=>{Ut(G.id),Xe(!1)},className:`w-full flex items-center gap-3 rounded-xl border px-3 py-3 text-left ${G.id===nt?"border-pink-400 bg-white/10":"border-white/10 bg-white/5 hover:bg-white/10"}`,children:[l.jsx("div",{className:"h-12 w-12 rounded-lg overflow-hidden border border-white/10 bg-white/5",children:l.jsx("img",{src:G.avatar,alt:G.name,className:"h-full w-full object-cover"})}),l.jsxs("div",{children:[l.jsx("div",{className:"font-semibold text-white",children:G.name}),l.jsx("div",{className:"text-xs text-white/60",children:G.difficulty||G.label})]})]},G.id))})]})}),g&&l.jsx("div",{className:"fixed inset-0 z-40 flex items-center justify-center bg-black/70 px-4",children:l.jsxs("div",{className:"w-full max-w-md rounded-2xl bg-slate-900 text-white border border-white/10 shadow-2xl",children:[l.jsxs("div",{className:"flex items-center justify-between px-5 py-4 border-b border-white/10",children:[l.jsxs("div",{children:[l.jsx("div",{className:"text-lg font-semibold",children:"Start Practice Game"}),l.jsx("div",{className:"text-xs text-white/60",children:"Pick your color and bot level."})]}),l.jsx("button",{className:"p-2 rounded-full hover:bg-white/10 text-white/70",onClick:()=>b(!1),"aria-label":"Close",children:l.jsx(vr,{className:"h-4 w-4"})})]}),l.jsxs("div",{className:"p-5 space-y-4",children:[l.jsxs("div",{className:"space-y-2",children:[l.jsx("div",{className:"text-sm text-white/80",children:"Your color"}),l.jsx("div",{className:"flex gap-2",children:["w","b"].map(G=>l.jsx("button",{onClick:()=>k(G),className:`flex-1 rounded-xl border px-3 py-3 text-sm ${w===G?"border-pink-400 bg-white/10":"border-white/10 bg-white/5"}`,children:G==="w"?"White":"Black"},G))})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx("div",{className:"text-sm text-white/80",children:"Custom starting position (FEN)"}),l.jsx("textarea",{value:C,onChange:G=>N(G.target.value),placeholder:"Optional: paste FEN to start from a specific position",className:"w-full rounded-xl border border-white/10 bg-white/5 px-3 py-2 text-sm text-white placeholder:text-white/40 focus:outline-none focus:ring-2 focus:ring-pink-400",rows:2}),j&&l.jsx("div",{className:"text-xs text-amber-300",children:j})]}),l.jsxs("div",{className:"flex items-center justify-end gap-2 pt-2",children:[l.jsx(Oe,{variant:"outline",onClick:()=>b(!1),children:"Cancel"}),l.jsx(Oe,{onClick:je,disabled:!ve,children:ve?"Start":"Engine loading..."})]})]})]})}),zt&&l.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 px-4",children:l.jsxs("div",{className:"w-full max-w-sm rounded-2xl bg-slate-900 text-white border border-white/10 shadow-2xl",children:[l.jsxs("div",{className:"flex items-center justify-between px-5 py-4 border-b border-white/10",children:[l.jsxs("div",{children:[l.jsx("div",{className:"text-lg font-semibold",children:"Choose promotion"}),l.jsx("div",{className:"text-xs text-white/60",children:"Select the piece to promote your pawn."})]}),l.jsx("button",{className:"p-2 rounded-full hover:bg-white/10 text-white/70",onClick:()=>Cn(null),"aria-label":"Close",children:l.jsx(vr,{className:"h-4 w-4"})})]}),l.jsxs("div",{className:"p-5 grid grid-cols-2 gap-3",children:[["q","r","b","n"].map(G=>l.jsxs(Oe,{variant:"outline",className:"w-full",onClick:()=>{zt&&Ct(zt.from,zt.to,G)},children:["Promote to ",G==="q"?"Queen":G==="r"?"Rook":G==="b"?"Bishop":"Knight"]},G)),l.jsx(Oe,{variant:"ghost",className:"w-full col-span-2",onClick:()=>Cn(null),children:"Cancel"})]})]})})]})}function aj(){return l.jsx("div",{className:"min-h-screen bg-slate-950 text-white flex items-center justify-center",children:l.jsxs("div",{className:"text-center space-y-2",children:[l.jsx("div",{className:"text-3xl font-semibold",children:"404"}),l.jsx("p",{className:"text-white/70",children:"Page not found"})]})})}var Md={exports:{}},oj=Md.exports,tw;function lj(){return tw||(tw=1,(function(t,e){(function(n,r){r(e)})(oj,(function(n){var r=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof rb<"u"?rb:typeof self<"u"?self:{};function o(M){return M&&M.__esModule&&Object.prototype.hasOwnProperty.call(M,"default")?M.default:M}var d={exports:{}};(function(M){(function($,Q){M.exports&&(M.exports=Q())})(r,function(){function $(P,W){function u(){this.constructor=P}u.prototype=W.prototype,P.prototype=new u}function Q(P,W,u,ye){var ve=Error.call(this,P);return Object.setPrototypeOf&&Object.setPrototypeOf(ve,Q.prototype),ve.expected=W,ve.found=u,ve.location=ye,ve.name="SyntaxError",ve}$(Q,Error);function ae(P,W,u){return u=u||" ",P.length>W?P:(W-=P.length,u+=u.repeat(W),P+u.slice(0,W))}Q.prototype.format=function(P){var W="Error: "+this.message;if(this.location){var u=null,ye;for(ye=0;ye<P.length;ye++)if(P[ye].source===this.location.source){u=P[ye].text.split(/\r\n|\n|\r/g);break}var ve=this.location.start,be=this.location.source&&typeof this.location.source.offset=="function"?this.location.source.offset(ve):ve,Ye=this.location.source+":"+be.line+":"+be.column;if(u){var me=this.location.end,Me=ae("",be.line.toString().length," "),Ce=u[ve.line-1],$e=ve.line===me.line?me.column:Ce.length+1,ce=$e-ve.column||1;W+=`
 --> `+Ye+`
`+Me+` |
`+be.line+" | "+Ce+`
`+Me+" | "+ae("",ve.column-1," ")+ae("",ce,"^")}else W+=`
 at `+Ye}return W},Q.buildMessage=function(P,W){var u={literal:function(Ce){return'"'+ve(Ce.text)+'"'},class:function(Ce){var $e=Ce.parts.map(function(ce){return Array.isArray(ce)?be(ce[0])+"-"+be(ce[1]):be(ce)});return"["+(Ce.inverted?"^":"")+$e.join("")+"]"},any:function(){return"any character"},end:function(){return"end of input"},other:function(Ce){return Ce.description}};function ye(Ce){return Ce.charCodeAt(0).toString(16).toUpperCase()}function ve(Ce){return Ce.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function($e){return"\\x0"+ye($e)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function($e){return"\\x"+ye($e)})}function be(Ce){return Ce.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function($e){return"\\x0"+ye($e)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function($e){return"\\x"+ye($e)})}function Ye(Ce){return u[Ce.type](Ce)}function me(Ce){var $e=Ce.map(Ye),ce,ue;if($e.sort(),$e.length>0){for(ce=1,ue=1;ce<$e.length;ce++)$e[ce-1]!==$e[ce]&&($e[ue]=$e[ce],ue++);$e.length=ue}switch($e.length){case 1:return $e[0];case 2:return $e[0]+" or "+$e[1];default:return $e.slice(0,-1).join(", ")+", or "+$e[$e.length-1]}}function Me(Ce){return Ce?'"'+ve(Ce)+'"':"end of input"}return"Expected "+me(P)+" but "+Me(W)+" found."};function X(P,W){W=W!==void 0?W:{};var u={},ye=W.grammarSource,ve={pgn:Pd,tags:mv,game:Op,games:M_},be=Pd,Ye="\uFEFF",me="Event",Me="event",Ce="Site",$e="site",ce="Date",ue="date",ne="Round",V="round",z="White",fe="white",oe="Black",U="black",Z="Result",xe="result",Be="WhiteTitle",Ze="Whitetitle",Ve="whitetitle",O="whiteTitle",ge="BlackTitle",Se="Blacktitle",Te="blacktitle",Ke="blackTitle",J="WhiteELO",De="WhiteElo",qe="Whiteelo",bt="whiteelo",Ie="whiteElo",Xe="BlackELO",nt="BlackElo",Ut="Blackelo",Kt="blackelo",dt="blackElo",Ft="WhiteUSCF",zt="WhiteUscf",Cn="Whiteuscf",qn="whiteuscf",xt="whiteUscf",vn="BlackUSCF",Mn="BlackUscf",Ls="Blackuscf",as="blackuscf",bn="blackUscf",os="WhiteNA",xs="WhiteNa",Ps="Whitena",er="whitena",Bn="whiteNa",Hn="whiteNA",ls="BlackNA",Ks="BlackNa",$n="Blackna",Yn="blackna",kn="blackNA",_s="blackNa",ie="WhiteType",lt="Whitetype",Pt="whitetype",Bt="whiteType",Gt="BlackType",H="Blacktype",sn="blacktype",jt="blackType",Yt="EventDate",je="Eventdate",Dn="eventdate",Ct="eventDate",G="EventSponsor",pe="Eventsponsor",de="eventsponsor",Ae="eventSponsor",tt="Section",Re="section",Vt="Stage",$t="stage",Nn="Board",ht="board",st="Opening",ft="opening",St="Variation",Tt="variation",Xt="SubVariation",qt="Subvariation",tr="subvariation",Sn="subVariation",rn="ECO",cs="Eco",En="eco",en="NIC",Es="Nic",Jt="nic",un="Time",q="time",re="UTCTime",se="UTCtime",et="UtcTime",Je="Utctime",kt="utctime",us="utcTime",nr="UTCDate",kl="UTCdate",Nl="UtcDate",ga="Utcdate",wo="utcdate",ma="utcDate",qr="TimeControl",Cl="Timecontrol",va="timecontrol",Qt="timeControl",ba="SetUp",xo="Setup",ya="setup",oi="setUp",dn="FEN",li="Fen",Ln="fen",Bi="Termination",wr="termination",sr="Annotator",js="annotator",Qr="Mode",zr="mode",xr="PlyCount",Po="Plycount",_o="plycount",Gr="plyCount",Sl="Variant",ko="variant",$i="WhiteRatingDiff",No="BlackRatingDiff",Co="WhiteFideId",ci="BlackFideId",Vr="WhiteTeam",jr="BlackTeam",ui="Clock",Rl="WhiteClock",So="BlackClock",rr='"',di="\\",hi=".",Ir=":",ir="/",wa="B",I="W",K="N",ee="?",le="-",Le="+",rt="*",hn="1-0",Is="0-1",jn="1/2-1/2",pt="=",tn="%csl",an="%cal",fn="%",Et="%eval",yn="[%",Li="}",Ki=",",mm="Y",Xc="G",vm="R",bm="O",ym="C",wm="{",xm="[",wh="]",Pm=";",xh="clk",Ph="egt",_h="emt",Tl="mct",_m="(",km=")",kh=" ",Nh="e.p.",Ch="O-O-O",Sh="O-O",Nm="@",Rh="Z0",El="+-",Th="$$$",Cm="#",Jc="$",xa="!!",Eh="??",Zc="!?",eu="?!",jh="!",Ih="",Ah="",Pa="",Sm="",Rm="",Tm="",Mh="",Dh="",Ro="",To="",Oh="-+",jl="",Em="",Uh="",tu="",nu="",Bh="D",su="x",Fi=/^[ \t\n\r]/,$h=/^[\n\r]/,Lh=/^[\-a-zA-Z0-9_.]/,jm=/^[^"\\\r\n]/,fi=/^[0-9?]/,Fs=/^[0-9]/,ar=/^[^\n\r]/,Eo=/^[RNBQKP]/,Kh=/^[RNBQ]/,Fh=/^[a-h]/,qh=/^[1-8]/,Qh=B("\uFEFF",!1),ru=B("Event",!1),Im=B("event",!1),Am=B("Site",!1),_a=B("site",!1),iu=B("Date",!1),jo=B("date",!1),au=B("Round",!1),zh=B("round",!1),Il=B("White",!1),ka=B("white",!1),ou=B("Black",!1),Gh=B("black",!1),Al=B("Result",!1),Vh=B("result",!1),Wh=B("WhiteTitle",!1),Hh=B("Whitetitle",!1),Yh=B("whitetitle",!1),Xh=B("whiteTitle",!1),Jh=B("BlackTitle",!1),pi=B("Blacktitle",!1),lu=B("blacktitle",!1),cu=B("blackTitle",!1),Mm=B("WhiteELO",!1),Dm=B("WhiteElo",!1),Io=B("Whiteelo",!1),Om=B("whiteelo",!1),Zh=B("whiteElo",!1),ef=B("BlackELO",!1),pn=B("BlackElo",!1),uu=B("Blackelo",!1),Ml=B("blackelo",!1),Ao=B("blackElo",!1),tf=B("WhiteUSCF",!1),du=B("WhiteUscf",!1),Mo=B("Whiteuscf",!1),Dl=B("whiteuscf",!1),Na=B("whiteUscf",!1),nf=B("BlackUSCF",!1),Um=B("BlackUscf",!1),Bm=B("Blackuscf",!1),sf=B("blackuscf",!1),Ol=B("blackUscf",!1),Ul=B("WhiteNA",!1),hu=B("WhiteNa",!1),fu=B("Whitena",!1),pu=B("whitena",!1),gu=B("whiteNa",!1),$m=B("whiteNA",!1),rf=B("BlackNA",!1),Lm=B("BlackNa",!1),Km=B("Blackna",!1),mu=B("blackna",!1),gi=B("blackNA",!1),af=B("blackNa",!1),Ca=B("WhiteType",!1),Ar=B("Whitetype",!1),Do=B("whitetype",!1),Wr=B("whiteType",!1),vu=B("BlackType",!1),Fm=B("Blacktype",!1),qm=B("blacktype",!1),qi=B("blackType",!1),Oo=B("EventDate",!1),Sa=B("Eventdate",!1),Bl=B("eventdate",!1),bu=B("eventDate",!1),Ra=B("EventSponsor",!1),mi=B("Eventsponsor",!1),gn=B("eventsponsor",!1),on=B("eventSponsor",!1),vi=B("Section",!1),ds=B("section",!1),As=B("Stage",!1),Qi=B("stage",!1),Ta=B("Board",!1),Ms=B("board",!1),$l=B("Opening",!1),of=B("opening",!1),lf=B("Variation",!1),Ll=B("variation",!1),cf=B("SubVariation",!1),Hr=B("Subvariation",!1),Kl=B("subvariation",!1),yu=B("subVariation",!1),uf=B("ECO",!1),Qm=B("Eco",!1),bi=B("eco",!1),Ea=B("NIC",!1),ja=B("Nic",!1),Fl=B("nic",!1),ql=B("Time",!1),or=B("time",!1),lr=B("UTCTime",!1),zi=B("UTCtime",!1),Yr=B("UtcTime",!1),Xr=B("Utctime",!1),Gi=B("utctime",!1),df=B("utcTime",!1),wu=B("UTCDate",!1),xu=B("UTCdate",!1),qs=B("UtcDate",!1),Qs=B("Utcdate",!1),wn=B("utcdate",!1),Pr=B("utcDate",!1),hf=B("TimeControl",!1),ff=B("Timecontrol",!1),Pu=B("timecontrol",!1),_u=B("timeControl",!1),pf=B("SetUp",!1),Ql=B("Setup",!1),gf=B("setup",!1),Ia=B("setUp",!1),ku=B("FEN",!1),zm=B("Fen",!1),Uo=B("fen",!1),zl=B("Termination",!1),mf=B("termination",!1),vf=B("Annotator",!1),Aa=B("annotator",!1),bf=B("Mode",!1),Gl=B("mode",!1),Vl=B("PlyCount",!1),Ma=B("Plycount",!1),Nu=B("plycount",!1),Cu=B("plyCount",!1),Su=B("Variant",!1),Ru=B("variant",!1),Da=B("WhiteRatingDiff",!1),cr=B("BlackRatingDiff",!1),Vi=B("WhiteFideId",!1),Tu=B("BlackFideId",!1),yf=B("WhiteTeam",!1),Jr=B("BlackTeam",!1),yi=B("Clock",!1),Eu=B("WhiteClock",!1),wf=B("BlackClock",!1),Mr=pv("whitespace"),zs=Nt([" ","	",`
`,"\r"],!1,!1),Bo=Nt([`
`,"\r"],!1,!1),ju=Nt(["-",["a","z"],["A","Z"],["0","9"],"_","."],!1,!1),Wi=B('"',!1),xf=Nt(['"',"\\","\r",`
`],!0,!1),Oa=B("\\",!1),Xn=Nt([["0","9"],"?"],!1,!1),wi=B(".",!1),Jn=Nt([["0","9"]],!1,!1),ur=B(":",!1),$o=B("/",!1),Hi=B("B",!1),Pf=B("W",!1),Iu=B("N",!1),xn=B("?",!1),Ua=B("-",!1),Lo=B("+",!1),Wl=B("*",!1),Hl=B("1-0",!1),Au=B("0-1",!1),Yi=B("1/2-1/2",!1),mn=B("=",!1),Kn=B("%csl",!1),Qn=B("%cal",!1),Ba=B("%",!1),Ko=B("%eval",!1),Fo=B("[%",!1),_f=B("}",!1),Zn=Ti(),Yl=Nt([`
`,"\r"],!0,!1),$a=B(",",!1),Mu=B("Y",!1),Dr=B("G",!1),dr=B("R",!1),qo=B("O",!1),Du=B("C",!1),Ou=B("{",!1),kf=B("[",!1),Nf=B("]",!1),Cf=B(";",!1),Sf=B("clk",!1),Rf=B("egt",!1),Tf=B("emt",!1),Ef=B("mct",!1),jf=B("(",!1),Qo=B(")",!1),If=pv("integer"),zo=B(" ",!1),Xl=B("e.p.",!1),Af=B("O-O-O",!1),Uu=B("O-O",!1),Mf=B("@",!1),Df=B("Z0",!1),Bu=B("+-",!1),Of=B("$$$",!1),$u=B("#",!1),Uf=B("$",!1),Bf=B("!!",!1),$f=B("??",!1),Gm=B("!?",!1),Lf=B("?!",!1),Vm=B("!",!1),Wm=B("",!1),Kf=B("",!1),Ff=B("",!1),qf=B("",!1),Jl=B("",!1),Hm=B("",!1),Ym=B("",!1),Xm=B("",!1),_r=B("",!1),Lu=B("",!1),Zl=B("-+",!1),Qf=B("",!1),zf=B("",!1),Gf=B("",!1),Ku=B("",!1),La=B("",!1),Fu=B("D",!1),qu=Nt(["R","N","B","Q","K","P"],!1,!1),Jm=Nt(["R","N","B","Q"],!1,!1),Vf=Nt([["a","h"]],!1,!1),Wf=Nt([["1","8"]],!1,!1),Qu=B("x",!1),zu=function(a,m){return m},Hf=function(a,m){return[a].concat(m)},Zm=function(a){return a},Ds=function(a,m,_){var x=$p;return $p=[],{tags:a,gameComment:m,moves:_,messages:x}},hs=function(a,m){return m},Yf=function(a,m){var _={};return[a].concat(m).forEach(function(x){_[x.name]=x.value}),_},Xf=function(a){return a===null?{}:(a.messages=$p,a)},Jf=function(a){return a},Zf=function(a){return{name:"Event",value:a}},ep=function(a){return{name:"Site",value:a}},Gu=function(a){return{name:"Date",value:a}},tp=function(a){return{name:"Round",value:a}},Vu=function(a){return{name:"WhiteTitle",value:a}},np=function(a){return{name:"BlackTitle",value:a}},sp=function(a){return{name:"WhiteElo",value:a}},Wu=function(a){return{name:"BlackElo",value:a}},Hu=function(a){return{name:"WhiteUSCF",value:a}},rp=function(a){return{name:"BlackUSCF",value:a}},Yu=function(a){return{name:"WhiteNA",value:a}},ec=function(a){return{name:"BlackNA",value:a}},e1=function(a){return{name:"WhiteType",value:a}},ip=function(a){return{name:"BlackType",value:a}},Xu=function(a){return{name:"White",value:a}},ap=function(a){return{name:"Black",value:a}},tc=function(a){return{name:"Result",value:a}},Zr=function(a){return{name:"EventDate",value:a}},t1=function(a){return{name:"EventSponsor",value:a}},op=function(a){return{name:"Section",value:a}},Ju=function(a){return{name:"Stage",value:a}},lp=function(a){return{name:"Board",value:a}},cp=function(a){return{name:"Opening",value:a}},Go=function(a){return{name:"Variation",value:a}},fs=function(a){return{name:"SubVariation",value:a}},n1=function(a){return{name:"ECO",value:a}},s1=function(a){return{name:"NIC",value:a}},nc=function(a){return{name:"Time",value:a}},ps=function(a){return{name:"UTCTime",value:a}},r1=function(a){return{name:"UTCDate",value:a}},Qe=function(a){return{name:"TimeControl",value:a}},Ka=function(a){return{name:"SetUp",value:a}},Zu=function(a){return{name:"FEN",value:a}},up=function(a){return{name:"Termination",value:a}},i1=function(a){return{name:"Annotator",value:a}},Vo=function(a){return{name:"Mode",value:a}},sc=function(a){return{name:"PlyCount",value:a}},ed=function(a){return{name:"Variant",value:a}},dp=function(a){return{name:"WhiteRatingDiff",value:a}},hp=function(a){return{name:"BlackRatingDiff",value:a}},fp=function(a){return{name:"WhiteFideId",value:a}},td=function(a){return{name:"BlackFideId",value:a}},nd=function(a){return{name:"WhiteTeam",value:a}},es=function(a){return{name:"BlackTeam",value:a}},kr=function(a){return{name:"Clock",value:a}},xi=function(a){return{name:"WhiteClock",value:a}},pp=function(a){return{name:"BlackClock",value:a}},gp=function(a,m){return pr({key:a,value:m,message:`Format of tag: "${a}" not correct: "${m}"`}),{name:a,value:m}},Nr=function(a,m){return pr({key:a,value:m,message:`Tag: "${a}" not known: "${m}"`}),{name:a,value:m}},mp=function(a){return a.join("")},Or=function(a){return a.map(m=>m.char||m).join("")},a1=function(){return{type:"char",char:"\\"}},vp=function(){return{type:"char",char:'"'}},bp=function(a){return a},yp=function(a,m,_){return{value:""+a.join("")+"."+m.join("")+"."+_.join(""),year:el(a),month:el(m),day:el(_)}},wp=function(a,m,_,x){let F=a.join("")+":"+m.join("")+":"+_.join(""),he=0;return x&&(F=F+"."+x,pr({message:`Unusual use of millis in time: ${F}`}),el(x)),{value:F,hour:el(a),minute:el(m),second:el(_),millis:he}},o1=function(a){return a.join("")},rc=function(a){return a},sd=function(a,m){return a+"/"+m},hr=function(a){return a},Lt=function(a){return a},zn=function(a){return a||(pr({message:"Tag TimeControl has to have a value"}),"")},In=function(a,m){return m},ts=function(a,m){let _=[a].concat(m);return _.value=_.map(x=>x.value).join(":"),_},Gs=function(a){return a},Fa=function(){return{kind:"unknown",value:"?"}},Fn=function(){return{kind:"unlimited",value:"-"}},Wo=function(a,m,_){return{kind:"movesInSecondsIncrement",moves:a,seconds:m,increment:_,value:""+a+"/"+m+"+"+_}},Xi=function(a,m){return{kind:"movesInSeconds",moves:a,seconds:m,value:""+a+"/"+m}},ic=function(a,m){return{kind:"increment",seconds:a,increment:m,value:""+a+"+"+m}},rd=function(a){return{kind:"suddenDeath",seconds:a,value:""+a}},Ho=function(a){return{kind:"hourglass",seconds:a,value:"*"+a}},Os=function(a){return a},id=function(a){return a},qa=function(a){return a},ei=function(a){return a},ac=function(a){return a},ad=function(a){return a},Pi=function(){return 0},oc=function(){return pr({message:'Use "-" for an unknown value'}),0},_i=function(a){return M1(a)},lc=function(a,m,_,x,F,he,_e,ze){var Rt=ze||[],nn={};return nn.moveNumber=m,nn.notation=_,he&&(nn.commentAfter=he.comment),a&&(nn.commentMove=a.comment),F&&(nn.drawOffer=!0),nn.variations=_e||[],nn.nag=x||null,Rt.unshift(nn),nn.commentDiag=he,Rt},Yo=function(a){return a},od=function(a){return[a]},Xo=function(a,m){return m},cc=function(a,m){return Ha([a].concat(m))},ks=function(){},ki=function(a){return a},Cr=function(a){return{comment:a}},Ns=function(a,m){return m},xp=function(a,m){return Ha([{colorFields:a}].concat(m[0]))},uc=function(a,m){return m},ld=function(a,m){return Ha([{colorArrows:a}].concat(m[0]))},Pp=function(a,m,_){return _},Ni=function(a,m,_){var x={};return x[a]=m,Ha([x].concat(_[0]))},cd=function(a,m,_){return _},ud=function(a,m,_){var x={};return x[a]=m,Ha([x].concat(_[0]))},Ci=function(a,m){return m},dd=function(a,m){var _={};return _.eval=parseFloat(a),Ha([_].concat(m[0]))},Si=function(a,m,_){return _},_p=function(a,m,_){var x={};return x[a]=m.join(""),Ha([x].concat(_[0]))},hd=function(a,m){return m},fd=function(a,m){return m.length>0?Ha([{comment:sb(a.join(""))}].concat(nb(m[0]))):{comment:a.join("")}},dc=function(a){return a},l1=function(a){return a},c1=function(a){return a.join("")},kp=function(a,m){var _=[];_.push(a);for(var x=0;x<m.length;x++)_.push(m[x][2]);return _},Np=function(a,m){return a+m},Ji=function(a,m){var _=[];_.push(a);for(var x=0;x<m.length;x++)_.push(m[x][2]);return _},u1=function(a,m,_){return a+m+_},Qa=function(){return"Y"},Cp=function(){return"G"},Rn=function(){return"R"},d1=function(){return"B"},Sp=function(){return"O"},h1=function(){return"C"},f1=function(a,m){return a+m},Rp=function(){return"clk"},Tp=function(){return"egt"},p1=function(){return"emt"},fr=function(){return"mct"},pd=function(a,m,_,x){let F=m;return a?F=a+F:pr({message:"Hours and minutes missing"}),a&&(a.match(/:/g)||[]).length==2&&a.search(":")==2&&pr({message:"Only 1 digit for hours normally used"}),_?F+=_:pr({message:"Only 2 digit for seconds normally used"}),x&&(pr({message:"Unusual use of millis in clock value"}),F+="."+x),F},g1=function(a,m,_){let x=m;return a?x=a+x:pr({message:"Hours and minutes missing"}),a&&(a.match(/:/g)||[]).length==2&&a.search(":")==1&&pr({message:"Only 2 digits for hours normally used"}),_?x+=_:pr({message:"Only 2 digit for seconds normally used"}),x},Ri=function(a,m){return m?a+m:(pr({message:"No hours found"}),a)},hc=function(a,m){let _=a;return m?_+=m+":":_+=":",_},Zi=function(a,m){let _=a;return m?_+=m+":":(_+=":",pr({message:"Only 2 digits for minutes normally used"})),_},fc=function(a){return a},gd=function(a,m){var _=m||[];return _.unshift(a),_},md=function(a){return a},m1=function(a){return M1(a)},vd=function(){return""},v1=function(a,m,_,x,F,he,_e){var ze={};return ze.fig=a||null,ze.disc=m||null,ze.strike=_||null,ze.col=x,ze.row=F,ze.check=_e||null,ze.promotion=he,ze.notation=(a||"")+(m||"")+(_||"")+x+F+(he||"")+(_e||""),ze},Ep=function(a,m,_,x,F,he,_e,ze){var Rt={};return Rt.fig=a||null,Rt.strike=x=="x"?x:null,Rt.col=F,Rt.row=he,Rt.notation=(a&&a!=="P"?a:"")+m+_+(x=="x"?x:"-")+F+he+(_e||"")+(ze||""),Rt.check=ze||null,Rt.promotion=_e,Rt},jp=function(a,m,_,x,F,he){var _e={};return _e.fig=a||null,_e.strike=m||null,_e.col=_,_e.row=x,_e.check=he||null,_e.promotion=F,_e.notation=(a||"")+(m||"")+_+x+(F||"")+(he||""),_e},pc=function(a){var m={};return m.notation="O-O-O"+(a||""),m.check=a||null,m},gc=function(a){var m={};return m.notation="O-O"+(a||""),m.check=a||null,m},Ip=function(a,m,_){var x={};return x.fig=a,x.drop=!0,x.col=m,x.row=_,x.notation=a+"@"+m+_,x},bd=function(){var a={};return a.notation="Z0",a},b1=function(a){return a[1]},Ap=function(a){return a[1]},yd=function(a){return"="+a},mc=function(a,m){var _=m||[];return _.unshift(a),_},wd=function(a){return"$"+a},vc=function(){return"$3"},Mp=function(){return"$4"},y1=function(){return"$5"},bc=function(){return"$6"},w1=function(){return"$1"},Jo=function(){return"$2"},x1=function(){return"$3"},yc=function(){return"$4"},s=function(){return"$5"},i=function(){return"$6"},c=function(){return"$7"},p=function(){return"$10"},v=function(){return"$13"},y=function(){return"$14"},S=function(){return"$15"},D=function(){return"$16"},L=function(){return"$17"},te=function(){return"$18"},Pe=function(){return"$19"},Ne=function(){return"$22"},we=function(){return"$32"},Fe=function(){return"$36"},Ge=function(){return"$40"},We=function(){return"$132"},An=function(){return"$220"},h=0,R=0,Y=[{line:1,column:1}],ke=0,He=[],E=0,it;if("startRule"in W){if(!(W.startRule in ve))throw new Error(`Can't start parsing from rule "`+W.startRule+'".');be=ve[W.startRule]}function gt(){return _1(R,h)}function B(a,m){return{type:"literal",text:a,ignoreCase:m}}function Nt(a,m,_){return{type:"class",parts:a,inverted:m,ignoreCase:_}}function Ti(){return{type:"any"}}function P1(){return{type:"end"}}function pv(a){return{type:"other",description:a}}function gv(a){var m=Y[a],_;if(m)return m;for(_=a-1;!Y[_];)_--;for(m=Y[_],m={line:m.line,column:m.column};_<a;)P.charCodeAt(_)===10?(m.line++,m.column=1):m.column++,_++;return Y[a]=m,m}function _1(a,m,_){var x=gv(a),F=gv(m),he={source:ye,start:{offset:a,line:x.line,column:x.column},end:{offset:m,line:F.line,column:F.column}};return he}function A(a){h<ke||(h>ke&&(ke=h,He=[]),He.push(a))}function A_(a,m,_){return new Q(Q.buildMessage(a,m),a,m,_)}function Dp(){var a;return P.charCodeAt(h)===65279?(a=Ye,h++):(a=u,E===0&&A(Qh)),a}function M_(){var a,m,_,x,F,he;if(a=h,Dp(),Ee(),m=h,_=Op(),_!==u){for(x=[],F=h,Ee(),he=Op(),he!==u?(R=F,F=zu(_,he)):(h=F,F=u);F!==u;)x.push(F),F=h,Ee(),he=Op(),he!==u?(R=F,F=zu(_,he)):(h=F,F=u);R=m,m=Hf(_,x)}else h=m,m=u;return m===u&&(m=null),R=a,a=Zm(m),a}function Op(){var a,m,_,x;return a=h,Dp(),m=mv(),_=S1(),_===u&&(_=null),x=Pd(),x!==u?(R=a,a=Ds(m,_,x)):(h=a,a=u),a}function mv(){var a,m,_,x,F,he;if(a=h,Dp(),Ee(),m=h,_=k1(),_!==u){for(x=[],F=h,Ee(),he=k1(),he!==u?(R=F,F=hs(_,he)):(h=F,F=u);F!==u;)x.push(F),F=h,Ee(),he=k1(),he!==u?(R=F,F=hs(_,he)):(h=F,F=u);R=m,m=Yf(_,x)}else h=m,m=u;return m===u&&(m=null),_=Ee(),R=a,a=Xf(m),a}function k1(){var a,m,_,x;return a=h,m=Zo(),m!==u?(Ee(),_=D_(),_!==u?(Ee(),x=za(),x!==u?(R=a,a=Jf(_)):(h=a,a=u)):(h=a,a=u)):(h=a,a=u),a}function D_(){var a,m,_,x,F;return a=h,m=O_(),m!==u?(_=Ee(),x=Wt(),x!==u?(R=a,a=Zf(x)):(h=a,a=u)):(h=a,a=u),a===u&&(a=h,m=U_(),m!==u?(_=Ee(),x=Wt(),x!==u?(R=a,a=ep(x)):(h=a,a=u)):(h=a,a=u),a===u&&(a=h,m=bv(),m!==u?(_=Ee(),x=N1(),x!==u?(R=a,a=Gu(x)):(h=a,a=u)):(h=a,a=u),a===u&&(a=h,m=B_(),m!==u?(_=Ee(),x=Wt(),x!==u?(R=a,a=tp(x)):(h=a,a=u)):(h=a,a=u),a===u&&(a=h,m=K_(),m!==u?(_=Ee(),x=Wt(),x!==u?(R=a,a=Vu(x)):(h=a,a=u)):(h=a,a=u),a===u&&(a=h,m=F_(),m!==u?(_=Ee(),x=Wt(),x!==u?(R=a,a=np(x)):(h=a,a=u)):(h=a,a=u),a===u&&(a=h,m=wv(),m!==u?(_=Ee(),x=Kv(),x!==u?(R=a,a=sp(x)):(h=a,a=u)):(h=a,a=u),a===u&&(a=h,m=xv(),m!==u?(_=Ee(),x=Kv(),x!==u?(R=a,a=Wu(x)):(h=a,a=u)):(h=a,a=u),a===u&&(a=h,m=Pv(),m!==u?(_=Ee(),x=xd(),x!==u?(R=a,a=Hu(x)):(h=a,a=u)):(h=a,a=u),a===u&&(a=h,m=_v(),m!==u?(_=Ee(),x=xd(),x!==u?(R=a,a=rp(x)):(h=a,a=u)):(h=a,a=u),a===u&&(a=h,m=q_(),m!==u?(_=Ee(),x=Wt(),x!==u?(R=a,a=Yu(x)):(h=a,a=u)):(h=a,a=u),a===u&&(a=h,m=Q_(),m!==u?(_=Ee(),x=Wt(),x!==u?(R=a,a=ec(x)):(h=a,a=u)):(h=a,a=u),a===u&&(a=h,m=z_(),m!==u?(_=Ee(),x=Wt(),x!==u?(R=a,a=e1(x)):(h=a,a=u)):(h=a,a=u),a===u&&(a=h,m=G_(),m!==u?(_=Ee(),x=Wt(),x!==u?(R=a,a=ip(x)):(h=a,a=u)):(h=a,a=u),a===u&&(a=h,m=$_(),m!==u?(_=Ee(),x=Wt(),x!==u?(R=a,a=Xu(x)):(h=a,a=u)):(h=a,a=u),a===u&&(a=h,m=L_(),m!==u?(_=Ee(),x=Wt(),x!==u?(R=a,a=ap(x)):(h=a,a=u)):(h=a,a=u),a===u&&(a=h,m=yv(),m!==u?(_=Ee(),x=w3(),x!==u?(R=a,a=tc(x)):(h=a,a=u)):(h=a,a=u),a===u&&(a=h,m=kv(),m!==u?(_=Ee(),x=N1(),x!==u?(R=a,a=Zr(x)):(h=a,a=u)):(h=a,a=u),a===u&&(a=h,m=V_(),m!==u?(_=Ee(),x=Wt(),x!==u?(R=a,a=t1(x)):(h=a,a=u)):(h=a,a=u),a===u&&(a=h,m=W_(),m!==u?(_=Ee(),x=Wt(),x!==u?(R=a,a=op(x)):(h=a,a=u)):(h=a,a=u),a===u&&(a=h,m=H_(),m!==u?(_=Ee(),x=Wt(),x!==u?(R=a,a=Ju(x)):(h=a,a=u)):(h=a,a=u),a===u&&(a=h,m=Nv(),m!==u?(_=Ee(),x=xd(),x!==u?(R=a,a=lp(x)):(h=a,a=u)):(h=a,a=u),a===u&&(a=h,m=Y_(),m!==u?(_=Ee(),x=Wt(),x!==u?(R=a,a=cp(x)):(h=a,a=u)):(h=a,a=u),a===u&&(a=h,m=X_(),m!==u?(_=Ee(),x=Wt(),x!==u?(R=a,a=Go(x)):(h=a,a=u)):(h=a,a=u),a===u&&(a=h,m=J_(),m!==u?(_=Ee(),x=Wt(),x!==u?(R=a,a=fs(x)):(h=a,a=u)):(h=a,a=u),a===u&&(a=h,m=Z_(),m!==u?(_=Ee(),x=Wt(),x!==u?(R=a,a=n1(x)):(h=a,a=u)):(h=a,a=u),a===u&&(a=h,m=e3(),m!==u?(_=Ee(),x=Wt(),x!==u?(R=a,a=s1(x)):(h=a,a=u)):(h=a,a=u),a===u&&(a=h,m=Cv(),m!==u?(_=Ee(),x=Ov(),x!==u?(R=a,a=nc(x)):(h=a,a=u)):(h=a,a=u),a===u&&(a=h,m=Sv(),m!==u?(_=Ee(),x=Ov(),x!==u?(R=a,a=ps(x)):(h=a,a=u)):(h=a,a=u),a===u&&(a=h,m=Rv(),m!==u?(_=Ee(),x=N1(),x!==u?(R=a,a=r1(x)):(h=a,a=u)):(h=a,a=u),a===u&&(a=h,m=Tv(),m!==u?(_=Ee(),x=b3(),x!==u?(R=a,a=Qe(x)):(h=a,a=u)):(h=a,a=u),a===u&&(a=h,m=t3(),m!==u?(_=Ee(),x=Wt(),x!==u?(R=a,a=Ka(x)):(h=a,a=u)):(h=a,a=u),a===u&&(a=h,m=n3(),m!==u?(_=Ee(),x=Wt(),x!==u?(R=a,a=Zu(x)):(h=a,a=u)):(h=a,a=u),a===u&&(a=h,m=s3(),m!==u?(_=Ee(),x=Wt(),x!==u?(R=a,a=up(x)):(h=a,a=u)):(h=a,a=u),a===u&&(a=h,m=r3(),m!==u?(_=Ee(),x=Wt(),x!==u?(R=a,a=i1(x)):(h=a,a=u)):(h=a,a=u),a===u&&(a=h,m=i3(),m!==u?(_=Ee(),x=Wt(),x!==u?(R=a,a=Vo(x)):(h=a,a=u)):(h=a,a=u),a===u&&(a=h,m=Ev(),m!==u?(_=Ee(),x=xd(),x!==u?(R=a,a=sc(x)):(h=a,a=u)):(h=a,a=u),a===u&&(a=h,m=a3(),m!==u?(_=Ee(),x=Wt(),x!==u?(R=a,a=ed(x)):(h=a,a=u)):(h=a,a=u),a===u&&(a=h,m=o3(),m!==u?(_=Ee(),x=Wt(),x!==u?(R=a,a=dp(x)):(h=a,a=u)):(h=a,a=u),a===u&&(a=h,m=l3(),m!==u?(_=Ee(),x=Wt(),x!==u?(R=a,a=hp(x)):(h=a,a=u)):(h=a,a=u),a===u&&(a=h,m=c3(),m!==u?(_=Ee(),x=Wt(),x!==u?(R=a,a=fp(x)):(h=a,a=u)):(h=a,a=u),a===u&&(a=h,m=u3(),m!==u?(_=Ee(),x=Wt(),x!==u?(R=a,a=td(x)):(h=a,a=u)):(h=a,a=u),a===u&&(a=h,m=d3(),m!==u?(_=Ee(),x=Wt(),x!==u?(R=a,a=nd(x)):(h=a,a=u)):(h=a,a=u),a===u&&(a=h,m=h3(),m!==u?(_=Ee(),x=Wt(),x!==u?(R=a,a=es(x)):(h=a,a=u)):(h=a,a=u),a===u&&(a=h,m=jv(),m!==u?(_=Ee(),x=g3(),x!==u?(R=a,a=kr(x)):(h=a,a=u)):(h=a,a=u),a===u&&(a=h,m=Iv(),m!==u?(_=Ee(),x=Bv(),x!==u?(R=a,a=xi(x)):(h=a,a=u)):(h=a,a=u),a===u&&(a=h,m=Av(),m!==u?(_=Ee(),x=Bv(),x!==u?(R=a,a=pp(x)):(h=a,a=u)):(h=a,a=u),a===u&&(a=h,m=h,E++,_=vv(),E--,_!==u?(h=m,m=void 0):m=u,m!==u?(_=Up(),x=Ee(),F=Wt(),F!==u?(R=a,a=gp(_,F)):(h=a,a=u)):(h=a,a=u),a===u&&(a=h,m=h,E++,_=vv(),E--,_===u?m=void 0:(h=m,m=u),m!==u?(_=Up(),x=Ee(),F=Wt(),F!==u?(R=a,a=Nr(_,F)):(h=a,a=u)):(h=a,a=u))))))))))))))))))))))))))))))))))))))))))))))))),a}function vv(){var a;return a=bv(),a===u&&(a=wv(),a===u&&(a=xv(),a===u&&(a=Pv(),a===u&&(a=_v(),a===u&&(a=yv(),a===u&&(a=kv(),a===u&&(a=Nv(),a===u&&(a=Cv(),a===u&&(a=Sv(),a===u&&(a=Rv(),a===u&&(a=Tv(),a===u&&(a=Ev(),a===u&&(a=jv(),a===u&&(a=Iv(),a===u&&(a=Av()))))))))))))))),a}function O_(){var a;return P.substr(h,5)===me?(a=me,h+=5):(a=u,E===0&&A(ru)),a===u&&(P.substr(h,5)===Me?(a=Me,h+=5):(a=u,E===0&&A(Im))),a}function U_(){var a;return P.substr(h,4)===Ce?(a=Ce,h+=4):(a=u,E===0&&A(Am)),a===u&&(P.substr(h,4)===$e?(a=$e,h+=4):(a=u,E===0&&A(_a))),a}function bv(){var a;return P.substr(h,4)===ce?(a=ce,h+=4):(a=u,E===0&&A(iu)),a===u&&(P.substr(h,4)===ue?(a=ue,h+=4):(a=u,E===0&&A(jo))),a}function B_(){var a;return P.substr(h,5)===ne?(a=ne,h+=5):(a=u,E===0&&A(au)),a===u&&(P.substr(h,5)===V?(a=V,h+=5):(a=u,E===0&&A(zh))),a}function $_(){var a;return P.substr(h,5)===z?(a=z,h+=5):(a=u,E===0&&A(Il)),a===u&&(P.substr(h,5)===fe?(a=fe,h+=5):(a=u,E===0&&A(ka))),a}function L_(){var a;return P.substr(h,5)===oe?(a=oe,h+=5):(a=u,E===0&&A(ou)),a===u&&(P.substr(h,5)===U?(a=U,h+=5):(a=u,E===0&&A(Gh))),a}function yv(){var a;return P.substr(h,6)===Z?(a=Z,h+=6):(a=u,E===0&&A(Al)),a===u&&(P.substr(h,6)===xe?(a=xe,h+=6):(a=u,E===0&&A(Vh))),a}function K_(){var a;return P.substr(h,10)===Be?(a=Be,h+=10):(a=u,E===0&&A(Wh)),a===u&&(P.substr(h,10)===Ze?(a=Ze,h+=10):(a=u,E===0&&A(Hh)),a===u&&(P.substr(h,10)===Ve?(a=Ve,h+=10):(a=u,E===0&&A(Yh)),a===u&&(P.substr(h,10)===O?(a=O,h+=10):(a=u,E===0&&A(Xh))))),a}function F_(){var a;return P.substr(h,10)===ge?(a=ge,h+=10):(a=u,E===0&&A(Jh)),a===u&&(P.substr(h,10)===Se?(a=Se,h+=10):(a=u,E===0&&A(pi)),a===u&&(P.substr(h,10)===Te?(a=Te,h+=10):(a=u,E===0&&A(lu)),a===u&&(P.substr(h,10)===Ke?(a=Ke,h+=10):(a=u,E===0&&A(cu))))),a}function wv(){var a;return P.substr(h,8)===J?(a=J,h+=8):(a=u,E===0&&A(Mm)),a===u&&(P.substr(h,8)===De?(a=De,h+=8):(a=u,E===0&&A(Dm)),a===u&&(P.substr(h,8)===qe?(a=qe,h+=8):(a=u,E===0&&A(Io)),a===u&&(P.substr(h,8)===bt?(a=bt,h+=8):(a=u,E===0&&A(Om)),a===u&&(P.substr(h,8)===Ie?(a=Ie,h+=8):(a=u,E===0&&A(Zh)))))),a}function xv(){var a;return P.substr(h,8)===Xe?(a=Xe,h+=8):(a=u,E===0&&A(ef)),a===u&&(P.substr(h,8)===nt?(a=nt,h+=8):(a=u,E===0&&A(pn)),a===u&&(P.substr(h,8)===Ut?(a=Ut,h+=8):(a=u,E===0&&A(uu)),a===u&&(P.substr(h,8)===Kt?(a=Kt,h+=8):(a=u,E===0&&A(Ml)),a===u&&(P.substr(h,8)===dt?(a=dt,h+=8):(a=u,E===0&&A(Ao)))))),a}function Pv(){var a;return P.substr(h,9)===Ft?(a=Ft,h+=9):(a=u,E===0&&A(tf)),a===u&&(P.substr(h,9)===zt?(a=zt,h+=9):(a=u,E===0&&A(du)),a===u&&(P.substr(h,9)===Cn?(a=Cn,h+=9):(a=u,E===0&&A(Mo)),a===u&&(P.substr(h,9)===qn?(a=qn,h+=9):(a=u,E===0&&A(Dl)),a===u&&(P.substr(h,9)===xt?(a=xt,h+=9):(a=u,E===0&&A(Na)))))),a}function _v(){var a;return P.substr(h,9)===vn?(a=vn,h+=9):(a=u,E===0&&A(nf)),a===u&&(P.substr(h,9)===Mn?(a=Mn,h+=9):(a=u,E===0&&A(Um)),a===u&&(P.substr(h,9)===Ls?(a=Ls,h+=9):(a=u,E===0&&A(Bm)),a===u&&(P.substr(h,9)===as?(a=as,h+=9):(a=u,E===0&&A(sf)),a===u&&(P.substr(h,9)===bn?(a=bn,h+=9):(a=u,E===0&&A(Ol)))))),a}function q_(){var a;return P.substr(h,7)===os?(a=os,h+=7):(a=u,E===0&&A(Ul)),a===u&&(P.substr(h,7)===xs?(a=xs,h+=7):(a=u,E===0&&A(hu)),a===u&&(P.substr(h,7)===Ps?(a=Ps,h+=7):(a=u,E===0&&A(fu)),a===u&&(P.substr(h,7)===er?(a=er,h+=7):(a=u,E===0&&A(pu)),a===u&&(P.substr(h,7)===Bn?(a=Bn,h+=7):(a=u,E===0&&A(gu)),a===u&&(P.substr(h,7)===Hn?(a=Hn,h+=7):(a=u,E===0&&A($m))))))),a}function Q_(){var a;return P.substr(h,7)===ls?(a=ls,h+=7):(a=u,E===0&&A(rf)),a===u&&(P.substr(h,7)===Ks?(a=Ks,h+=7):(a=u,E===0&&A(Lm)),a===u&&(P.substr(h,7)===$n?(a=$n,h+=7):(a=u,E===0&&A(Km)),a===u&&(P.substr(h,7)===Yn?(a=Yn,h+=7):(a=u,E===0&&A(mu)),a===u&&(P.substr(h,7)===kn?(a=kn,h+=7):(a=u,E===0&&A(gi)),a===u&&(P.substr(h,7)===_s?(a=_s,h+=7):(a=u,E===0&&A(af))))))),a}function z_(){var a;return P.substr(h,9)===ie?(a=ie,h+=9):(a=u,E===0&&A(Ca)),a===u&&(P.substr(h,9)===lt?(a=lt,h+=9):(a=u,E===0&&A(Ar)),a===u&&(P.substr(h,9)===Pt?(a=Pt,h+=9):(a=u,E===0&&A(Do)),a===u&&(P.substr(h,9)===Bt?(a=Bt,h+=9):(a=u,E===0&&A(Wr))))),a}function G_(){var a;return P.substr(h,9)===Gt?(a=Gt,h+=9):(a=u,E===0&&A(vu)),a===u&&(P.substr(h,9)===H?(a=H,h+=9):(a=u,E===0&&A(Fm)),a===u&&(P.substr(h,9)===sn?(a=sn,h+=9):(a=u,E===0&&A(qm)),a===u&&(P.substr(h,9)===jt?(a=jt,h+=9):(a=u,E===0&&A(qi))))),a}function kv(){var a;return P.substr(h,9)===Yt?(a=Yt,h+=9):(a=u,E===0&&A(Oo)),a===u&&(P.substr(h,9)===je?(a=je,h+=9):(a=u,E===0&&A(Sa)),a===u&&(P.substr(h,9)===Dn?(a=Dn,h+=9):(a=u,E===0&&A(Bl)),a===u&&(P.substr(h,9)===Ct?(a=Ct,h+=9):(a=u,E===0&&A(bu))))),a}function V_(){var a;return P.substr(h,12)===G?(a=G,h+=12):(a=u,E===0&&A(Ra)),a===u&&(P.substr(h,12)===pe?(a=pe,h+=12):(a=u,E===0&&A(mi)),a===u&&(P.substr(h,12)===de?(a=de,h+=12):(a=u,E===0&&A(gn)),a===u&&(P.substr(h,12)===Ae?(a=Ae,h+=12):(a=u,E===0&&A(on))))),a}function W_(){var a;return P.substr(h,7)===tt?(a=tt,h+=7):(a=u,E===0&&A(vi)),a===u&&(P.substr(h,7)===Re?(a=Re,h+=7):(a=u,E===0&&A(ds))),a}function H_(){var a;return P.substr(h,5)===Vt?(a=Vt,h+=5):(a=u,E===0&&A(As)),a===u&&(P.substr(h,5)===$t?(a=$t,h+=5):(a=u,E===0&&A(Qi))),a}function Nv(){var a;return P.substr(h,5)===Nn?(a=Nn,h+=5):(a=u,E===0&&A(Ta)),a===u&&(P.substr(h,5)===ht?(a=ht,h+=5):(a=u,E===0&&A(Ms))),a}function Y_(){var a;return P.substr(h,7)===st?(a=st,h+=7):(a=u,E===0&&A($l)),a===u&&(P.substr(h,7)===ft?(a=ft,h+=7):(a=u,E===0&&A(of))),a}function X_(){var a;return P.substr(h,9)===St?(a=St,h+=9):(a=u,E===0&&A(lf)),a===u&&(P.substr(h,9)===Tt?(a=Tt,h+=9):(a=u,E===0&&A(Ll))),a}function J_(){var a;return P.substr(h,12)===Xt?(a=Xt,h+=12):(a=u,E===0&&A(cf)),a===u&&(P.substr(h,12)===qt?(a=qt,h+=12):(a=u,E===0&&A(Hr)),a===u&&(P.substr(h,12)===tr?(a=tr,h+=12):(a=u,E===0&&A(Kl)),a===u&&(P.substr(h,12)===Sn?(a=Sn,h+=12):(a=u,E===0&&A(yu))))),a}function Z_(){var a;return P.substr(h,3)===rn?(a=rn,h+=3):(a=u,E===0&&A(uf)),a===u&&(P.substr(h,3)===cs?(a=cs,h+=3):(a=u,E===0&&A(Qm)),a===u&&(P.substr(h,3)===En?(a=En,h+=3):(a=u,E===0&&A(bi)))),a}function e3(){var a;return P.substr(h,3)===en?(a=en,h+=3):(a=u,E===0&&A(Ea)),a===u&&(P.substr(h,3)===Es?(a=Es,h+=3):(a=u,E===0&&A(ja)),a===u&&(P.substr(h,3)===Jt?(a=Jt,h+=3):(a=u,E===0&&A(Fl)))),a}function Cv(){var a;return P.substr(h,4)===un?(a=un,h+=4):(a=u,E===0&&A(ql)),a===u&&(P.substr(h,4)===q?(a=q,h+=4):(a=u,E===0&&A(or))),a}function Sv(){var a;return P.substr(h,7)===re?(a=re,h+=7):(a=u,E===0&&A(lr)),a===u&&(P.substr(h,7)===se?(a=se,h+=7):(a=u,E===0&&A(zi)),a===u&&(P.substr(h,7)===et?(a=et,h+=7):(a=u,E===0&&A(Yr)),a===u&&(P.substr(h,7)===Je?(a=Je,h+=7):(a=u,E===0&&A(Xr)),a===u&&(P.substr(h,7)===kt?(a=kt,h+=7):(a=u,E===0&&A(Gi)),a===u&&(P.substr(h,7)===us?(a=us,h+=7):(a=u,E===0&&A(df))))))),a}function Rv(){var a;return P.substr(h,7)===nr?(a=nr,h+=7):(a=u,E===0&&A(wu)),a===u&&(P.substr(h,7)===kl?(a=kl,h+=7):(a=u,E===0&&A(xu)),a===u&&(P.substr(h,7)===Nl?(a=Nl,h+=7):(a=u,E===0&&A(qs)),a===u&&(P.substr(h,7)===ga?(a=ga,h+=7):(a=u,E===0&&A(Qs)),a===u&&(P.substr(h,7)===wo?(a=wo,h+=7):(a=u,E===0&&A(wn)),a===u&&(P.substr(h,7)===ma?(a=ma,h+=7):(a=u,E===0&&A(Pr))))))),a}function Tv(){var a;return P.substr(h,11)===qr?(a=qr,h+=11):(a=u,E===0&&A(hf)),a===u&&(P.substr(h,11)===Cl?(a=Cl,h+=11):(a=u,E===0&&A(ff)),a===u&&(P.substr(h,11)===va?(a=va,h+=11):(a=u,E===0&&A(Pu)),a===u&&(P.substr(h,11)===Qt?(a=Qt,h+=11):(a=u,E===0&&A(_u))))),a}function t3(){var a;return P.substr(h,5)===ba?(a=ba,h+=5):(a=u,E===0&&A(pf)),a===u&&(P.substr(h,5)===xo?(a=xo,h+=5):(a=u,E===0&&A(Ql)),a===u&&(P.substr(h,5)===ya?(a=ya,h+=5):(a=u,E===0&&A(gf)),a===u&&(P.substr(h,5)===oi?(a=oi,h+=5):(a=u,E===0&&A(Ia))))),a}function n3(){var a;return P.substr(h,3)===dn?(a=dn,h+=3):(a=u,E===0&&A(ku)),a===u&&(P.substr(h,3)===li?(a=li,h+=3):(a=u,E===0&&A(zm)),a===u&&(P.substr(h,3)===Ln?(a=Ln,h+=3):(a=u,E===0&&A(Uo)))),a}function s3(){var a;return P.substr(h,11)===Bi?(a=Bi,h+=11):(a=u,E===0&&A(zl)),a===u&&(P.substr(h,11)===wr?(a=wr,h+=11):(a=u,E===0&&A(mf))),a}function r3(){var a;return P.substr(h,9)===sr?(a=sr,h+=9):(a=u,E===0&&A(vf)),a===u&&(P.substr(h,9)===js?(a=js,h+=9):(a=u,E===0&&A(Aa))),a}function i3(){var a;return P.substr(h,4)===Qr?(a=Qr,h+=4):(a=u,E===0&&A(bf)),a===u&&(P.substr(h,4)===zr?(a=zr,h+=4):(a=u,E===0&&A(Gl))),a}function Ev(){var a;return P.substr(h,8)===xr?(a=xr,h+=8):(a=u,E===0&&A(Vl)),a===u&&(P.substr(h,8)===Po?(a=Po,h+=8):(a=u,E===0&&A(Ma)),a===u&&(P.substr(h,8)===_o?(a=_o,h+=8):(a=u,E===0&&A(Nu)),a===u&&(P.substr(h,8)===Gr?(a=Gr,h+=8):(a=u,E===0&&A(Cu))))),a}function a3(){var a;return P.substr(h,7)===Sl?(a=Sl,h+=7):(a=u,E===0&&A(Su)),a===u&&(P.substr(h,7)===ko?(a=ko,h+=7):(a=u,E===0&&A(Ru))),a}function o3(){var a;return P.substr(h,15)===$i?(a=$i,h+=15):(a=u,E===0&&A(Da)),a}function l3(){var a;return P.substr(h,15)===No?(a=No,h+=15):(a=u,E===0&&A(cr)),a}function c3(){var a;return P.substr(h,11)===Co?(a=Co,h+=11):(a=u,E===0&&A(Vi)),a}function u3(){var a;return P.substr(h,11)===ci?(a=ci,h+=11):(a=u,E===0&&A(Tu)),a}function d3(){var a;return P.substr(h,9)===Vr?(a=Vr,h+=9):(a=u,E===0&&A(yf)),a}function h3(){var a;return P.substr(h,9)===jr?(a=jr,h+=9):(a=u,E===0&&A(Jr)),a}function jv(){var a;return P.substr(h,5)===ui?(a=ui,h+=5):(a=u,E===0&&A(yi)),a}function Iv(){var a;return P.substr(h,10)===Rl?(a=Rl,h+=10):(a=u,E===0&&A(Eu)),a}function Av(){var a;return P.substr(h,10)===So?(a=So,h+=10):(a=u,E===0&&A(wf)),a}function Ee(){var a,m;for(E++,a=[],Fi.test(P.charAt(h))?(m=P.charAt(h),h++):(m=u,E===0&&A(zs));m!==u;)a.push(m),Fi.test(P.charAt(h))?(m=P.charAt(h),h++):(m=u,E===0&&A(zs));return E--,m=u,E===0&&A(Mr),a}function wc(){var a,m;if(a=[],Fi.test(P.charAt(h))?(m=P.charAt(h),h++):(m=u,E===0&&A(zs)),m!==u)for(;m!==u;)a.push(m),Fi.test(P.charAt(h))?(m=P.charAt(h),h++):(m=u,E===0&&A(zs));else a=u;return a}function f3(){var a,m;if(a=[],$h.test(P.charAt(h))?(m=P.charAt(h),h++):(m=u,E===0&&A(Bo)),m!==u)for(;m!==u;)a.push(m),$h.test(P.charAt(h))?(m=P.charAt(h),h++):(m=u,E===0&&A(Bo));else a=u;return a}function Up(){var a,m,_;for(a=h,m=[],Lh.test(P.charAt(h))?(_=P.charAt(h),h++):(_=u,E===0&&A(ju));_!==u;)m.push(_),Lh.test(P.charAt(h))?(_=P.charAt(h),h++):(_=u,E===0&&A(ju));return R=a,m=mp(m),a=m,a}function gs(){var a;return P.charCodeAt(h)===34?(a=rr,h++):(a=u,E===0&&A(Wi)),a}function Wt(){var a,m,_,x,F;if(a=h,P.charCodeAt(h)===34?(m=rr,h++):(m=u,E===0&&A(Wi)),m!==u){for(Dv(),_=[],x=Mv();x!==u;)_.push(x),x=Mv();x=Dv(),P.charCodeAt(h)===34?(F=rr,h++):(F=u,E===0&&A(Wi)),F!==u?(R=a,a=Or(_)):(h=a,a=u)}else h=a,a=u;return a}function Mv(){var a,m,_,x;return jm.test(P.charAt(h))?(a=P.charAt(h),h++):(a=u,E===0&&A(xf)),a===u&&(a=h,m=p3(),m!==u?(_=h,P.charCodeAt(h)===92?(x=di,h++):(x=u,E===0&&A(Oa)),x!==u&&(R=_,x=a1()),_=x,_===u&&(_=h,P.charCodeAt(h)===34?(x=rr,h++):(x=u,E===0&&A(Wi)),x!==u&&(R=_,x=vp()),_=x),_!==u?(R=a,a=bp(_)):(h=a,a=u)):(h=a,a=u)),a}function Dv(){var a,m;for(E++,a=[],Fi.test(P.charAt(h))?(m=P.charAt(h),h++):(m=u,E===0&&A(zs));m!==u;)a.push(m),Fi.test(P.charAt(h))?(m=P.charAt(h),h++):(m=u,E===0&&A(zs));return E--,m=u,E===0&&A(Mr),a}function p3(){var a;return P.charCodeAt(h)===92?(a=di,h++):(a=u,E===0&&A(Oa)),a}function N1(){var a,m,_,x,F,he,_e,ze,Rt;return a=h,m=gs(),m!==u?(_=h,fi.test(P.charAt(h))?(x=P.charAt(h),h++):(x=u,E===0&&A(Xn)),x!==u?(fi.test(P.charAt(h))?(F=P.charAt(h),h++):(F=u,E===0&&A(Xn)),F!==u?(fi.test(P.charAt(h))?(he=P.charAt(h),h++):(he=u,E===0&&A(Xn)),he!==u?(fi.test(P.charAt(h))?(_e=P.charAt(h),h++):(_e=u,E===0&&A(Xn)),_e!==u?(x=[x,F,he,_e],_=x):(h=_,_=u)):(h=_,_=u)):(h=_,_=u)):(h=_,_=u),_!==u?(P.charCodeAt(h)===46?(x=hi,h++):(x=u,E===0&&A(wi)),x!==u?(F=h,fi.test(P.charAt(h))?(he=P.charAt(h),h++):(he=u,E===0&&A(Xn)),he!==u?(fi.test(P.charAt(h))?(_e=P.charAt(h),h++):(_e=u,E===0&&A(Xn)),_e!==u?(he=[he,_e],F=he):(h=F,F=u)):(h=F,F=u),F!==u?(P.charCodeAt(h)===46?(he=hi,h++):(he=u,E===0&&A(wi)),he!==u?(_e=h,fi.test(P.charAt(h))?(ze=P.charAt(h),h++):(ze=u,E===0&&A(Xn)),ze!==u?(fi.test(P.charAt(h))?(Rt=P.charAt(h),h++):(Rt=u,E===0&&A(Xn)),Rt!==u?(ze=[ze,Rt],_e=ze):(h=_e,_e=u)):(h=_e,_e=u),_e!==u?(ze=gs(),ze!==u?(R=a,a=yp(_,F,_e)):(h=a,a=u)):(h=a,a=u)):(h=a,a=u)):(h=a,a=u)):(h=a,a=u)):(h=a,a=u)):(h=a,a=u),a}function Ov(){var a,m,_,x,F,he,_e,ze,Rt;if(a=h,m=gs(),m!==u){if(_=[],Fs.test(P.charAt(h))?(x=P.charAt(h),h++):(x=u,E===0&&A(Jn)),x!==u)for(;x!==u;)_.push(x),Fs.test(P.charAt(h))?(x=P.charAt(h),h++):(x=u,E===0&&A(Jn));else _=u;if(_!==u)if(P.charCodeAt(h)===58?(x=Ir,h++):(x=u,E===0&&A(ur)),x!==u){if(F=[],Fs.test(P.charAt(h))?(he=P.charAt(h),h++):(he=u,E===0&&A(Jn)),he!==u)for(;he!==u;)F.push(he),Fs.test(P.charAt(h))?(he=P.charAt(h),h++):(he=u,E===0&&A(Jn));else F=u;if(F!==u)if(P.charCodeAt(h)===58?(he=Ir,h++):(he=u,E===0&&A(ur)),he!==u){if(_e=[],Fs.test(P.charAt(h))?(ze=P.charAt(h),h++):(ze=u,E===0&&A(Jn)),ze!==u)for(;ze!==u;)_e.push(ze),Fs.test(P.charAt(h))?(ze=P.charAt(h),h++):(ze=u,E===0&&A(Jn));else _e=u;_e!==u?(ze=Uv(),ze===u&&(ze=null),Rt=gs(),Rt!==u?(R=a,a=wp(_,F,_e,ze)):(h=a,a=u)):(h=a,a=u)}else h=a,a=u;else h=a,a=u}else h=a,a=u;else h=a,a=u}else h=a,a=u;return a}function Uv(){var a,m,_,x;if(a=h,P.charCodeAt(h)===46?(m=hi,h++):(m=u,E===0&&A(wi)),m!==u){if(_=[],Fs.test(P.charAt(h))?(x=P.charAt(h),h++):(x=u,E===0&&A(Jn)),x!==u)for(;x!==u;)_.push(x),Fs.test(P.charAt(h))?(x=P.charAt(h),h++):(x=u,E===0&&A(Jn));else _=u;_!==u?(R=a,a=o1(_)):(h=a,a=u)}else h=a,a=u;return a}function g3(){var a,m,_,x;return a=h,m=gs(),m!==u?(_=m3(),_!==u?(x=gs(),x!==u?(R=a,a=rc(_)):(h=a,a=u)):(h=a,a=u)):(h=a,a=u),a}function m3(){var a,m,_,x;return a=h,m=v3(),m!==u?(P.charCodeAt(h)===47?(_=ir,h++):(_=u,E===0&&A($o)),_!==u?(x=$v(),x!==u?(R=a,a=sd(m,x)):(h=a,a=u)):(h=a,a=u)):(h=a,a=u),a}function v3(){var a;return P.charCodeAt(h)===66?(a=wa,h++):(a=u,E===0&&A(Hi)),a===u&&(P.charCodeAt(h)===87?(a=I,h++):(a=u,E===0&&A(Pf)),a===u&&(P.charCodeAt(h)===78?(a=K,h++):(a=u,E===0&&A(Iu)))),a}function Bv(){var a,m,_,x;return a=h,m=gs(),m!==u?(_=$v(),_!==u?(x=gs(),x!==u?(R=a,a=hr(_)):(h=a,a=u)):(h=a,a=u)):(h=a,a=u),a}function $v(){var a,m;return a=h,m=Vv(),m!==u&&(R=a,m=Lt(m)),a=m,a}function b3(){var a,m,_,x;return a=h,m=gs(),m!==u?(_=y3(),x=gs(),x!==u?(R=a,a=zn(_)):(h=a,a=u)):(h=a,a=u),a}function y3(){var a,m,_,x,F,he,_e;if(a=h,m=h,_=C1(),_!==u){for(x=[],F=h,P.charCodeAt(h)===58?(he=Ir,h++):(he=u,E===0&&A(ur)),he!==u?(_e=C1(),_e!==u?(R=F,F=In(_,_e)):(h=F,F=u)):(h=F,F=u);F!==u;)x.push(F),F=h,P.charCodeAt(h)===58?(he=Ir,h++):(he=u,E===0&&A(ur)),he!==u?(_e=C1(),_e!==u?(R=F,F=In(_,_e)):(h=F,F=u)):(h=F,F=u);R=m,m=ts(_,x)}else h=m,m=u;return m===u&&(m=null),R=a,m=Gs(m),a=m,a}function C1(){var a,m,_,x,F,he;return a=h,P.charCodeAt(h)===63?(m=ee,h++):(m=u,E===0&&A(xn)),m!==u&&(R=a,m=Fa()),a=m,a===u&&(a=h,P.charCodeAt(h)===45?(m=le,h++):(m=u,E===0&&A(Ua)),m!==u&&(R=a,m=Fn()),a=m,a===u&&(a=h,m=ti(),m!==u?(P.charCodeAt(h)===47?(_=ir,h++):(_=u,E===0&&A($o)),_!==u?(x=ti(),x!==u?(P.charCodeAt(h)===43?(F=Le,h++):(F=u,E===0&&A(Lo)),F!==u?(he=ti(),he!==u?(R=a,a=Wo(m,x,he)):(h=a,a=u)):(h=a,a=u)):(h=a,a=u)):(h=a,a=u)):(h=a,a=u),a===u&&(a=h,m=ti(),m!==u?(P.charCodeAt(h)===47?(_=ir,h++):(_=u,E===0&&A($o)),_!==u?(x=ti(),x!==u?(R=a,a=Xi(m,x)):(h=a,a=u)):(h=a,a=u)):(h=a,a=u),a===u&&(a=h,m=ti(),m!==u?(P.charCodeAt(h)===43?(_=Le,h++):(_=u,E===0&&A(Lo)),_!==u?(x=ti(),x!==u?(R=a,a=ic(m,x)):(h=a,a=u)):(h=a,a=u)):(h=a,a=u),a===u&&(a=h,m=ti(),m!==u&&(R=a,m=rd(m)),a=m,a===u&&(a=h,P.charCodeAt(h)===42?(m=rt,h++):(m=u,E===0&&A(Wl)),m!==u?(_=ti(),_!==u?(R=a,a=Ho(_)):(h=a,a=u)):(h=a,a=u))))))),a}function w3(){var a,m,_,x;return a=h,m=gs(),m!==u?(_=Lv(),_!==u?(x=gs(),x!==u?(R=a,a=Os(_)):(h=a,a=u)):(h=a,a=u)):(h=a,a=u),a}function Lv(){var a,m;return a=h,P.substr(h,3)===hn?(m=hn,h+=3):(m=u,E===0&&A(Hl)),m!==u&&(R=a,m=id(m)),a=m,a===u&&(a=h,P.substr(h,3)===Is?(m=Is,h+=3):(m=u,E===0&&A(Au)),m!==u&&(R=a,m=qa(m)),a=m,a===u&&(a=h,P.substr(h,7)===jn?(m=jn,h+=7):(m=u,E===0&&A(Yi)),m!==u&&(R=a,m=ei(m)),a=m,a===u&&(a=h,P.charCodeAt(h)===42?(m=rt,h++):(m=u,E===0&&A(Wl)),m!==u&&(R=a,m=ac(m)),a=m))),a}function Kv(){var a,m,_,x;return a=h,m=xd(),m!==u&&(R=a,m=ad(m)),a=m,a===u&&(a=h,m=gs(),m!==u?(P.charCodeAt(h)===45?(_=le,h++):(_=u,E===0&&A(Ua)),_!==u?(x=gs(),x!==u?(R=a,a=Pi()):(h=a,a=u)):(h=a,a=u)):(h=a,a=u),a===u&&(a=h,m=gs(),m!==u?(_=gs(),_!==u?(R=a,a=oc()):(h=a,a=u)):(h=a,a=u))),a}function xd(){var a,m,_,x;if(a=h,m=gs(),m!==u){if(_=[],Fs.test(P.charAt(h))?(x=P.charAt(h),h++):(x=u,E===0&&A(Jn)),x!==u)for(;x!==u;)_.push(x),Fs.test(P.charAt(h))?(x=P.charAt(h),h++):(x=u,E===0&&A(Jn));else _=u;_!==u?(x=gs(),x!==u?(R=a,a=_i(_)):(h=a,a=u)):(h=a,a=u)}else h=a,a=u;return a}function Pd(){var a,m,_,x,F,he,_e,ze,Rt,nn;return a=h,Dp(),m=Ee(),_=S1(),_===u&&(_=null),Ee(),x=I3(),x===u&&(x=null),Ee(),F=A3(),F!==u?(Ee(),he=eb(),he===u&&(he=null),_e=x3(),_e===u&&(_e=null),Ee(),ze=S1(),ze===u&&(ze=null),Ee(),Rt=Hv(),Rt===u&&(Rt=null),nn=Pd(),nn===u&&(nn=null),R=a,a=lc(_,x,F,he,_e,ze,Rt,nn)):(h=a,a=u),a===u&&(a=h,Ee(),m=P3(),m!==u?(_=Ee(),R=a,a=Yo(m)):(h=a,a=u)),a}function x3(){var a,m,_,x;return a=h,m=Yv(),m!==u?(P.charCodeAt(h)===61?(_=pt,h++):(_=u,E===0&&A(mn)),_!==u?(x=Xv(),x!==u?(m=[m,_,x],a=m):(h=a,a=u)):(h=a,a=u)):(h=a,a=u),a}function P3(){var a,m;return a=h,m=Lv(),m!==u&&(R=a,m=od(m)),a=m,a}function S1(){var a,m,_,x,F;if(a=h,m=R1(),m!==u){for(_=[],x=h,Ee(),F=R1(),F!==u?(R=x,x=Xo(m,F)):(h=x,x=u);x!==u;)_.push(x),x=h,Ee(),F=R1(),F!==u?(R=x,x=Xo(m,F)):(h=x,x=u);R=a,a=cc(m,_)}else h=a,a=u;return a}function R1(){var a,m,_,x;return a=h,m=zv(),m!==u?(_=Gv(),_!==u?(R=a,a=ks()):(h=a,a=u)):(h=a,a=u),a===u&&(a=h,m=zv(),m!==u?(_=Vs(),_!==u?(x=Gv(),x!==u?(R=a,a=ki(_)):(h=a,a=u)):(h=a,a=u)):(h=a,a=u),a===u&&(a=h,m=_3(),m!==u&&(R=a,m=Cr(m)),a=m)),a}function Vs(){var a,m,_,x,F,he,_e,ze,Rt,nn,It,at,Gn;if(a=h,m=Ee(),_=Zo(),_!==u)if(P.substr(h,4)===tn?(x=tn,h+=4):(x=u,E===0&&A(Kn)),x!==u)if(F=wc(),F!==u)if(he=k3(),he===u&&(he=null),_e=Ee(),ze=za(),ze!==u){for(Rt=Ee(),nn=[],It=h,at=Vs(),at!==u&&(R=It,at=Ns(he,at)),It=at;It!==u;)nn.push(It),It=h,at=Vs(),at!==u&&(R=It,at=Ns(he,at)),It=at;R=a,a=xp(he,nn)}else h=a,a=u;else h=a,a=u;else h=a,a=u;else h=a,a=u;if(a===u){if(a=h,m=Ee(),_=Zo(),_!==u)if(P.substr(h,4)===an?(x=an,h+=4):(x=u,E===0&&A(Qn)),x!==u)if(F=wc(),F!==u)if(he=N3(),he===u&&(he=null),_e=Ee(),ze=za(),ze!==u){for(Rt=Ee(),nn=[],It=h,at=Vs(),at!==u&&(R=It,at=uc(he,at)),It=at;It!==u;)nn.push(It),It=h,at=Vs(),at!==u&&(R=It,at=uc(he,at)),It=at;R=a,a=ld(he,nn)}else h=a,a=u;else h=a,a=u;else h=a,a=u;else h=a,a=u;if(a===u){if(a=h,m=Ee(),_=Zo(),_!==u)if(P.charCodeAt(h)===37?(x=fn,h++):(x=u,E===0&&A(Ba)),x!==u)if(F=S3(),F!==u)if(he=wc(),he!==u)if(_e=Vv(),_e!==u)if(ze=Ee(),Rt=za(),Rt!==u){for(nn=Ee(),It=[],at=h,Gn=Vs(),Gn!==u&&(R=at,Gn=Pp(F,_e,Gn)),at=Gn;at!==u;)It.push(at),at=h,Gn=Vs(),Gn!==u&&(R=at,Gn=Pp(F,_e,Gn)),at=Gn;R=a,a=Ni(F,_e,It)}else h=a,a=u;else h=a,a=u;else h=a,a=u;else h=a,a=u;else h=a,a=u;else h=a,a=u;if(a===u){if(a=h,m=Ee(),_=Zo(),_!==u)if(P.charCodeAt(h)===37?(x=fn,h++):(x=u,E===0&&A(Ba)),x!==u)if(F=R3(),F!==u)if(he=wc(),he!==u)if(_e=T3(),_e!==u)if(ze=Ee(),Rt=za(),Rt!==u){for(nn=Ee(),It=[],at=h,Gn=Vs(),Gn!==u&&(R=at,Gn=cd(F,_e,Gn)),at=Gn;at!==u;)It.push(at),at=h,Gn=Vs(),Gn!==u&&(R=at,Gn=cd(F,_e,Gn)),at=Gn;R=a,a=ud(F,_e,It)}else h=a,a=u;else h=a,a=u;else h=a,a=u;else h=a,a=u;else h=a,a=u;else h=a,a=u;if(a===u){if(a=h,m=Ee(),_=Zo(),_!==u)if(P.substr(h,5)===Et?(x=Et,h+=5):(x=u,E===0&&A(Ko)),x!==u)if(F=wc(),F!==u)if(he=Up(),_e=Ee(),ze=za(),ze!==u){for(Rt=Ee(),nn=[],It=h,at=Vs(),at!==u&&(R=It,at=Ci(he,at)),It=at;It!==u;)nn.push(It),It=h,at=Vs(),at!==u&&(R=It,at=Ci(he,at)),It=at;R=a,a=dd(he,nn)}else h=a,a=u;else h=a,a=u;else h=a,a=u;else h=a,a=u;if(a===u){if(a=h,m=Ee(),_=Zo(),_!==u)if(P.charCodeAt(h)===37?(x=fn,h++):(x=u,E===0&&A(Ba)),x!==u)if(F=Up(),he=wc(),he!==u){if(_e=[],ze=qv(),ze!==u)for(;ze!==u;)_e.push(ze),ze=qv();else _e=u;if(_e!==u)if(ze=za(),ze!==u){for(Rt=Ee(),nn=[],It=h,at=Vs(),at!==u&&(R=It,at=Si(F,_e,at)),It=at;It!==u;)nn.push(It),It=h,at=Vs(),at!==u&&(R=It,at=Si(F,_e,at)),It=at;R=a,a=_p(F,_e,nn)}else h=a,a=u;else h=a,a=u}else h=a,a=u;else h=a,a=u;else h=a,a=u;if(a===u){if(a=h,m=[],_=Fv(),_!==u)for(;_!==u;)m.push(_),_=Fv();else m=u;if(m!==u){for(_=[],x=h,F=Ee(),he=Vs(),he!==u?(R=x,x=hd(m,he)):(h=x,x=u);x!==u;)_.push(x),x=h,F=Ee(),he=Vs(),he!==u?(R=x,x=hd(m,he)):(h=x,x=u);R=a,a=fd(m,_)}else h=a,a=u}}}}}}return a}function Fv(){var a,m,_,x;return a=h,m=h,E++,P.substr(h,2)===yn?(_=yn,h+=2):(_=u,E===0&&A(Fo)),E--,_===u?m=void 0:(h=m,m=u),m!==u?(_=h,E++,P.charCodeAt(h)===125?(x=Li,h++):(x=u,E===0&&A(_f)),E--,x===u?_=void 0:(h=_,_=u),_!==u?(P.length>h?(x=P.charAt(h),h++):(x=u,E===0&&A(Zn)),x!==u?(R=a,a=dc(x)):(h=a,a=u)):(h=a,a=u)):(h=a,a=u),a}function qv(){var a,m,_;return a=h,m=h,E++,_=za(),E--,_===u?m=void 0:(h=m,m=u),m!==u?(P.length>h?(_=P.charAt(h),h++):(_=u,E===0&&A(Zn)),_!==u?(R=a,a=l1(_)):(h=a,a=u)):(h=a,a=u),a}function _3(){var a,m,_,x;if(a=h,m=C3(),m!==u){for(_=[],ar.test(P.charAt(h))?(x=P.charAt(h),h++):(x=u,E===0&&A(Yl));x!==u;)_.push(x),ar.test(P.charAt(h))?(x=P.charAt(h),h++):(x=u,E===0&&A(Yl));x=f3(),x!==u?(R=a,a=c1(_)):(h=a,a=u)}else h=a,a=u;return a}function k3(){var a,m,_,x,F,he,_e;if(a=h,m=T1(),m!==u){for(Ee(),_=[],x=h,P.charCodeAt(h)===44?(F=Ki,h++):(F=u,E===0&&A($a)),F!==u?(he=Ee(),_e=T1(),_e!==u?(F=[F,he,_e],x=F):(h=x,x=u)):(h=x,x=u);x!==u;)_.push(x),x=h,P.charCodeAt(h)===44?(F=Ki,h++):(F=u,E===0&&A($a)),F!==u?(he=Ee(),_e=T1(),_e!==u?(F=[F,he,_e],x=F):(h=x,x=u)):(h=x,x=u);R=a,a=kp(m,_)}else h=a,a=u;return a}function T1(){var a,m,_;return a=h,m=Qv(),m!==u?(_=j1(),_!==u?(R=a,a=Np(m,_)):(h=a,a=u)):(h=a,a=u),a}function N3(){var a,m,_,x,F,he,_e;if(a=h,m=E1(),m!==u){for(Ee(),_=[],x=h,P.charCodeAt(h)===44?(F=Ki,h++):(F=u,E===0&&A($a)),F!==u?(he=Ee(),_e=E1(),_e!==u?(F=[F,he,_e],x=F):(h=x,x=u)):(h=x,x=u);x!==u;)_.push(x),x=h,P.charCodeAt(h)===44?(F=Ki,h++):(F=u,E===0&&A($a)),F!==u?(he=Ee(),_e=E1(),_e!==u?(F=[F,he,_e],x=F):(h=x,x=u)):(h=x,x=u);R=a,a=Ji(m,_)}else h=a,a=u;return a}function E1(){var a,m,_,x;return a=h,m=Qv(),m!==u?(_=j1(),_!==u?(x=j1(),x!==u?(R=a,a=u1(m,_,x)):(h=a,a=u)):(h=a,a=u)):(h=a,a=u),a}function Qv(){var a,m;return a=h,P.charCodeAt(h)===89?(m=mm,h++):(m=u,E===0&&A(Mu)),m!==u&&(R=a,m=Qa()),a=m,a===u&&(a=h,P.charCodeAt(h)===71?(m=Xc,h++):(m=u,E===0&&A(Dr)),m!==u&&(R=a,m=Cp()),a=m,a===u&&(a=h,P.charCodeAt(h)===82?(m=vm,h++):(m=u,E===0&&A(dr)),m!==u&&(R=a,m=Rn()),a=m,a===u&&(a=h,P.charCodeAt(h)===66?(m=wa,h++):(m=u,E===0&&A(Hi)),m!==u&&(R=a,m=d1()),a=m,a===u&&(a=h,P.charCodeAt(h)===79?(m=bm,h++):(m=u,E===0&&A(qo)),m!==u&&(R=a,m=Sp()),a=m,a===u&&(a=h,P.charCodeAt(h)===67?(m=ym,h++):(m=u,E===0&&A(Du)),m!==u&&(R=a,m=h1()),a=m))))),a}function j1(){var a,m,_;return a=h,m=Va(),m!==u?(_=Wa(),_!==u?(R=a,a=f1(m,_)):(h=a,a=u)):(h=a,a=u),a}function zv(){var a;return P.charCodeAt(h)===123?(a=wm,h++):(a=u,E===0&&A(Ou)),a}function Gv(){var a;return P.charCodeAt(h)===125?(a=Li,h++):(a=u,E===0&&A(_f)),a}function Zo(){var a;return P.charCodeAt(h)===91?(a=xm,h++):(a=u,E===0&&A(kf)),a}function za(){var a;return P.charCodeAt(h)===93?(a=wh,h++):(a=u,E===0&&A(Nf)),a}function C3(){var a;return P.charCodeAt(h)===59?(a=Pm,h++):(a=u,E===0&&A(Cf)),a}function S3(){var a,m;return a=h,P.substr(h,3)===xh?(m=xh,h+=3):(m=u,E===0&&A(Sf)),m!==u&&(R=a,m=Rp()),a=m,a===u&&(a=h,P.substr(h,3)===Ph?(m=Ph,h+=3):(m=u,E===0&&A(Rf)),m!==u&&(R=a,m=Tp()),a=m,a===u&&(a=h,P.substr(h,3)===_h?(m=_h,h+=3):(m=u,E===0&&A(Tf)),m!==u&&(R=a,m=p1()),a=m)),a}function R3(){var a,m;return a=h,P.substr(h,3)===Tl?(m=Tl,h+=3):(m=u,E===0&&A(Ef)),m!==u&&(R=a,m=fr()),a=m,a}function Vv(){var a,m,_,x,F;return a=h,m=Wv(),m===u&&(m=null),_=Ga(),_!==u?(x=Ga(),x===u&&(x=null),F=Uv(),F===u&&(F=null),R=a,a=pd(m,_,x,F)):(h=a,a=u),a}function T3(){var a,m,_,x;return a=h,m=Wv(),m===u&&(m=null),_=Ga(),_!==u?(x=Ga(),x===u&&(x=null),R=a,a=g1(m,_,x)):(h=a,a=u),a}function Wv(){var a,m,_;return a=h,m=E3(),m!==u?(_=j3(),_===u&&(_=null),R=a,a=Ri(m,_)):(h=a,a=u),a}function E3(){var a,m,_,x;return a=h,m=Ga(),m!==u?(_=Ga(),_===u&&(_=null),P.charCodeAt(h)===58?(x=Ir,h++):(x=u,E===0&&A(ur)),x!==u?(R=a,a=hc(m,_)):(h=a,a=u)):(h=a,a=u),a}function j3(){var a,m,_,x;return a=h,m=Ga(),m!==u?(_=Ga(),_===u&&(_=null),P.charCodeAt(h)===58?(x=Ir,h++):(x=u,E===0&&A(ur)),x!==u?(R=a,a=Zi(m,_)):(h=a,a=u)):(h=a,a=u),a}function Ga(){var a,m;return a=h,Fs.test(P.charAt(h))?(m=P.charAt(h),h++):(m=u,E===0&&A(Jn)),m!==u&&(R=a,m=fc(m)),a=m,a}function Hv(){var a,m,_,x,F;return a=h,m=Yv(),m!==u?(_=Pd(),_!==u?(x=Xv(),x!==u?(Ee(),F=Hv(),F===u&&(F=null),R=a,a=gd(_,F)):(h=a,a=u)):(h=a,a=u)):(h=a,a=u),a}function Yv(){var a;return P.charCodeAt(h)===40?(a=_m,h++):(a=u,E===0&&A(jf)),a}function Xv(){var a;return P.charCodeAt(h)===41?(a=km,h++):(a=u,E===0&&A(Qo)),a}function I3(){var a,m,_,x,F;if(a=h,m=ti(),m!==u){for(_=[],x=Zv();x!==u;)_.push(x),x=Zv();for(x=[],F=Jv();F!==u;)x.push(F),F=Jv();R=a,a=md(m)}else h=a,a=u;return a}function Jv(){var a;return P.charCodeAt(h)===46?(a=hi,h++):(a=u,E===0&&A(wi)),a}function ti(){var a,m,_;if(E++,a=h,m=[],Fs.test(P.charAt(h))?(_=P.charAt(h),h++):(_=u,E===0&&A(Jn)),_!==u)for(;_!==u;)m.push(_),Fs.test(P.charAt(h))?(_=P.charAt(h),h++):(_=u,E===0&&A(Jn));else m=u;return m!==u&&(R=a,m=m1(m)),a=m,E--,a===u&&(m=u,E===0&&A(If)),a}function Zv(){var a,m,_;if(a=h,m=[],P.charCodeAt(h)===32?(_=kh,h++):(_=u,E===0&&A(zo)),_!==u)for(;_!==u;)m.push(_),P.charCodeAt(h)===32?(_=kh,h++):(_=u,E===0&&A(zo));else m=u;return m!==u&&(R=a,m=vd()),a=m,a}function A3(){var a,m,_,x,F,he,_e,ze,Rt;return a=h,m=Bp(),m===u&&(m=null),_=h,E++,x=D3(),E--,x!==u?(h=_,_=void 0):_=u,_!==u?(x=tb(),x!==u?(F=A1(),F===u&&(F=null),he=Va(),he!==u?(_e=Wa(),_e!==u?(ze=I1(),ze===u&&(ze=null),Rt=_d(),Rt===u&&(Rt=null),Ee(),P.substr(h,4)===Nh?h+=4:E===0&&A(Xl),R=a,a=v1(m,x,F,he,_e,ze,Rt)):(h=a,a=u)):(h=a,a=u)):(h=a,a=u)):(h=a,a=u),a===u&&(a=h,m=Bp(),m===u&&(m=null),_=Va(),_!==u?(x=Wa(),x!==u?(F=U3(),F===u&&(F=null),he=Va(),he!==u?(_e=Wa(),_e!==u?(ze=I1(),ze===u&&(ze=null),Rt=_d(),Rt===u&&(Rt=null),R=a,a=Ep(m,_,x,F,he,_e,ze,Rt)):(h=a,a=u)):(h=a,a=u)):(h=a,a=u)):(h=a,a=u),a===u&&(a=h,m=Bp(),m===u&&(m=null),_=A1(),_===u&&(_=null),x=Va(),x!==u?(F=Wa(),F!==u?(he=I1(),he===u&&(he=null),_e=_d(),_e===u&&(_e=null),R=a,a=jp(m,_,x,F,he,_e)):(h=a,a=u)):(h=a,a=u),a===u&&(a=h,P.substr(h,5)===Ch?(m=Ch,h+=5):(m=u,E===0&&A(Af)),m!==u?(_=_d(),_===u&&(_=null),R=a,a=pc(_)):(h=a,a=u),a===u&&(a=h,P.substr(h,3)===Sh?(m=Sh,h+=3):(m=u,E===0&&A(Uu)),m!==u?(_=_d(),_===u&&(_=null),R=a,a=gc(_)):(h=a,a=u),a===u&&(a=h,m=Bp(),m!==u?(P.charCodeAt(h)===64?(_=Nm,h++):(_=u,E===0&&A(Mf)),_!==u?(x=Va(),x!==u?(F=Wa(),F!==u?(R=a,a=Ip(m,x,F)):(h=a,a=u)):(h=a,a=u)):(h=a,a=u)):(h=a,a=u),a===u&&(a=h,P.substr(h,2)===Rh?(m=Rh,h+=2):(m=u,E===0&&A(Df)),m!==u&&(R=a,m=bd()),a=m)))))),a}function _d(){var a,m,_,x;return a=h,m=h,_=h,E++,P.substr(h,2)===El?(x=El,h+=2):(x=u,E===0&&A(Bu)),E--,x===u?_=void 0:(h=_,_=u),_!==u?(P.charCodeAt(h)===43?(x=Le,h++):(x=u,E===0&&A(Lo)),x!==u?(_=[_,x],m=_):(h=m,m=u)):(h=m,m=u),m!==u&&(R=a,m=b1(m)),a=m,a===u&&(a=h,m=h,_=h,E++,P.substr(h,3)===Th?(x=Th,h+=3):(x=u,E===0&&A(Of)),E--,x===u?_=void 0:(h=_,_=u),_!==u?(P.charCodeAt(h)===35?(x=Cm,h++):(x=u,E===0&&A($u)),x!==u?(_=[_,x],m=_):(h=m,m=u)):(h=m,m=u),m!==u&&(R=a,m=Ap(m)),a=m),a}function I1(){var a,m;return a=h,P.charCodeAt(h)===61?h++:E===0&&A(mn),m=O3(),m!==u?(R=a,a=yd(m)):(h=a,a=u),a}function eb(){var a,m,_;return a=h,m=M3(),m!==u?(Ee(),_=eb(),_===u&&(_=null),R=a,a=mc(m,_)):(h=a,a=u),a}function M3(){var a,m,_;return a=h,P.charCodeAt(h)===36?(m=Jc,h++):(m=u,E===0&&A(Uf)),m!==u?(_=ti(),_!==u?(R=a,a=wd(_)):(h=a,a=u)):(h=a,a=u),a===u&&(a=h,P.substr(h,2)===xa?(m=xa,h+=2):(m=u,E===0&&A(Bf)),m!==u&&(R=a,m=vc()),a=m,a===u&&(a=h,P.substr(h,2)===Eh?(m=Eh,h+=2):(m=u,E===0&&A($f)),m!==u&&(R=a,m=Mp()),a=m,a===u&&(a=h,P.substr(h,2)===Zc?(m=Zc,h+=2):(m=u,E===0&&A(Gm)),m!==u&&(R=a,m=y1()),a=m,a===u&&(a=h,P.substr(h,2)===eu?(m=eu,h+=2):(m=u,E===0&&A(Lf)),m!==u&&(R=a,m=bc()),a=m,a===u&&(a=h,P.charCodeAt(h)===33?(m=jh,h++):(m=u,E===0&&A(Vm)),m!==u&&(R=a,m=w1()),a=m,a===u&&(a=h,P.charCodeAt(h)===63?(m=ee,h++):(m=u,E===0&&A(xn)),m!==u&&(R=a,m=Jo()),a=m,a===u&&(a=h,P.charCodeAt(h)===8252?(m=Ih,h++):(m=u,E===0&&A(Wm)),m!==u&&(R=a,m=x1()),a=m,a===u&&(a=h,P.charCodeAt(h)===8263?(m=Ah,h++):(m=u,E===0&&A(Kf)),m!==u&&(R=a,m=yc()),a=m,a===u&&(a=h,P.charCodeAt(h)===8265?(m=Pa,h++):(m=u,E===0&&A(Ff)),m!==u&&(R=a,m=s()),a=m,a===u&&(a=h,P.charCodeAt(h)===8264?(m=Sm,h++):(m=u,E===0&&A(qf)),m!==u&&(R=a,m=i()),a=m,a===u&&(a=h,P.charCodeAt(h)===9633?(m=Rm,h++):(m=u,E===0&&A(Jl)),m!==u&&(R=a,m=c()),a=m,a===u&&(a=h,P.charCodeAt(h)===61?(m=pt,h++):(m=u,E===0&&A(mn)),m!==u&&(R=a,m=p()),a=m,a===u&&(a=h,P.charCodeAt(h)===8734?(m=Tm,h++):(m=u,E===0&&A(Hm)),m!==u&&(R=a,m=v()),a=m,a===u&&(a=h,P.charCodeAt(h)===10866?(m=Mh,h++):(m=u,E===0&&A(Ym)),m!==u&&(R=a,m=y()),a=m,a===u&&(a=h,P.charCodeAt(h)===10865?(m=Dh,h++):(m=u,E===0&&A(Xm)),m!==u&&(R=a,m=S()),a=m,a===u&&(a=h,P.charCodeAt(h)===177?(m=Ro,h++):(m=u,E===0&&A(_r)),m!==u&&(R=a,m=D()),a=m,a===u&&(a=h,P.charCodeAt(h)===8723?(m=To,h++):(m=u,E===0&&A(Lu)),m!==u&&(R=a,m=L()),a=m,a===u&&(a=h,P.substr(h,2)===El?(m=El,h+=2):(m=u,E===0&&A(Bu)),m!==u&&(R=a,m=te()),a=m,a===u&&(a=h,P.substr(h,2)===Oh?(m=Oh,h+=2):(m=u,E===0&&A(Zl)),m!==u&&(R=a,m=Pe()),a=m,a===u&&(a=h,P.charCodeAt(h)===10752?(m=jl,h++):(m=u,E===0&&A(Qf)),m!==u&&(R=a,m=Ne()),a=m,a===u&&(a=h,P.charCodeAt(h)===10227?(m=Em,h++):(m=u,E===0&&A(zf)),m!==u&&(R=a,m=we()),a=m,a===u&&(a=h,P.charCodeAt(h)===8594?(m=Uh,h++):(m=u,E===0&&A(Gf)),m!==u&&(R=a,m=Fe()),a=m,a===u&&(a=h,P.charCodeAt(h)===8593?(m=tu,h++):(m=u,E===0&&A(Ku)),m!==u&&(R=a,m=Ge()),a=m,a===u&&(a=h,P.charCodeAt(h)===8646?(m=nu,h++):(m=u,E===0&&A(La)),m!==u&&(R=a,m=We()),a=m,a===u&&(a=h,P.charCodeAt(h)===68?(m=Bh,h++):(m=u,E===0&&A(Fu)),m!==u&&(R=a,m=An()),a=m))))))))))))))))))))))))),a}function tb(){var a;return a=Va(),a===u&&(a=Wa()),a}function D3(){var a,m,_,x,F;return a=h,m=tb(),m!==u?(_=A1(),_===u&&(_=null),x=Va(),x!==u?(F=Wa(),F!==u?(m=[m,_,x,F],a=m):(h=a,a=u)):(h=a,a=u)):(h=a,a=u),a}function Bp(){var a;return Eo.test(P.charAt(h))?(a=P.charAt(h),h++):(a=u,E===0&&A(qu)),a}function O3(){var a;return Kh.test(P.charAt(h))?(a=P.charAt(h),h++):(a=u,E===0&&A(Jm)),a}function Va(){var a;return Fh.test(P.charAt(h))?(a=P.charAt(h),h++):(a=u,E===0&&A(Vf)),a}function Wa(){var a;return qh.test(P.charAt(h))?(a=P.charAt(h),h++):(a=u,E===0&&A(Wf)),a}function A1(){var a;return P.charCodeAt(h)===120?(a=su,h++):(a=u,E===0&&A(Qu)),a}function U3(){var a;return P.charCodeAt(h)===120?(a=su,h++):(a=u,E===0&&A(Qu)),a===u&&(P.charCodeAt(h)===45?(a=le,h++):(a=u,E===0&&A(Ua))),a}var $p=[];function pr(a){var m=Object.assign(a,gt());return $p.push(m),m}function M1(a){return parseInt(a.join(""),10)}function el(a){return a.join("").match(/\?/)?a.join(""):M1(a)}function Ha(a){var m={};return a.forEach(function(_){for(var x in _)Array.isArray(_[x])?m[x]=m[x]?m[x].concat(_[x]):_[x]:m[x]=m[x]?sb(m[x])+" "+nb(_[x]):_[x]}),m}function nb(a){if(typeof a!="string")return a;var m=/^\s+/;return a.replace(m,"")}function sb(a){if(typeof a!="string")return a;var m=/\s+$/;return a.replace(m,"")}if(it=be(),it!==u&&h===P.length)return it;throw it!==u&&h<P.length&&A(P1()),A_(He,ke<P.length?P.charAt(ke):null,ke<P.length?_1(ke,ke+1):_1(ke,ke))}return{SyntaxError:Q,parse:X}})})(d);var f=d.exports,g=o(f);function b(M,$){return!$||$.startRule==="games"?C(M,$):w(M,$)}function w(M,$={startRule:"game"}){M=M.trim();let Q=g.parse(M,$),ae={moves:[],messages:[]};if($.startRule==="pgn"){let X=Q;ae.moves=X}else if($.startRule==="tags"){let X=Q;ae.tags=X}else ae=Q;return k(ae,M,$)}function k(M,$,Q){function ae(P){if(Q.startRule!=="tags"){let W=P.moves[P.moves.length-1];if(typeof W=="string"&&(P.moves.pop(),P.tags)){let u=P.tags.Result;u&&W!==u&&P.messages.push({key:"Result",value:u,message:"Result in tags is different to result in SAN"}),P.tags.Result=W}}return P}function X(P){function W(u){function ye(Me){return Me.split(/\s+/)[1]}function ve(Me,Ce){function $e(ce){return ce==="w"?"b":"w"}return Me.turn=Ce,Me.variations&&Me.variations.forEach(function(ce){let ue=Ce;ce.forEach(ne=>ue=ve(ne,ue))}),$e(Ce)}let Ye=Q.fen||u.tags&&u.tags.FEN||"rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR w KQkq - 0 1",me=ye(Ye);return u.moves.forEach(Me=>me=ve(Me,me)),u}return P.moves?W(P):P}return X(ae(M))}function C(M,$={startRule:"games"}){function Q(W){if(!Array.isArray(W))return[];if(W.length===0)return W;let u=W.pop();return(u.tags!==void 0||u.moves.length>0)&&W.push(u),W}function ae(W,u,ye={startRule:"games"}){return Q(W)}const X=Object.assign({startRule:"games"},$);let P=g.parse(M,X);return P?(ae(P,M,X),P.forEach(W=>{k(W,M,X)}),P):[]}const N=(M,$=`
`)=>M.replace(/\r?\n/g,$);function j(M,$={startRule:"games"}){let Q=N(M).split(`

`),ae=[],X={tags:"",pgn:"",all:""};return Q.forEach(function(P){if(P.startsWith("["))X.tags=P;else if(P){X.pgn=P;let W=X.tags?X.tags+`

`+X.pgn:X.pgn;X.all=W,ae.push(X),X={tags:"",pgn:"",all:""}}}),ae}n.parse=b,n.parseGame=w,n.parseGames=C,n.split=j,Object.defineProperty(n,"__esModule",{value:!0})}))})(Md,Md.exports)),Md.exports}var cj=lj(),uj=vw();function T_(t){const e=t.trim(),n=e.startsWith("http")?e:`https://${e}`;try{return new URL(n)}catch{return null}}function dj(t){if(!t)return null;const e=t.searchParams.get("t")??t.searchParams.get("start");if(!e)return null;const n=Number(e);if(Number.isFinite(n)&&n>=0)return Math.floor(n);const r=e.match(/(?:(\d+)h)?(?:(\d+)m)?(?:(\d+)s?)?/i);if(!r)return null;const[,o,d,f]=r,g=Number(o)||0,b=Number(d)||0,w=Number(f)||0,k=g*3600+b*60+w;return k>0?k:null}function Hp(t){if(!t)return null;const e=t.trim().replace(/[^-\w]/g,"");return e?e.length>11?e.slice(0,11):e:null}function hj(t){const e=T_(t),n=dj(e)??void 0,r=e?.hostname.replace(/^www\./,"")||"",o=e?.pathname.split("/").filter(Boolean)||[];if(r==="youtu.be"&&o[0]){const g=Hp(o[0]);if(g)return{id:g,startSeconds:n}}if(r.endsWith("youtube.com")||r.endsWith("youtube-nocookie.com")){const g=Hp(e?.searchParams.get("v"));if(g)return{id:g,startSeconds:n};if(o.length>=2&&["embed","shorts","live","v"].includes(o[0])){const b=Hp(o[1]);if(b)return{id:b,startSeconds:n}}}const d=t.match(/(?:v=|youtu\.be\/|embed\/|shorts\/|live\/)([\w-]{6,})/i),f=Hp(d?.[1]);return f?{id:f,startSeconds:n}:null}function nw(t){if(!t)return null;const e=t.trim();if(!e)return null;const n=hj(e);if(n){const r=new URLSearchParams({rel:"0",modestbranding:"1"});return typeof n.startSeconds=="number"&&r.set("start",String(n.startSeconds)),{type:"youtube",src:`https://www.youtube-nocookie.com/embed/${n.id}?${r.toString()}`}}return{type:"html5",src:e}}function lg(t,e){try{return t.move(e,{sloppy:!0})}catch{return null}}function E_(t){const e=t.trim().split(/\s+/);for(;e.length<6;)e.length===0?e.push(""):e.length===1?e.push("w"):e.length===2?e.push("KQkq"):e.length===3?e.push("-"):e.push(e.length===4?"0":"1");const[n,r,o,d,f,g]=e.slice(0,6),b=r?.toLowerCase()==="b"?"b":"w",w=/^(K?Q?k?q?|-)$/i.test(o)?o:"-",k=/^([a-h][36]|-)$/i.test(d)?d:"-",C=Number.isFinite(Number(f))?String(Number(f)):"0",N=Number.isFinite(Number(g))&&Number(g)>0?String(Number(g)):"1";return[n,b,w||"-",k||"-",C,N].join(" ")}function X0(t){if(!t)return null;try{const e=new wt;return e.load(t)===!1?null:e.fen()}catch{return null}}function Pc(t){if(t)try{return new wt(t)}catch{}return new wt}function sa(t){const e=t?E_(t):null;return X0(e)||new wt().fen()}function sw(t){const n=[t?.fen,t?.FEN,t?.startFen,t?.startFEN,t?.boardFen,t?.fenString,t?.position,t?.puzzleFen,t?.quizQuestions?.[0]?.fen,t?.quizQuestions?.[0]?.FEN,t?.quizQuestions?.[0]?.startFen,t?.quizQuestions?.[0]?.startFEN,t?.quizQuestions?.[0]?.fenString,t?.quizQuestions?.[0]?.position,t?.questions?.[0]?.fen,t?.questions?.[0]?.FEN,t?.questions?.[0]?.startFen,t?.questions?.[0]?.startFEN,t?.questions?.[0]?.fenString,t?.questions?.[0]?.position].find(r=>typeof r=="string"&&r.trim().length>0);return n?E_(n):null}function fj(t){return t.replace(/\s+/g," ").trim()}function pj(t){return t.split(/\r?\n/).filter(e=>!e.trim().startsWith("[")).join(" ").replace(/;.*/g,"")}function gj(t){let e="",n=0;for(let r=0;r<t.length;r++){const o=t[r];if(o==="("){n++;continue}if(o===")"){n>0&&n--;continue}n===0&&(e+=o)}return e}function mj(t){return t.split(/\s+/).filter(Boolean)}function rw(t){let e=t.replace(/\u2026/g,"...");return e=e.replace(/^\d+\.(\.\.)?/,""),e=e.replace(/[!?+#]+$/g,""),/^\$?\d+$/.test(e.trim())?"":e.trim()}function iw(t){return/^\d+\.+$/.test(t)||/^\d+\.\.\.$/.test(t)}function aw(t){return t==="1-0"||t==="0-1"||t==="1/2-1/2"||t==="*"}function vj(t,e){const n=sa(e),r=()=>Pc(n);try{const d=cj.parse(t,{startRule:"games",sloppy:!0})?.[0];if(!d?.moves)return{mainline:[],rootVariations:[],variationMap:{}};const f={},g=(k,C,N)=>{const j=[];return k.forEach(M=>{const $=C.fen(),ae=(M?.notation?.notation||M?.move?.notation||M?.san||(typeof M?.move=="string"?M.move:"")||"")?.toString().trim();if(!ae)return;const X=M.variations?.map(u=>g(u,new wt(C.fen())))||[];X.length&&(f[$]=X,N&&N(X));const P=lg(C,ae);if(!P)return;const W={san:P.san,from:P.from,to:P.to,fen:C.fen(),comment:(M.commentAfter||M.comment||M.commentBefore||"").trim()||null,variations:X.length?X:[]};j.push(W)}),j},b=[],w=g(d.moves,r(),k=>b.push(...k));return d.variations?.length&&d.variations.forEach(k=>{b.push(g(k,r()))}),{mainline:w,rootVariations:b,variationMap:f}}catch{return{mainline:[],rootVariations:[],variationMap:{}}}}const ow=[{label:"P",color:"w",type:"p"},{label:"N",color:"w",type:"n"},{label:"B",color:"w",type:"b"},{label:"R",color:"w",type:"r"},{label:"Q",color:"w",type:"q"},{label:"K",color:"w",type:"k"},{label:"P",color:"b",type:"p"},{label:"N",color:"b",type:"n"},{label:"B",color:"b",type:"b"},{label:"R",color:"b",type:"r"},{label:"Q",color:"b",type:"q"},{label:"K",color:"b",type:"k"},{label:"",color:"w",type:"empty"}];function lw({id:t}){const e=ih(),{user:n}=$s(),[r,o]=fa(),d=$r(n?.boardTheme).colors,{key:f,pieces:g}=T.useMemo(()=>Tr(n?.pieceTheme),[n?.pieceTheme]),b=!!n?.isAdmin,w=T.useRef(new wt),k=T.useRef(null),C=T.useRef(null),[N,j]=T.useState(w.current.fen()),[M,$]=T.useState([]),[Q,ae]=T.useState(null),[X,P]=T.useState("w"),[W]=T.useState(!1),[u,ye]=T.useState(ow[0]),[ve,be]=T.useState(!1),[Ye,me]=T.useState(null),[Me,Ce]=T.useState(null),[$e,ce]=T.useState({}),[ue,ne]=T.useState(t||""),[V,z]=T.useState(null),[fe,oe]=T.useState(!1),[U,Z]=T.useState(null),[xe,Be]=T.useState(null),[Ze,Ve]=T.useState(!1),[O,ge]=T.useState(null),[Se,Te]=T.useState(null),[Ke,J]=T.useState(-1),[De,qe]=T.useState(null),[bt,Ie]=T.useState(null),[Xe,nt]=T.useState(!1),[Ut,Kt]=T.useState(null),[dt,Ft]=T.useState([]),[zt,Cn]=T.useState(null),[qn,xt]=T.useState(null),[vn,Mn]=T.useState(!1),[Ls,as]=T.useState(!1),[bn,os]=T.useState([]),[xs,Ps]=T.useState({}),[er,Bn]=T.useState({}),[Hn,ls]=T.useState({}),[Ks,$n]=T.useState(null),[Yn,kn]=T.useState(!1),[_s,ie]=T.useState(0),[lt,Pt]=T.useState(0),[Bt,Gt]=T.useState(!1),[H,sn]=T.useState(1),[jt,Yt]=T.useState(!1),[je,Dn]=T.useState(new Set),[Ct,G]=T.useState(null),[pe,de]=T.useState(null),[Ae,tt]=T.useState([]),[Re,Vt]=T.useState(!1),[$t,Nn]=T.useState(!1),[ht,st]=T.useState([]),[ft,St]=T.useState(new Set),[Tt,Xt]=T.useState(new Set),[qt,tr]=T.useState([]),Sn="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==",rn=I=>{typeof document>"u"||(document.body.style.cursor=I?`url(${rh}) 8 8, grabbing`:"")};T.useEffect(()=>()=>{rn(!1)},[]),T.useEffect(()=>{const I=()=>rn(!1);return window.addEventListener("mouseup",I),window.addEventListener("dragend",I),()=>{window.removeEventListener("mouseup",I),window.removeEventListener("dragend",I)}},[]),T.useEffect(()=>{const I=()=>rn(!1);return window.addEventListener("mouseup",I),window.addEventListener("dragend",I),()=>{window.removeEventListener("mouseup",I),window.removeEventListener("dragend",I)}},[]);const cs=T.useMemo(()=>{const K=new wt(N).board();return X==="w"?K:K.slice().reverse().map(ee=>ee.slice().reverse())},[N,X]),En=Ke===-1||Ke===M.length-1,en=O?.type==="study"||O?.type==="pgn";X==="w"?Array.from({length:8},(I,K)=>8-K):Array.from({length:8},(I,K)=>K+1);const Es=T.useMemo(()=>Q?new wt(N).moves({square:Q,verbose:!0}):[],[N,Q]),Jt=I=>I?I.color==="w"?g.w[I.type]:g.b[I.type]:null,un=I=>{if(!I)return"";if(f==="chesscom"){if(I.type==="p")return I.color==="w"?"scale-110":"scale-90";if(I.type==="k"&&I.color==="b")return"scale-110 translate-y-[1px]"}return f==="freestyle"&&I.type==="p"&&I.color==="b"?"scale-110":""},q=(I,K)=>{const ee="abcdefgh"[X==="w"?K:7-K],le=X==="w"?8-I:I+1;return`${ee}${le}`},re=(I,K)=>{if(G(null),de(null),tt([]),Dn(new Set),O?.type==="quiz")return;const ee=q(I,K);if(W){const rt=new wt;rt.load(N),u.type==="empty"?rt.remove(ee):rt.put({color:u.color,type:u.type},ee),j(rt.fen());return}if(Q===ee){ae(null);return}const le=new wt(N),Le=le.get(ee);if(Q){se(Q,ee);return}Le&&Le.color===le.turn()&&ae(ee)},se=(I,K)=>{if(O?.type==="quiz"||en){ae(null),Ce(null),rn(!1);return}if(W)return;if(!En){ae(null),Ce(null),rn(!1);return}const ee=new wt(N),le=ee.move({from:I,to:K,promotion:"q"});if(le){const Le=ee.fen();w.current=ee,$(rt=>{const hn=[...rt,{san:le.san,from:le.from,to:le.to,fen:Le}];return J(hn.length-1),Te(Le),hn}),j(Le)}ae(null)},et=T.useMemo(()=>{const I=[];return M.forEach((K,ee)=>{const le=Math.floor(ee/2);I[le]||(I[le]={}),ee%2===0?I[le].white=K:I[le].black=K}),I},[M]),Je=I=>{j(I.fen),ae(null),Ce(null);const K=M.findIndex(ee=>ee.fen===I.fen&&ee.from===I.from&&ee.to===I.to);K>=0&&J(K),Te(I.fen)};T.useEffect(()=>{ue||(oe(!0),yh("course-london").then(I=>{ne(I?.id||"course-london"),oe(!1)}))},[ue]),T.useEffect(()=>{if(!ue)return;oe(!0);const I=KE(ue,K=>{z(K),oe(!1)});return()=>I()},[ue]),T.useEffect(()=>{let I=!1;return(async()=>{if(!(!n||!ue))try{const ee=await P_(n.id,ue);if(I)return;St(new Set(ee?.completedLessonIds||[]))}catch{I||St(new Set)}})(),()=>{I=!0}},[n?.id,ue]),T.useEffect(()=>{xe?xe.type!=="video"&&qe(null):(qe(null),Ie(null))},[xe]);const kt=T.useMemo(()=>V?.chapters?Object.values(V.chapters).sort((I,K)=>I.index-K.index):[],[V]),us=I=>{ce(K=>({...K,[I]:!K[I]}))},nr=async()=>{!b||!ue||Z({mode:"create",title:"",index:kt.length})},kl=async I=>{!b||!ue||!window.confirm("Delete this chapter and its subsections?")||await y_(ue,I)},Nl=async(I,K)=>{!b||!ue||!window.confirm("Delete this subsection?")||await x_(ue,I,K)},ga=async(I,K)=>{if(!b||!ue)return;const ee=V?.chapters?.[I],le=ee?.subsections;if(!ee||!le)return;const Le=Object.values(le).sort((Et,yn)=>(Et.index??0)-(yn.index??0)),rt=Le.findIndex(Et=>Et.id===K);if(rt===-1)return;const hn=Le.map((Et,yn)=>`${yn+1}. ${Et.title||Et.id}`).join(`
`),Is=window.prompt(`Current order (top to bottom):
${hn}
Enter new position for "${Le[rt].title}":`,String(rt+1));if(Is==null)return;const jn=Number.parseInt(Is.trim(),10);if(!Number.isFinite(jn))return;const pt=Math.min(Math.max(jn,1),Le.length);if(pt===rt+1)return;const tn=[...Le],[an]=tn.splice(rt,1);tn.splice(pt-1,0,an);const fn=tn.map(Et=>Et.id);try{const Et=await u8(ue,I,fn);Et&&z(yn=>{const Li=yn,Ki=Li?.chapters?.[I];return!Li||!Ki?yn:{...Li,chapters:{...Li.chapters,[I]:{...Ki,subsections:Et}}}})}catch(Et){console.warn("Failed to reorder subsections",Et),window.alert("Could not reorder subsections. Please try again.")}},wo=async I=>{!n||!ue||I.type!=="quiz"&&(ft.has(I.id)||(St(K=>new Set(K).add(I.id)),await ig(n.id,ue,I.id,I.type)))},ma=(I,K)=>{$n(null);const ee=sa(K);j(ee);try{let{mainline:le,variationMap:Le}=vj(I,ee);if(!le.length){const jn=[I];for(const pt of jn){const tn=Pc(ee);if(tn.loadPgn(pt,{sloppy:!0})){const an=tn.history({verbose:!0}),fn=[],Et=Pc(ee);an.forEach(yn=>{Et.move(yn),fn.push({san:yn.san,from:yn.from,to:yn.to,fen:Et.fen(),comment:yn.comment||null,variations:[]})}),le=fn,Le={};break}}}if(!le.length){const jn=mj(I),pt=Pc(ee),tn=[];jn.forEach(an=>{if(an==="("||an===")"||typeof an=="object")return;const fn=rw(an);if(!fn||aw(fn)||iw(fn))return;const Et=lg(pt,fn);Et&&tn.push({san:Et.san,from:Et.from,to:Et.to,fen:pt.fen(),comment:null,variations:[]})}),tn.length&&(le=tn,Le={})}if(!le.length){const pt=fj(gj(pj(I))).replace(/\{[^}]*\}/g,"").split(/\s+/).filter(Boolean),tn=Pc(ee),an=[];pt.forEach(fn=>{const Et=rw(fn);if(!Et||aw(Et)||iw(Et))return;const yn=lg(tn,Et);yn&&an.push({san:yn.san,from:yn.from,to:yn.to,fen:tn.fen(),comment:null,variations:[]})}),an.length&&(le=an,Le={})}if(!le.length){$n("Could not load this PGN, falling back to empty board."),os([]),Ps({}),Bn({}),ls({}),$([]),J(-1),Te(null),j(ee),ae(null),Ce(null);return}const rt=jn=>{const pt={},tn={},an=Pc(ee);return jn.forEach((fn,Et)=>{const yn=an.fen();pt[yn]=fn,tn[yn]=Et,lg(an,fn.san)}),{map:pt,idxMap:tn}},{map:hn,idxMap:Is}=rt(le);os(le),Ps(Le),Bn(hn),ls(Is),$(le),J(-1),Te(null),j(ee),ae(null),Ce(null),$n(null)}catch(le){console.warn("Failed to load PGN",le),os([]),Ps({}),Bn({}),ls({}),$([]),J(-1),Te(null),j(ee),$n("Could not load this PGN. Try another file or share the PGN text.")}ae(null),Ce(null)},qr=I=>{if(ge(I),I.type==="study"||I.type==="pgn"){Ft([]),Cn(null),Kt(null),$n(null);const K=sa(I.fen);j(K),"pgn"in I&&I.pgn?ma(I.pgn,K):($([]),os([]),Ps({}),Bn({}),ls({}),J(-1),Te(null),ae(null),Ce(null));return}if(I.type==="quiz"){const K=sw(I),ee=X0(K)||new wt().fen();j(ee);const le=I.questions||[];Ft(le.map(()=>"")),Cn(null),xt(null),as(!1),Mn(!1),ae(null),Ce(null),$([]),os([]),J(-1),Te(null),$n(null),Kt(I.trainerNote?.trim()||null);return}else j(new wt().fen()),Ft([]),Cn(null),xt(null),as(!1),Mn(!1),ae(null),Ce(null),$([]),os([]),J(-1),Te(null),$n(null),Kt(I.type==="video"&&I.trainerNote?.trim()||null)};T.useEffect(()=>{const I=r.includes("?")?r.split("?")[1]??"":window.location.search.replace("?",""),K=new URLSearchParams(I).get("sub");if(!K||!kt.length||O?.id===K)return;const ee=kt.flatMap(le=>Object.values(le.subsections||{})).find(le=>le.id===K);ee&&qr(ee)},[r,kt,O?.id]),T.useEffect(()=>{if(O?.type!=="quiz")return;const I=sw(O),K=X0(I)||new wt().fen();j(K),ae(null),Ce(null)},[O]),T.useEffect(()=>{if(!en)return;const I=sa(O.fen);if(!M.length){J(-1),Te(null),j(I);return}const K=Ke>=0?M[Ke].fen:I;xs[K]?.length},[M,Ke,xs,j,O]),T.useEffect(()=>{if(!O){Kt(null);return}if(en){if(Ke>=0&&M[Ke]){const I=M[Ke].comment?.trim();Kt(I||null)}else Kt(null);return}if(O.type==="video"||O.type==="quiz"){const I=O.trainerNote?.trim();Kt(I||null);return}Kt(null)},[O,Ke,M]),T.useEffect(()=>{if(!en){st([]);return}if(Ke<0||!M.length){st([]);return}const I=M[Ke];st(I?[I.from,I.to]:[])},[O,Ke,M]);const Cl=()=>{if(!M.length)return;const I=Ke===-1?M.length-1:Math.max(0,Ke-1);J(I),Te(M[I].fen),j(M[I].fen),ae(null),Ce(null)},va=()=>{if(!M.length)return;const I=en?sa(O?.fen):new wt().fen();J(-1),Te(null),j(I),ae(null),Ce(null)},Qt=()=>{if(!M.length)return;const I=en?sa(O?.fen):new wt().fen(),K=Ke>=0?M[Ke].fen:I;if(xs[K]?.length)return;const ee=Ke===-1?0:Math.min(M.length-1,Ke+1);J(ee),Te(M[ee].fen),j(M[ee].fen),ae(null),Ce(null)},ba=M.length>0&&Ke>=0,xo=M.length>0&&Ke<M.length-1,ya=O?.type!=="video",oi=O?.type!=="video",dn=nw(O?.videoUrl),li=O?.type==="video",Ln=li&&O.videoUrl?.trim()||"",Bi=T.useMemo(()=>{if(!Ln)return"No video link provided yet.";if(Ln.startsWith("data:"))return"Embedded video file (data URL)";const I=T_(Ln);if(I){if(I.hostname.replace(/^www\./,"").includes("youtube"))return"Video ready";const K=I.hostname.replace(/^www\./,""),ee=I.pathname&&I.pathname!=="/"?I.pathname:"";return`Source: ${K}${ee}`}return Ln.length>80?`${Ln.slice(0,80)}...`:Ln},[Ln]),wr=!!Ln&&dn?.type!=="youtube";dn?.type==="html5"||dn?.type==="youtube"||dn?.type;const sr=dn?dn.type==="html5"?"Custom player using your hosted video file.":null:Ln?"We couldn't read this link. Use a direct MP4/WEBM/HLS URL or a YouTube link.":"No video URL yet. Add one from the section editor to start playback.";T.useEffect(()=>{if(!oi){me(null);return}const I=C.current;if(!I)return;const K=()=>{const le=Math.round(I.getBoundingClientRect().height);me(Le=>Le==null?le:Le===le?Le:Math.max(Le,le))};if(K(),typeof ResizeObserver>"u")return window.addEventListener("resize",K),()=>window.removeEventListener("resize",K);const ee=new ResizeObserver(K);return ee.observe(I),()=>ee.disconnect()},[oi]);const js=600,Qr=en&&Ks?Ks:O?.type==="quiz"?"Answer the questions below":null,zr=(I,K)=>{const ee=q(I,K);Dn(le=>{const Le=new Set(le);return Le.has(ee)?Le.delete(ee):Le.add(ee),Le})},xr=(I,K)=>{const ee=q(I,K);G({row:I,col:K,square:ee}),de(null),Vt(!1)},Po=(I,K,ee)=>{if(!Ct||ee!==2)return;const le=q(I,K);if(Ct.square===le){Vt(!1),de(null);return}Vt(!0),de({row:I,col:K,square:le})},_o=()=>{Ct&&Re&&pe?(tt(I=>[...I,{start:Ct,end:pe}]),Nn(!0)):Ct&&!Re&&(zr(Ct.row,Ct.col),Nn(!0)),Vt(!1),G(null),de(null)},Gr=()=>{kn(!1),ie(0),Pt(0),Gt(!1),Yt(!1),sn(1),k.current&&(k.current.currentTime=0,k.current.pause())};T.useEffect(()=>{if(!li){Gr();return}dn?.type==="html5"&&Gr()},[li,Ln,dn]),T.useEffect(()=>{if(dn?.type!=="html5")return;const I=k.current;I&&(I.volume=H,I.muted=jt)},[H,jt,dn]);const Sl=()=>{if(dn?.type!=="html5")return;const I=k.current;I&&(I.paused?I.play():I.pause())},ko=()=>{const I=k.current;!I||Bt||ie(I.currentTime||0)},$i=()=>{const I=k.current;I&&Pt(I.duration||0)},No=I=>{const K=k.current;ie(I),K&&(K.currentTime=I)},Co=I=>{const K=k.current,ee=Math.min(1,Math.max(0,I));sn(ee),K&&(K.volume=ee,Yt(ee===0))},ci=()=>{const I=k.current;if(!I)return;const K=!jt;Yt(K),I.muted=K,!K&&I.volume===0&&Co(.5)},Vr=I=>{if(!Number.isFinite(I))return"0:00";const K=Math.max(0,Math.floor(I)),ee=Math.floor(K/60),le=K%60;return`${ee}:${le.toString().padStart(2,"0")}`},jr=I=>I==="video"?100:I==="study"?150:200,ui=I=>{if(!I)return;const K=`xp-${Date.now()}-${Math.random().toString(16).slice(2,6)}`;tr(ee=>[...ee,{id:K,amount:I}]),setTimeout(()=>{tr(ee=>ee.filter(le=>le.id!==K))},5e3)},Rl=qt.length>0&&typeof document<"u"?uj.createPortal(l.jsx("div",{className:"pointer-events-none fixed inset-x-0 top-4 z-[2000] flex flex-col items-end gap-2 px-4 sm:px-6",children:qt.map(I=>l.jsxs("div",{className:"pointer-events-auto flex items-start gap-3 rounded-xl bg-emerald-600 text-white px-4 py-3 shadow-lg border border-emerald-400/70",role:"status","aria-live":"polite",children:[l.jsxs("div",{className:"font-semibold text-base leading-tight",children:["+",I.amount," XP"]}),l.jsx("button",{className:"ml-auto text-white/80 hover:text-white",onClick:()=>tr(K=>K.filter(ee=>ee.id!==I.id)),"aria-label":"Dismiss notification",children:l.jsx(vr,{className:"h-4 w-4"})})]},I.id))}),document.body):null,So=T.useMemo(()=>{if(!en)return[];const I=sa(O?.fen),K=Ke>=0?M[Ke].fen:I;return xs[K]||[]},[Ke,O,M,xs]),rr=T.useMemo(()=>{if(O?.type!=="quiz")return null;const I=O.questions||[];if(I.length){const ee=I[0];if(ee?.options?.length){const Le=typeof ee.correctIndex=="number"&&ee.correctIndex>=0?ee.correctIndex:0;return{...ee,correctIndex:Le}}const le=I.map((Le,rt)=>Le?.prompt||`Option ${rt+1}`).filter(Boolean);if(le.length){const Le=I.findIndex(rt=>typeof rt?.correctIndex=="number"&&rt.correctIndex>=0);return{id:ee?.id||"derived",prompt:ee?.prompt||"Select the correct option",options:le,correctIndex:Le>=0?Le:0}}}const K=O.quizQuestions||[];return K.length?{id:"legacy",prompt:"Select the correct option",options:K.map((ee,le)=>ee.prompt||`Option ${le+1}`),correctIndex:0}:null},[O]),di=T.useMemo(()=>{if(!en)return null;const I=sa(O?.fen),K=Ke>=0?M[Ke].fen:I;return er[K]||null},[Ke,O,M,er]),hi=en&&So.length>0;T.useEffect(()=>{if(!en||!O?.id||!n||!ue||ft.has(O.id)||Tt.has(O.id)||!bn.length)return;const I=bn[bn.length-1]?.fen;M.length>0&&Ke===M.length-1&&M[M.length-1]?.fen===I&&(async()=>{try{await ig(n.id,ue,O.id,O.type),Xt(ee=>{const le=new Set(ee);return le.add(O.id),le}),St(ee=>new Set(ee).add(O.id)),ui(jr(O.type)),e.invalidateQueries({queryKey:["progress",ue]}),e.invalidateQueries({queryKey:["course",ue]})}catch(ee){console.warn("Failed to award XP for mainline completion",ee)}})()},[O?.id,Ke,Tt,ue,M,en,bn,n,O,O?.type,ft]);const Ir=I=>{const K=en?sa(O?.fen):new wt().fen();if(I&&I.length){const rt=Ke+1,hn=rt>=0?M.slice(0,rt):[],Is=[...hn,...I];$(Is);const jn=hn.length,pt=Is[jn]?.fen||K;J(jn),Te(pt),j(pt),ae(null),Ce(null);return}const ee=Ke>=0?M[Ke].fen:K,le=er[ee],Le=Hn[ee];le!=null&&Le!=null&&($(bn),J(Le),Te(le.fen),j(le.fen)),ae(null),Ce(null)},ir=()=>{if(!O||O.type!=="study"&&O.type!=="pgn"||!("pgn"in O)||!O.pgn)return;const I=new Blob([O.pgn],{type:"application/x-chess-pgn"}),K=URL.createObjectURL(I),ee=document.createElement("a"),le=(O.title||"study").replace(/[^a-z0-9-_]+/gi,"_");ee.href=K,ee.download=`${le||"study"}.pgn`,document.body.appendChild(ee),ee.click(),document.body.removeChild(ee),setTimeout(()=>URL.revokeObjectURL(K),2e3)},wa=async()=>{if(O?.type!=="quiz"||!rr)return;if(zt==null){xt("Pick an option first.");return}if(!(zt===(rr.correctIndex??0))){xt("Not quite. Try again.");return}if(!n){xt("Sign in to earn XP for this quiz.");return}if(!ue){xt("Course not loaded yet. Try again.");return}if(ft.has(O.id)){xt("XP already awarded for this quiz.");return}if(Ls){xt("XP already awarded for this quiz.");return}try{Mn(!0),await ig(n.id,ue,O.id,O.type),St(K=>new Set(K).add(O.id)),as(!0),xt("Correct! XP awarded."),ui(jr(O.type)),e.invalidateQueries({queryKey:["progress",ue]}),e.invalidateQueries({queryKey:["course",ue]})}catch(K){console.warn("Failed to award XP for quiz",K),xt("Could not award XP right now. Please try again.")}finally{Mn(!1)}};return l.jsxs(l.Fragment,{children:[Rl,l.jsxs(Js,{children:[l.jsxs("div",{className:"space-y-4",children:[l.jsxs("button",{type:"button",onClick:()=>{const I=V?.id||ue;o(I?`/courses/${I}`:"/courses")},className:"flex items-center gap-4 text-left focus:outline-none focus-visible:ring-2 focus-visible:ring-pink-400 rounded-xl",children:[V?.thumbnailUrl&&l.jsx("img",{src:V.thumbnailUrl,alt:V.title||"Course thumbnail",className:"h-16 w-16 rounded-xl object-cover border border-white/10"}),l.jsx("div",{className:"text-3xl font-extrabold text-white leading-tight",children:V?.title||"Course"})]}),l.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-[minmax(360px,420px)_1fr] items-start justify-items-center xl:justify-items-start gap-6 xl:gap-8",children:[oi&&l.jsx("div",{className:"w-full max-w-[360px] sm:max-w-[420px] flex flex-col gap-3 mt-2 self-start relative z-10",children:l.jsxs("div",{ref:C,className:"rounded-2xl bg-slate-900 border border-white/10 text-white shadow-xl",style:Ye?{minHeight:Ye}:void 0,children:[l.jsxs("div",{className:"p-4",children:[l.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-3",children:[l.jsx("div",{className:"font-semibold text-lg",children:O?.type==="quiz"?"Options":"Moves"}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsxs(Oe,{variant:"ghost",size:"sm",className:"bg-white/5 hover:bg-white/10",onClick:()=>{const I=V?.id||ue;o(I?`/courses/${I}`:"/courses")},children:[l.jsx(Db,{className:"h-4 w-4 mr-2"}),"Content"]}),ya&&l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"flex rounded-full bg-white/10 p-1",children:[l.jsx("button",{className:`px-3 py-1 rounded-full text-sm ${X==="w"?"bg-white text-slate-900 font-semibold":"text-white/80"}`,onClick:()=>P("w"),children:"W"}),l.jsx("button",{className:`px-3 py-1 rounded-full text-sm ${X==="b"?"bg-white text-slate-900 font-semibold":"text-white/80"}`,onClick:()=>P("b"),children:"B"})]}),en&&O&&"pgn"in O&&O.pgn&&l.jsx("button",{className:"p-2 rounded-full bg-white/10 hover:bg-white/20 text-white","aria-label":"Download PGN",onClick:ir,children:l.jsx(Fw,{className:"h-4 w-4"})})]})]})]}),Qr&&l.jsx("div",{className:"text-xs text-white/60 mb-2",children:Qr})]}),l.jsx("div",{className:"max-h-[480px] overflow-auto px-4 pb-4",children:O?.type==="quiz"?l.jsx("div",{className:"space-y-3",children:rr?l.jsxs("div",{className:"space-y-3",children:[l.jsx("div",{className:"text-sm text-white/70 whitespace-pre-wrap",children:"Select the correct option"}),rr.options?.map((I,K)=>l.jsxs("label",{className:"flex items-center gap-3 rounded-lg border border-white/10 bg-white/5 px-3 py-2 text-sm text-white/90 hover:border-pink-400",children:[l.jsx("input",{type:"radio",name:"quiz-option",className:"h-4 w-4 text-pink-500",checked:zt===K,onChange:()=>{Cn(K),Ft(ee=>{const le=[...ee];return le[0]=I,le}),xt(null)}}),l.jsx("span",{children:I||`Option ${K+1}`})]},`${rr.id||"opt"}-${K}`)),l.jsxs("div",{className:"pt-1",children:[l.jsx(Oe,{size:"sm",className:"w-full justify-center",disabled:zt==null||vn,onClick:wa,children:vn?"Submitting...":"Submit"}),qn&&l.jsx("div",{className:"mt-2 text-xs text-white/80","aria-live":"polite",children:qn})]})]}):l.jsx("div",{className:"text-xs text-white/60",children:"No options available."})}):en&&hi?l.jsxs("div",{className:"space-y-2",children:[di&&l.jsxs("button",{className:"w-full text-left rounded-lg bg-white/10 hover:bg-white/20 text-white px-3 py-2 text-sm",onClick:()=>Ir(null),children:["Mainline: ",di.san]}),So.map((I,K)=>l.jsxs("button",{className:"w-full text-left rounded-lg border border-white/10 hover:border-pink-400 text-white px-3 py-2 text-sm",onClick:()=>Ir(I),children:["Variation ",K+1,": ",I[0]?.san||"Line"]},`variation-${K}`))]}):l.jsxs(l.Fragment,{children:[et.length===0&&l.jsx("div",{className:"text-white/50 text-sm",children:"No moves yet. Start playing."}),et.map((I,K)=>l.jsxs("div",{className:"grid grid-cols-[32px_1fr_1fr] items-center gap-2 sm:gap-3 text-xs sm:text-sm py-1",children:[l.jsxs("div",{className:"text-white/50",children:[K+1,"."]}),l.jsx("button",{className:`text-left text-white rounded-md px-2 py-1 ${Se===I.white?.fen?"bg-white/10":""} ${I.white?"hover:text-pink-300":"text-white/50"}`,disabled:!I.white,onClick:()=>I.white&&Je(I.white),children:I.white?.san||"-"}),l.jsx("button",{className:`text-left text-white rounded-md px-2 py-1 ${Se===I.black?.fen?"bg-white/10":""} ${I.black?"hover:text-pink-300":"text-white/50"}`,disabled:!I.black,onClick:()=>I.black&&Je(I.black),children:I.black?.san||""})]},K))]})}),en&&l.jsx("div",{className:"px-4 pb-4",children:l.jsxs("div",{className:"grid grid-cols-[40px_1fr_1fr] gap-2",children:[l.jsx("button",{type:"button",className:"h-10 w-10 rounded-lg bg-white/10 border border-white/10 text-white flex items-center justify-center disabled:opacity-40 disabled:cursor-not-allowed",onClick:va,disabled:!ba,"aria-label":"Back to start",children:l.jsx(P4,{className:"h-4 w-4"})}),l.jsx("button",{type:"button",className:"h-10 rounded-lg bg-white/10 border border-white/10 text-white flex items-center justify-center disabled:opacity-40 disabled:cursor-not-allowed",onClick:Cl,disabled:!ba,"aria-label":"Previous move",children:l.jsx(r2,{className:"h-4 w-4"})}),l.jsx("button",{type:"button",className:"h-10 rounded-lg bg-white text-slate-900 flex items-center justify-center disabled:opacity-40 disabled:cursor-not-allowed",onClick:Qt,disabled:!xo,"aria-label":"Next move",children:l.jsx($w,{className:"h-4 w-4"})})]})}),Ut&&l.jsxs("div",{className:"px-4 pb-4 pt-3 border-t border-white/10",children:[l.jsx("div",{className:"font-semibold mb-2",children:"Trainer Note"}),l.jsx("p",{className:"text-sm text-white/80 whitespace-pre-wrap",children:Ut})]})]})}),l.jsxs("div",{className:"flex-1 flex flex-col items-center",children:[!oi&&l.jsx("div",{className:"flex items-center justify-start gap-2 mb-3 w-full max-w-[1400px] px-2",children:l.jsxs(Oe,{variant:"ghost",className:"bg-white/5 hover:bg-white/10 w-full sm:w-auto",onClick:()=>be(!0),children:[l.jsx(Db,{className:"h-5 w-5 mr-2"}),"Content"]})}),l.jsx("div",{className:"grid grid-cols-1 w-full max-w-[760px] justify-items-center 2xl:grid-cols-[minmax(360px,1fr)_minmax(240px,0.6fr)] gap-4 2xl:gap-6 items-start mx-auto",children:l.jsxs("div",{className:"relative",children:[l.jsx("div",{className:`relative block px-4 sm:px-6 pb-6 sm:pb-8 w-full mx-auto ${li?"max-w-[360px]":"max-w-none"}`,children:O?.type==="video"?l.jsxs("div",{className:"w-full rounded-[28px] overflow-hidden border border-white/10 bg-slate-900/80 shadow-[0_20px_60px_rgba(0,0,0,0.45)]",children:[l.jsxs("div",{className:"flex flex-col gap-3 px-6 py-5 border-b border-white/10 sm:flex-row sm:items-center sm:justify-between",children:[l.jsxs("div",{className:"space-y-1",children:[l.jsx("div",{className:"text-[11px] uppercase tracking-[0.2em] text-white/50",children:"Video subsection"}),l.jsx("div",{className:"text-2xl font-bold text-white leading-tight",children:O.title||"Video lesson"}),sr&&l.jsx("div",{className:"text-sm text-white/60",children:sr})]}),l.jsx("div",{className:"flex items-center gap-2"})]}),l.jsxs("div",{className:"relative bg-black",children:[dn?.type==="blocked"&&l.jsxs("div",{className:"aspect-video w-full flex flex-col items-center justify-center gap-3 px-6 text-center text-white/80",children:[l.jsx("div",{className:"text-lg font-semibold text-white",children:"Link not playable"}),l.jsx("p",{className:"text-sm text-white/60 max-w-xl",children:dn.reason}),Ln&&l.jsx("div",{className:"text-xs text-white/50 break-all max-w-lg bg-white/5 border border-white/10 px-3 py-2 rounded-lg",children:Ln}),l.jsx("div",{className:"text-xs text-white/60",children:"Use a YouTube link or a direct MP4/WEBM/HLS URL to play here."})]}),dn?.type==="youtube"&&l.jsx("div",{className:"relative w-full",children:l.jsx("iframe",{src:dn.src,title:O.title||"Video lesson",className:"w-full aspect-video",loading:"lazy",referrerPolicy:"origin-when-cross-origin",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share",allowFullScreen:!0},dn.src)}),dn?.type==="html5"&&l.jsxs("div",{className:"relative w-full",children:[l.jsx("video",{ref:k,src:dn.src,className:"w-full aspect-video object-contain bg-black",playsInline:!0,onLoadedMetadata:$i,onTimeUpdate:ko,onEnded:()=>kn(!1),onPause:()=>kn(!1),onPlay:()=>kn(!0),muted:jt,crossOrigin:"anonymous"},dn.src),l.jsxs("div",{className:"absolute inset-x-0 bottom-0 flex flex-col gap-3 bg-gradient-to-t from-black/80 via-black/50 to-transparent px-4 pb-4 pt-6",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("button",{className:"flex h-10 w-10 items-center justify-center rounded-full bg-white/10 text-white hover:bg-white/20",onClick:Sl,"aria-label":Yn?"Pause":"Play",children:Yn?l.jsx(v4,{className:"h-5 w-5"}):l.jsx(Vw,{className:"h-5 w-5"})}),l.jsxs("div",{className:"flex items-center gap-2 text-xs text-white/80 min-w-[110px]",children:[l.jsx("span",{children:Vr(_s)}),l.jsx("span",{className:"text-white/40",children:"/"}),l.jsx("span",{children:Vr(lt)})]}),l.jsx("div",{className:"flex-1",children:l.jsx("input",{type:"range",min:0,max:Math.max(lt||0,.1),step:"0.1",value:Math.min(_s,lt||0),onChange:I=>No(Number(I.target.value)),onMouseDown:()=>Gt(!0),onMouseUp:()=>Gt(!1),onTouchStart:()=>Gt(!0),onTouchEnd:()=>Gt(!1),className:"w-full accent-pink-400"})})]}),l.jsxs("div",{className:"flex items-center justify-between gap-3 text-white/80 text-xs",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("button",{className:"flex h-9 w-9 items-center justify-center rounded-full bg-white/10 text-white hover:bg-white/20",onClick:ci,"aria-label":jt?"Unmute":"Mute",children:jt||H===0?l.jsx(j4,{className:"h-5 w-5"}):l.jsx(E4,{className:"h-5 w-5"})}),l.jsx("input",{type:"range",min:0,max:1,step:.05,value:H,onChange:I=>Co(Number(I.target.value)),className:"w-28 accent-pink-400"})]}),l.jsx("div",{className:"flex items-center gap-2",children:l.jsx("span",{className:"rounded-full bg-white/10 border border-white/10 px-3 py-1 text-[11px] uppercase tracking-[0.15em] text-white/70",children:"Custom player"})})]})]}),l.jsxs("div",{className:"absolute left-4 top-4 flex items-center gap-2 rounded-full border border-white/10 bg-black/70 px-3 py-1 text-xs text-white/80",children:[l.jsx("span",{className:"h-2 w-2 rounded-full bg-emerald-400"}),"Playing hosted video"]})]}),!dn&&l.jsxs("div",{className:"aspect-video w-full flex flex-col items-center justify-center gap-3 px-6 text-center text-white/70",children:[l.jsx("div",{className:"text-lg font-semibold text-white",children:"No video ready"}),l.jsx("p",{className:"text-sm text-white/60 max-w-xl",children:"Add a direct MP4/WEBM/HLS link, a YouTube link, or upload a video file from the section editor to start playback."})]})]}),l.jsxs("div",{className:"flex flex-col gap-2 px-6 py-4 border-t border-white/10 sm:flex-row sm:items-center sm:justify-between",children:[l.jsxs("div",{className:"flex items-center gap-2 text-sm text-white/70",children:[l.jsx("span",{className:`h-2 w-2 rounded-full ${dn?"bg-emerald-400":"bg-amber-400"}`}),Bi]}),wr&&l.jsx("div",{className:"text-xs text-white/50 break-all max-w-full sm:max-w-[320px]",children:Ln})]})]}):l.jsx(l.Fragment,{children:l.jsx("div",{className:"rounded-[28px] overflow-hidden border border-white/10 shadow-[0_20px_60px_rgba(0,0,0,0.45)] mx-auto mt-2 xl:translate-x-20 flex-shrink-0",style:{backgroundColor:d.dark,width:`${js}px`,height:`${js}px`,maxWidth:`${js}px`,maxHeight:`${js}px`},children:l.jsxs("div",{className:"relative grid grid-cols-8 grid-rows-8 w-full h-full mx-auto",children:[cs.map((I,K)=>I.map((ee,le)=>{const Le=q(K,le),rt=(K+le)%2===0,hn=Q===Le,Is=Es.some(pt=>pt.to===Le),jn=ht.includes(Le);return l.jsxs("button",{onClick:()=>re(K,le),draggable:!W&&!!ee,onDragStart:pt=>{if(W||!ee)return;const tn=new wt(N),an=q(K,le),fn=tn.get(an);if(O?.type==="quiz"){pt.preventDefault();return}if(O?.type==="study"||O?.type==="pgn"){pt.preventDefault(),rn(!1);return}if(!En){pt.preventDefault(),rn(!1);return}if(fn&&fn.color===tn.turn()){if(Ce(an),pt.dataTransfer?.setData("text/plain",an),pt.dataTransfer){const Et=new Image;Et.src=Sn,pt.dataTransfer.setDragImage(Et,0,0)}rn(!0)}else pt.preventDefault()},onDragOver:pt=>{O?.type!=="quiz"&&!W&&Me&&pt.preventDefault()},onDrop:pt=>{if(W||O?.type==="quiz"||O?.type==="study"||O?.type==="pgn")return;pt.preventDefault();const tn=Me||pt.dataTransfer?.getData("text/plain"),an=q(K,le);tn&&se(tn,an),Ce(null),rn(!1)},onDragEnd:()=>{Ce(null),rn(!1)},onContextMenu:pt=>{if(pt.preventDefault(),$t){Nn(!1);return}!Ct&&!Re&&zr(K,le)},onMouseDown:pt=>{pt.button===2?(pt.preventDefault(),xr(K,le)):pt.button===0&&ee&&(O?.type==="study"||O?.type==="pgn"||!En?rn(!1):rn(!0))},onMouseEnter:pt=>Po(K,le,pt.buttons),onMouseMove:pt=>Po(K,le,pt.buttons),onMouseUp:pt=>{pt.button===2?(pt.preventDefault(),_o()):pt.button===0&&rn(!1)},className:`w-full h-full flex items-center justify-center text-2xl font-semibold relative overflow-hidden ${hn?"ring-2 ring-pink-400":""} ${ee?"cursor-piece":"cursor-auto"}`,style:{backgroundColor:je.has(Le)?"#ef4444":rt?d.light:d.dark,...ee?{"--cursor-open":`url(${fv}) 8 8, grab`,"--cursor-closed":`url(${rh}) 8 8, grabbing`}:{}},"data-has-piece":!!ee,"data-square":Le,"data-piece":ee?`${ee.color}${ee.type}`:"","data-test":"board-square",children:[jn&&l.jsx("div",{className:"absolute inset-0 bg-yellow-400/50 pointer-events-none z-0"}),Is&&l.jsx("div",{className:"absolute inset-0 z-20 pointer-events-none flex items-center justify-center",children:l.jsx("div",{className:"h-3 w-3 rounded-full bg-pink-400/80"})}),ee?l.jsx("img",{src:Jt(ee)||"",alt:"",className:`relative z-10 w-full h-full object-contain p-1 ${un(ee)}`}):null]},`${K}-${le}`)})),Ct&&pe&&l.jsxs("svg",{className:"absolute inset-0 pointer-events-none",viewBox:"0 0 100 100",children:[l.jsx("defs",{children:l.jsx("marker",{id:"arrowhead-lesson-current",markerWidth:"4",markerHeight:"4",refX:"2",refY:"2",orient:"auto",children:l.jsx("path",{d:"M0,0 L0,4 L4,2 z",fill:"rgba(234,179,8,0.8)"})})}),(()=>{const I=(le,Le)=>({x:(Le+.5)/8*100,y:(le+.5)/8*100}),K=I(Ct.row,Ct.col),ee=I(pe.row,pe.col);return l.jsx("line",{x1:K.x,y1:K.y,x2:ee.x,y2:ee.y,stroke:"rgba(234,179,8,0.8)",strokeWidth:"1",markerEnd:"url(#arrowhead-lesson-current)"})})()]}),Ae.map((I,K)=>l.jsxs("svg",{className:"absolute inset-0 pointer-events-none",viewBox:"0 0 100 100",children:[l.jsx("defs",{children:l.jsx("marker",{id:`arrowhead-lesson-${K}`,markerWidth:"4",markerHeight:"4",refX:"2",refY:"2",orient:"auto",children:l.jsx("path",{d:"M0,0 L0,4 L4,2 z",fill:"rgba(234,179,8,0.8)"})})}),(()=>{const ee=(rt,hn)=>({x:(hn+.5)/8*100,y:(rt+.5)/8*100}),le=ee(I.start.row,I.start.col),Le=ee(I.end.row,I.end.col);return l.jsx("line",{x1:le.x,y1:le.y,x2:Le.x,y2:Le.y,stroke:"rgba(234,179,8,0.8)",strokeWidth:"1",markerEnd:`url(#arrowhead-lesson-${K})`})})()]},`arrow-${K}`)),Ae.map((I,K)=>l.jsxs("svg",{className:"absolute inset-0 pointer-events-none",viewBox:"0 0 100 100",children:[l.jsx("defs",{children:l.jsx("marker",{id:`arrowhead-lesson-${K}`,markerWidth:"4",markerHeight:"4",refX:"2",refY:"2",orient:"auto",children:l.jsx("path",{d:"M0,0 L0,4 L4,2 z",fill:"rgba(234,179,8,0.8)"})})}),(()=>{const ee=(rt,hn)=>({x:(hn+.5)/8*100,y:(rt+.5)/8*100}),le=ee(I.start.row,I.start.col),Le=ee(I.end.row,I.end.col);return l.jsx("line",{x1:le.x,y1:le.y,x2:Le.x,y2:Le.y,stroke:"rgba(234,179,8,0.8)",strokeWidth:"1",markerEnd:`url(#arrowhead-lesson-${K})`})})()]},`arrow-${K}`))]})})})}),W&&l.jsx("div",{className:"mt-3 flex flex-wrap gap-2 text-white",children:ow.map(I=>l.jsx("button",{onClick:()=>ye(I),className:`px-2 py-1 rounded-md border text-xs ${u===I?"bg-pink-500 text-white border-pink-500":"bg-white/5 border-white/10"}`,children:I.label},`${I.label}-${I.type}`))})]})})]})]})]}),ve&&l.jsxs("div",{className:"fixed inset-0 z-30 flex",children:[l.jsx("div",{className:"flex-1 bg-black/50",onClick:()=>be(!1)}),l.jsxs("div",{className:"w-full max-w-md h-full bg-slate-900 text-white border-l border-white/10 shadow-2xl overflow-y-auto",children:[l.jsxs("div",{className:"p-5 border-b border-white/10 flex items-center justify-between",children:[l.jsxs("div",{children:[l.jsx("div",{className:"text-xl font-bold",children:V?.title||"Course"}),l.jsx("div",{className:"text-sm text-white/60",children:"Select a chapter or drill"})]}),l.jsx("button",{className:"p-2 rounded-full hover:bg-white/10",onClick:()=>be(!1),"aria-label":"Close navigation",children:l.jsx(vr,{className:"h-4 w-4"})})]}),l.jsxs("div",{className:"p-4 space-y-3",children:[b&&l.jsx(Oe,{variant:"outline",size:"sm",onClick:nr,className:"w-full justify-center",children:"Add chapter"}),fe&&l.jsx("div",{className:"text-white/70 text-sm",children:"Loading chapters..."}),!fe&&kt.length===0&&l.jsx("div",{className:"text-white/60 text-sm",children:"No chapters yet."}),kt.map(I=>{const K=$e[I.id],ee=Object.values(I.subsections||{}).sort((le,Le)=>(le.index??0)-(Le.index??0));return l.jsxs("div",{className:"rounded-xl border border-white/10 bg-white/5 hover:border-pink-400",children:[l.jsxs("div",{className:"p-3 flex items-center justify-between gap-2",children:[l.jsxs("div",{children:[l.jsx("div",{className:"text-sm font-semibold",children:I.title}),l.jsxs("div",{className:"text-xs text-white/60",children:["Items: ",ee.length]})]}),l.jsxs("div",{className:"flex items-center gap-2",children:[b&&l.jsxs(l.Fragment,{children:[l.jsx(Oe,{size:"sm",variant:"ghost",onClick:()=>Be({chapterId:I.id,mode:"create",type:"video",title:"",videoUrl:"",pgn:"",fen:"",quizQuestions:[{id:"q1",prompt:""}],correctQuestionIndex:1,trainerNote:""}),"aria-label":"Add subsection",children:l.jsx(Qd,{className:"h-4 w-4"})}),l.jsx(Oe,{size:"sm",variant:"ghost",onClick:()=>kl(I.id),"aria-label":"Delete chapter",children:l.jsx(al,{className:"h-4 w-4"})})]}),l.jsx(Oe,{size:"sm",variant:"outline",onClick:()=>us(I.id),children:K?"Close":"Open"})]})]}),K&&l.jsxs("div",{className:"bg-white/10 border-t border-white/10",children:[ee.map(le=>l.jsxs("div",{className:"flex items-center justify-between px-4 py-2 text-sm text-white/80 hover:bg-white/10 cursor-pointer",onClick:()=>qr(le),children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("span",{className:"h-2 w-2 rounded-full bg-white/40"}),l.jsx("span",{className:"capitalize text-white/60",children:le.type}),l.jsx("span",{children:le.title})]}),l.jsxs("div",{className:"flex items-center gap-2",children:[!b&&(le.type==="video"||le.type==="study"||le.type==="pgn")&&(ft.has(le.id)?l.jsx("span",{className:"text-emerald-300 text-xs font-semibold",children:"Completed"}):l.jsx(Oe,{size:"sm",variant:"outline",onClick:Le=>{Le.stopPropagation(),wo(le)},children:"Complete"})),b&&l.jsx(Oe,{size:"sm",variant:"ghost",onClick:Le=>{Le.stopPropagation(),ga(I.id,le.id)},"aria-label":"Reorder subsection",children:l.jsx(Qd,{className:"h-4 w-4"})}),b&&l.jsx(Oe,{size:"sm",variant:"ghost",onClick:Le=>{Le.stopPropagation(),Nl(I.id,le.id)},children:"Delete"})]})]},`${I.id}-${le.id}`)),ee.length===0&&l.jsx("div",{className:"px-4 py-2 text-xs text-white/60",children:"No subsections yet."})]})]},I.id)})]})]})]}),U&&l.jsx("div",{className:"fixed inset-0 z-40 flex items-center justify-center bg-black/70 px-4",children:l.jsxs("div",{className:"w-full max-w-md rounded-2xl bg-slate-900 text-white border border-white/10 shadow-2xl",children:[l.jsxs("div",{className:"flex items-center justify-between px-5 py-4 border-b border-white/10",children:[l.jsxs("div",{children:[l.jsx("div",{className:"text-lg font-semibold",children:U.mode==="create"?"Add chapter":"Edit chapter"}),l.jsx("div",{className:"text-xs text-white/60",children:"Admin-only"})]}),l.jsx("button",{className:"p-2 rounded-full hover:bg-white/10 text-white/70",onClick:()=>Z(null),"aria-label":"Close",children:l.jsx(vr,{className:"h-4 w-4"})})]}),l.jsxs("div",{className:"p-5 space-y-4",children:[l.jsxs("div",{className:"space-y-2",children:[l.jsx("label",{className:"text-sm text-white/80",children:"Title"}),l.jsx("input",{value:U.title,onChange:I=>Z(K=>K&&{...K,title:I.target.value}),className:"w-full rounded-xl border border-white/10 bg-white/5 px-3 py-3 text-sm outline-none focus:ring-2 focus:ring-pink-400",placeholder:"Chapter title"})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx("label",{className:"text-sm text-white/80",children:"Order"}),l.jsx("input",{type:"number",value:U.index,onChange:I=>Z(K=>K&&{...K,index:Number(I.target.value)}),className:"w-full rounded-xl border border-white/10 bg-white/5 px-3 py-3 text-sm outline-none focus:ring-2 focus:ring-pink-400",min:0}),l.jsx("div",{className:"text-xs text-white/60",children:"Lower numbers appear first."})]}),l.jsxs("div",{className:"flex items-center justify-end gap-2 pt-2",children:[l.jsx(Oe,{variant:"outline",onClick:()=>Z(null),children:"Cancel"}),l.jsx(Oe,{onClick:async()=>{!ue||!U.title.trim()||(U.mode==="create"?await b_(ue,U.title.trim(),U.index):U.chapter&&await c8(ue,U.chapter.id,{title:U.title.trim(),index:U.index}),Z(null))},children:"Save"})]})]})]})}),xe&&l.jsx("div",{className:"fixed inset-0 z-40 flex items-center justify-center bg-black/70 px-4",children:l.jsxs("div",{className:"w-full max-w-md rounded-2xl bg-slate-900 text-white border border-white/10 shadow-2xl",children:[l.jsxs("div",{className:"flex items-center justify-between px-5 py-4 border-b border-white/10",children:[l.jsxs("div",{children:[l.jsx("div",{className:"text-lg font-semibold",children:"Add subsection"}),l.jsx("div",{className:"text-xs text-white/60",children:"Admin-only"})]}),l.jsx("button",{className:"p-2 rounded-full hover:bg-white/10 text-white/70",onClick:()=>Be(null),"aria-label":"Close",children:l.jsx(vr,{className:"h-4 w-4"})})]}),l.jsxs("div",{className:"p-5 space-y-4",children:[l.jsxs("div",{className:"space-y-2",children:[l.jsx("label",{className:"text-sm text-white/80",children:"Type"}),l.jsxs("div",{className:"relative",children:[l.jsxs("button",{type:"button",onClick:()=>Ve(I=>!I),className:"w-full rounded-xl border border-white/10 bg-white/5 px-3 py-3 text-sm outline-none hover:border-white/20 flex items-center justify-between capitalize",children:[l.jsx("span",{children:xe.type}),l.jsx("span",{className:"text-xs text-white/60",children:Ze?"Hide":"Show"})]}),Ze&&l.jsx("div",{className:"absolute z-20 mt-2 w-full rounded-2xl bg-slate-800 border border-white/10 shadow-2xl overflow-hidden",children:["video","study","quiz"].map(I=>l.jsx("button",{onClick:()=>{Be(K=>K&&{...K,type:I}),Ve(!1)},className:"w-full text-left px-4 py-2 text-sm text-white hover:bg-white/10 capitalize",children:I},I))})]})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx("label",{className:"text-sm text-white/80",children:"Title"}),l.jsx("input",{value:xe.title,onChange:I=>Be(K=>K&&{...K,title:I.target.value}),className:"w-full rounded-xl border border-white/10 bg-white/5 px-3 py-3 text-sm outline-none focus:ring-2 focus:ring-pink-400",placeholder:"Subsection title"})]}),xe.type==="video"&&l.jsxs("div",{className:"space-y-2",children:[l.jsxs("label",{className:"text-sm text-white/80 flex items-center justify-between",children:[l.jsx("span",{children:"Video URL or Upload"}),l.jsx("span",{className:"text-xs text-white/60",children:"No size limit"})]}),l.jsx("input",{value:xe.videoUrl,onChange:I=>Be(K=>K&&{...K,videoUrl:I.target.value}),className:"w-full rounded-xl border border-white/10 bg-white/5 px-3 py-3 text-sm outline-none focus:ring-2 focus:ring-pink-400",placeholder:"https://..."}),l.jsx("input",{type:"file",accept:"video/*",onChange:I=>{const K=I.target.files?.[0];if(!K)return;qe(null);const ee=new FileReader;ee.onerror=()=>qe("Could not read the video file. Try again or use a hosted link instead."),ee.onload=le=>{const Le=le.target?.result;typeof Le=="string"?Be(rt=>rt&&{...rt,videoUrl:Le}):qe("Could not process the video file. Please try another file or a URL.")};try{ee.readAsDataURL(K)}catch{qe("Video is too large to inline here. Please host it (e.g., MP4 link) and paste the URL.")}},className:"w-full text-sm text-white/80 file:mr-3 file:rounded-lg file:border-none file:bg-white/10 file:px-3 file:py-2 file:text-white hover:file:bg-white/20"}),De&&l.jsx("div",{className:"text-xs text-red-300",children:De}),l.jsxs("div",{className:"space-y-2",children:[l.jsx("label",{className:"text-sm text-white/80",children:"Trainer note (optional)"}),l.jsx("textarea",{value:xe.trainerNote,onChange:I=>Be(K=>K&&{...K,trainerNote:I.target.value}),className:"w-full rounded-xl border border-white/10 bg-white/5 px-3 py-3 text-sm outline-none focus:ring-2 focus:ring-pink-400",rows:2,placeholder:"Message to show in Trainer Note during this video"})]})]}),xe.type==="study"&&l.jsxs("div",{className:"space-y-2",children:[l.jsxs("label",{className:"text-sm text-white/80 flex items-center justify-between",children:[l.jsx("span",{children:"PGN"}),l.jsx("span",{className:"text-xs text-white/60",children:"Paste or upload PGN"})]}),l.jsx("textarea",{value:xe.pgn,onChange:I=>Be(K=>K&&{...K,pgn:I.target.value}),className:"w-full rounded-xl border border-white/10 bg-white/5 px-3 py-3 text-sm outline-none focus:ring-2 focus:ring-pink-400",rows:3,placeholder:"Paste PGN"}),l.jsx("input",{type:"file",accept:".pgn,text/plain",onChange:I=>{const K=I.target.files?.[0];if(!K)return;const ee=new FileReader;ee.onload=le=>{const Le=le.target?.result;typeof Le=="string"&&Be(rt=>rt&&{...rt,pgn:Le})},ee.readAsText(K)},className:"w-full text-sm text-white/80 file:mr-3 file:rounded-lg file:border-none file:bg-white/10 file:px-3 file:py-2 file:text-white hover:file:bg-white/20"}),l.jsxs("div",{className:"space-y-2",children:[l.jsx("label",{className:"text-sm text-white/80",children:"Starting position (FEN)"}),l.jsx("input",{value:xe.fen,onChange:I=>Be(K=>K&&{...K,fen:I.target.value}),className:"w-full rounded-xl border border-white/10 bg-white/5 px-3 py-3 text-sm outline-none focus:ring-2 focus:ring-pink-400",placeholder:"e.g. rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR w KQkq - 0 1"})]})]}),xe.type==="quiz"&&l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"space-y-2",children:[l.jsxs("label",{className:"text-sm text-white/80 flex items-center justify-between gap-2",children:[l.jsx("span",{children:"Options"}),l.jsxs("button",{type:"button",onClick:()=>Be(I=>I&&{...I,quizQuestions:[...I.quizQuestions,{id:`q${I.quizQuestions.length+1}`,prompt:""}]}),className:"inline-flex items-center gap-1 rounded-md bg-white/10 px-2 py-1 text-xs hover:bg-white/20",children:[l.jsx(fg,{className:"h-3 w-3"}),"Add"]})]}),l.jsx("div",{className:"space-y-3",children:xe.quizQuestions.map((I,K)=>l.jsx("textarea",{value:I.prompt,onChange:ee=>Be(le=>le&&{...le,quizQuestions:le.quizQuestions.map((Le,rt)=>rt===K?{...Le,prompt:ee.target.value}:Le)}),className:"w-full rounded-xl border border-white/10 bg-white/5 px-3 py-3 text-sm outline-none focus:ring-2 focus:ring-pink-400",rows:2,placeholder:`Option ${K+1}`},I.id))})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx("label",{className:"text-sm text-white/80",children:"FEN"}),l.jsx("input",{value:xe.fen,onChange:I=>Be(K=>K&&{...K,fen:I.target.value}),className:"w-full rounded-xl border border-white/10 bg-white/5 px-3 py-3 text-sm outline-none focus:ring-2 focus:ring-pink-400",placeholder:"e.g. rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR w KQkq - 0 1"})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx("label",{className:"text-sm text-white/80",children:"Correct option number"}),l.jsx("input",{type:"number",min:1,value:xe.correctQuestionIndex,onChange:I=>Be(K=>K&&{...K,correctQuestionIndex:Number(I.target.value)||1}),className:"w-full rounded-xl border border-white/10 bg-white/5 px-3 py-3 text-sm outline-none focus:ring-2 focus:ring-pink-400",placeholder:"Enter the question number (e.g. 1)"})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx("label",{className:"text-sm text-white/80",children:"Trainer note (optional)"}),l.jsx("textarea",{value:xe.trainerNote,onChange:I=>Be(K=>K&&{...K,trainerNote:I.target.value}),className:"w-full rounded-xl border border-white/10 bg-white/5 px-3 py-3 text-sm outline-none focus:ring-2 focus:ring-pink-400",rows:2,placeholder:"Message to show in Trainer Note during this quiz"})]})]}),l.jsxs("div",{className:"flex items-center justify-end gap-2 pt-2",children:[l.jsx(Oe,{variant:"outline",onClick:()=>Be(null),children:"Cancel"}),l.jsx(Oe,{disabled:Xe,onClick:async()=>{if(!xe)return;if(Ie(null),!ue){Ie("Course is still loading. Try again in a moment.");return}const I=xe.title.trim();if(!I){Ie("Add a title for this subsection.");return}const K=xe.trainerNote.trim();let ee=null;if(xe.type==="video"){const le=xe.videoUrl.trim();if(!le){Ie("Add a video link or upload a file before saving.");return}const Le=nw(le);if(!Le){Ie("Video link is not valid. Use a direct MP4/WEBM/HLS URL or YouTube link.");return}if(Le.type==="blocked"){Ie(Le.reason||"This video link cannot be played here.");return}if(le.startsWith("data:")&&le.length>4e6){Ie("Video is too large to inline. Please host it (e.g., MP4 link) and paste the URL.");return}ee={id:"",type:"video",title:I,videoUrl:le,...K?{trainerNote:K}:{}}}else if(xe.type==="study"){const le=xe.fen.trim();ee={id:"",type:"study",title:I,pgn:xe.pgn.trim(),...le?{fen:le}:{}}}else{const le=xe.quizQuestions.map(hn=>hn.prompt.trim()),Le=Math.max(0,Math.min(le.length-1,xe.correctQuestionIndex-1)),rt=[{id:"q1",prompt:"Select the correct option",options:le,correctIndex:Le}];ee={id:"",type:"quiz",title:I,fen:xe.fen.trim()||void 0,...K?{trainerNote:K}:{},questions:rt}}if(ee)try{nt(!0),await w_(ue,xe.chapterId,ee),Be(null),Ve(!1)}catch(le){console.error("Failed to save subsection",le),Ie("Could not save. Check your connection and try again.")}finally{nt(!1)}},children:Xe?"Saving...":"Save"})]}),bt&&l.jsx("div",{className:"text-xs text-red-300 pt-1 text-right",children:bt})]})]})})]})]})}function bj(){const{user:t,logout:e,setUser:n}=$s(),[r,o]=T.useState(()=>t?.chessUsername?t.chessUsername:t?.displayName?t.displayName:t?.email?t.email.split("@")[0]:"YourUsername"),[d,f]=T.useState(!1),[g,b]=T.useState(""),[w,k]=T.useState("idle"),[C,N]=T.useState(null),[j,M]=T.useState(null),[$,Q]=T.useState(!1),[ae,X]=T.useState(()=>$r(t?.boardTheme).key),[P,W]=T.useState(()=>Tr(t?.pieceTheme).key),[u,ye]=T.useState(!1),[ve,be]=T.useState([]),[Ye,me]=T.useState(!1),[Me,Ce]=T.useState(null),[$e,ce]=T.useState(!1),[ue,ne]=T.useState(!1),[V,z]=T.useState(t?.email||""),[fe,oe]=T.useState("idle"),[U,Z]=T.useState(""),[xe,Be]=T.useState(!1),[Ze,Ve]=T.useState(""),[O,ge]=T.useState(t?.groupName||""),[Se,Te]=T.useState([]),[Ke,J]=T.useState(""),[De,qe]=T.useState(!1),[bt,Ie]=T.useState(""),[Xe,nt]=T.useState(""),[Ut,Kt]=T.useState(!1),[dt,Ft]=T.useState(""),zt="k5rr/5R2/8/2p1P1p1/1p2Q3/1P6/K2p4/3b4 w - - 0 1",Cn=T.useMemo(()=>_j(zt),[]),qn=T.useMemo(()=>Tr(P).pieces,[P]);T.useEffect(()=>{t?.chessUsername?o(t.chessUsername):t?.displayName?o(t.displayName):t?.email&&o(t.email.split("@")[0])},[t]),T.useEffect(()=>{X($r(t?.boardTheme).key)},[t?.boardTheme]),T.useEffect(()=>{W(Tr(t?.pieceTheme).key)},[t?.pieceTheme]);const xt=!!t?.groupId&&t?.accountType==="group",vn=xt&&t?.groupRole==="admin";T.useEffect(()=>{ge(t?.groupName||"")},[t?.groupName]),T.useEffect(()=>{z(t?.email||"")},[t?.email]),T.useEffect(()=>{xe&&xt&&nh(t?.groupId).then(ie=>Te(ie)).catch(()=>Te([]))},[xe,xt,t?.groupId]);const Mn=async ie=>{const lt=await fetch(`https://api.chess.com/pub/player/${encodeURIComponent(ie)}/games/archives`);if(!lt.ok)throw new Error("Could not read game archives for this user.");const Bt=(await lt.json()).archives||[],Gt=Bt[Bt.length-1];if(!Gt)return[];const H=await fetch(Gt);if(!H.ok)return[];const sn=await H.json(),jt={};return(sn.games||[]).slice(-50).forEach(Yt=>{const je=Yt?.opening||Yt?.eco||Yt?.eco_url;if(!je||typeof je!="string")return;const Dn=je.toLowerCase();jt[Dn]=(jt[Dn]||0)+1}),Object.entries(jt).sort((Yt,je)=>je[1]-Yt[1]).slice(0,3).map(([Yt])=>Yt)},Ls=(ie,lt)=>{const Pt=lt.map(Gt=>({id:Gt.id,title:Gt.title.toLowerCase(),course:Gt})),Bt=[];return ie.forEach(Gt=>{const H=Gt.toLowerCase().split(/[^a-z]+/).filter(Boolean),sn=H[0]||Gt.toLowerCase(),jt=Pt.find(Yt=>Yt.title.includes(sn)||H.some(je=>je.length>3&&Yt.title.includes(je))||sn.includes("sicilian")&&Yt.title.includes("dragon"));jt&&!Bt.includes(jt.id)&&Bt.push(jt.id)}),!Bt.length&&lt.length&&Bt.push(lt[0].id),Bt.slice(0,3)},as=T.useMemo(()=>r,[r]),bn=async ie=>{if(t){Ce(ie);try{await h8(t.id,ie),be(lt=>lt.filter(Pt=>Pt.course.id!==ie))}finally{Ce(null)}}},os=async()=>{const ie=V.trim();if(!ie){Z("Enter an email address.");return}if(!/^[^@\s]+@[^@\s]+\.[^@\s]+$/.test(ie)){Z("Enter a valid email address.");return}oe("loading"),Z("");try{const lt=rl.currentUser;if(!lt)throw new Error("Sign in again to change your email.");await wC(lt,ie);const Pt=await YE(ie);Pt&&n(Pt),oe("success"),ne(!1)}catch(lt){const Bt=(lt?.code||"")==="auth/requires-recent-login"?"Please sign out and sign back in, then try again to change your email.":lt?.message||"Could not update email right now.";Z(Bt),oe("error")}},xs=()=>{ce(!0),J(""),Ve(""),ge(t?.groupName||"")},Ps=async()=>{qe(!0),J("");try{const ie=await n8();ie&&n(ie),ce(!1),Be(!1)}catch(ie){J(ie?.message||"Could not leave the group.")}finally{qe(!1)}},er=async()=>{if(!Ze.trim()){J("Enter the #1234 code to join.");return}qe(!0),J("");try{const ie=await v_(Ze.trim());ie?.profile&&(n(ie.profile),ce(!1))}catch(ie){J(ie?.message||"Could not join that group.")}finally{qe(!1)}},Bn=async()=>{if(!O.trim()){J("Name your group first.");return}qe(!0),J("");try{const ie=await m_(O.trim());ie?.profile&&(n(ie.profile),ce(!1))}catch(ie){J(ie?.message||"Could not create the group.")}finally{qe(!1)}},Hn=async()=>{await Bn()},ls=async()=>{if(!O.trim()){J("Enter a name for your group.");return}qe(!0),J("");try{const ie=await s8(t||null,O.trim());ie&&t&&n({...t,groupName:ie.name})}catch(ie){J(ie?.message||"Could not rename the group.")}finally{qe(!1)}},Ks=async()=>{if(bt!=="DELETE"){J('Type "DELETE" to confirm.');return}qe(!0),J("");try{const ie=await i8(t||null);ie&&n(ie),Be(!1)}catch(ie){J(ie?.message||"Could not delete the group.")}finally{qe(!1)}},$n=async ie=>{if(t){qe(!0),J("");try{const lt=await r8(t,ie);Te(lt)}catch(lt){J(lt?.message||"Could not remove that member.")}finally{qe(!1)}}},Yn=Se.filter(ie=>{const lt=Xe.trim().toLowerCase();return lt?(ie.displayName||ie.email||"").toLowerCase().includes(lt):!0}),kn=[{key:"switch-account",title:"Switch Account",description:xt?`Currently in ${t?.groupName||"a group"} (${t?.groupCode||"no code yet"})`:"Personal account active. Join or create a group to collaborate.",accent:"bg-indigo-700",icon:t4,action:{type:"button",label:xt?"Leave or change":"Create or Join",variant:"outline",onClick:()=>{J(""),xs()}}},...vn?[{key:"manage-group",title:"Manage Group",description:"Invite or remove members, rename the group, or delete it entirely.",accent:"bg-emerald-700",icon:R4,action:{type:"button",label:"Manage Group",variant:"outline",onClick:()=>{J(""),Ie(""),Be(!0),nh(t?.groupId).then(ie=>Te(ie)).catch(()=>Te([]))}}}]:[],{key:"support",title:"Support",description:"Need help? Send a message to our support team.",accent:"bg-blue-700",icon:d4,action:{type:"button",label:"Email Support",variant:"outline",onClick:()=>{Ft(""),Kt(!0)}}},{key:"logout",title:"Log Out",description:"Sign out from PawnPoint on this device.",accent:"bg-emerald-600",icon:b0,action:{type:"button",label:"Log Out",variant:"outline",onClick:()=>e()}},{key:"chess",title:"Chess.com Account",description:"Your account is connected with the following chess.com username:",highlight:as,accent:"bg-emerald-700",icon:i2,action:{type:"button",label:"Change Account",variant:"outline",onClick:()=>{b(r||""),N(null),M(null),k("idle"),f(!0)}}},{key:"board",title:"Board and Theme Customization",description:"Customize your chessboard and chess pieces.",accent:"bg-emerald-700",icon:Qw,action:{type:"button",label:"Set up Preferences",variant:"outline",onClick:()=>{Q(!0)}}},{key:"reset",title:"Reset Progress",description:"Choose which courses to reset",accent:"bg-emerald-700",icon:y4,action:{type:"button",label:"Reset Progress",variant:"outline",onClick:async()=>{if(t){ye(!0),me(!0);try{const[ie,lt]=await Promise.all([Fg(),d8(t.id)]),Pt=Object.entries(lt||{}).map(([Bt,Gt])=>{const H=ie.find(jt=>jt.id===Bt);if(!H)return null;const sn=Gt.progressPercent??Gt.percent??0;return sn<=0?null:{course:H,percent:sn}}).filter(Boolean);be(Pt)}finally{me(!1)}}}}},{key:"email",title:"Change Email",description:`Your account is registered with: ${t?.email||"unknown"}`,accent:"bg-emerald-700",icon:Gw,action:{type:"button",label:"Change Email",variant:"outline",onClick:()=>{ne(!0),oe("idle"),Z(""),z(t?.email||"")}}},{key:"delete",title:"Delete Account",description:"Important: Deleting your account will permanently remove all your progress and data.",accent:"bg-rose-700",icon:x4,danger:!0,action:{type:"button",label:"Delete Account",variant:"outline",onClick:()=>{}}}],_s=async()=>{const lt=g.trim().toLowerCase();if(!lt){N("Enter a chess.com username.");return}k("loading"),N(null),M(null);try{const Pt=await fetch(`https://api.chess.com/pub/player/${encodeURIComponent(lt)}`);if(!Pt.ok)throw new Error("User not found on chess.com");const Bt=await Pt.json(),Gt={username:Bt.username,name:Bt.name,followers:Bt.followers,country:Bt.country,lastOnline:Bt.last_online,status:Bt.status,title:Bt.title,avatar:Bt.avatar};M(Gt),k("success")}catch(Pt){k("error"),N(Pt?.message||"Could not find that user. Check the spelling and try again.")}};return l.jsxs(Js,{children:[l.jsxs("div",{className:"w-full max-w-4xl mx-auto px-3 sm:px-4 pb-16",children:[l.jsx("h1",{className:"text-2xl font-bold text-white mb-6",children:"Settings"}),l.jsx("div",{className:"rounded-3xl bg-slate-900/90 border border-white/10 shadow-2xl overflow-hidden",children:l.jsx("div",{className:"divide-y divide-white/5",children:kn.map(ie=>{const lt=ie.icon;return l.jsxs("div",{className:"flex flex-col gap-4 px-5 py-4 sm:flex-row sm:items-center sm:justify-between hover:bg-white/5",children:[l.jsxs("div",{className:"flex items-start gap-4",children:[l.jsx("div",{className:`h-12 w-12 shrink-0 rounded-full border border-white/10 flex items-center justify-center text-white ${ie.accent}`,children:l.jsx(lt,{className:"h-6 w-6"})}),l.jsxs("div",{className:"space-y-1",children:[l.jsx("div",{className:"text-lg font-semibold text-white",children:ie.title}),l.jsx("div",{className:"text-sm text-white/70 leading-snug",children:ie.description}),ie.highlight&&l.jsx("div",{className:"text-sm font-semibold text-emerald-300",children:ie.highlight})]})]}),l.jsx("div",{className:"w-full sm:w-[180px] flex justify-start sm:justify-end",children:(()=>{const Pt=ie.action;return Pt.type==="button"?l.jsx(Oe,{variant:Pt.variant??"outline",className:`w-full sm:w-[180px] min-w-[180px] h-11 justify-center whitespace-nowrap ${ie.danger?"border-rose-300 text-rose-100 hover:bg-rose-500/20":""}`,onClick:Pt.onClick,children:Pt.label}):Pt.type==="toggle"?l.jsx("button",{className:`relative inline-flex h-7 w-12 items-center rounded-full transition ${Pt.value?"bg-emerald-500":"bg-white/20"}`,onClick:()=>Pt.onToggle(!Pt.value),disabled:Pt.disabled,"aria-pressed":Pt.value,children:l.jsx("span",{className:`inline-block h-5 w-5 transform rounded-full bg-white shadow transition ${Pt.value?"translate-x-6":"translate-x-1"}`})}):l.jsx("div",{className:"rounded-full bg-slate-600 text-white/80 px-4 py-2 text-sm select-none",children:Pt.label})})()})]},ie.key)})})})]}),$e&&l.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 px-4",children:l.jsxs("div",{className:"w-full max-w-xl rounded-3xl bg-slate-900 text-white border border-white/10 shadow-2xl p-6 space-y-4",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{children:[l.jsx("div",{className:"text-lg font-semibold",children:"Switch Account"}),l.jsx("div",{className:"text-sm text-white/70",children:"Personal accounts keep data to yourself. Groups share courses and leaderboards only with members."})]}),l.jsx("button",{className:"h-10 w-10 rounded-full bg-white/10 flex items-center justify-center hover:bg-white/20",onClick:()=>{ce(!1),J("")},"aria-label":"Close",children:"X"})]}),Ke&&l.jsx("div",{className:"rounded-xl border border-amber-400/40 bg-amber-400/10 text-amber-100 px-3 py-2 text-sm",children:Ke}),xt?l.jsxs("div",{className:"space-y-3",children:[l.jsxs("div",{className:"rounded-xl border border-white/10 bg-white/5 p-4 space-y-2",children:[l.jsx("div",{className:"text-sm text-white/70",children:"Current group"}),l.jsx("div",{className:"text-lg font-semibold",children:t?.groupName||"Unnamed group"}),l.jsxs("div",{className:"text-xs text-white/60",children:["Code: ",t?.groupCode||"N/A"]})]}),l.jsx(Oe,{variant:"outline",className:"w-full justify-center",onClick:Ps,disabled:De,children:De?"Leaving...":"Leave group and use personal account"})]}):l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{className:"rounded-xl border border-white/10 bg-white/5 p-4",children:[l.jsx("div",{className:"text-sm font-semibold",children:"Personal account"}),l.jsx("div",{className:"text-xs text-white/70",children:"You are currently using a personal account."})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx("label",{className:"text-sm text-white/80",children:"Join a group with code"}),l.jsx("input",{value:Ze,onChange:ie=>Ve(ie.target.value),className:"w-full rounded-xl border border-white/10 bg-white/5 px-3 py-3 text-sm outline-none focus:ring-2 focus:ring-emerald-400",placeholder:"#1234"}),l.jsx(Oe,{className:"w-full justify-center",onClick:er,disabled:De,children:De?"Joining...":"Join Group"})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx("label",{className:"text-sm text-white/80",children:"Create a new group"}),l.jsx("input",{value:O,onChange:ie=>ge(ie.target.value),className:"w-full rounded-xl border border-white/10 bg-white/5 px-3 py-3 text-sm outline-none focus:ring-2 focus:ring-emerald-400",placeholder:"Team Knights"}),l.jsx(Oe,{className:"w-full justify-center",onClick:Hn,disabled:De,children:De?"Creating...":"Create Group"})]})]})]})}),xe&&l.jsx("div",{className:"fixed inset-0 z-50 flex items-start justify-center bg-black/70 px-4 py-10 overflow-y-auto",children:l.jsxs("div",{className:"w-full max-w-4xl rounded-3xl bg-slate-900 text-white border border-white/10 shadow-2xl p-6 space-y-5",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{children:[l.jsx("div",{className:"text-xl font-semibold",children:"Manage Group"}),l.jsx("div",{className:"text-sm text-white/70",children:"Only members in this group can see these courses and leaderboards."})]}),l.jsx("button",{className:"h-10 w-10 rounded-full bg-white/10 flex items-center justify-center hover:bg-white/20",onClick:()=>{Be(!1),J("")},"aria-label":"Close",children:"X"})]}),Ke&&l.jsx("div",{className:"rounded-xl border border-amber-400/40 bg-amber-400/10 text-amber-100 px-3 py-2 text-sm",children:Ke}),l.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[l.jsxs("div",{className:"rounded-xl border border-white/10 bg-white/5 p-4 space-y-3",children:[l.jsx("div",{className:"text-sm text-white/70",children:"Group name"}),l.jsx("input",{value:O,onChange:ie=>ge(ie.target.value),className:"w-full rounded-xl border border-white/10 bg-slate-900 px-3 py-2 text-sm outline-none focus:ring-2 focus:ring-emerald-400",placeholder:"Team Knights"}),l.jsx(Oe,{variant:"outline",onClick:ls,disabled:De,children:De?"Saving...":"Rename Group"}),l.jsxs("div",{className:"text-xs text-white/60",children:["Code: ",t?.groupCode||"No code yet"," (share this to invite)"]})]}),l.jsxs("div",{className:"rounded-xl border border-white/10 bg-white/5 p-4 space-y-3",children:[l.jsxs("div",{className:"flex items-center justify-between text-sm font-semibold",children:[l.jsx("span",{children:"Members"}),l.jsxs("span",{className:"text-white/60 text-xs",children:[Se.length," total"]})]}),l.jsx("input",{value:Xe,onChange:ie=>nt(ie.target.value),placeholder:"Search members",className:"w-full rounded-xl border border-white/10 bg-slate-900 px-3 py-2 text-sm text-white outline-none focus:ring-2 focus:ring-emerald-400"}),Yn.length===0?l.jsx("div",{className:"text-xs text-white/60",children:"No members listed yet."}):l.jsx("div",{className:"space-y-2 max-h-64 overflow-y-auto pr-1",children:Yn.map(ie=>l.jsxs("div",{className:"flex items-center justify-between rounded-lg border border-white/10 bg-slate-900 px-3 py-2 text-sm",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("div",{className:"h-8 w-8 rounded-full bg-white/10 flex items-center justify-center uppercase",children:(ie.displayName||ie.email||"U").slice(0,2)}),l.jsxs("div",{children:[l.jsx("div",{className:"font-semibold",children:ie.displayName||"Member"}),l.jsx("div",{className:"text-xs text-white/60",children:ie.role==="admin"?"Admin":"Member"})]})]}),ie.id!==t?.id&&l.jsx(Oe,{variant:"ghost",size:"sm",onClick:()=>$n(ie.id),disabled:De,children:"Remove"})]},ie.id))})]})]}),l.jsxs("div",{className:"rounded-xl border border-rose-400/30 bg-rose-500/10 p-4 space-y-2",children:[l.jsxs("div",{className:"flex items-center gap-2 text-rose-100",children:[l.jsx(C4,{className:"h-4 w-4"}),l.jsx("div",{className:"font-semibold",children:"Delete group"})]}),l.jsx("div",{className:"text-xs text-white/70",children:"Deleting will remove the group, its private courses, and leaderboard visibility for all members."}),l.jsx("input",{value:bt,onChange:ie=>Ie(ie.target.value),placeholder:'Type "DELETE" to confirm',className:"w-full rounded-xl border border-white/10 bg-slate-900 px-3 py-2 text-sm outline-none focus:ring-2 focus:ring-rose-400"}),l.jsx(Oe,{variant:"outline",onClick:Ks,disabled:De,children:De?"Deleting...":"Delete group"})]})]})}),ue&&l.jsx("div",{className:"fixed inset-0 z-40 flex items-center justify-center bg-black/70 px-4",children:l.jsxs("div",{className:"w-full max-w-md rounded-3xl bg-slate-900 text-white border border-white/10 shadow-2xl p-6 space-y-4",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{children:[l.jsx("div",{className:"text-lg font-semibold",children:"Change email"}),l.jsx("div",{className:"text-xs text-white/60",children:"Update the email for your account and notifications."})]}),l.jsx("button",{className:"h-9 w-9 rounded-full bg-white/10 flex items-center justify-center hover:bg-white/20",onClick:()=>ne(!1),"aria-label":"Close",children:l.jsx(vr,{className:"h-4 w-4"})})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx("label",{className:"text-xs uppercase tracking-[0.08em] text-white/50",children:"New email"}),l.jsx("input",{value:V,onChange:ie=>z(ie.target.value),className:"w-full rounded-xl border border-white/10 bg-white/5 px-3 py-3 text-sm outline-none focus:ring-2 focus:ring-emerald-400",placeholder:"you@example.com",onKeyDown:ie=>{ie.key==="Enter"&&(ie.preventDefault(),os())}}),U&&l.jsx("div",{className:"text-xs text-rose-300",children:U}),fe==="success"&&l.jsx("div",{className:"text-xs text-emerald-300",children:"Email updated."})]}),l.jsxs("div",{className:"flex justify-end gap-2 pt-2",children:[l.jsx(Oe,{variant:"ghost",onClick:()=>ne(!1),className:"min-w-[100px]",children:"Cancel"}),l.jsx(Oe,{onClick:os,disabled:fe==="loading",className:"min-w-[100px]",children:fe==="loading"?"Saving...":"Save"})]})]})}),d&&l.jsx("div",{className:"fixed inset-0 z-40 flex items-center justify-center bg-black/70 px-4",children:l.jsxs("div",{className:"w-full max-w-md rounded-3xl bg-slate-900 text-white border border-white/10 shadow-2xl relative",children:[l.jsx("button",{className:"absolute right-3 top-3 text-white/70 hover:text-white",onClick:()=>f(!1),"aria-label":"Close",children:""}),l.jsxs("div",{className:"px-6 py-6 space-y-4",children:[l.jsxs("div",{children:[l.jsx("div",{className:"text-xl font-bold",children:"Change your Chess.com account"}),l.jsx("div",{className:"text-sm text-white/70 mt-1",children:"We will use this information to:"})]}),l.jsx("div",{className:"space-y-2 text-sm text-white/80",children:["Recommend you the best courses to study","Analyze your games and tell you where you make mistakes","Break down your chess skills and what to improve"].map((ie,lt)=>l.jsxs("div",{className:"flex items-start gap-2",children:[l.jsx(Lw,{className:"h-4 w-4 text-emerald-400 mt-0.5"}),l.jsx("span",{children:ie})]},lt))}),l.jsxs("div",{className:"space-y-2",children:[l.jsx("label",{className:"text-xs uppercase tracking-[0.08em] text-white/50",children:"Chess.com username"}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("input",{value:g,onChange:ie=>b(ie.target.value),className:"w-full rounded-xl border border-white/10 bg-white/5 px-3 py-3 text-sm outline-none focus:ring-2 focus:ring-emerald-400",placeholder:"Chess.com username",onKeyDown:ie=>{ie.key==="Enter"&&(ie.preventDefault(),_s())}}),l.jsx(Oe,{variant:"outline",className:"whitespace-nowrap",onClick:_s,disabled:w==="loading",children:w==="loading"?"Searching...":"Link"})]}),C&&l.jsx("div",{className:"text-xs text-rose-300",children:C}),w==="success"&&j&&l.jsxs("div",{className:"rounded-xl border border-emerald-400/40 bg-emerald-500/10 px-3 py-3 text-sm space-y-1",children:[l.jsxs("div",{className:"font-semibold text-emerald-200 flex items-center gap-2",children:[l.jsx("span",{className:"h-2 w-2 rounded-full bg-emerald-400"}),j.username]}),j.title&&l.jsxs("div",{className:"text-white/80",children:["Title: ",j.title]}),l.jsx("div",{className:"text-white/70",children:yj(j.lastOnline)||"Activity data unavailable"})]})]}),l.jsx("div",{className:"pt-2",children:l.jsx(Oe,{className:"w-full justify-center",onClick:async()=>{if(w!=="success"||!j){await _s();return}try{k("loading");const ie=g.trim(),lt=j.username.toLowerCase(),Pt=await Mn(lt),Bt=await Fg(),Gt=Ls(Pt,Bt);g8(Gt,ie||j.username),o(ie||j.username);const H=await HE(ie||j.username);H&&n(H),k("success"),f(!1)}catch(ie){k("error"),N(ie?.message||"Could not fetch openings to build recommendations.")}},children:w==="success"?"Save account":w==="loading"?"Working...":"Continue"})})]})]})}),$&&l.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 px-4",children:l.jsxs("div",{className:"w-full max-w-4xl rounded-3xl bg-slate-900 text-white border border-white/10 shadow-2xl",children:[l.jsxs("div",{className:"flex items-center justify-between px-5 py-4 border-b border-white/10",children:[l.jsx("div",{className:"text-lg font-semibold",children:"Board customization"}),l.jsx("button",{className:"text-white/70 hover:text-white",onClick:()=>Q(!1),"aria-label":"Close",children:l.jsx(vr,{className:"h-5 w-5"})})]}),l.jsxs("div",{className:"p-5 space-y-6",children:[l.jsxs("div",{className:"rounded-2xl bg-slate-800/70 border border-white/10 p-4",children:[l.jsx("div",{className:"text-white mb-3 font-semibold",children:"Active Piece: White Queen"}),l.jsx("div",{className:"flex flex-col gap-3 items-center",children:l.jsx("div",{className:"relative inline-block",children:l.jsx("div",{className:"grid grid-cols-8 grid-rows-8 w-full max-w-[320px] sm:max-w-[360px] mx-auto aspect-square overflow-hidden rounded-xl border border-white/10",children:Cn.map(ie=>l.jsxs("div",{className:"relative flex items-center justify-center text-xs font-semibold",style:{background:ie.isLight?Yp[ae]?.light||Yp.brown.light:Yp[ae]?.dark||Yp.brown.dark,color:"#111"},children:[ie.isHighlight&&l.jsx("div",{className:"absolute inset-0",style:{backgroundColor:Pj,opacity:.8}}),ie.piece&&l.jsx("img",{src:kj(ie.piece,qn),alt:"",className:`relative z-10 h-[36px] w-[36px] object-contain ${P==="freestyle"?"p-1":""} ${Nj(P,ie.piece)}`,draggable:!1}),ie.coord&&l.jsx("div",{className:"absolute left-1 bottom-1 text-[10px] text-black/70",children:ie.coord})]},ie.name))})})})]}),l.jsxs("div",{className:"grid md:grid-cols-2 gap-4 text-sm text-white",children:[l.jsx(cw,{label:"Board",value:ae,onChange:ie=>X(ie),options:wj}),l.jsx(cw,{label:"Pieces",value:P,onChange:ie=>W(ie),options:xj})]}),l.jsx("div",{className:"flex justify-end",children:l.jsx(Oe,{className:"px-6",onClick:async()=>{const ie=$r(ae).key,lt=Tr(P).key,Pt=await JE(ie,lt);Pt&&n(Pt),Q(!1)},children:"Save"})})]})]})}),Ut&&l.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 px-4",children:l.jsxs("div",{className:"w-full max-w-md rounded-3xl bg-slate-900 text-white border border-white/10 shadow-2xl p-6 space-y-4",children:[l.jsxs("div",{className:"flex items-start justify-between gap-3",children:[l.jsxs("div",{children:[l.jsx("div",{className:"text-lg font-semibold",children:"Email support"}),l.jsx("div",{className:"text-xs text-white/60",children:"Well send your message to officialpawnpoint@gmail.com"})]}),l.jsx("button",{className:"h-9 w-9 rounded-full bg-white/10 flex items-center justify-center hover:bg-white/20",onClick:()=>Kt(!1),"aria-label":"Close",children:l.jsx(vr,{className:"h-4 w-4"})})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx("label",{className:"text-xs uppercase tracking-[0.08em] text-white/50",children:"Your message"}),l.jsx("textarea",{value:dt,onChange:ie=>Ft(ie.target.value),className:"w-full rounded-xl border border-white/10 bg-white/5 px-3 py-3 text-sm outline-none focus:ring-2 focus:ring-emerald-400",rows:4,placeholder:"Describe the issue you're facing..."})]}),l.jsxs("div",{className:"flex justify-end gap-2",children:[l.jsx(Oe,{variant:"ghost",onClick:()=>Kt(!1),children:"Cancel"}),l.jsx(Oe,{onClick:()=>{const ie=encodeURIComponent("Pawn Point Support Request"),lt=encodeURIComponent(dt||"Hi team,");window.location.href=`mailto:officialpawnpoint@gmail.com?subject=${ie}&body=${lt}`,Kt(!1)},disabled:!dt.trim(),children:"Email Support"})]})]})}),u&&l.jsx("div",{className:"fixed inset-0 z-40 flex items-start justify-center bg-black/60 px-4 py-10 overflow-y-auto",children:l.jsxs("div",{className:"w-full max-w-5xl rounded-2xl bg-slate-900 text-white border border-white/10 shadow-2xl p-6 space-y-4",children:[l.jsxs("button",{className:"flex items-center gap-2 text-sm text-white/70",onClick:()=>ye(!1),children:[l.jsx(r2,{className:"h-4 w-4"}),"Back"]}),l.jsx("div",{className:"text-2xl font-bold",children:"Reset Progress"}),Ye?l.jsx("div",{className:"text-white/70 text-sm",children:"Loading your courses"}):ve.length===0?l.jsx("div",{className:"text-white/70 text-sm",children:"You have no courses with earned XP to reset."}):l.jsx("div",{className:"grid md:grid-cols-2 gap-4",children:ve.map(({course:ie,percent:lt})=>l.jsxs("div",{className:"rounded-xl border border-white/10 bg-slate-800/60 p-4 flex items-center gap-4",children:[l.jsx("div",{className:"h-14 w-14 rounded-xl overflow-hidden bg-white/5 flex items-center justify-center",children:l.jsx("img",{src:ie.thumbnailUrl,alt:ie.title,className:"h-full w-full object-cover"})}),l.jsxs("div",{className:"flex-1 space-y-2",children:[l.jsx("div",{className:"font-semibold text-white",children:ie.title}),l.jsxs("div",{className:"flex items-center gap-2 text-xs text-white/70",children:[l.jsx("div",{className:"flex-1 h-2 rounded-full bg-white/10 overflow-hidden",children:l.jsx("div",{className:"h-full bg-emerald-400",style:{width:`${Math.min(100,Math.max(0,lt))}%`}})}),l.jsxs("span",{className:"font-semibold text-white",children:[lt,"%"]})]})]}),l.jsx(Oe,{variant:"outline",className:"min-w-[88px]",disabled:Me===ie.id,onClick:()=>bn(ie.id),children:Me===ie.id?"Resetting...":"Reset"})]},ie.id))})]})})]})}function yj(t){if(!t)return null;const e=Date.now()/1e3-t;return e<3600?"Active recently":e<86400?"Active today":`Active ${Math.floor(e/86400)}d ago`}const wj=Object.keys($g).map(t=>({label:t.charAt(0).toUpperCase()+t.slice(1),value:t})),xj=Object.keys(Q0).map(t=>({label:t.charAt(0).toUpperCase()+t.slice(1),value:t})),Yp=$g,Pj="#f3cd4b";function _j(t){const e=t.split(" ")[0].split("/"),n=[];e.forEach((o,d)=>{let f=0;o.split("").forEach(g=>{if(/[1-8]/.test(g)){const b=Number(g);for(let w=0;w<b;w++){const k=`${"abcdefgh"[f]}${8-d}`;n.push({name:k,piece:null,isLight:(f+d)%2===0,coord:k}),f++}}else{const b=`${"abcdefgh"[f]}${8-d}`;n.push({name:b,piece:g,isLight:(f+d)%2===0,coord:b}),f++}})});const r=["d3","e2","e5","f3"];return n.map(o=>({...o,isHighlight:r.includes(o.name)}))}function cw({label:t,value:e,onChange:n,options:r}){return l.jsxs("div",{className:"space-y-1",children:[l.jsx("div",{className:"text-white/80 text-sm",children:t}),l.jsxs("div",{className:"relative",children:[l.jsxs("button",{className:"w-full flex items-center justify-between rounded-xl bg-slate-800 border border-white/10 px-3 py-3 text-white text-sm",children:[l.jsx("span",{children:r.find(o=>o.value===e)?.label||e}),l.jsx(Gg,{className:"h-4 w-4 text-white/60"})]}),l.jsx("select",{className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer",value:e,onChange:o=>n(o.target.value),children:r.map(o=>l.jsx("option",{value:o.value,children:o.label},o.value))})]})]})}function kj(t,e){if(!t||t.length===0)return"";const n=t===t.toUpperCase(),r=t.toLowerCase();return n?e.w[r]:e.b[r]}function Nj(t,e){if(!e)return"";const n=e===e.toUpperCase(),r=e.toLowerCase();if(t==="chesscom"){if(r==="p")return n?"scale-110":"scale-90";if(!n&&r==="k")return"scale-110 translate-y-[1px]"}return t==="freestyle"&&r==="p"&&!n?"scale-110":""}const j_="/assets/Advent%20Calendar-J5ITks2v.png",cg="/assets/Christmas%20Pawn-D_bCmMDk.png",I_="/assets/Gift-ueUQQsya.png",Cj="/assets/Grinch%20pfp-zl_ex9Kh.png",Sj="/assets/Mistletoe%20pfp-BFt_2ImS.png",Rj="/assets/Rook%20pfp-CqClYD4h.png",Tj="/assets/Santa%20pfp-DfWqBBWO.png",Ej="/assets/Snowman%20pfp-J9IJC07F.png",jj="/assets/Tree%20pfp-BT-iifK4.png",Xp=[{label:"Gift Box",value:I_},{label:"Christmas Pawn",value:cg},{label:"Advent Banner",value:j_},{label:"Grinch",value:Cj},{label:"Mistletoe",value:Sj},{label:"Rook",value:Rj},{label:"Santa",value:Tj},{label:"Snowman",value:Ej},{label:"Tree",value:jj}],uw=["Emerald King","Sapphire Queen","Ruby Rook","Amber Bishop","Onyx Knight","Ivory Pawn"];function Ij(){const{user:t,setUser:e}=$s(),[n,r]=T.useState(dw()),o=T.useMemo(()=>24-Math.max(0,n.days),[n.days]),[d,f]=T.useState({}),[g,b]=T.useState(!1),[w,k]=T.useState(null),[C,N]=T.useState({}),[j,M]=T.useState({type:"pfp",value:Xp[0].value}),[$,Q]=T.useState(null),[ae,X]=T.useState(()=>{try{const ce=localStorage.getItem("advent_unlocked_videos");return ce?JSON.parse(ce):{}}catch{return{}}}),[P,W]=T.useState(()=>{try{const ce=localStorage.getItem("advent_claimed_days");return ce?new Set(JSON.parse(ce)):new Set}catch{return new Set}});T.useEffect(()=>{const ce=setInterval(()=>r(dw()),1e3);return()=>clearInterval(ce)},[]),T.useEffect(()=>{(async()=>{try{const ue=await yr(ct(ut,"adventGifts"));ue.exists()&&N(ue.val())}catch(ue){console.warn("Failed to load advent gifts",ue)}})()},[]);const u=t?.totalXp??0,ye=t?.pawns??0,ve=Math.floor(u/25),be=!!t?.isAdmin,Ye=(ce,ue)=>ue?.type==="video"?ae[ce]||ue.value:"",me=ce=>{ce&&window.open(ce,"_blank","noopener,noreferrer")},Me=ce=>{W(ue=>{if(ue.has(ce))return ue;const ne=new Set(ue);return ne.add(ce),localStorage.setItem("advent_claimed_days",JSON.stringify(Array.from(ne))),ne})},Ce=async(ce,ue)=>{if(!t)return;let ne=ue;try{const V=await f8(t.id,ue);V&&e(V),ue.type==="video"&&ue.value&&X(z=>{const fe={...z,[ce]:ue.value};return localStorage.setItem("advent_unlocked_videos",JSON.stringify(fe)),fe}),ne=ue.type==="video"?{...ue,value:Ye(ce,ue)}:ue}catch(V){console.warn("Failed to unlock gift",V)}finally{Me(ce),Q({day:ce,gift:ne})}},$e=async(ce,ue,ne)=>{if(!t)return;const V=ne||C[ce]||{type:"pawns",value:ue};if(P.has(ce)){f(oe=>({...oe,[ce]:!0})),Q({day:ce,gift:V.type==="video"?{...V,value:Ye(ce,V)}:V});return}if((t.pawns||0)<ue){alert("Not enough pawns to unlock this reward.");return}const z=(t.pawns||0)-ue,fe={...t,pawns:z};e(fe),localStorage.setItem("pawnpoint_user",JSON.stringify(fe));try{await Fr(ct(ut,`users/${t.id}`),fe)}catch(oe){console.warn("Failed to update pawns after purchase",oe)}f(oe=>({...oe,[ce]:!0})),await Ce(ce,V)};return l.jsx(Js,{children:l.jsxs("div",{className:"relative w-full min-h-screen overflow-hidden",children:[l.jsx("div",{className:"fixed inset-0 -z-10",style:{backgroundImage:`url(${C_})`,backgroundSize:"cover",backgroundPosition:"center",backgroundRepeat:"no-repeat"}}),l.jsxs("div",{className:"relative flex flex-col items-center gap-6 px-4 pb-12 pt-12",children:[l.jsxs("div",{className:"absolute right-4 top-4 flex items-center gap-2 rounded-full bg-white/10 border border-white/15 px-4 py-2 text-white shadow-lg",children:[l.jsx("img",{src:cg,alt:"Pawn counter",className:"h-6 w-6 object-contain"}),l.jsxs("div",{className:"text-sm font-semibold",children:[ye," Pawns"]})]}),l.jsx("div",{className:"w-full max-w-5xl flex flex-col gap-3",children:l.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-3 sm:gap-4 text-center sm:text-left",children:[l.jsx("img",{src:cg,alt:"Christmas Pawn",className:"h-16 w-16 object-contain mx-auto sm:mx-0"}),l.jsxs("div",{className:"text-white space-y-1",children:[l.jsx("div",{className:"text-lg font-semibold",children:"Welcome to the Pawn Point Advent Calendar!"}),l.jsx("div",{className:"text-sm text-white/80 leading-relaxed",children:"Every day leading up to Christmas, you can open a new tile and unlock a special holiday-themed cosmetic, surprise reward, or limited-edition item. Check back daily to discover what the South Knight has prepared for youyour festive journey begins now!"})]})]})}),l.jsxs("div",{className:"w-full max-w-5xl rounded-3xl bg-slate-900 border border-white/10 shadow-2xl overflow-hidden relative mx-auto",children:[l.jsx("img",{src:j_,alt:"Advent Calendar",className:"w-full h-full object-contain"}),l.jsx("div",{className:"absolute inset-3 sm:inset-4 grid grid-cols-3 sm:grid-cols-4 md:grid-cols-6 grid-rows-4 gap-2 sm:gap-1.5 p-1 pointer-events-none",children:Array.from({length:24}).map((ce,ue)=>{const ne=ue+1,V=ne<=o,z=d[ne]||P.has(ne),fe=ne*10,oe=C[ne];return l.jsxs("div",{className:`reward-card relative rounded-lg bg-black/45 backdrop-blur-sm border border-white/10 flex flex-col items-center justify-center gap-2 text-white font-semibold text-sm pointer-events-auto transition-transform duration-500 ${z?"rotate-y-180":""}`,style:{transformStyle:"preserve-3d"},onClick:()=>{z||(V||be)&&(f(U=>({...U,[ne]:!0})),oe&&Ce(ne,oe))},children:[be&&l.jsx("button",{className:"absolute right-1.5 top-1.5 h-7 w-7 rounded-full bg-white/20 hover:bg-white/30 flex items-center justify-center",onClick:U=>{U.stopPropagation(),k(ne),M(C[ne]||{type:"pfp",value:Xp[0].value})},"aria-label":"Edit gift",children:l.jsx(Qd,{className:"h-4 w-4"})}),z?l.jsxs("div",{className:"flex flex-col items-center justify-center gap-3 w-full h-full bg-gradient-to-br from-[#3b0b47] via-[#4c0c58] to-[#2b0a38] rounded-lg relative p-2 text-center",style:{transform:"rotateY(180deg)"},children:[l.jsx("button",{className:"absolute right-2 top-2 text-white/80 hover:text-white text-sm",onClick:U=>{U.preventDefault(),U.stopPropagation(),f(Z=>({...Z,[ne]:!1}))},"aria-label":"Close reward",children:""}),l.jsx("img",{src:I_,alt:"Gift",className:"h-20 w-20 md:h-24 md:w-24 object-contain drop-shadow-[0_12px_24px_rgba(255,180,80,0.75)] animate-bounce"}),l.jsxs("div",{className:"space-y-1 text-xs text-white/80",children:[l.jsx("div",{className:"font-semibold text-sm text-white",children:"Reward"}),l.jsx("button",{type:"button",className:"inline-flex items-center justify-center rounded-full bg-gradient-to-r from-amber-300 to-orange-500 px-4 py-1.5 text-xs font-semibold text-[#2b0b38] shadow-md hover:shadow-lg",onClick:async U=>{U.preventDefault(),U.stopPropagation(),!(!V&&!be)&&await $e(ne,fe,oe)},children:`${fe} Pawns`}),oe&&l.jsxs("div",{className:"text-[11px] text-white/80",children:["Unlocked: ",hw(oe)]}),oe?.type==="video"&&Ye(ne,oe)&&l.jsx(Oe,{size:"sm",className:"mt-1 bg-emerald-500 text-slate-900 hover:bg-emerald-400",onClick:U=>{U.preventDefault(),U.stopPropagation(),me(Ye(ne,oe))},children:"Watch Video"})]})]}):l.jsxs("div",{className:"flex flex-col items-center gap-2 py-3 px-2",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[V?l.jsx(f4,{className:"h-4 w-4 text-emerald-300"}):l.jsx(zw,{className:"h-4 w-4 text-white/80"}),l.jsx("span",{children:ne})]}),(V||be)&&l.jsx("button",{type:"button",className:"text-xs px-2 py-1 rounded-md bg-emerald-500 hover:bg-emerald-400 text-black font-semibold relative z-10",onClick:async U=>{U.preventDefault(),U.stopPropagation(),!(!V&&!be)&&await $e(ne,fe,oe)},children:"Redeem"}),oe&&be&&l.jsxs("div",{className:"text-[10px] text-white/70 flex items-center gap-1",children:[l.jsx(Lw,{className:"h-3 w-3 text-emerald-300"}),l.jsx("span",{children:hw(oe)})]})]})]},ue)})})]}),l.jsx("button",{type:"button",className:"mt-2 inline-flex items-center justify-center rounded-xl bg-emerald-500 px-5 py-2 text-sm font-semibold text-slate-900 shadow-lg hover:bg-emerald-400 focus:outline-none focus:ring-2 focus:ring-emerald-300",onClick:()=>b(!0),children:"Cash in XP"})]}),g&&l.jsx("div",{className:"fixed inset-0 z-30 flex items-center justify-center bg-black/60 px-4",children:l.jsxs("div",{className:"w-full max-w-md rounded-2xl bg-slate-900 text-white border border-white/10 shadow-2xl p-6 space-y-4",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{children:[l.jsx("div",{className:"text-lg font-semibold",children:"Cash in XP"}),l.jsx("div",{className:"text-sm text-white/70",children:"Convert your XP into Pawns (25 XP = 1 Pawn)"})]}),l.jsx("button",{className:"h-9 w-9 rounded-full bg-white/10 hover:bg-white/20 flex items-center justify-center",onClick:()=>b(!1),"aria-label":"Close",children:""})]}),l.jsxs("div",{className:"space-y-3",children:[l.jsxs("div",{className:"flex items-center justify-between rounded-xl bg-white/5 border border-white/10 px-4 py-3",children:[l.jsx("div",{className:"text-sm text-white/70",children:"Your XP"}),l.jsxs("div",{className:"text-lg font-semibold text-white",children:[u," XP"]})]}),l.jsxs("div",{className:"flex items-center justify-between rounded-xl bg-white/5 border border-white/10 px-4 py-3",children:[l.jsxs("div",{className:"flex items-center gap-2 text-sm text-white/70",children:[l.jsx("img",{src:cg,alt:"Pawn",className:"h-6 w-6 object-contain"}),l.jsx("span",{children:"Pawns you can claim"})]}),l.jsx("div",{className:"text-lg font-semibold text-white",children:ve})]})]}),l.jsx("div",{className:"text-xs text-white/60",children:"Pawns are calculated from your current XP. Check back after earning more XP to claim additional Pawns."}),l.jsxs("div",{className:"flex justify-between items-center gap-3",children:[l.jsx("button",{className:"rounded-lg bg-amber-400 px-4 py-2 text-sm font-semibold text-slate-900 hover:bg-amber-300 disabled:opacity-50 disabled:cursor-not-allowed",disabled:!t||ve<=0,onClick:async()=>{if(!t||ve<=0)return;const ce=await QE(t.id);ce&&e(ue=>ue&&{...ue,pawns:(ue.pawns||0)+ce.pawnsAdded,totalXp:ce.remainingXp,level:Math.floor(ce.remainingXp/100)+1})},children:"Claim Now!"}),l.jsx("button",{className:"rounded-lg bg-emerald-500 px-4 py-2 text-sm font-semibold text-slate-900 hover:bg-emerald-400",onClick:()=>b(!1),children:"Close"})]})]})}),w!==null&&be&&l.jsx("div",{className:"fixed inset-0 z-40 flex items-start justify-center bg-black/60 px-4 py-10 overflow-y-auto",children:l.jsxs("div",{className:"w-full max-w-2xl rounded-2xl bg-slate-900 text-white border border-white/10 shadow-2xl p-6 space-y-4",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{children:[l.jsxs("div",{className:"text-lg font-semibold",children:["Edit Gift for Day ",w]}),l.jsx("div",{className:"text-sm text-white/70",children:"Choose what users receive when they open this tile."})]}),l.jsx("button",{className:"h-9 w-9 rounded-full bg-white/10 hover:bg-white/20 flex items-center justify-center",onClick:()=>k(null),"aria-label":"Close gift editor",children:"-"})]}),l.jsxs("div",{className:"grid sm:grid-cols-2 gap-3 text-sm",children:[l.jsxs("label",{className:"flex items-center gap-2 rounded-xl border border-white/10 bg-white/5 px-3 py-2 cursor-pointer",children:[l.jsx("input",{type:"radio",name:"gift-type",checked:j.type==="pfp",onChange:()=>M({type:"pfp",value:Xp[0].value}),className:"accent-emerald-400"}),l.jsx(c4,{className:"h-4 w-4 text-emerald-300"}),l.jsx("span",{children:"Profile Picture"})]}),l.jsxs("label",{className:"flex items-center gap-2 rounded-xl border border-white/10 bg-white/5 px-3 py-2 cursor-pointer",children:[l.jsx("input",{type:"radio",name:"gift-type",checked:j.type==="tagline",onChange:()=>M({type:"tagline",value:""}),className:"accent-emerald-400"}),l.jsx(N4,{className:"h-4 w-4 text-emerald-300"}),l.jsx("span",{children:"Special Tagline"})]}),l.jsxs("label",{className:"flex items-center gap-2 rounded-xl border border-white/10 bg-white/5 px-3 py-2 cursor-pointer",children:[l.jsx("input",{type:"radio",name:"gift-type",checked:j.type==="piece",onChange:()=>M({type:"piece",value:uw[0]}),className:"accent-emerald-400"}),l.jsx(Kw,{className:"h-4 w-4 text-emerald-300"}),l.jsx("span",{children:"Chess Piece Cosmetic"})]}),l.jsxs("label",{className:"flex items-center gap-2 rounded-xl border border-white/10 bg-white/5 px-3 py-2 cursor-pointer",children:[l.jsx("input",{type:"radio",name:"gift-type",checked:j.type==="video",onChange:()=>M({type:"video",value:""}),className:"accent-emerald-400"}),l.jsx(T4,{className:"h-4 w-4 text-emerald-300"}),l.jsx("span",{children:"Video"})]})]}),j.type==="pfp"&&l.jsxs("div",{className:"space-y-2",children:[l.jsx("div",{className:"text-sm text-white/70",children:"Select profile picture"}),l.jsx("div",{className:"grid grid-cols-3 gap-3",children:Xp.map(ce=>l.jsxs("button",{className:`relative rounded-xl border px-2 py-2 bg-white/5 hover:bg-white/10 ${j.value===ce.value?"border-emerald-400 ring-2 ring-emerald-300/60":"border-white/10"}`,onClick:()=>M({type:"pfp",value:ce.value}),children:[l.jsx("img",{src:ce.value,alt:ce.label,className:"h-16 w-full object-cover rounded-lg"}),l.jsx("div",{className:"mt-1 text-xs text-white/80 text-center",children:ce.label})]},ce.value))})]}),j.type==="tagline"&&l.jsxs("div",{className:"space-y-2",children:[l.jsx("div",{className:"text-sm text-white/70",children:"Custom tagline"}),l.jsx("input",{className:"w-full rounded-xl bg-white/5 border border-white/10 px-3 py-2 text-sm text-white focus:outline-none focus:ring-2 focus:ring-emerald-400",placeholder:'e.g. "The Calculator"',value:j.value,onChange:ce=>M({type:"tagline",value:ce.target.value})})]}),j.type==="piece"&&l.jsxs("div",{className:"space-y-2",children:[l.jsx("div",{className:"text-sm text-white/70",children:"Select chess piece cosmetic"}),l.jsx("div",{className:"grid grid-cols-2 gap-2",children:uw.map(ce=>l.jsx("button",{className:`rounded-xl border px-3 py-2 text-left text-sm ${j.value===ce?"border-emerald-400 bg-emerald-400/10":"border-white/10 bg-white/5"}`,onClick:()=>M({type:"piece",value:ce}),children:ce},ce))})]}),j.type==="video"&&l.jsxs("div",{className:"space-y-2",children:[l.jsx("div",{className:"text-sm text-white/70",children:"Video URL (MP4 or stream link)"}),l.jsx("input",{className:"w-full rounded-xl bg-white/5 border border-white/10 px-3 py-2 text-sm text-white focus:outline-none focus:ring-2 focus:ring-emerald-400",placeholder:"https://...",value:j.value,onChange:ce=>M({type:"video",value:ce.target.value})})]}),l.jsxs("div",{className:"flex justify-end gap-2",children:[l.jsx(Oe,{variant:"ghost",onClick:()=>k(null),children:"Cancel"}),l.jsx(Oe,{onClick:()=>{w!==null&&(N(ce=>({...ce,[w]:j})),(async()=>{try{await Fr(ct(ut,`adventGifts/${w}`),j)}catch(ce){console.warn("Failed to persist gift config",ce)}finally{k(null)}})())},children:"Save Gift"})]})]})}),$&&l.jsx("div",{className:"fixed inset-0 z-40 flex items-center justify-center bg-black/70 px-4",children:l.jsxs("div",{className:"w-full max-w-lg rounded-2xl bg-slate-900 text-white border border-white/10 shadow-2xl p-6 space-y-4",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{children:[l.jsxs("div",{className:"text-lg font-semibold",children:["You unlocked Day ",$.day]}),l.jsx("div",{className:"text-sm text-white/70",children:"Enjoy your new reward!"})]}),l.jsx("button",{className:"h-9 w-9 rounded-full bg-white/10 hover:bg-white/20 flex items-center justify-center",onClick:()=>Q(null),"aria-label":"Close",children:"-"})]}),$.gift.type==="pfp"&&l.jsxs("div",{className:"space-y-3 text-sm",children:[l.jsx("div",{className:"text-white/80",children:"Profile Picture unlocked."}),l.jsx("img",{src:$.gift.value,alt:"Unlocked avatar",className:"h-32 w-32 rounded-full object-cover border border-white/10 shadow-lg mx-auto"}),l.jsx("div",{className:"text-white/70 text-sm text-center",children:"Equip it from My Profile."})]}),$.gift.type==="tagline"&&l.jsxs("div",{className:"space-y-3 text-sm",children:[l.jsx("div",{className:"text-white/80",children:"New tagline unlocked:"}),l.jsx("div",{className:"rounded-xl bg-white/5 border border-white/10 px-4 py-3 text-center text-emerald-200 font-semibold",children:$.gift.value||"New Tagline"}),l.jsx("div",{className:"text-white/70 text-sm text-center",children:"Manage taglines in My Profile."})]}),$.gift.type==="video"&&l.jsxs("div",{className:"space-y-3 text-sm",children:[l.jsx("div",{className:"text-white/80",children:"Video unlocked:"}),$.gift.value?l.jsx(Oe,{className:"bg-emerald-500 text-slate-900 hover:bg-emerald-400",onClick:()=>me($.gift.value),children:"Watch Video"}):l.jsx("div",{className:"text-white/60",children:"No video URL provided."}),l.jsx("div",{className:"text-white/70 text-sm text-center",children:"You can rewatch from this tile anytime."})]}),$.gift.type==="piece"&&l.jsxs("div",{className:"space-y-3 text-sm",children:[l.jsx("div",{className:"text-white/80",children:"Chess set unlocked:"}),l.jsx("div",{className:"rounded-xl bg-white/5 border border-white/10 px-4 py-3 text-center text-emerald-200 font-semibold",children:$.gift.value||"New Chess Set"}),l.jsx("div",{className:"text-white/70 text-sm text-center",children:"Available in Board Customisation."})]}),l.jsx("div",{className:"flex justify-end",children:l.jsx(Oe,{onClick:()=>Q(null),children:"Close"})})]})})]})})}function dw(){const t=new Date,e=new Date(t.getFullYear(),11,25,0,0,0),n=t.getTime()+t.getTimezoneOffset()*6e4,r=7200*1e3,o=n+r,d=e.getTime()-o,f=Math.max(0,Math.floor(d/1e3)),g=Math.floor(f/86400),b=Math.floor(f%86400/3600),w=Math.floor(f%3600/60),k=f%60;return{days:g,hours:b,minutes:w,seconds:k}}function hw(t){switch(t.type){case"pfp":return"Profile Picture";case"tagline":return t.value?`Tagline: ${t.value}`:"Tagline";case"piece":return t.value||"Chess Piece";case"video":return"Video Reward";case"pawns":return`${t.value} Pawns`;default:return"Reward"}}const Aj="/assets/Snowflake%20Background-Cas1sPFf.png",Mj="/assets/Avatar%201-D-G0x6Bz.png",Dj="/assets/Avatar%202-DfIGw9Zw.png",Oj="/assets/Avatar%203-CbIntTqG.png",Uj="/assets/Avatar%204-BuUarBHi.png",Bj="/assets/Avatar%205-rvmtJWbA.png";function $j(){const{user:t,setUser:e}=$s(),[,n]=fa(),[r,o]=T.useState(!1),[d,f]=T.useState(t?.avatarUrl||qg),{data:g}=qd({queryKey:["profile",t?.id],enabled:!!t,queryFn:()=>k_(t)}),b=t?.totalXp||0,w=t?.level||1;t?.streak,t?.unlockedPfps;const k=t?.unlockedTaglines||[],[C,N]=T.useState(t?.taglinesEnabled??!0),[j,M]=T.useState(t?.selectedTagline||""),$=t?.accountType==="group"&&!!t?.groupId,Q=$&&t?.groupRole==="admin",ae=[{id:"south",label:"South Knight",url:qg},{id:"avatar1",label:"Avatar 1",url:Mj},{id:"avatar2",label:"Avatar 2",url:Dj},{id:"avatar3",label:"Avatar 3",url:Oj},{id:"avatar4",label:"Avatar 4",url:Uj},{id:"avatar5",label:"Avatar 5",url:Bj}],X=W=>{if(f(W),t){const u={...t,avatarUrl:W};localStorage.setItem("pawnpoint_user",JSON.stringify(u)),e(u),Wn(ct(ut,`users/${t.id}`),{avatarUrl:W}).catch(ye=>console.warn("Failed to persist avatar to Firebase",ye))}o(!1)},P=W=>{const u=new FileReader;u.onload=ye=>{const ve=ye.target?.result;typeof ve=="string"&&X(ve)},u.readAsDataURL(W)};return T.useEffect(()=>{t?.avatarUrl&&f(t.avatarUrl),N(t?.taglinesEnabled??!0),M(t?.selectedTagline||"")},[t?.avatarUrl,t?.taglinesEnabled,t?.selectedTagline]),T.useEffect(()=>{if(!j&&k.length){const W=k[0];M(W)}},[k,j]),t?l.jsx(Js,{children:l.jsxs("div",{className:"flex flex-col gap-6",children:[l.jsxs("div",{className:"relative overflow-hidden rounded-3xl border border-white/10 bg-slate-900 shadow-2xl",children:[l.jsx("img",{src:Aj,alt:"",className:"absolute inset-0 h-full w-full object-cover opacity-50 pointer-events-none"}),l.jsxs("div",{className:"relative z-10 flex flex-col lg:flex-row lg:items-center gap-6 p-6",children:[l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsxs("div",{className:"relative h-24 w-24 rounded-full overflow-hidden border-4 border-white/40 shadow-lg",children:[l.jsx("img",{src:d,alt:"Avatar",className:"h-full w-full object-cover"}),l.jsx("button",{onClick:()=>o(!0),className:"absolute bottom-1 right-1 h-8 w-8 rounded-full bg-white/80 text-slate-900 flex items-center justify-center shadow-lg hover:bg-white transition","aria-label":"Change profile picture",children:l.jsx(Qd,{className:"h-4 w-4"})})]}),l.jsxs("div",{className:"space-y-1 text-white",children:[l.jsx("div",{className:"text-2xl font-bold",children:t.chessUsername||t.displayName}),C&&j&&l.jsx("div",{className:"text-xs text-white/70 max-w-xs overflow-hidden text-ellipsis whitespace-nowrap",children:j}),l.jsx("div",{className:"text-sm text-white/80",children:t.email}),l.jsxs("div",{className:"text-sm text-white/70",children:["Member since"," ",t.createdAt?new Date(t.createdAt).toLocaleDateString(void 0,{year:"numeric",month:"short",day:"numeric"}):"your start date"]}),l.jsxs("div",{className:"text-sm text-white/70",children:["Chess.com: ",t.chessUsername||"Not linked"]}),$&&l.jsxs("div",{className:"flex flex-wrap items-center gap-2 text-sm text-white/80",children:[l.jsx("span",{className:"rounded-full bg-white/10 px-2 py-1",children:t.groupName||"Group member"}),Q&&t.groupCode&&l.jsxs("span",{className:"rounded-full bg-emerald-500/20 border border-emerald-300/40 px-2 py-1 text-emerald-100",children:["Group Code: ",t.groupCode]})]})]})]}),l.jsxs("div",{className:"flex-1 flex flex-wrap items-center gap-3 justify-start lg:justify-end",children:[l.jsx(Oe,{variant:"outline",onClick:()=>n("/settings"),children:"Settings"}),l.jsx(Oe,{variant:"ghost",onClick:()=>n("/dashboard"),children:"Back to Dashboard"})]})]})]}),l.jsxs("div",{className:"grid md:grid-cols-3 gap-4",children:[l.jsx(ha,{children:l.jsxs(mo,{className:"flex items-center gap-3 py-4",children:[l.jsx("div",{className:"h-11 w-11 rounded-xl bg-emerald-500/20 border border-emerald-400/40 flex items-center justify-center text-emerald-200 font-semibold",children:"XP"}),l.jsxs("div",{children:[l.jsx("div",{className:"text-xl font-bold text-white",children:b}),l.jsx("div",{className:"text-sm text-white/70",children:"Total XP"})]})]})}),l.jsx(ha,{children:l.jsxs(mo,{className:"flex items-center gap-3 py-4",children:[l.jsx("div",{className:"h-11 w-11 rounded-xl bg-indigo-500/20 border border-indigo-400/40 flex items-center justify-center text-indigo-200 font-semibold",children:"Lv"}),l.jsxs("div",{children:[l.jsx("div",{className:"text-xl font-bold text-white",children:w}),l.jsx("div",{className:"text-sm text-white/70",children:"Level"})]})]})})]}),r&&l.jsx("div",{className:"fixed inset-0 z-40 flex items-center justify-center bg-black/70 px-4",children:l.jsxs("div",{className:"w-full max-w-3xl rounded-2xl bg-slate-900 text-white border border-white/10 shadow-2xl p-6 space-y-4",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{children:[l.jsx("div",{className:"text-xl font-semibold",children:"Change Profile Picture"}),l.jsx("div",{className:"text-sm text-white/70",children:"Select the picture you want to use for your profile"})]}),l.jsx("button",{className:"h-10 w-10 rounded-full bg-white/10 flex items-center justify-center hover:bg-white/20 transition",onClick:()=>o(!1),"aria-label":"Close",children:l.jsx(vr,{className:"h-5 w-5"})})]}),l.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-4",children:ae.map(W=>{const u=d===W.url;return l.jsxs("button",{onClick:()=>X(W.url),className:`relative rounded-full p-1 border aspect-square ${u?"border-emerald-400 ring-2 ring-emerald-400/60":"border-transparent"} hover:border-white/30 transition`,style:{width:"6rem",height:"6rem"},children:[l.jsx("img",{src:W.url,alt:W.label,className:"h-full w-full rounded-full object-cover"}),u&&l.jsx("div",{className:"absolute inset-0 rounded-full border-2 border-emerald-300 pointer-events-none"})]},W.id)})}),l.jsx("div",{className:"flex items-center gap-3",children:l.jsxs("label",{className:"inline-flex items-center px-3 py-2 rounded-xl border border-white/10 bg-white/5 text-sm cursor-pointer hover:border-white/20",children:[l.jsx("input",{type:"file",accept:"image/*",className:"hidden",onChange:W=>{const u=W.target.files?.[0];u&&P(u)}}),"Upload custom photo"]})}),l.jsx("div",{className:"flex justify-end",children:l.jsx(Oe,{variant:"outline",onClick:()=>o(!1),children:"Close"})})]})})]})}):null}const Lj="/assets/Gold-Ccx5bixw.png",Kj="/assets/Diamond-COwqwCme.png",Fj="/assets/Ascendant-BxIqPGjZ.png",qj="/assets/Immortal-CnG6blb9.png",Qj="/assets/Radiant-Cz2eL1DU.png",Ei=[{key:"gold",label:"Gold",min:1,max:50,accent:"from-amber-400 to-amber-600",logo:l.jsx("img",{src:Lj,alt:"Gold rank",className:"h-6 w-6 object-contain"})},{key:"diamond",label:"Diamond",min:51,max:100,accent:"from-cyan-300 to-blue-500",logo:l.jsx("img",{src:Kj,alt:"Diamond rank",className:"h-6 w-6 object-contain"})},{key:"ascendant",label:"Ascendant",min:101,max:200,accent:"from-emerald-300 to-teal-500",logo:l.jsx("img",{src:qj,alt:"Ascendant rank",className:"h-6 w-6 object-contain"})},{key:"immortal",label:"Immortal",min:201,max:400,accent:"from-fuchsia-300 to-purple-500",logo:l.jsx("img",{src:Fj,alt:"Immortal rank",className:"h-6 w-6 object-contain"})},{key:"radiant",label:"Radiant",min:401,max:void 0,accent:"from-indigo-300 to-purple-600",logo:l.jsx("img",{src:Qj,alt:"Radiant rank",className:"h-6 w-6 object-contain"})}],fw=t=>Math.max(1,typeof t?.level=="number"?t.level:Math.floor((t?.totalXp||0)/100)+1),zj=t=>Ei.find(e=>t>=e.min&&(e.max===void 0||t<=e.max))||Ei[0],pw=t=>!t&&t!==0?"":t>=1e6?`${(t/1e6).toFixed(1)}M`:t>=1e3?`${(t/1e3).toFixed(1)}k`:t.toString();function Gj(){const{user:t}=$s(),[e,n]=T.useState(!0),[r,o]=T.useState([]),d=fw(t),f=zj(d),[g,b]=T.useState(Ei.findIndex(X=>X.key===f.key)),w=T.useRef(null);T.useEffect(()=>{let X=!0;return(async()=>{n(!0);try{const P=await m8(500);X&&o(P||[])}finally{X&&n(!1)}})(),()=>{X=!1}},[]);const k=T.useMemo(()=>{const X={gold:{users:[],position:null},diamond:{users:[],position:null},ascendant:{users:[],position:null},immortal:{users:[],position:null},radiant:{users:[],position:null}},P=r.map(W=>({id:W.id,name:W.chessUsername||W.displayName||W.email?.split("@")[0]||"Player",xp:W.totalXp||0,level:fw(W)}));return Ei.forEach(W=>{const u=P.filter(be=>be.level>=W.min&&(W.max===void 0||be.level<=W.max)).sort((be,Ye)=>{const me=Ye.xp-be.xp;return me!==0?me:be.name.localeCompare(Ye.name)}),ye=t?.id&&u.findIndex(be=>be.id===t.id)>=0?u.findIndex(be=>be.id===t.id)+1:null;let ve=u.slice(0,5);if(ye&&ye>5){const be=u.find(Ye=>Ye.id===t?.id);be&&(ve=[...ve,{...be}])}X[W.key]={users:ve,position:ye}}),X},[r,t?.id]);T.useEffect(()=>{const X=Ei.findIndex(P=>P.key===f.key);X>=0&&b(X)},[f.key]);const C=Ei[g]||Ei[0],N=T.useMemo(()=>T.cloneElement(C.logo,{className:"h-32 w-32 sm:h-44 sm:w-44 object-contain"}),[C.logo]),j=k[C.key].position,M=()=>{const X=Ei[g+1];if(!X)return null;const W=(X.min-1)*100,u=t?.totalXp||0;return Math.max(0,W-u)},[$,Q]=T.useState(!1);T.useEffect(()=>{$&&C.key!==f.key&&Q(!1)},[C.key,f.key,$]);const ae=()=>{Q(!0),w.current&&w.current.scrollIntoView({behavior:"smooth",block:"start"})};return l.jsxs(Js,{children:[l.jsx("style",{children:`
          @keyframes ranksGradientMove {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
          }
        `}),l.jsxs("div",{className:"relative min-h-screen text-white",children:[l.jsx("div",{className:"pointer-events-none fixed inset-0 z-0",style:{background:"linear-gradient(135deg, #05000f, #0d0620, #140429)",backgroundSize:"200% 200%",animation:"ranksGradientMove 20s ease-in-out infinite"},"aria-hidden":"true"}),l.jsxs("div",{className:"relative z-10 max-w-6xl mx-auto px-4 py-8 space-y-6",children:[l.jsx("div",{className:"flex flex-col items-center gap-6 min-h-[70vh] justify-center",children:l.jsxs("div",{className:"flex items-center justify-center gap-4",children:[l.jsx("button",{className:"p-2 rounded-full bg-white/10 hover:bg-white/20 text-white disabled:opacity-40",onClick:()=>b(X=>Math.max(0,X-1)),disabled:g===0,"aria-label":"Previous rank",children:l.jsx(r2,{className:"h-5 w-5"})}),l.jsxs("div",{className:"flex flex-col items-center text-center gap-2",children:[l.jsx("div",{className:`rounded-full bg-gradient-to-br ${C.accent} p-[5px] shadow-2xl`,children:l.jsx("div",{className:"flex h-40 w-40 sm:h-52 sm:w-52 items-center justify-center rounded-full bg-black/70",children:N})}),C.key===f.key?l.jsx("button",{className:"mt-2 rounded-full bg-white/20 hover:bg-white/30 px-4 py-2 text-sm font-semibold",onClick:ae,children:"View your spot"}):null,l.jsx("div",{className:"text-lg font-semibold",children:C.label}),l.jsxs("div",{className:"text-xs text-white/70",children:["Levels ",C.min," - ",C.max?C.max:"500+"]}),l.jsx("div",{className:"text-xs text-purple-100",children:C.key===f.key?"Your current rank":"Browse ranks"})]}),l.jsx("button",{className:"p-2 rounded-full bg-white/10 hover:bg-white/20 text-white disabled:opacity-40",onClick:()=>b(X=>Math.min(Ei.length-1,X+1)),disabled:g===Ei.length-1,"aria-label":"Next rank",children:l.jsx($w,{className:"h-5 w-5"})})]})}),$&&l.jsxs("div",{ref:w,className:"rounded-3xl border border-white/10 bg-gradient-to-br from-[#0b0719] via-[#0f0a25] to-[#130628] p-5 shadow-xl",children:[l.jsxs("div",{className:"flex items-center justify-between gap-3 flex-wrap",children:[l.jsxs("div",{children:[l.jsx("div",{className:"text-xs uppercase tracking-[0.12em] text-purple-300/80",children:"Your Spot"}),l.jsx("div",{className:"text-xl font-semibold",children:f.label}),l.jsxs("div",{className:"text-sm text-white/60",children:["Levels ",f.min," - ",f.max?f.max:"500+"]})]}),l.jsxs("div",{className:"text-right",children:[l.jsx("div",{className:"text-sm text-white/70",children:"Position"}),l.jsx("div",{className:"text-xl font-bold",children:j?`#${j}`:""})]})]}),l.jsxs("div",{className:"mt-4 grid grid-cols-1 sm:grid-cols-2 gap-3",children:[l.jsxs("div",{className:"rounded-2xl bg-white/5 border border-white/10 p-4",children:[l.jsx("div",{className:"text-xs text-white/60",children:"XP"}),l.jsxs("div",{className:"text-lg font-semibold",children:[pw(t?.totalXp||0)," XP"]})]}),l.jsxs("div",{className:"rounded-2xl bg-white/5 border border-white/10 p-4",children:[l.jsx("div",{className:"text-xs text-white/60",children:"To next rank"}),l.jsx("div",{className:"text-lg font-semibold",children:M()===null?"Max rank":`${pw(M()||0)} XP`})]})]}),l.jsx("div",{className:"mt-4 text-sm text-white/70",children:"This view shows only your standing and progress toward the next rank across all players."})]}),e&&l.jsxs("div",{className:"flex items-center gap-2 text-white/70 text-sm",children:[l.jsx(h4,{className:"h-4 w-4 animate-spin"}),"Loading ranks..."]})]})]})]})}function Vj(){const{user:t}=$s(),[e,n]=T.useState(new wt().fen()),[r,o]=T.useState("w"),[d,f]=T.useState(null),[g,b]=T.useState(""),[w,k]=T.useState("none"),[C,N]=T.useState(!1),[j,M]=T.useState([]),[$,Q]=T.useState(null),ae=T.useRef(!1),X=T.useRef(null),P=$r(t?.boardTheme).colors,{key:W,pieces:u}=T.useMemo(()=>Tr(t?.pieceTheme),[t?.pieceTheme]),ye=T.useMemo(()=>{const V=new wt(e).board();return r==="w"?V:V.slice().reverse().map(z=>z.slice().reverse())},[e,r]),ve=(ne,V)=>{const z="abcdefgh"[r==="w"?V:7-V],fe=r==="w"?8-ne:ne+1;return`${z}${fe}`},be=ne=>ne?ne.color==="w"?u.w[ne.type]:u.b[ne.type]:null,Ye=ne=>{if(!ne)return"";if(W==="chesscom"){if(ne.type==="p")return ne.color==="w"?"scale-110":"scale-90";if(ne.type==="k"&&ne.color==="b")return"scale-110 translate-y-[1px]"}return W==="freestyle"&&ne.type==="p"&&ne.color==="b"?"scale-110":""},me=(ne,V)=>{const z=new wt(e);if(ne===V){f(null);return}let fe=null;try{fe=z.move({from:ne,to:V,promotion:"q"})}catch{fe=null}if(!fe){f(null);return}n(z.fen()),f(null)},Me=(ne,V)=>{const z=ve(ne,V),fe=new wt(e);if(d===z){f(null);return}if(d){me(d,z);return}fe.get(z)&&f(z)},Ce=T.useCallback(ne=>{const V=ne.trim();if(V){try{const z=new wt(V);n(z.fen()),b(V),setMessage("Loaded position from FEN.");return}catch{}try{const z=new wt;z.loadPgn(V),n(z.fen()),b(V),setMessage("Loaded game from PGN.")}catch{setMessage("Could not load FEN/PGN. Check the format.")}}},[]),$e=ne=>{ne.preventDefault();const V=ne.dataTransfer.getData("text")||ne.dataTransfer.getData("text/plain");if(V){Ce(V);return}const z=ne.dataTransfer.files?.[0];z&&z.text().then(fe=>Ce(fe))};T.useEffect(()=>{if(!C){M([]),Q(null),X.current&&(X.current.terminate(),X.current=null);return}if(X.current)return;const ne=["/stockfish/stockfish.js","/stockfish/stockfish-lite-single.js","/stockfish/stockfish-asm.js"];let V=0;const z=oe=>{try{return new Worker(oe)}catch{return null}},fe=()=>{const oe=z(ne[V]);if(!oe){V+=1,V<ne.length&&fe();return}X.current=oe,oe.postMessage("uci"),oe.postMessage("isready"),oe.onmessage=U=>{const Z=String(U.data||"");Z.startsWith("info")&&ce(Z)}};return fe(),()=>{X.current?.terminate(),X.current=null}},[C]),T.useEffect(()=>{if(!C||!X.current||ae.current)return;ae.current=!0;const ne=X.current;ne.postMessage("stop"),ne.postMessage(`position fen ${e}`),ne.postMessage("setoption name MultiPV value 5"),ne.postMessage("go depth 14");const V=setTimeout(()=>{ae.current=!1},1500);return()=>clearTimeout(V)},[e,C]);const ce=ne=>{const V=ne.match(/multipv (\d+).*score (cp (-?\d+)|mate (-?\d+)).*pv (.+)/);if(!V)return;const z=Number(V[1]),fe=V[3]?Number(V[3]):void 0,oe=V[4]?Number(V[4]):void 0,U=V[5],Z=oe!==void 0?`M${oe}`:fe!==void 0?(fe/100).toFixed(1):"0";M(xe=>[...xe.filter(Ve=>Ve.multipv!==z),{multipv:z,score:Z,raw:U}].sort((Ve,O)=>Ve.multipv-O.multipv).slice(0,5)),z===1&&fe!==void 0&&Q(fe)},ue=$===null?50:50+Math.max(-500,Math.min(500,$))/500*50;return l.jsx(Js,{children:l.jsxs("div",{className:"flex flex-col gap-4 text-white",children:[l.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-end gap-2",children:[l.jsx(Oe,{variant:"outline",onClick:()=>o(ne=>ne==="w"?"b":"w"),children:"Flip Board"}),l.jsx(Oe,{variant:"outline",onClick:()=>n(new wt().fen()),children:"Reset"})]}),l.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-[minmax(360px,1fr)_320px] gap-4 items-start",children:[l.jsx("div",{className:"relative",children:l.jsxs("div",{className:"flex flex-col xl:flex-row gap-4 items-start",children:[l.jsx("div",{className:"relative block pl-6 sm:pl-8 pb-6 sm:pb-8 w-full max-w-[720px] mx-auto",children:l.jsx("div",{className:"rounded-[28px] overflow-hidden border border-white/10 shadow-[0_20px_60px_rgba(0,0,0,0.45)] w-full",style:{backgroundColor:P.dark},children:l.jsx("div",{className:"relative grid grid-cols-8 grid-rows-8 w-full max-w-[720px] aspect-square mx-auto",children:ye.map((ne,V)=>ne.map((z,fe)=>{const oe=ve(V,fe),U=(V+fe)%2===0,Z=d===oe;return l.jsx("button",{onClick:()=>Me(V,fe),className:`w-full h-full flex items-center justify-center text-2xl font-semibold relative overflow-hidden ${Z?"ring-2 ring-pink-400":""}`,style:{backgroundColor:U?P.light:P.dark},children:z?l.jsx("img",{src:be(z)||"",alt:"",className:`relative z-10 w-full h-full object-contain p-1 ${Ye(z)}`}):null},`${V}-${fe}`)}))})})}),C&&l.jsxs("div",{className:"w-full xl:w-72 space-y-3 text-white",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:"w-8 h-32 rounded-lg bg-black/50 border border-white/10 relative overflow-hidden",children:l.jsx("div",{className:"absolute left-0 right-0 bg-emerald-400",style:{bottom:0,height:`${ue}%`,transition:"height 0.2s ease"}})}),l.jsxs("div",{children:[l.jsx("div",{className:"text-sm font-semibold",children:"Evaluation"}),l.jsx("div",{className:"text-xs text-white/60",children:"Top 5 lines"})]})]}),l.jsxs("label",{className:"flex items-center gap-2 text-sm",children:[l.jsx("input",{type:"checkbox",checked:C,onChange:()=>N(ne=>!ne),className:"h-4 w-4"}),l.jsx("span",{className:"text-white/70",children:"Evaluate"})]})]}),l.jsxs("div",{className:"space-y-1 text-sm",children:[j.length===0&&l.jsx("div",{className:"text-white/60",children:"Waiting for engine..."}),j.map(ne=>l.jsxs("div",{className:"flex items-start gap-2 px-1",children:[l.jsx("div",{className:"w-6 h-6 rounded-md bg-white/10 flex items-center justify-center text-xs font-semibold",children:ne.multipv}),l.jsxs("div",{className:"flex-1",children:[l.jsx("div",{className:"font-semibold text-emerald-200",children:ne.score.startsWith("M")?ne.score:`+${ne.score}`}),l.jsx("div",{className:"text-white/70 text-xs truncate",children:ne.raw})]})]},ne.multipv))]})]})]})}),l.jsxs("div",{className:"rounded-2xl border border-white/10 bg-black p-5 space-y-3 text-white",onDrop:$e,onDragOver:ne=>ne.preventDefault(),children:[l.jsxs("div",{className:"text-lg font-semibold flex items-center justify-between",children:["Tools",l.jsx("span",{className:"text-xs text-white/60",children:"Drag/drop PGN or FEN"})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsxs(Oe,{className:"w-full justify-between bg-white/5 hover:bg-white/10 border border-white/10 text-white shadow-none",onClick:()=>{k("moves"),N(!0)},children:[l.jsx("span",{children:"Make moves"}),l.jsx("span",{className:"text-xs text-white/60",children:C?"Engine on":"Engine off"})]}),l.jsxs(Oe,{className:"w-full justify-between bg-white/5 hover:bg-white/10 border border-white/10 text-white shadow-none",onClick:()=>{k("editor"),n(new wt().fen())},children:[l.jsx("span",{children:"Board editor"}),l.jsx("span",{className:"text-xs text-white/60",children:"Reset"})]}),l.jsxs("div",{className:"rounded-xl border border-white/15 bg-white/5 p-3 space-y-2",children:[l.jsxs("div",{className:"flex items-center justify-between text-sm font-semibold",children:[l.jsx("span",{children:"Import PGN or FEN"}),l.jsx("span",{className:"text-xs text-white/60",children:"Paste or drop"})]}),l.jsx("textarea",{value:g,onFocus:()=>k("import"),onChange:ne=>{k("import"),b(ne.target.value)},className:"w-full rounded-xl border border-white/20 bg-white/5 px-3 py-2 text-sm text-white placeholder:text-white/40 focus:outline-none focus:ring-2 focus:ring-pink-400",placeholder:"Paste PGN or FEN here, or drop a file/text.",rows:4}),l.jsxs("div",{className:"flex gap-2",children:[l.jsx(Oe,{variant:"outline",className:"flex-1 shadow-none",onClick:()=>{k("import"),Ce(g)},children:"Load"}),l.jsx(Oe,{variant:"outline",className:"flex-1 shadow-none",onClick:()=>b(""),children:"Clear"})]})]}),l.jsxs("div",{className:"rounded-xl border border-white/15 bg-white/5 p-3 text-sm space-y-2",children:[w==="moves"&&l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"font-semibold",children:"Analysis mode"}),l.jsx("div",{className:"text-white/70",children:"Click a piece then a target square to explore lines. Use the Evaluate toggle beside the board to show or hide the engine bar."})]}),w==="editor"&&l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"font-semibold",children:"Board editor"}),l.jsx("div",{className:"text-white/70",children:"Reset to the starting position, flip the board, then make moves freely."})]}),w==="import"&&l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"font-semibold",children:"Importing"}),l.jsx("div",{className:"text-white/70",children:"Paste or drop PGN/FEN above. The board will update instantly."})]}),w==="none"&&l.jsx("div",{className:"text-white/70",children:"Choose an option to get started."})]})]})]})]})]})})}const Wj=JSON.parse('[{"id":"000rZ","fen":"2kr1b1r/p1p2pp1/2pqb3/7p/3N2n1/2NPB3/PPP2PPP/R2Q1RK1 w - - 2 13","moves":["d4e6","d6h2"],"rating":739,"themes":"kingsideAttack mate mateIn1 oneMove opening","gameUrl":"https://lichess.org/seIMDWkD#25","openingTags":"Scandinavian_Defense Scandinavian_Defense_Modern_Variation"},{"id":"001kG","fen":"rnbq3r/1p2bkpp/p4n2/8/2pNP3/2N5/PPP3PP/R1BQ1RK1 b - - 1 11","moves":["e7c5","d1h5","f7g8","h5c5"],"rating":1904,"themes":"advantage opening pin short","gameUrl":"https://lichess.org/xXAEaVto/black#22","openingTags":"Sicilian_Defense Sicilian_Defense_Najdorf_Variation"},{"id":"002Tf","fen":"r3kbnr/ppp1qppp/2n5/3pP3/5B2/4PQ2/PPP2PPP/RN2KB1R w KQkq - 1 7","moves":["f1b5","e7b4","b1c3","b4b2"],"rating":1564,"themes":"advantage fork opening short","gameUrl":"https://lichess.org/Zq56PwHK#13","openingTags":"Queens_Pawn_Game Queens_Pawn_Game_Chigorin_Variation"},{"id":"003o0","fen":"r1bqk2r/pp1nbppp/3p4/1B1p4/3P1B2/8/PPP2PPP/R2QK1NR w KQkq - 2 9","moves":["g1f3","d8a5","d1d2","a5b5"],"rating":1003,"themes":"advantage fork master opening short","gameUrl":"https://lichess.org/Ae0t9V1Z#17","openingTags":"Czech_Defense Czech_Defense_Other_variations"},{"id":"005HG","fen":"r2q1rk1/p1p2pp1/3bbn1p/4N3/2Q5/1P4P1/PB1PPP1P/RN2K2R w KQ - 1 12","moves":["c4c2","d6e5","b2e5","d8d5","f2f3","d5e5"],"rating":1744,"themes":"advantage clearance fork long opening","gameUrl":"https://lichess.org/JTymzeq9#23","openingTags":"English_Opening English_Opening_Kings_English_Variation"},{"id":"005jJ","fen":"r1b1qrk1/pp1n1pbp/2pp1np1/4p3/2PP1B2/2NBPN1P/PP3PP1/R2Q1RK1 w - - 0 10","moves":["d4e5","d6e5","f4h2","e5e4"],"rating":1215,"themes":"advantage opening short","gameUrl":"https://lichess.org/wt6Q2xGb#19","openingTags":"Queens_Pawn_Game Queens_Pawn_Game_Other_variations"},{"id":"005wJ","fen":"r3kb1r/ppqn1ppp/4pn2/1Q2Nb2/3P4/8/PP2PPPP/RNB1KB1R w KQkq - 4 9","moves":["e5d7","c7c1"],"rating":1537,"themes":"hangingPiece mate mateIn1 oneMove opening","gameUrl":"https://lichess.org/2mU9GJhQ#17","openingTags":"Queens_Pawn_Game Queens_Pawn_Game_Zukertort_Variation"},{"id":"006GK","fen":"2kr1br1/ppBb1ppp/8/3P2Q1/3n2n1/5N2/PP3qPP/RN2R2K b - - 0 16","moves":["d4f3","g5d8"],"rating":1020,"themes":"mate mateIn1 oneMove opening queensideAttack","gameUrl":"https://lichess.org/CSpoYrv7/black#32","openingTags":"Italian_Game Italian_Game_Two_Knights_Defense"},{"id":"008D5","fen":"r1bqk2r/pp3ppp/4p2n/3pP3/1b1P1P2/2N5/PP4PP/R1BQKB1R b KQkq - 2 9","moves":["h6f5","d1a4","c8d7","a4b4"],"rating":1408,"themes":"advantage fork master opening short","gameUrl":"https://lichess.org/jIGC2FuP/black#18","openingTags":"French_Defense French_Defense_La_Bourdonnais_Variation"},{"id":"008rw","fen":"rn2kb1r/pp2pppp/2p2n2/4q3/8/2N4Q/PPPPBPPP/R1B1K2R b KQkq - 2 8","moves":["g7g6","h3c8"],"rating":918,"themes":"mate mateIn1 oneMove opening","gameUrl":"https://lichess.org/t8GAyoIk/black#16","openingTags":"Scandinavian_Defense Scandinavian_Defense_Main_Line"},{"id":"0092V","fen":"r2qk1nr/ppp3pp/2n5/1B1pp3/1b1P4/5Q1P/PP1B1PP1/RN2K2R b KQkq - 3 11","moves":["e5e4","b5c6","b7c6","f3h5","g7g6","h5e5"],"rating":2267,"themes":"crushing exposedKing long opening","gameUrl":"https://lichess.org/bW5LiCa5/black#22","openingTags":"Ponziani_Opening Ponziani_Opening_Other_variations"},{"id":"009FP","fen":"r1b1k1nr/ppp2pbp/3ppqp1/8/2BnP3/N2P2QP/PPP2PP1/R1B1K2R b KQkq - 4 9","moves":["e6e5","c1g5","f6g5","g3g5"],"rating":1274,"themes":"advantage opening short trappedPiece","gameUrl":"https://lichess.org/2ndCtdd9/black#18","openingTags":"Pirc_Defense Pirc_Defense_Other_variations"},{"id":"009FS","fen":"r2qr1k1/p5bp/1pp1b1p1/8/2QN1p2/2P1n2P/PP3PP1/R1B1RNK1 w - - 1 18","moves":["d4e6","e3c4","e6d8","e8e1"],"rating":1702,"themes":"crushing discoveredAttack opening short","gameUrl":"https://lichess.org/MOdm5bE7#35","openingTags":"Sicilian_Defense Sicilian_Defense_Closed"},{"id":"009XT","fen":"rn1qk2r/pp3ppp/3bp1b1/3p4/3Pn2N/3BB3/PPP2PPP/RN1Q1RK1 w kq - 4 10","moves":["h4g6","d6h2","g1h1","h7g6"],"rating":2069,"themes":"crushing intermezzo opening short","gameUrl":"https://lichess.org/bf23N8Ng#19","openingTags":"Caro-Kann_Defense Caro-Kann_Defense_Exchange_Variation"},{"id":"009fH","fen":"rn2kb1r/pp2pppp/2p2n2/8/3q2b1/1Q6/PPP2PPP/RNB1KBNR w KQkq - 0 7","moves":["b3b7","d4d1"],"rating":777,"themes":"mate mateIn1 oneMove opening","gameUrl":"https://lichess.org/bFNxjeFg#13","openingTags":"Caro-Kann_Defense Caro-Kann_Defense_Other_variations"},{"id":"00AVR","fen":"br1qkb1r/p1pp1ppp/4Pn2/6B1/3Qn3/5NP1/P3PPBP/RN1R2K1 b k - 0 15","moves":["d7e6","d4a4","d8d7","d1d7"],"rating":1747,"themes":"crushing opening short","gameUrl":"https://lichess.org/KxeQFmHl/black#30","openingTags":"Zukertort_Opening Zukertort_Opening_Black_Mustang_Defense"},{"id":"00Bn0","fen":"r1bqkb1r/pp1pnppp/2n1p3/1N6/5B2/8/PPP1PPPP/R2QKBNR b KQkq - 4 6","moves":["e6e5","b5d6"],"rating":1037,"themes":"mate mateIn1 oneMove opening smotheredMate","gameUrl":"https://lichess.org/uxtqY7nh/black#12","openingTags":"Horwitz_Defense Horwitz_Defense_Other_variations"},{"id":"00Bul","fen":"rnbqk2r/pp3ppp/5n2/3pN3/2B5/2P5/P1PPQPPP/R1B1K2R b KQkq - 1 8","moves":["d5c4","e5c6","c8e6","c6d8"],"rating":1198,"themes":"advantage discoveredAttack opening short","gameUrl":"https://lichess.org/70pObIpq/black#16","openingTags":"Kings_Pawn_Game Kings_Pawn_Game_Gunderam_Gambit"},{"id":"00C3O","fen":"r2qkbnr/pp4pp/2p2p2/4n2b/2B1P3/2N2N2/PPP3PP/R1BQ1RK1 w kq - 0 10","moves":["d1e2","h5f3","g2f3","d8d4"],"rating":2070,"themes":"crushing kingsideAttack opening short","gameUrl":"https://lichess.org/F4Vo1eZG#19","openingTags":"Kings_Gambit Kings_Gambit_Other_variations"},{"id":"00CNA","fen":"rnbq1r2/pp1n2bk/3pB1p1/4P1N1/5P2/2p5/PPP3P1/R1BQK3 b Q - 1 13","moves":["h7h8","d1d3","d8g5","f4g5"],"rating":2625,"themes":"crushing opening short","gameUrl":"https://lichess.org/FSuTnQiL/black#26","openingTags":"Pirc_Defense Pirc_Defense_Austrian_Attack"},{"id":"00Dlt","fen":"r3kb1r/p4pp1/b1p4p/n3p3/4N3/2Nq1Q2/PP1P1PPP/R1B2RK1 w kq - 0 14","moves":["f3f5","d3f1"],"rating":497,"themes":"kingsideAttack mate mateIn1 oneMove opening","gameUrl":"https://lichess.org/fDwnUxIU#27","openingTags":"Italian_Game Italian_Game_Two_Knights_Defense"},{"id":"00EDa","fen":"r1bk3r/ppp1np1p/3p2pP/1N2P1q1/2BP1n2/8/PPP3P1/R1BQ2KR w - - 1 14","moves":["e5d6","g5g2"],"rating":1121,"themes":"kingsideAttack mate mateIn1 oneMove opening","gameUrl":"https://lichess.org/dTj38zoQ#27","openingTags":"Three_Knights_Opening Three_Knights_Opening_Other_variations"},{"id":"00EbJ","fen":"r2q1rk1/ppp2ppp/2nbb3/8/6n1/2NPBN2/PPP1BPPP/R2QK2R w KQ - 5 9","moves":["f3g5","g4e3","f2e3","d8g5"],"rating":1201,"themes":"capturingDefender crushing opening short","gameUrl":"https://lichess.org/wlZv7BWx#17","openingTags":"Scandinavian_Defense Scandinavian_Defense_Modern_Variation"},{"id":"00HJd","fen":"r1bqkb1r/pp2pppp/2p2n2/2PnN3/2BP1B2/8/PP3PPP/RN1QR1K1 b kq - 2 12","moves":["d5f4","c4f7"],"rating":1261,"themes":"attackingF2F7 mate mateIn1 oneMove opening","gameUrl":"https://lichess.org/LuwogjsN/black#24","openingTags":"Caro-Kann_Defense Caro-Kann_Defense_Exchange_Variation"},{"id":"00Htd","fen":"rnbqk2r/1p3ppp/p4b2/2Pp4/8/2N2N2/PP2PPPP/R2QKB1R w KQkq - 0 9","moves":["d1d5","f6c3","b2c3","d8d5"],"rating":962,"themes":"crushing intermezzo opening short","gameUrl":"https://lichess.org/ZWQwqa9S#17","openingTags":"Tarrasch_Defense Tarrasch_Defense_Two_Knights_Variation"},{"id":"00JYV","fen":"r2q1rk1/p1p1bppp/2pp1nb1/4p3/4P1PN/2NP3P/PPP2PK1/R1BQ1R2 b - - 4 11","moves":["f6e4","h4g6","e4c3","g6e7","d8e7","b2c3"],"rating":1603,"themes":"advantage kingsideAttack long opening","gameUrl":"https://lichess.org/rJrzfvfs/black#22","openingTags":"Ruy_Lopez Ruy_Lopez_Steinitz_Defense"},{"id":"00K8j","fen":"r2q2kr/p4pp1/4b2p/n1Qn4/5B2/4P3/PP3PPP/2KR1BNR w - - 1 14","moves":["f4c7","d8c7","c5c7","d5c7"],"rating":1403,"themes":"advantage opening short","gameUrl":"https://lichess.org/AiNXhpcc#27","openingTags":"Queens_Gambit_Declined Queens_Gambit_Declined_Queens_Knight_Variation"},{"id":"00Knu","fen":"r2q1rk1/p3bpp1/2pp1nb1/4p1Q1/8/1B3N1P/PPP3P1/R1B2RK1 b - - 0 18","moves":["f6e4","g5g6","d8b6","g1h2"],"rating":1872,"themes":"advantage defensiveMove opening pin short","gameUrl":"https://lichess.org/ICZqsNVs/black#36","openingTags":"Czech_Defense Czech_Defense_Other_variations"},{"id":"00LUZ","fen":"rnb1k1nr/1ppp1ppp/8/p1bPp3/4P2q/2PB4/PP3PPP/RNBQK1NR w KQkq - 3 6","moves":["g1f3","h4f2"],"rating":589,"themes":"attackingF2F7 mate mateIn1 oneMove opening","gameUrl":"https://lichess.org/mP2vit21#11","openingTags":"Queens_Pawn_Game Queens_Pawn_Game_Other_variations"},{"id":"00LZf","fen":"r1b1kb1r/pppp1ppp/2n1p3/3nN3/3P2q1/4B3/PPP1BPPP/RN1Q1RK1 b kq - 9 8","moves":["d5e3","f2e3","g4g5","e5f7","g5e3","g1h1"],"rating":2185,"themes":"advantage attackingF2F7 fork long opening","gameUrl":"https://lichess.org/sVgQxr8Q/black#16","openingTags":"French_Defense French_Defense_Normal_Variation"},{"id":"00LZl","fen":"r2qkb1r/ppp2ppp/2n5/3pPb2/3n1B2/2NB1N2/PP3PPP/R2QK2R b KQkq - 3 9","moves":["f8b4","f3d4","c6d4","d1a4","d4c6","d3f5"],"rating":2202,"themes":"advantage deflection fork long opening","gameUrl":"https://lichess.org/jBb2kj01/black#18","openingTags":"Kings_Pawn_Game Kings_Pawn_Game_Macleod_Attack"},{"id":"00M7w","fen":"r1b1k2r/ppp2ppp/2n5/2bBp3/2Pq4/3P1QP1/P2B1P1P/1R2K1NR b Kkq - 2 12","moves":["f7f6","g1e2","d4f2","f3f2","c5f2","e1f2"],"rating":2286,"themes":"crushing long opening","gameUrl":"https://lichess.org/rhyiYyX3/black#24","openingTags":"Scandinavian_Defense Scandinavian_Defense_Main_Line"},{"id":"00Nf5","fen":"r1bq1rk1/pp2bppp/2pp1n2/8/5P2/5N2/PBPPB1PP/RN1Q1RK1 w - - 5 11","moves":["b1c3","d8b6","g1h1","b6b2","a1b1","b2a3"],"rating":1423,"themes":"advantage fork long opening","gameUrl":"https://lichess.org/JkE5qS7u#21","openingTags":"Polish_Opening Polish_Opening_Other_variations"},{"id":"00Or5","fen":"r2qkbnr/pp5p/8/4Nb2/3p4/1QN5/PP2PPPP/R3KB1R b KQkq - 1 12","moves":["d4c3","b3f7"],"rating":1507,"themes":"mate mateIn1 oneMove opening","gameUrl":"https://lichess.org/29LGsamW/black#24","openingTags":"Slav_Defense Slav_Defense_Other_variations"},{"id":"00QBx","fen":"rn1qk2r/pb3ppp/5n2/2b5/7N/2N1p1P1/PP1PPP1P/R1BQKB1R w KQkq - 0 9","moves":["h4g2","e3f2"],"rating":1222,"themes":"advancedPawn attackingF2F7 mate mateIn1 oneMove opening","gameUrl":"https://lichess.org/85qqz7lO#17","openingTags":"English_Opening English_Opening_Kings_English_Variation"},{"id":"00QZ3","fen":"r1bq3r/ppppnkpp/2n5/b5N1/4P3/B1P5/P4PPP/RN1QK2R b KQ - 1 9","moves":["f7f8","d1f3","f8e8","f3f7"],"rating":1137,"themes":"mate mateIn2 opening short","gameUrl":"https://lichess.org/PiCJ1gmH/black#18","openingTags":"Scotch_Game Scotch_Game_Scotch_Gambit"},{"id":"00R0l","fen":"rnbqkb1r/pp3p1p/6pP/P1ppp3/6n1/3P1P2/1PP1P1P1/RNBQKBNR b KQkq - 0 7","moves":["g4h6","c1h6","f8h6","h1h6"],"rating":1293,"themes":"advantage opening short","gameUrl":"https://lichess.org/y06s0jL8/black#14","openingTags":"Ware_Opening Ware_Opening_Other_variations"},{"id":"00RoG","fen":"2kr2nr/pp2nppp/2pp4/2b2PP1/4NPq1/3B1R2/PPP4P/R2QB2K w - - 5 18","moves":["h2h3","g4g1"],"rating":1012,"themes":"mate mateIn1 oneMove opening","gameUrl":"https://lichess.org/rOjlXCXv#35","openingTags":"Scotch_Game Scotch_Game_Other_variations"},{"id":"00Rue","fen":"r2qkb1r/pp1nppp1/2p2n1p/3p1b2/3P4/BP2PN2/P1P2PPP/RN1QKB1R w KQkq - 2 7","moves":["c2c4","f5b1","a1b1","d8a5","b3b4","a5a3"],"rating":1864,"themes":"advantage fork long opening","gameUrl":"https://lichess.org/tgFzBrLu#13","openingTags":"Nimzo-Larsen_Attack Nimzo-Larsen_Attack_Classical_Variation"},{"id":"00SLR","fen":"rnbqk1nr/ppppbppp/4p3/8/5P2/5N2/PPPPP1PP/RNBQKB1R w KQkq - 2 3","moves":["g2g4","e7h4","f3h4","d8h4"],"rating":695,"themes":"mate mateIn2 opening short","gameUrl":"https://lichess.org/jqepvLa0#5","openingTags":"Bird_Opening Bird_Opening_Other_variations"},{"id":"00SyL","fen":"1rb2rk1/4bppp/p1n1p3/1p1qP3/7N/P5P1/1PQ2PBP/R1B2RK1 b - - 1 15","moves":["d5c5","c2c5","e7c5","g2c6"],"rating":1281,"themes":"capturingDefender crushing opening short","gameUrl":"https://lichess.org/f988q4eE/black#30","openingTags":"Sicilian_Defense Sicilian_Defense_Old_Sicilian"},{"id":"00V59","fen":"rnb2rk1/5ppp/p2q4/1p1P4/2p3n1/2N2N2/PP2BPPP/R2Q1RK1 w - - 0 14","moves":["f3d4","d6h2"],"rating":541,"themes":"kingsideAttack mate mateIn1 oneMove opening","gameUrl":"https://lichess.org/EaO3DqDl#27","openingTags":"Indian_Defense Indian_Defense_Anti-Nimzo-Indian"},{"id":"00WUu","fen":"r3k1nr/pp3ppp/1q2b3/8/1n1p4/6P1/PB1QPPBP/R3K1NR w KQkq - 0 13","moves":["b2d4","b6d4","d2d4","b4c2","e1f1","c2d4"],"rating":1507,"themes":"attraction crushing fork long opening sacrifice","gameUrl":"https://lichess.org/lxJ3tlcz#25","openingTags":"Queens_Gambit_Declined Queens_Gambit_Declined_Tarrasch_Defense"},{"id":"00WsE","fen":"r2qkb1r/1Q1npppp/p2pb3/8/4P3/5N2/PPP2PPP/R1B1KB1R w KQkq - 1 9","moves":["f1a6","d8a5","b2b4","a5a6","b7a6","a8a6"],"rating":1462,"themes":"advantage long opening","gameUrl":"https://lichess.org/rbi2PN9x#17","openingTags":"Sicilian_Defense Sicilian_Defense_Modern_Variations"},{"id":"00Xdc","fen":"r1br1N1k/ppp2BbQ/2n2n1p/q7/3P4/2N5/PPP2PPP/R1B2RK1 b - - 6 15","moves":["f6h7","f8g6"],"rating":942,"themes":"mate mateIn1 oneMove opening","gameUrl":"https://lichess.org/31CwrbPF/black#30","openingTags":"Scandinavian_Defense Scandinavian_Defense_Main_Line"},{"id":"00Y5Q","fen":"rnbq1rk1/pp2b2p/4p2p/3p1p1Q/2pP4/P1N5/1PP1PPPP/2KR1BNR w - - 0 11","moves":["h5h6","e7g5","h6g5","d8g5"],"rating":962,"themes":"crushing fork opening short","gameUrl":"https://lichess.org/56Atk60f#21","openingTags":"Richter-Veresov_Attack Richter-Veresov_Attack_Other_variations"},{"id":"00ZAn","fen":"rnbqk1nr/ppp1b1pp/3p4/4p3/2B1P3/5N2/PPPP2PP/RNBQK2R w KQkq - 0 6","moves":["f3e5","d6e5","d1h5","g7g6","h5e5","g8f6"],"rating":1794,"themes":"advantage hangingPiece long opening","gameUrl":"https://lichess.org/uS929Njx#11","openingTags":"Kings_Gambit Kings_Gambit_Other_variations"},{"id":"00ZK8","fen":"r1bq1b1r/pp3kpp/3p1n2/3Q4/2n1P3/5N2/PP3PPP/RNB1K2R b KQ - 1 10","moves":["c8e6","f3g5","f7g6","d5e6"],"rating":2371,"themes":"advantage deflection opening short","gameUrl":"https://lichess.org/NOQlRyAF/black#20","openingTags":"Sicilian_Defense Sicilian_Defense_Old_Sicilian"},{"id":"00aZP","fen":"r1b1k2r/p1p2ppp/1pN2n2/2n1b3/2B1P3/P1N5/1PP2PPP/R1BR2K1 b kq - 0 13","moves":["e5c3","d1d8"],"rating":754,"themes":"mate mateIn1 oneMove opening","gameUrl":"https://lichess.org/7lR4XDLK/black#26","openingTags":"Italian_Game Italian_Game_Other_variations"},{"id":"00bmj","fen":"r2q1k1r/p1p2ppp/1p6/8/3n2b1/1Q3NP1/PP1N1PP1/3RKB1R w K - 2 15","moves":["b3b4","c7c5","b4c4","d8e7","f1e2","b6b5","c4d3","g4f5","d3d4","c5d4"],"rating":2464,"themes":"advantage defensiveMove opening pin veryLong","gameUrl":"https://lichess.org/FrYWZCWt#29","openingTags":"Queens_Pawn_Game Queens_Pawn_Game_London_System"},{"id":"00d1o","fen":"r2qk1nr/pbpp1pbp/1p2p1p1/3Pn3/2P1P3/3B1N2/PP3PPP/RNBQ1RK1 w kq - 0 8","moves":["c1g5","e5f3","d1f3","d8g5"],"rating":1062,"themes":"crushing kingsideAttack opening short","gameUrl":"https://lichess.org/Twrqm0Jp#15","openingTags":"English_Defense English_Defense_Other_variations"},{"id":"00dOP","fen":"r2q1k1r/pbp1bppp/1p2pn2/1B2N3/3P1Q2/8/PPP2PPP/R1B2RK1 b - - 5 12","moves":["f6d5","f4f7"],"rating":494,"themes":"mate mateIn1 oneMove opening","gameUrl":"https://lichess.org/RvqmzkCr/black#24","openingTags":"French_Defense French_Defense_Tarrasch_Variation"},{"id":"00eNa","fen":"rnb1k2r/p1p2ppp/1p3n2/2b1N1B1/3qP3/3P4/PPP3PP/RN1QKB1R w KQkq - 1 8","moves":["e5f3","d4f2"],"rating":1113,"themes":"mate mateIn1 oneMove opening","gameUrl":"https://lichess.org/P6b1EEqI#15","openingTags":"Kings_Pawn_Game Kings_Pawn_Game_Leonardis_Variation"},{"id":"00euQ","fen":"r1b1k1nr/pppp1ppp/5q2/2b1n3/4P3/2N2N2/PPPP2PP/R1BQKB1R w KQkq - 0 6","moves":["f3e5","f6f2"],"rating":1087,"themes":"mate mateIn1 oneMove opening","gameUrl":"https://lichess.org/srPCKrEj#11","openingTags":"Vienna_Gambit_with_Max_Lange_Defense Vienna_Gambit_with_Max_Lange_Defense_Other_variations"},{"id":"00fwM","fen":"Qn1qk2r/p4ppp/2p5/2bn4/4pPb1/2N5/PPPP2PP/R1B1KBNR w KQk - 1 9","moves":["h2h3","d8h4","g2g3","h4g3"],"rating":1250,"themes":"mate mateIn2 opening short","gameUrl":"https://lichess.org/REHlrlvo#17","openingTags":"Kings_Gambit_Declined Kings_Gambit_Declined_Falkbeer_Countergambit"},{"id":"00isY","fen":"rnbqkb1r/ppp3pp/5n2/3P1p2/4pB2/2N5/PP3PPP/R2QKBNR b KQkq - 0 7","moves":["f8b4","d1a4","c7c6","a4b4"],"rating":1582,"themes":"crushing fork master opening short","gameUrl":"https://lichess.org/1q2x0Fv6/black#14","openingTags":"Blackmar-Diemer_Gambit Blackmar-Diemer_Gambit_Other_variations"},{"id":"00k6k","fen":"r2q1rk1/p1p1bpp1/2p1bn1p/8/2Pp3B/1PNBPP2/P5PP/R2Q1RK1 w - - 0 14","moves":["e3d4","d8d4","h4f2","d4c3"],"rating":1028,"themes":"advantage fork opening short","gameUrl":"https://lichess.org/JsKisVgT#27","openingTags":"English_Opening English_Opening_Kings_English_Variation"},{"id":"00kSx","fen":"r1bq3k/pppnp2r/5nQb/3p4/8/3B1N2/PPPP1PPP/RNB1K2R w KQ - 2 11","moves":["f3g5","d7e5","g6h6","h7h6"],"rating":1946,"themes":"advantage opening short trappedPiece","gameUrl":"https://lichess.org/cOCnU5Ub#21","openingTags":"Duras_Gambit Duras_Gambit_Other_variations"},{"id":"00qyT","fen":"2rq1rk1/pb2bppp/np2p3/3pP3/3Pn3/P1NQB3/1P1N1PPP/1BR2RK1 b - - 2 16","moves":["e4c3","d3h7"],"rating":787,"themes":"kingsideAttack mate mateIn1 oneMove opening","gameUrl":"https://lichess.org/njE9tv9D/black#32","openingTags":"Sicilian_Defense Sicilian_Defense_Delayed_Alapin_Variation"},{"id":"00r3C","fen":"r2q1rk1/2p1nppp/pbn5/1p1pP3/3P2b1/2NQ1N2/PPB2PPP/R1B2RK1 b - - 2 12","moves":["g4f3","d3h7"],"rating":628,"themes":"kingsideAttack mate mateIn1 oneMove opening","gameUrl":"https://lichess.org/0kgzHA3L/black#24","openingTags":"Ruy_Lopez Ruy_Lopez_Classical_Variation"},{"id":"00rEz","fen":"r1bqk2r/ppp2ppp/3p4/4p2n/2PBP2b/5PN1/PP4PP/RN1QKB1R b KQkq - 0 9","moves":["h5g3","h2g3","h4g3","d4f2","g3f2","e1f2"],"rating":1463,"themes":"advantage long opening","gameUrl":"https://lichess.org/KJUAVfza/black#18","openingTags":"Kings_Pawn_Game Kings_Pawn_Game_Maroczy_Defense"},{"id":"00rva","fen":"r2qkb1r/pQpbpppp/2n2n2/1N6/2pP4/8/PP2PPPP/R1B1KBNR b KQkq - 2 7","moves":["a8b8","b5c7","d8c7","b7c7"],"rating":1184,"themes":"crushing opening short","gameUrl":"https://lichess.org/14QnOxb7/black#14","openingTags":"Queens_Gambit_Declined Queens_Gambit_Declined_Marshall_Defense"},{"id":"00s16","fen":"rBbqk2r/1p3ppp/p3pn2/8/1b1P4/2N2N1P/PP3PP1/R2QKB1R b KQkq - 0 10","moves":["a8b8","d1a4","b7b5","a4b4"],"rating":1125,"themes":"crushing fork opening short","gameUrl":"https://lichess.org/sflO7yGm/black#20","openingTags":"Caro-Kann_Defense Caro-Kann_Defense_Panov_Attack"},{"id":"00s23","fen":"r2q1rk1/1ppb1ppp/1p1p1n2/4p3/1PBnP3/P2P1N1P/2P2PP1/R1BQK2R w KQ - 0 11","moves":["c2c3","d7a4","c3d4","a4d1"],"rating":1802,"themes":"advantage opening short","gameUrl":"https://lichess.org/5BuuOtXQ#21","openingTags":"Four_Knights_Game Four_Knights_Game_Italian_Variation"},{"id":"00sMF","fen":"r1bqr1k1/p4pPp/2p1p3/2bpn2Q/8/2NB4/PPP3PP/R1B2R1K b - - 2 15","moves":["e5d3","h5f7"],"rating":917,"themes":"kingsideAttack mate mateIn1 oneMove opening","gameUrl":"https://lichess.org/A0iotLWB/black#30","openingTags":"Sicilian_Defense Sicilian_Defense_Closed"},{"id":"00swU","fen":"3rkb1r/pppqp1pp/2n5/1Q3p2/4N3/1P2P3/PBP2PPP/R3KB1R w KQk - 0 12","moves":["e4c5","d7d2"],"rating":1061,"themes":"mate mateIn1 oneMove opening","gameUrl":"https://lichess.org/JfA7i4yS#23","openingTags":"Zukertort_Opening Zukertort_Opening_Tennison_Gambit"},{"id":"00sys","fen":"r1bq1r2/pp2b1pk/2n1pp2/3p4/2pP3N/2P1P1P1/PP1N1PP1/R2QK2R b KQ - 0 13","moves":["d8e8","h4g6","h7g8","h1h8","g8f7","d1h5"],"rating":2288,"themes":"crushing discoveredAttack long master opening","gameUrl":"https://lichess.org/oeasr2cR/black#26","openingTags":"Indian_Defense Indian_Defense_London_System"},{"id":"00u3b","fen":"rn2kb1r/pbqp1ppp/1p2p3/3nP3/2BP4/5N2/PP2QPPP/RNB1K2R w KQkq - 0 9","moves":["b1c3","d5c3","b2c3","b6b5","a1b1","b5c4"],"rating":2310,"themes":"crushing long opening","gameUrl":"https://lichess.org/hg1xugvX#17","openingTags":"Sicilian_Defense Sicilian_Defense_Alapin_Variation"},{"id":"00vf5","fen":"r1b1kbnr/1pqp1ppp/p1n1p3/8/2BNP3/P1N5/1PP2PPP/R1BQK2R b KQkq - 0 7","moves":["g8e7","d4b5","a6b5","c3b5","c7b8","b5d6"],"rating":2162,"themes":"crushing long opening sacrifice","gameUrl":"https://lichess.org/DaGWQ4jB/black#14","openingTags":"Sicilian_Defense Sicilian_Defense_Closed"},{"id":"00w6f","fen":"rnb1r1k1/pp1p1ppp/1q2pn2/1N6/4P3/B1P2P2/P1P3PP/R2QKB1R w KQ - 5 10","moves":["b5d6","b6e3","f1e2","e3c3"],"rating":1085,"themes":"advantage opening short","gameUrl":"https://lichess.org/1P7Nda81#19","openingTags":"Sicilian_Defense Sicilian_Defense_Pin_Variation"},{"id":"00wPZ","fen":"r1b2rk1/ppp2ppp/8/1B1pN3/3bn3/8/PPP2qPP/RNBQR2K w - - 0 12","moves":["e5f3","f2g1","f3g1","e4f2"],"rating":1432,"themes":"kingsideAttack mate mateIn2 opening sacrifice short smotheredMate","gameUrl":"https://lichess.org/XAwlqpwf#23","openingTags":"Italian_Game Italian_Game_Two_Knights_Defense"},{"id":"00xGN","fen":"r2q1rk1/ppp1nppp/3b4/1B6/3QP3/2N2b2/PPP2PPP/R1B2RK1 w - - 0 10","moves":["g2f3","d6h2","g1h2","d8d4"],"rating":1066,"themes":"advantage discoveredAttack kingsideAttack opening short","gameUrl":"https://lichess.org/g17XFBDp#19","openingTags":"Nimzowitsch_Defense Nimzowitsch_Defense_Kennedy_Variation"},{"id":"00xsd","fen":"r1bqkb1r/1p1npp1p/p2p1np1/6B1/3N4/3BP3/PPP2PPP/RN1QK2R w KQkq - 0 8","moves":["c2c4","d8a5","b1c3","a5g5"],"rating":1257,"themes":"advantage fork opening short","gameUrl":"https://lichess.org/bMxAVfzo#15","openingTags":"Zukertort_Opening Zukertort_Opening_Sicilian_Invitation"},{"id":"00zI4","fen":"r2q1rk1/pb3ppp/1p2p3/2nn4/8/P1N1PN2/1P1Q1PPP/1BR1K2R b K - 1 13","moves":["c5b3","d2c2","g7g6","c2b3"],"rating":1656,"themes":"crushing opening short","gameUrl":"https://lichess.org/z6EaD3I9/black#26","openingTags":"Queens_Gambit_Declined Queens_Gambit_Declined_Other_variations"},{"id":"00zNz","fen":"r1bqk2r/pp1np1bp/2p3p1/3pNB2/3P1B2/4P3/PPP2PPP/R2QK2R b KQkq - 0 10","moves":["g6f5","d1h5","e8f8","h5f7"],"rating":1147,"themes":"mate mateIn2 opening short","gameUrl":"https://lichess.org/kZTBqbqj/black#20","openingTags":"Queens_Pawn_Game Queens_Pawn_Game_Accelerated_London_System"},{"id":"0103M","fen":"2kr1b1r/pppb1p1p/1q6/4p3/1P1n4/2P1BN2/5PPP/R2QKB1R w KQ - 2 16","moves":["c3d4","e5d4","d1d4","f8b4"],"rating":2176,"themes":"crushing opening short","gameUrl":"https://lichess.org/lHWulFLi#31","openingTags":"Scandinavian_Defense Scandinavian_Defense_Main_Line"},{"id":"0109N","fen":"r2qkbnr/1p2pppp/p1n5/4N3/2BP2b1/8/PP3PPP/RNBQ1RK1 b kq - 3 8","moves":["g4d1","c4f7"],"rating":1204,"themes":"attackingF2F7 mate mateIn1 oneMove opening","gameUrl":"https://lichess.org/4ZP4Jh3Y/black#16","openingTags":"Caro-Kann_Defense Caro-Kann_Defense_Panov_Attack"},{"id":"010Jc","fen":"rnb1k2r/bpqp1pp1/p3p3/7p/4P1n1/1NNB3P/PPP2PP1/R1BQ1R1K w kq - 1 11","moves":["d1e2","c7h2"],"rating":688,"themes":"master mate mateIn1 oneMove opening","gameUrl":"https://lichess.org/zDw0FRz2#21","openingTags":"Sicilian_Defense Sicilian_Defense_Kan_Variation"},{"id":"010ZV","fen":"r2qk1nr/p1pbb1pp/4p3/2pp1P2/2B5/8/PPP1Q1PP/RNB2RK1 b kq - 0 13","moves":["d5c4","e2h5","g7g6","f5g6"],"rating":1494,"themes":"crushing opening short","gameUrl":"https://lichess.org/TyuyYtZG/black#26","openingTags":"Ruy_Lopez Ruy_Lopez_Steinitz_Defense"},{"id":"011A6","fen":"1r1q1rk1/pb3pbp/1p1pnnp1/1Np5/2P5/PP3NP1/1B3PBP/Q1RR2K1 b - - 5 20","moves":["d6d5","c4d5"],"rating":1632,"themes":"advantage oneMove opening","gameUrl":"https://lichess.org/7QbYroZU/black#40","openingTags":""},{"id":"011To","fen":"r2qkbnr/pp1np2p/2p2pp1/3p1N2/3P1B2/4P3/PPPN1PPP/R2QKB1R b KQkq - 0 7","moves":["g6f5","d1h5"],"rating":683,"themes":"mate mateIn1 oneMove opening","gameUrl":"https://lichess.org/2g2LOz4f/black#14","openingTags":"Queens_Pawn_Game Queens_Pawn_Game_Other_variations"},{"id":"012Dg","fen":"r2qkb1r/1pp2ppp/p5b1/4nP2/3p4/6N1/PPP1PP1P/R2QKBNR w KQkq - 0 12","moves":["f5g6","f8b4","c2c3","d4c3"],"rating":1316,"themes":"advantage opening short","gameUrl":"https://lichess.org/2fFOvrpM#23","openingTags":"Queens_Pawn_Game Queens_Pawn_Game_Chigorin_Variation"},{"id":"013UL","fen":"rb3rk1/5ppp/p1pqbn2/2Np4/1P2p3/P3P3/1B1PBPPP/2RQ1RK1 w - - 2 18","moves":["h2h3","d6h2"],"rating":641,"themes":"mate mateIn1 oneMove opening","gameUrl":"https://lichess.org/dEyOmy3v#35","openingTags":"Nimzo-Larsen_Attack Nimzo-Larsen_Attack_Modern_Variation"},{"id":"013h1","fen":"r1bqk1nr/1p3ppp/p3p3/3pP3/1b1PP3/2N5/PP4PP/R1BQKB1R b KQkq - 0 9","moves":["d5e4","d1a4","c8d7","a4b4"],"rating":1235,"themes":"advantage fork opening short","gameUrl":"https://lichess.org/3L3zhonx/black#18","openingTags":"Sicilian_Defense Sicilian_Defense_McDonnell_Attack"},{"id":"013tu","fen":"r3kb1r/1p3ppp/p1n5/2p1q3/B3P1n1/2NP4/PP2N1PP/R1BQK2R w KQkq - 0 13","moves":["e1g1","e5h2"],"rating":602,"themes":"kingsideAttack mate mateIn1 oneMove opening","gameUrl":"https://lichess.org/xvLgsbP6#25","openingTags":"Sicilian_Defense Sicilian_Defense_Staunton-Cochrane_Variation"},{"id":"015Di","fen":"r2k1bnr/p1pp1Bpp/1p3q2/4N1B1/3p4/2P5/PP2QPbP/RN2K2R b KQ - 2 10","moves":["f6g5","e5c6","g2c6","e2e8"],"rating":1699,"themes":"clearance mate mateIn2 opening sacrifice short","gameUrl":"https://lichess.org/T3BCr5TM/black#20","openingTags":"Kings_Pawn_Game Kings_Pawn_Game_McConnell_Defense"},{"id":"015i1","fen":"r2q1rk1/pp1bnpp1/2n1p3/2b1P1NQ/3p4/P7/1P3PPP/RNB2RK1 b - - 3 13","moves":["e7g6","h5h7"],"rating":795,"themes":"mate mateIn1 oneMove opening","gameUrl":"https://lichess.org/Gk8K5tC9/black#26","openingTags":"French_Defense French_Defense_Advance_Variation"},{"id":"016BD","fen":"r1bqk2r/pp4pp/3b1B2/3pNn2/4p3/2N5/PPP2PPP/R2QKB1R b KQkq - 0 11","moves":["g7f6","d1h5","e8f8","h5f7"],"rating":1695,"themes":"mate mateIn2 opening short","gameUrl":"https://lichess.org/qzKzWmta/black#22","openingTags":"Nimzowitsch_Defense Nimzowitsch_Defense_Kennedy_Variation"},{"id":"017Lc","fen":"r1b2rk1/pp3ppp/2p1pn2/8/2P5/n5Q1/PP1BN1PP/Kq1R1B1R w - - 10 22","moves":["d1b1","a3c2"],"rating":1068,"themes":"opening","gameUrl":"https://lichess.org/VaAPfIHH#43","openingTags":""},{"id":"017u3","fen":"r2qk2r/4bppp/p3bn2/1p2N3/5B2/2N5/PP3PPP/R2QR1K1 b kq - 1 19","moves":["e8g8","e5c6","d8e8","c6e7","e8e7","f4d6","e7d8","d6f8"],"rating":1993,"themes":"advantage kingsideAttack opening skewer veryLong","gameUrl":"https://lichess.org/zSJZUzqR/black#38","openingTags":"Caro-Kann_Defense Caro-Kann_Defense_Exchange_Variation"},{"id":"019DY","fen":"rnb1k1nB/ppp2p1p/8/8/7q/1P3pb1/P1PPP2P/RN1QKB1R w KQq - 0 9","moves":["h2g3","h4g3"],"rating":1084,"themes":"mate mateIn1 oneMove opening","gameUrl":"https://lichess.org/M6zRIUyg#17","openingTags":""},{"id":"01Az7","fen":"r1bq1rk1/pp1p1ppp/2n1pn2/4P3/2B5/2B5/PPP2PPP/R2QK1NR b KQ - 0 9","moves":["c6e5","c3e5","d8a5","e5c3"],"rating":1400,"themes":"advantage hangingPiece opening short","gameUrl":"https://lichess.org/nMfMTSlO/black#18","openingTags":"Sicilian_Defense Sicilian_Defense_Bowdler_Attack"},{"id":"01DHd","fen":"r1bq1rk1/pp1nb1pp/4pp2/3pP2Q/2pP4/2P1P3/PPBN2PP/R1B2RK1 b - - 1 12","moves":["g7g6","c2g6","h7g6","h5g6"],"rating":1125,"themes":"crushing kingsideAttack opening short","gameUrl":"https://lichess.org/tYOhhfGL/black#24","openingTags":"Queens_Pawn_Game Queens_Pawn_Game_Other_variations"},{"id":"01E5s","fen":"r1b1kbnr/p1ppqppp/8/1p2P3/1n1Q4/5N2/PPP1PPPP/RNB1KB1R w KQkq - 4 8","moves":["d4e4","d7d5","e4f4","b4c2"],"rating":1807,"themes":"advantage opening short","gameUrl":"https://lichess.org/jBa71LkS#15","openingTags":"Englund_Gambit_Complex Englund_Gambit_Complex_Stockholm_Variation"},{"id":"01EUl","fen":"r2qk2r/ppp2pp1/2p2n2/7p/3bP1b1/2N3Q1/PPP2PPP/R1B1KB1R w KQkq - 0 9","moves":["h2h3","d4c3","g3c3","d8d1"],"rating":1311,"themes":"clearance mate mateIn2 opening short","gameUrl":"https://lichess.org/eR5rGPfR#17","openingTags":"Russian_Game Russian_Game_Stafford_Gambit"},{"id":"01F7L","fen":"r3kb1r/ppp2ppp/8/2p1Pb2/3Pn2q/3B1P2/PPP3PP/RNBQK2R w KQkq - 1 9","moves":["e1e2","h4f2"],"rating":941,"themes":"mate mateIn1 oneMove opening","gameUrl":"https://lichess.org/bHxdc27g#17","openingTags":"Russian_Game Russian_Game_Stafford_Gambit"},{"id":"01HAq","fen":"rn1q1rk1/1bppppbp/1p4pn/6N1/p1B1P3/2PP3Q/PP3PPP/RNB1K2R w KQ - 0 9","moves":["c4f7","f8f7","g5f7","h6f7"],"rating":1849,"themes":"advantage opening short","gameUrl":"https://lichess.org/jjI0oEay#17","openingTags":"Owen_Defense Owen_Defense_Other_variations"},{"id":"01IFU","fen":"r1b2rk1/pp3pp1/3b3p/3Bn3/P2N1q2/2P4P/1P3PP1/RN1Q1RK1 w - - 1 17","moves":["d4e2","e5f3","g2f3","f4h2"],"rating":1088,"themes":"kingsideAttack mate mateIn2 opening sacrifice short","gameUrl":"https://lichess.org/0kHqIPwO#33","openingTags":"Philidor_Defense Philidor_Defense_Other_variations"},{"id":"01J4y","fen":"r2qkb1r/1p1npppp/p4n2/8/2BP2b1/1Q3N2/PP1N1PPP/R1B1K2R b KQkq - 1 9","moves":["b7b5","c4f7"],"rating":1209,"themes":"attackingF2F7 mate mateIn1 oneMove opening","gameUrl":"https://lichess.org/HNo7ehQ8/black#18","openingTags":"Queens_Pawn_Game Queens_Pawn_Game_Colle_System"},{"id":"01L59","fen":"rnb2rk1/pp1p1ppp/4p3/4P3/3b1Pnq/2N5/PPPNB1PP/R1BQ1R1K w - - 2 12","moves":["g2g3","h4h2"],"rating":1102,"themes":"kingsideAttack mate mateIn1 oneMove opening","gameUrl":"https://lichess.org/5qG1QQrX#23","openingTags":"Mieses_Opening Mieses_Opening_Other_variations"},{"id":"01Lm4","fen":"r3k1nr/2pp1pp1/npbbp1q1/7p/2PP3B/2N1PN1P/PP3PP1/2RQKB1R w Kkq - 3 12","moves":["f1d3","g6g2","h1g1","g2f3","d1f3","c6f3"],"rating":1736,"themes":"advantage long opening","gameUrl":"https://lichess.org/ZBLlFmFC#23","openingTags":"English_Defense English_Defense_Other_variations"},{"id":"01NZ8","fen":"r1b1kb1r/pp3ppp/4p3/qNpn4/8/P2Q2B1/1PP2PPP/1K1R2NR b kq - 0 13","moves":["c8d7","b5c7","a5c7","g3c7"],"rating":1028,"themes":"crushing fork opening short","gameUrl":"https://lichess.org/q5tbSjgO/black#26","openingTags":"French_Defense French_Defense_Schlechter_Variation"},{"id":"01P1X","fen":"r1b2rk1/pp2ppbp/5np1/2qP4/1n2P3/2N2N2/PP1B1PPP/R2QKB1R w KQ - 0 11","moves":["a2a3","f6e4","c3e4","b4c2","d1c2","c5c2"],"rating":2105,"themes":"advantage fork long opening sacrifice","gameUrl":"https://lichess.org/MoQo8XAN#21","openingTags":"Grunfeld_Defense Grunfeld_Defense_Three_Knights_Variation"},{"id":"01Prl","fen":"r1bqn1k1/4prbp/p1p3p1/3p4/5P2/1BN5/PPP3PP/R1BQR1K1 b - - 1 14","moves":["d8c7","c3d5","c6d5","d1d5","e7e6","d5a8"],"rating":2178,"themes":"crushing long opening","gameUrl":"https://lichess.org/2sPwGlma/black#28","openingTags":"Sicilian_Defense Sicilian_Defense_Dragon_Variation"},{"id":"01ScQ","fen":"r1bqk1nr/pp3ppp/2n5/2bP4/2P1pP2/6P1/PP5P/RNBQKBNR w KQkq - 1 9","moves":["d5c6","c5f2","e1e2","c8g4"],"rating":1695,"themes":"advantage opening short","gameUrl":"https://lichess.org/BEejaOEt#17","openingTags":"Kings_Gambit_Declined Kings_Gambit_Declined_Falkbeer_Countergambit"},{"id":"01Suf","fen":"r1bqk1nr/pp3ppp/2nbp3/1Bp5/3pP3/5NN1/PPPP1PPP/R1BQK2R w KQkq - 4 7","moves":["d2d3","d8a5","f3d2","a5b5"],"rating":1238,"themes":"crushing fork opening short","gameUrl":"https://lichess.org/BfscjGsT#13","openingTags":"French_Defense French_Defense_Two_Knights_Variation"},{"id":"01TPw","fen":"rnb1k2r/ppp2p1p/4p3/8/3N2Bq/2NP2b1/PPP2PP1/R1BQ1R1K w kq - 1 13","moves":["h1g1","h4h2"],"rating":826,"themes":"mate mateIn1 oneMove opening","gameUrl":"https://lichess.org/DEVakUh7#25","openingTags":"Scandinavian_Defense Scandinavian_Defense_Valencian_Variation"},{"id":"01TmZ","fen":"r1b2rk1/1p2bppp/pqnp4/3Np3/2B1PP2/PN6/1PP2nPP/R1BQ1R1K w - - 5 13","moves":["h1g1","f2h3","g1h1","b6g1","f1g1","h3f2"],"rating":1389,"themes":"doubleCheck kingsideAttack long mate mateIn3 opening sacrifice smotheredMate","gameUrl":"https://lichess.org/RIwXCRjL#25","openingTags":"Sicilian_Defense Sicilian_Defense_Najdorf_Variation"},{"id":"01UQI","fen":"r3kb1r/1p2pppp/pqnp4/3P4/B3n1b1/5N2/PP1B1PPP/RN1QK2R w KQkq - 0 11","moves":["d5c6","b6f2"],"rating":1380,"themes":"attackingF2F7 mate mateIn1 oneMove opening","gameUrl":"https://lichess.org/Qnh7qhgq#21","openingTags":"Sicilian_Defense Sicilian_Defense_Modern_Variations"},{"id":"01UXl","fen":"r1bqkb1r/pp4pp/2n1pn2/2p2p2/Q1P5/3P2P1/PP1P1PBP/R1BNK1NR b KQkq - 0 9","moves":["d8d3","g2c6","b7c6","a4c6","d3d7","c6a8"],"rating":1054,"themes":"advantage exposedKing fork long opening","gameUrl":"https://lichess.org/WP6oYrOE/black#18","openingTags":"English_Opening English_Opening_Symmetrical_Variation"},{"id":"01WLY","fen":"r2qk2r/ppp1npbp/3p2p1/4n3/2P1P3/2N2BB1/PP3PPP/R2QK2R b KQkq - 0 10","moves":["e5c4","d1a4","e7c6","a4c4"],"rating":1363,"themes":"crushing fork master opening short","gameUrl":"https://lichess.org/CCJq2aBi/black#20","openingTags":"Modern_Defense Modern_Defense_Other_variations"},{"id":"01YNx","fen":"rn1qkbnr/ppp1ppp1/3p3p/4N3/2B1P1b1/8/PPPP1PPP/RNBQK2R b KQkq - 1 4","moves":["g4d1","c4f7"],"rating":1123,"themes":"attackingF2F7 mate mateIn1 oneMove opening","gameUrl":"https://lichess.org/pyKwuFBH/black#8","openingTags":"Zukertort_Opening Zukertort_Opening_Wade_Defense"},{"id":"01ZpR","fen":"2rq1rk1/1p3ppp/p4b2/n6b/3Pp3/P3BN1P/1P2BPP1/2RQ1RK1 w - - 0 18","moves":["f3d2","c8c1","d1c1","h5e2"],"rating":1610,"themes":"crushing opening short","gameUrl":"https://lichess.org/DHFroHMk#35","openingTags":"Russian_Game Russian_Game_Classical_Attack"},{"id":"01av5","fen":"r2qk2r/pp2bpp1/2p1b2p/3n4/2Q5/2N2N2/PPP2PPP/R1BR2K1 w kq - 2 13","moves":["c4a4","d5c3","a4c6","b7c6"],"rating":1443,"themes":"crushing master opening short","gameUrl":"https://lichess.org/PY1Dltoi#25","openingTags":"Italian_Game Italian_Game_Two_Knights_Defense"},{"id":"01gkL","fen":"r1b2bkr/ppp2Np1/3pPq1p/4n3/3Q4/8/PPP2PPP/RNB1K2R w KQ - 2 12","moves":["f7h8","e5f3","g2f3","f6d4"],"rating":1206,"themes":"crushing discoveredAttack opening short","gameUrl":"https://lichess.org/e9vKK71P#23","openingTags":"Scotch_Game Scotch_Game_Scotch_Gambit"},{"id":"01hqi","fen":"r1b2rk1/pp2bppp/1qn1pn2/3pN3/3P1P2/3BP3/PP1N2PP/R1BQ1RK1 b - - 4 10","moves":["c6d4","e3d4","b6d4","g1h1"],"rating":1757,"themes":"advantage opening short","gameUrl":"https://lichess.org/qCVvt9s6/black#20","openingTags":"Indian_Defense Indian_Defense_Other_variations"},{"id":"01i25","fen":"r2q1rk1/pbp2ppp/1pnbpn2/3pN3/3P4/2P1P1B1/PP1NBPPP/R2QK2R b KQ - 3 9","moves":["c6e5","d4e5","d6e7","e5f6"],"rating":1241,"themes":"advantage fork opening short","gameUrl":"https://lichess.org/bQi4COjS/black#18","openingTags":"Indian_Defense Indian_Defense_Other_variations"},{"id":"01iN2","fen":"r1b1k1nr/pp1p1pbp/4p1p1/2pPP3/4q3/2P5/PP1K2PP/RNBQ1BNR w kq - 0 9","moves":["d5d6","g7h6"],"rating":1572,"themes":"mate mateIn1 oneMove opening","gameUrl":"https://lichess.org/nX88Xou5#17","openingTags":"Sicilian_Defense Sicilian_Defense_Other_variations"},{"id":"01k4A","fen":"rnbq1rk1/1pp1bppn/p2pp3/6PQ/2PPP3/2N5/PP1N1PP1/R3KB1R b KQ - 2 10","moves":["e7g5","h5h7"],"rating":563,"themes":"kingsideAttack mate mateIn1 oneMove opening","gameUrl":"https://lichess.org/eO5X1eK9/black#20","openingTags":"Indian_Defense Indian_Defense_Anti-Nimzo-Indian"},{"id":"01l23","fen":"r1bq1b1r/pp1n1kpp/2p1pn2/6N1/8/8/PPPPQPPP/R1B1KB1R b KQ - 1 8","moves":["f7e7","e2e6"],"rating":978,"themes":"mate mateIn1 oneMove opening","gameUrl":"https://lichess.org/ly4QSO3u/black#16","openingTags":"Caro-Kann_Defense Caro-Kann_Defense_Two_Knights_Attack"},{"id":"01lBL","fen":"r3kb1r/ppqn1ppp/2p1p1b1/3p4/2PPn3/1PNBPN2/PB3PPP/R2Q1RK1 w kq - 3 10","moves":["c3e4","d5e4","d3e4","g6e4"],"rating":1263,"themes":"advantage fork opening short","gameUrl":"https://lichess.org/wO0acWav#19","openingTags":"Slav_Defense Slav_Defense_Quiet_Variation"},{"id":"01luV","fen":"r2qkbr1/pp2pp1p/2n2p2/3p3b/3P4/2PB1P2/PP2N1PP/RN1QK1R1 b Qq - 3 10","moves":["h5f3","g2f3","g8g1","e2g1"],"rating":1462,"themes":"advantage hangingPiece master opening short","gameUrl":"https://lichess.org/e3v8isN9/black#20","openingTags":"Caro-Kann_Defense Caro-Kann_Defense_Exchange_Variation"},{"id":"01mxD","fen":"rn3rk1/p1b2ppp/1p1qp3/3p2n1/1P1P4/PN1QPN2/5PPP/R3BRK1 w - - 6 17","moves":["b4b5","g5f3","g2f3","d6h2"],"rating":1142,"themes":"kingsideAttack mate mateIn2 opening short","gameUrl":"https://lichess.org/gtjH4VlN#33","openingTags":"Slav_Defense Slav_Defense_Quiet_Variation"},{"id":"01ncA","fen":"r1bq1rk1/pp3pp1/1nnbp2p/2p5/3P4/2P1B3/PPB1NPPP/RN1Q1RK1 b - - 2 11","moves":["b6c4","d1d3","f7f5","d3c4"],"rating":1583,"themes":"advantage master opening short","gameUrl":"https://lichess.org/TAMDGpzu/black#22","openingTags":"Sicilian_Defense Sicilian_Defense_Alapin_Variation"},{"id":"01o71","fen":"rn2k2r/p3bppp/2p1bn2/qp6/4P3/2N1B3/PPPQN1PP/1K1R1B1R w kq - 3 14","moves":["e2d4","f6e4","d2e1","e4c3"],"rating":2018,"themes":"advantage master opening queensideAttack short","gameUrl":"https://lichess.org/wDYpcqk8#27","openingTags":"Lion_Defense Lion_Defense_Lions_Jaw"},{"id":"01oXz","fen":"r2qk2r/ppp2pp1/2p1bn2/2b4p/4P3/2NP3P/PPP2PP1/R1BQKB1R w KQkq - 2 8","moves":["c3a4","c5f2","e1f2","f6e4","f2e3","e4g3"],"rating":2477,"themes":"advantage attackingF2F7 attraction long opening","gameUrl":"https://lichess.org/WA1vQT0Z#15","openingTags":"Russian_Game Russian_Game_Stafford_Gambit"},{"id":"01pVq","fen":"r1b2rk1/pp1nbpp1/1qpp1n1p/4p3/1P2P3/P1NP1N2/1BP1BPPP/R2Q1RK1 b - - 0 11","moves":["d7c5","b4c5","b6b2","d1d2"],"rating":2421,"themes":"advantage opening short","gameUrl":"https://lichess.org/AGkx6s31/black#22","openingTags":"Nimzo-Larsen_Attack Nimzo-Larsen_Attack_Other_variations"},{"id":"01qJr","fen":"r2qkb1r/pp2pppp/2n5/1Bpn4/3P2b1/2N2N1P/PPP2PP1/R1BQK2R b KQkq - 0 7","moves":["c5d4","c3d5","d8d5","b5c6","b7c6","h3g4"],"rating":2284,"themes":"crushing long master opening","gameUrl":"https://lichess.org/HbWPcr4u/black#14","openingTags":"Sicilian_Defense Sicilian_Defense_Nimzowitsch_Variation"},{"id":"01qh2","fen":"r1b1r1k1/pp1p1Npp/2p2q2/2bn3Q/2B5/3P4/PPP2PPP/R1B2RK1 w - - 0 12","moves":["c4d5","f6f2","g1h1","f2f1"],"rating":1966,"themes":"deflection kingsideAttack mate mateIn2 opening short","gameUrl":"https://lichess.org/3VDxYtAy#23","openingTags":"Italian_Game Italian_Game_Giuoco_Pianissimo"},{"id":"01rgi","fen":"rn1qkbnr/pp2pppb/2p4p/7P/2P1N3/3B1N2/PP2QPP1/R1B1K2R b KQkq - 0 10","moves":["b8d7","e4d6"],"rating":1129,"themes":"mate mateIn1 oneMove opening pin smotheredMate","gameUrl":"https://lichess.org/qGETyzwU/black#20","openingTags":"Caro-Kann_Defense Caro-Kann_Defense_Classical_Variation"},{"id":"01tFL","fen":"r1bq1r1k/pp2p2p/3p1nRQ/2p5/8/1B1P4/PPP2bPP/RNB4K b - - 3 15","moves":["f6g8","h6g7"],"rating":1584,"themes":"mate mateIn1 oneMove opening","gameUrl":"https://lichess.org/Wrr17mb6/black#30","openingTags":"Pirc_Defense Pirc_Defense_Other_variations"},{"id":"01xK4","fen":"r1bqk2r/1pp2pp1/3p1n1p/p1b1p3/2BnP3/P1NPBN1P/1PP2PP1/R2QK2R w KQkq - 2 9","moves":["f3d4","e5d4","e3d2","d4c3"],"rating":1169,"themes":"advantage fork opening short","gameUrl":"https://lichess.org/YdZawJON#17","openingTags":"Italian_Game Italian_Game_Giuoco_Pianissimo"},{"id":"01xUb","fen":"r1b1k2r/1p2qpbp/p1n1pnp1/8/Q7/2N2N2/PP1B1PPP/2KR1B1R b kq - 9 14","moves":["b7b5","f1b5","e8g8","b5c6"],"rating":2244,"themes":"advantage opening pin short","gameUrl":"https://lichess.org/ApuqVi6k/black#28","openingTags":"Sicilian_Defense Sicilian_Defense_Alapin_Variation"},{"id":"01xmi","fen":"r1bqk2r/pp2nppp/4p3/2bnP3/8/3B1N2/PP2QPPP/RNB2RK1 b kq - 1 10","moves":["e7g6","d3g6","f7g6","e2b5","c8d7","b5c5"],"rating":1814,"themes":"clearance crushing fork long opening","gameUrl":"https://lichess.org/SbKuJPQI/black#20","openingTags":"Caro-Kann_Defense Caro-Kann_Defense_Advance_Variation"},{"id":"01zbX","fen":"2rq1rk1/1p2bppp/p3p3/5b2/1n2N3/1P3NP1/PB3PBP/2RQ1RK1 b - - 0 15","moves":["f5e4","c1c8","d8c8","d1d4"],"rating":1737,"themes":"advantage opening short","gameUrl":"https://lichess.org/VUIgD5Ji/black#30","openingTags":"English_Opening English_Opening_Caro-Kann_Defensive_System"},{"id":"020eU","fen":"r2qk2r/pbppnppp/8/2b1p3/8/2PB3N/2PP1PPP/R1BQK2R b KQkq - 0 9","moves":["e8g8","d3h7","g8h7","d1h5","h7g8","h3g5"],"rating":1772,"themes":"advantage attraction kingsideAttack long opening sacrifice","gameUrl":"https://lichess.org/tAzbuJIF/black#18","openingTags":"Kings_Pawn_Game Kings_Pawn_Game_Other_variations"},{"id":"022dV","fen":"r2q1rk1/ppp2ppp/5b2/4N3/1n1P2Q1/2N5/PP4PP/R1B2RK1 w - - 7 15","moves":["c3e4","d8d4","g1h1","f6e5"],"rating":1911,"themes":"advantage fork opening short","gameUrl":"https://lichess.org/9AqBbwcG#29","openingTags":"Kings_Gambit_Declined Kings_Gambit_Declined_Petrovs_Defense"},{"id":"022yi","fen":"rn3rk1/1bp2ppp/p3pb2/3q4/3P4/2P5/P1B1NPPP/R1BQ1RK1 w - - 3 14","moves":["d1d3","d5g2"],"rating":516,"themes":"kingsideAttack mate mateIn1 oneMove opening","gameUrl":"https://lichess.org/IUCyteif#27","openingTags":"Queens_Gambit_Accepted Queens_Gambit_Accepted_Old_Variation"},{"id":"023RO","fen":"r1bq1rk1/pp1n2pp/2pb4/3pNp2/3PnB2/2NBP3/PP3PPP/R2Q1RK1 w - - 9 11","moves":["e5c6","b7c6","d3e4","d6f4"],"rating":2056,"themes":"advantage hangingPiece opening short","gameUrl":"https://lichess.org/P7o6WbyA#21","openingTags":"Semi-Slav_Defense Semi-Slav_Defense_Accelerated_Move_Order"},{"id":"023WK","fen":"r1bqkbr1/pp2np1N/2np2pp/4B3/4P3/8/PPP2PPP/RN1QKB1R b KQq - 0 10","moves":["c6e5","h7f6"],"rating":1431,"themes":"mate mateIn1 oneMove opening","gameUrl":"https://lichess.org/TzIaiLVx/black#20","openingTags":"Sicilian_Defense Sicilian_Defense_Lowenthal_Variation"},{"id":"023wk","fen":"r1b1kb1r/pp2pppp/1qnp4/6B1/3NP1n1/2N5/PPP2PPP/R2QKB1R w KQkq - 6 8","moves":["d4b3","b6f2"],"rating":870,"themes":"attackingF2F7 mate mateIn1 oneMove opening","gameUrl":"https://lichess.org/n0dcS3Wl#15","openingTags":"Sicilian_Defense Sicilian_Defense_Classical_Variation"},{"id":"024he","fen":"r1b1k2r/ppp2Npp/2n5/3Bp3/4n3/4Q3/PPqP2PP/RNB3KR w kq - 0 11","moves":["d2d3","c2d1","e3e1","d1e1"],"rating":1220,"themes":"kingsideAttack mate mateIn2 opening short","gameUrl":"https://lichess.org/C0A6Wv4g#21","openingTags":"Italian_Game Italian_Game_Two_Knights_Defense"},{"id":"025Cu","fen":"rnbqk2r/pp3ppp/3b4/2p5/2B2n2/2N2Q2/PP1PN1PP/R1B1K2R b KQkq - 3 9","moves":["f4e2","f3f7"],"rating":1358,"themes":"attackingF2F7 mate mateIn1 oneMove opening","gameUrl":"https://lichess.org/qyQwfyvv/black#18","openingTags":"Sicilian_Defense Sicilian_Defense_McDonnell_Attack"},{"id":"02624","fen":"r1bqk2r/pp3pb1/2np2p1/2p1p3/4P1p1/2NP1N2/PPPBBPP1/R1Q2RK1 w kq - 0 11","moves":["f3h2","d8h4","d2f4","e5f4"],"rating":1741,"themes":"crushing master opening short","gameUrl":"https://lichess.org/ALmb9BNs#21","openingTags":"Sicilian_Defense Sicilian_Defense_Other_variations"},{"id":"0266v","fen":"rnbqkb1r/ppppp2p/8/5p1p/2PPP3/8/PP3PP1/RNBQKBN1 b Qkq - 0 6","moves":["f5e4","d1h5"],"rating":459,"themes":"mate mateIn1 oneMove opening","gameUrl":"https://lichess.org/aqcylPfW/black#12","openingTags":"Dutch_Defense Dutch_Defense_Other_variations"},{"id":"026vm","fen":"rnbq2kr/ppp1n3/3p3p/4P1p1/4Pp2/1QP5/PP4PP/RNB2RK1 b - - 1 11","moves":["g8h7","b3f7"],"rating":813,"themes":"mate mateIn1 oneMove opening","gameUrl":"https://lichess.org/ok3jv9qy/black#22","openingTags":"Kings_Gambit_Accepted Kings_Gambit_Accepted_Kings_Knights_Gambit"},{"id":"027IA","fen":"rn1q1knr/p1ppp1bP/1p6/4N2Q/3P4/3B4/PPP2P1P/RNB1K2b b Q - 1 9","moves":["g8f6","h5f7"],"rating":762,"themes":"mate mateIn1 oneMove opening","gameUrl":"https://lichess.org/5RkiTrPg/black#18","openingTags":"Owen_Defense Owen_Defense_Matovinsky_Gambit"},{"id":"029Eo","fen":"r1b1k2r/pp1p1ppp/1qn1pB2/8/4P3/5N2/PPPN1bPP/R2QKB1R w KQkq - 0 9","moves":["e1e2","b6e3"],"rating":784,"themes":"master mate mateIn1 oneMove opening","gameUrl":"https://lichess.org/zzprANol#17","openingTags":"Torre_Attack Torre_Attack_Classical_Defense"},{"id":"02AH2","fen":"r2qk2r/ppp1bppp/4p3/3pPb2/2P3nP/2N2P2/PP2P1P1/R1BQKB1R w KQkq - 1 9","moves":["f3g4","e7h4","h1h4","d8h4"],"rating":1345,"themes":"advantage opening short","gameUrl":"https://lichess.org/dKAZSXoN#17","openingTags":"Queens_Pawn_Game Queens_Pawn_Game_Zukertort_Variation"},{"id":"02Ack","fen":"1rb1k2r/npN1ppb1/5npp/4p3/8/5N2/PPP2PPP/2KR1B1R b - - 1 14","moves":["e8f8","d1d8","f6e8","d8e8"],"rating":1016,"themes":"mate mateIn2 opening short","gameUrl":"https://lichess.org/IoxsFELU/black#28","openingTags":"Sicilian_Defense Sicilian_Defense_Smith-Morra_Gambit"},{"id":"02Aqe","fen":"r1b1k1nr/pppp1ppp/2n5/4P1N1/1b3B2/2P5/Pq1QPPPP/RN2KB1R b KQkq - 0 7","moves":["b4c3","d2c3","b2c3","b1c3"],"rating":1223,"themes":"crushing opening short","gameUrl":"https://lichess.org/DMric9BU/black#14","openingTags":"Englund_Gambit_Complex Englund_Gambit_Complex_Englund_Gambit"},{"id":"02C3w","fen":"r1bqkbnr/ppp2ppp/2n1p3/8/3pP3/5N2/PPPPNPPP/R1BQKB1R w KQkq - 2 5","moves":["e2d4","c6d4","f3d4","d8d4"],"rating":1039,"themes":"advantage opening short","gameUrl":"https://lichess.org/eckaUIps#9","openingTags":"French_Defense French_Defense_Two_Knights_Variation"},{"id":"02CZ4","fen":"r1bqkbnr/ppppp2p/2n3N1/7Q/4p3/8/PPPP1PPP/RNB1KB1R b KQkq - 0 5","moves":["h7g6","h5g6"],"rating":701,"themes":"mate mateIn1 oneMove opening","gameUrl":"https://lichess.org/eCZPGQAX/black#10","openingTags":"Nimzowitsch_Defense Nimzowitsch_Defense_Colorado_Countergambit"},{"id":"02Dnf","fen":"rnbq1rk1/p3b1pp/4pP2/1Pp3B1/8/2p2N2/PP3PPP/R2QKB1R b KQ - 0 11","moves":["c3b2","f6e7","d8d1","a1d1"],"rating":1606,"themes":"advancedPawn crushing fork opening short","gameUrl":"https://lichess.org/XJVeiQKf/black#22","openingTags":"Blumenfeld_Countergambit_Accepted Blumenfeld_Countergambit_Accepted_Other_variations"},{"id":"02Ekq","fen":"r1q1rbk1/1ppb1pp1/p1n2n1p/8/2PP1B2/P2Q1N1P/2B2PP1/RN3RK1 b - - 4 16","moves":["f6h5","d3h7"],"rating":1044,"themes":"mate mateIn1 oneMove opening","gameUrl":"https://lichess.org/jWdgPwvN/black#32","openingTags":"Petrovs_Defense Petrovs_Defense_Stafford_Gambit"},{"id":"02EvG","fen":"r1b1k1nr/pppp1Npp/4nq2/2b5/2B1P3/8/PPP2PPP/RNBQK2R w KQkq - 1 7","moves":["f7h8","f6f2"],"rating":1044,"themes":"attackingF2F7 mate mateIn1 oneMove opening","gameUrl":"https://lichess.org/2DvapBi7#13","openingTags":""},{"id":"02Goa","fen":"2rqk1nr/pbp2ppp/1pnb4/1B1p4/8/P3PN2/1P3PPP/RNBQ1RK1 w k - 0 10","moves":["d1d5","d6h2","f3h2","d8d5"],"rating":1184,"themes":"advantage discoveredAttack kingsideAttack opening short","gameUrl":"https://lichess.org/MdUjfS0T#19","openingTags":"Queens_Pawn_Game Queens_Pawn_Game_Chigorin_Variation"},{"id":"02HMU","fen":"r1bq1bnr/pppp2p1/2nk3p/4pQ2/3PP3/5N2/PPP2PPP/RNB1K2R b KQ - 0 7","moves":["d8f6","d4e5","c6e5","c1f4","f6f5","e4f5"],"rating":2043,"themes":"advantage fork long opening","gameUrl":"https://lichess.org/vmmMR2b1/black#14","openingTags":"Bishops_Opening Bishops_Opening_Other_variations"},{"id":"02HkX","fen":"r2qk2r/1p1n1pp1/p2p4/4p2p/4P1bb/2NQ1nP1/PPP1NPB1/R1B2R1K b kq - 1 15","moves":["h4e7","g2f3","d7c5","d3e3","e7g5","e3g5","d8g5","c1g5"],"rating":1649,"themes":"advantage master opening veryLong","gameUrl":"https://lichess.org/5lu3U75Y/black#30","openingTags":"Sicilian_Defense Sicilian_Defense_Najdorf_Variation"},{"id":"02Ik8","fen":"rn3b1r/pp2pkp1/2pq1n2/3p4/3P1NpP/3Q4/PPP2P2/RNB1K2R b KQ - 3 11","moves":["g7g5","d3g6"],"rating":884,"themes":"mate mateIn1 oneMove opening","gameUrl":"https://lichess.org/fUT2zOar/black#22","openingTags":"Caro-Kann_Defense Caro-Kann_Defense_Advance_Variation"},{"id":"02Int","fen":"r2qkbnr/pp1bnppp/3p4/1Np5/Q3P3/2PB4/PP3PPP/RNB1K2R b KQkq - 1 9","moves":["a7a6","b5d6"],"rating":1116,"themes":"mate mateIn1 oneMove opening smotheredMate","gameUrl":"https://lichess.org/A5IwHud3/black#18","openingTags":"Ruy_Lopez Ruy_Lopez_Steinitz_Defense"},{"id":"02K3C","fen":"r1b1kb1r/pp2pppp/2n2n2/3P4/2B5/q4N2/P2B1PPP/1R1QK2R b Kkq - 2 11","moves":["c8g4","d5c6","b7c6","d2b4","a3b4","b1b4"],"rating":2254,"themes":"crushing long opening trappedPiece","gameUrl":"https://lichess.org/rSiFHwLh/black#22","openingTags":"Sicilian_Defense Sicilian_Defense_Old_Sicilian"},{"id":"02KAh","fen":"r1bq1k1r/pppp2p1/2n2n1p/2b3BB/4P3/1Qp2N2/P4PPP/RN3RK1 b - - 1 11","moves":["h6g5","b3f7"],"rating":703,"themes":"mate mateIn1 oneMove opening","gameUrl":"https://lichess.org/vlpnvsac/black#22","openingTags":"Italian_Game Italian_Game_Evans_Gambit"},{"id":"02MB7","fen":"r1b2rk1/pppp1ppp/2n2q1n/2b1P1N1/2Bp4/3Q4/PPP2PPP/RNB2RK1 b - - 0 8","moves":["c6e5","d3h7"],"rating":1096,"themes":"kingsideAttack mate mateIn1 oneMove opening","gameUrl":"https://lichess.org/btkR2GcG/black#16","openingTags":""},{"id":"02MML","fen":"rnb1k2r/pppp1ppp/8/4P3/2B1q3/5Nn1/PPP4P/RNBQK2R w KQkq - 2 9","moves":["e1f2","g3h1","d1h1","e4c4"],"rating":1251,"themes":"advantage opening short","gameUrl":"https://lichess.org/fJnNpt8E#17","openingTags":"Bishops_Opening Bishops_Opening_Ponziani_Gambit"},{"id":"02MZb","fen":"r3kbnr/1pp2ppp/p1p2q2/4p2b/4P3/3P1N1P/PPP2PP1/RNBQ1RK1 w kq - 3 8","moves":["c1g5","h5f3","g5f6","f3d1","f6g7","f8g7"],"rating":1162,"themes":"advantage long opening","gameUrl":"https://lichess.org/cYS6ot1j#15","openingTags":"Ruy_Lopez Ruy_Lopez_Exchange_Variation"},{"id":"02N7B","fen":"rn2kbn1/ppN1p1p1/4bp2/7r/7p/3P4/PPP2PqP/R1BQK2R b KQq - 0 11","moves":["e8d8","c7e6","d8c8","d1h5"],"rating":1639,"themes":"advantage fork hangingPiece opening short","gameUrl":"https://lichess.org/hDT72pZf/black#22","openingTags":"Scandinavian_Defense Scandinavian_Defense_Mieses-Kotroc_Variation"},{"id":"02NaQ","fen":"rnb1kbnr/pp1pq1pp/2p2p2/4N3/3PP3/8/PPP2PPP/RNBQKB1R w KQkq - 1 5","moves":["d1h5","g7g6","h5h4","f6e5"],"rating":1405,"themes":"advantage defensiveMove opening short","gameUrl":"https://lichess.org/U9pFJWOY#9","openingTags":"Caro-Kann_Defense Caro-Kann_Defense_Other_variations"},{"id":"02Ojk","fen":"r1bq2k1/pp1nbrpp/2p1pn1B/2Pp1pN1/3P4/2N4P/PPQ1PP2/R3KBR1 b Q - 4 12","moves":["g7h6","g5e6","g8h8","e6d8"],"rating":1344,"themes":"advantage discoveredAttack kingsideAttack opening short","gameUrl":"https://lichess.org/TfYqGtEp/black#24","openingTags":"Semi-Slav_Defense Semi-Slav_Defense_Other_variations"},{"id":"02Oku","fen":"r2qk2r/p2nbppp/2n5/2p1p3/4N3/3Q4/PPPP1PPP/RNB1K2R w KQkq - 0 14","moves":["e4d6","e7d6","d3d6","c6b4"],"rating":2491,"themes":"advantage opening short","gameUrl":"https://lichess.org/97Qk80ic#27","openingTags":"Italian_Game Italian_Game_Two_Knights_Defense"},{"id":"02TTi","fen":"r1b1k2r/ppp2pp1/2p2n2/2b1N2p/3qP3/2N4P/PPPP1PP1/R1BQK2R w KQkq - 1 8","moves":["e5f3","d4f2"],"rating":969,"themes":"attackingF2F7 mate mateIn1 oneMove opening","gameUrl":"https://lichess.org/8KhlxK23#15","openingTags":"Russian_Game Russian_Game_Three_Knights_Game"},{"id":"02U15","fen":"3rkbnr/pp1b1ppp/2n5/2pBP3/4NP2/5N2/PP4PP/R1B1K2R b KQk - 6 12","moves":["g8e7","e4d6"],"rating":1249,"themes":"mate mateIn1 oneMove opening smotheredMate","gameUrl":"https://lichess.org/ja0lqoSv/black#24","openingTags":"Caro-Kann_Defense Caro-Kann_Defense_Other_variations"},{"id":"02VFf","fen":"r1b1kb1r/pppnqppp/2n5/4P1B1/2Bp4/1Q3N2/PP3PPP/RN3RK1 b kq - 2 9","moves":["e7b4","c4f7"],"rating":1058,"themes":"attackingF2F7 mate mateIn1 oneMove opening","gameUrl":"https://lichess.org/nMRlMwhn/black#18","openingTags":"Queens_Gambit_Accepted Queens_Gambit_Accepted_Central_Variation"},{"id":"02WmY","fen":"r2qk2r/1p3pbp/p1npbnp1/3Np3/4P3/2NB4/PPP2PPP/R1BQK2R b KQkq - 3 11","moves":["f6d5","e4d5","e6d5","c3d5","d8a5","d5c3"],"rating":1548,"themes":"advantage defensiveMove fork long opening","gameUrl":"https://lichess.org/GQ4qa2uk/black#22","openingTags":"Sicilian_Defense Sicilian_Defense_Sozin"},{"id":"02YPX","fen":"r3kb1r/pppb1ppp/5n2/3PN3/Q2nP3/2N5/Pq1B1PPP/1R2KB1R b Kkq - 3 11","moves":["d4c2","e1e2","b2b1","e5d7"],"rating":2383,"themes":"advantage defensiveMove opening sacrifice short","gameUrl":"https://lichess.org/vpN3Ih0R/black#22","openingTags":"Queens_Gambit_Declined Queens_Gambit_Declined_Chigorin_Defense"},{"id":"02aO5","fen":"r3kbnr/pp3pp1/2p1p3/7q/2P3p1/2N3P1/PP2BP2/R1BQ1RK1 w kq - 1 14","moves":["e2g4","h5h1"],"rating":607,"themes":"mate mateIn1 oneMove opening","gameUrl":"https://lichess.org/Ud6X3rQg#27","openingTags":"Scandinavian_Defense Scandinavian_Defense_Mieses-Kotroc_Variation"},{"id":"02bHR","fen":"r2qkbnr/1n1bpppp/p2p4/3P4/1B2P3/5N2/1P3PPP/RN1QKB1R w KQkq - 1 11","moves":["a1a6","a8a6","f1a6","d8b6"],"rating":1503,"themes":"advantage opening short","gameUrl":"https://lichess.org/yR9FvAmd#21","openingTags":"Sicilian_Defense Sicilian_Defense_Alapin_Variation"},{"id":"02cdm","fen":"r2qk1nr/p2b1ppp/2pbp3/2ppN3/5P2/1P2P2P/PBPP2P1/RN1QK2R b KQkq - 2 9","moves":["f7f6","d1h5","g7g6","e5g6","h7g6","h5h8"],"rating":1167,"themes":"crushing long opening pin trappedPiece","gameUrl":"https://lichess.org/qvK8ZwZ2/black#18","openingTags":"Bird_Opening Bird_Opening_Dutch_Variation"},{"id":"02eUP","fen":"rn2k2r/pbppq1pp/1p2p3/5p2/2PPn3/2NBPN2/PP3PPP/R2QK2R w KQkq - 0 9","moves":["c3e4","f5e4","d3e2","e4f3"],"rating":1373,"themes":"crushing fork opening short","gameUrl":"https://lichess.org/pdbkEmBv#17","openingTags":"Dutch_Defense Dutch_Defense_Normal_Variation"},{"id":"02hKJ","fen":"rnbqkb1r/1pp2ppp/p3p3/4N3/2PPp3/8/PP3PPP/R1BQKB1R b KQkq - 1 7","moves":["f7f6","d1h5","g7g6","e5g6","h7g6","h5h8"],"rating":1428,"themes":"advantage long opening","gameUrl":"https://lichess.org/v13kTEYj/black#14","openingTags":"Queens_Gambit_Declined Queens_Gambit_Declined_Marshall_Defense"},{"id":"02im6","fen":"r2qkb1r/pp2pppp/5n2/5b2/3Bp3/2P5/PP2BPPP/RN1Q1RK1 b kq - 4 9","moves":["e7e6","d4f6","d8d1","f1d1","g7f6","e2b5","e8e7","d1d7"],"rating":2339,"themes":"crushing opening veryLong","gameUrl":"https://lichess.org/aDuhy4SP/black#18","openingTags":"Sicilian_Defense Sicilian_Defense_Keres_Variation"},{"id":"02kn2","fen":"rnbqk2r/pp3pp1/3bpn1p/1B1pN3/3Q1B2/4P3/PPP2PPP/RN2K2R b KQkq - 2 8","moves":["c8d7","e5d7","b8d7","f4d6"],"rating":1787,"themes":"crushing discoveredAttack opening short","gameUrl":"https://lichess.org/OrurLtEu/black#16","openingTags":"Torre_Attack Torre_Attack_Classical_Defense"},{"id":"02kzX","fen":"r2q1rk1/pQpn1ppp/2Nbpn2/3p4/5B2/P3P2P/1P3PP1/RN2K2R b KQ - 4 15","moves":["d7c5","c6d8","c5b7","d8b7","d6f4","e3f4"],"rating":1423,"themes":"advantage long opening","gameUrl":"https://lichess.org/dnvbDd1C/black#30","openingTags":"Queens_Gambit_Declined Queens_Gambit_Declined_Other_variations"},{"id":"02li3","fen":"rn2k2r/ppq2pp1/2p1pnp1/8/4N3/P2P1B2/1PP2PP1/R1BQ1RbK w kq - 4 14","moves":["h1g1","c7h2"],"rating":562,"themes":"mate mateIn1 oneMove opening","gameUrl":"https://lichess.org/dl612mnu#27","openingTags":"Scandinavian_Defense Scandinavian_Defense_Main_Line"},{"id":"02oYD","fen":"1k1r2nr/ppp2ppp/3b4/1P2qb2/Q7/2P1BB2/P3PP1P/RN3RK1 w - - 1 14","moves":["f3g2","e5h2"],"rating":474,"themes":"kingsideAttack mate mateIn1 oneMove opening","gameUrl":"https://lichess.org/CTpjsFrA#27","openingTags":"Englund_Gambit Englund_Gambit_Hartlaub-Charlick_Gambit"},{"id":"02obx","fen":"rnbqk2r/p1p1ppbp/1p1p1np1/8/3P1B2/2P1PN2/PP1N1PPP/R2QKB1R b KQkq - 1 6","moves":["c8a6","f1a6","b8a6","d1a4","d8d7","a4a6"],"rating":1527,"themes":"crushing fork long opening","gameUrl":"https://lichess.org/NkxWFDpT/black#12","openingTags":"Indian_Defense Indian_Defense_Other_variations"},{"id":"02rAh","fen":"r1b1kb1r/pp1p1p1p/n1qP1np1/1NP5/3B4/8/PP3PPP/R2QKB1R b KQkq - 1 14","moves":["f8g7","d1e2","c6e4","e2e4","f6e4","d4g7"],"rating":1704,"themes":"crushing long opening","gameUrl":"https://lichess.org/IlbhjUVt/black#28","openingTags":"Four_Knights_Game Four_Knights_Game_Halloween_Gambit"},{"id":"02rFZ","fen":"r1bq1rk1/pppnbpp1/2npP2p/8/2B5/1QN2N2/PP3PPP/R1BR2K1 b - - 0 11","moves":["c6a5","b3a4","a5c4","e6d7","d8d7","a4c4"],"rating":2559,"themes":"advancedPawn advantage long opening","gameUrl":"https://lichess.org/j960OepU/black#22","openingTags":"Philidor_Defense Philidor_Defense_Morphy_Gambit"},{"id":"02u91","fen":"r2qk1nr/ppp2ppp/2np4/8/3PP1b1/5N2/P1P2PPP/R1BQKB1R w KQkq - 1 8","moves":["c1g5","g4f3","g5d8","f3d1"],"rating":1112,"themes":"advantage opening short","gameUrl":"https://lichess.org/7AX9ZldL#15","openingTags":"Three_Knights_Opening Three_Knights_Opening_Other_variations"},{"id":"02uKZ","fen":"r1b1r1k1/pp3ppp/8/2pq4/1nNPn3/1P3N1P/P3BPP1/RQ2R1K1 w - - 0 17","moves":["d4c5","d5c5","c4e3","e4f2"],"rating":2596,"themes":"advantage opening short","gameUrl":"https://lichess.org/g7WxI8b4#33","openingTags":"French_Defense French_Defense_Exchange_Variation"},{"id":"02vpt","fen":"r2qk1r1/pbppbp2/1pP1pn2/8/2P5/1P2Pp2/PB2B1PP/RN1Q1RK1 w q - 0 13","moves":["c6b7","g8g2","g1h1","f3e2"],"rating":1937,"themes":"advancedPawn crushing kingsideAttack master opening short","gameUrl":"https://lichess.org/KUyJe0XB#25","openingTags":"Bird_Opening Bird_Opening_Other_variations"},{"id":"02weX","fen":"r1b2rk1/pp1pqpbp/6p1/3nP3/2p2P2/P5Q1/1PP1B1PP/RNB2RK1 w - - 0 13","moves":["e2c4","e7c5","g3f2","c5c4"],"rating":1084,"themes":"advantage fork opening short","gameUrl":"https://lichess.org/XL9mj2V9#25","openingTags":"Scotch_Game Scotch_Game_Other_variations"},{"id":"02wgI","fen":"2kr1b1r/1ppq2pp/p1n2p2/4Pn2/6b1/1BP2N2/PP2QPPP/RNB1R1K1 b - - 0 12","moves":["c6e5","f3e5","g4e2","e5d7"],"rating":1316,"themes":"advantage opening short","gameUrl":"https://lichess.org/i3Afdl6l/black#24","openingTags":"Ruy_Lopez Ruy_Lopez_Cozio_Defense"},{"id":"02yBm","fen":"r1b1qrk1/pppp1p1p/1b3QpB/4p3/2n1P3/2P2N2/PP3PPP/RN2K2R b KQ - 1 12","moves":["e8e6","f6g7"],"rating":887,"themes":"mate mateIn1 oneMove opening","gameUrl":"https://lichess.org/hN6LbVvp/black#24","openingTags":"Italian_Game Italian_Game_Rosentreter_Gambit"},{"id":"02yrs","fen":"2kr1bnr/ppq2ppp/2p1p3/3pP1N1/8/1P1QB3/P1P2PPP/RN2K2R w KQ - 1 11","moves":["e3a7","c7e5","d3e3","e5a1","e1g1","a1f6"],"rating":2256,"themes":"advantage fork long opening pin","gameUrl":"https://lichess.org/OsT1JzVm#21","openingTags":"Caro-Kann_Defense Caro-Kann_Defense_Advance_Variation"},{"id":"02z11","fen":"r1b1k2r/ppp1qppp/3p1n2/4n3/2Bb4/5N2/PP3PPP/RNBQR1K1 w kq - 0 10","moves":["d1d4","e5f3","g2f3","e7e1"],"rating":873,"themes":"crushing discoveredAttack kingsideAttack opening short","gameUrl":"https://lichess.org/vccAanBW#19","openingTags":"Italian_Game Italian_Game_Classical_Variation"},{"id":"031G5","fen":"r1bqk1r1/ppp2p2/1bnp1n1p/4p1pQ/2B1P2N/2PPB2P/PP3PP1/RN3RK1 b q - 1 10","moves":["b6e3","h5f7"],"rating":1094,"themes":"attackingF2F7 mate mateIn1 oneMove opening","gameUrl":"https://lichess.org/m5wbGsv8/black#20","openingTags":"Italian_Game Italian_Game_Classical_Variation"},{"id":"031Kv","fen":"r3k1nr/pp3pp1/1bn2q1p/4p3/6b1/2PPBNP1/PP3PBP/RN1Q1RK1 w kq - 2 11","moves":["d1b3","g4f3","g2f3","f6f3"],"rating":1155,"themes":"advantage opening short","gameUrl":"https://lichess.org/UsYQB9NP#21","openingTags":"Kings_Pawn_Game Kings_Pawn_Game_Macleod_Attack"},{"id":"031pC","fen":"r2qk2r/pppb1ppp/1b3n2/4B3/2Q5/2N5/PPP3PP/2KR1B1R b kq - 0 12","moves":["e8g8","e5f6","d8f6","d1d7"],"rating":1327,"themes":"capturingDefender crushing opening short","gameUrl":"https://lichess.org/yW0Xt7CQ/black#24","openingTags":"Center_Game Center_Game_Normal_Variation"},{"id":"031po","fen":"r1b1kb1r/ppp1qppp/2P5/8/6n1/2N2p2/PP3KPP/R1BQ1BNR w kq - 3 10","moves":["f2f3","e7f6","c1f4","g4e5"],"rating":2315,"themes":"crushing opening short","gameUrl":"https://lichess.org/i4AuYirN#19","openingTags":"Queens_Gambit_Declined Queens_Gambit_Declined_Normal_Defense"}]'),Hj=JSON.parse('[{"id":"00008","fen":"r6k/pp2r2p/4Rp1Q/3p4/8/1N1P2R1/PqP2bPP/7K b - - 0 24","moves":["f2g3","e6e7","b2b1","b3c1","b1c1","h6c1"],"rating":1877,"themes":"crushing hangingPiece long middlegame","gameUrl":"https://lichess.org/787zsVup/black#48","openingTags":""},{"id":"0009B","fen":"r2qr1k1/b1p2ppp/pp4n1/P1P1p3/4P1n1/B2P2Pb/3NBP1P/RN1QR1K1 b - - 1 16","moves":["b6c5","e2g4","h3g4","d1g4"],"rating":1103,"themes":"advantage middlegame short","gameUrl":"https://lichess.org/4MWQCxQ6/black#32","openingTags":"Kings_Pawn_Game Kings_Pawn_Game_Leonardis_Variation"},{"id":"000aY","fen":"r4rk1/pp3ppp/2n1b3/q1pp2B1/8/P1Q2NP1/1PP1PP1P/2KR3R w - - 0 15","moves":["g5e7","a5c3","b2c3","c6e7"],"rating":1430,"themes":"advantage master middlegame short","gameUrl":"https://lichess.org/iihZGl6t#29","openingTags":"Benoni_Defense Benoni_Defense_Benoni-Indian_Defense"},{"id":"000h0","fen":"5rk1/p5p1/3bpr1p/1Pp4q/3pR3/1P1Q1N2/P4PPP/4R1K1 w - - 4 22","moves":["e4e6","f6f3","g2f3","h5h2","g1f1","h2h3","f1e2","h3e6"],"rating":2035,"themes":"advantage interference kingsideAttack middlegame veryLong","gameUrl":"https://lichess.org/OWe6M5dF#43","openingTags":""},{"id":"000hf","fen":"r1bqk2r/pp1nbNp1/2p1p2p/8/2BP4/1PN3P1/P3QP1P/3R1RK1 b kq - 0 19","moves":["e8f7","e2e6","f7f8","e6f7"],"rating":1620,"themes":"mate mateIn2 middlegame short","gameUrl":"https://lichess.org/71ygsFeE/black#38","openingTags":"Horwitz_Defense Horwitz_Defense_Other_variations"},{"id":"000lC","fen":"3r3r/pQNk1ppp/1qnb1n2/1B6/8/8/PPP3PP/3R1R1K w - - 5 19","moves":["d1d6","d7d6","b7b6","a7b6"],"rating":1391,"themes":"advantage hangingPiece middlegame short","gameUrl":"https://lichess.org/vaqz2bx6#37","openingTags":""},{"id":"000mr","fen":"5r1k/5rp1/p7/1b2B2p/1P1P1Pq1/2R1Q3/P3p1P1/2R3K1 w - - 0 41","moves":["e3g3","f7f4","e5f4","f8f4"],"rating":1957,"themes":"crushing middlegame short","gameUrl":"https://lichess.org/8sVpuwso#81","openingTags":""},{"id":"00143","fen":"r2q1rk1/5ppp/1np5/p1b5/2p1B3/P7/1P3PPP/R1BQ1RK1 b - - 1 17","moves":["d8f6","d1h5","h7h6","h5c5"],"rating":1780,"themes":"advantage middlegame short","gameUrl":"https://lichess.org/jcuxlI63/black#34","openingTags":"Scotch_Game Scotch_Game_Mieses_Variation"},{"id":"0017R","fen":"r2qk2r/pp2ppbp/1n1p2p1/3Pn3/2P5/2NBBP1P/PP3P2/R2QK2R b KQkq - 0 12","moves":["e5c4","d3c4","b6c4","d1a4","d8d7","a4c4"],"rating":1677,"themes":"advantage fork long middlegame","gameUrl":"https://lichess.org/ol84k0z4/black#24","openingTags":"Alekhine_Defense Alekhine_Defense_Other_variations"},{"id":"001Fg","fen":"2R2r1k/pQ4pp/5rp1/3B4/q2n4/7P/P4PP1/5RK1 w - - 3 30","moves":["c8c7","d4e2","g1h2","a4f4","h2h1","e2g3","f2g3","f4f1"],"rating":1516,"themes":"advantage middlegame veryLong","gameUrl":"https://lichess.org/y0QalMAw#59","openingTags":""},{"id":"001KR","fen":"6Qk/p1p3pp/4N3/1p6/2q1r1n1/2B5/PP4PP/3R1R1K b - - 0 28","moves":["h8g8","f1f8"],"rating":565,"themes":"mate mateIn1 middlegame oneMove","gameUrl":"https://lichess.org/TaT1Zl7z/black#56","openingTags":""},{"id":"001XA","fen":"1qr2rk1/pb2bppp/8/8/2p1N3/P1Bn2P1/2Q2PBP/1R3RK1 b - - 3 23","moves":["b8c7","b1b7","c7b7","e4f6","e7f6","g2b7"],"rating":1667,"themes":"crushing discoveredAttack long master middlegame sacrifice","gameUrl":"https://lichess.org/KZRiN695/black#46","openingTags":""},{"id":"001gi","fen":"r6r/1pNk1ppp/2np4/b3p3/4P1b1/N1Q5/P4PPP/R3KB1R w KQ - 3 18","moves":["c7a8","a5c3"],"rating":820,"themes":"bodenMate hangingPiece mate mateIn1 middlegame oneMove","gameUrl":"https://lichess.org/1sV2Hr22#35","openingTags":"Sicilian_Defense Sicilian_Defense_Other_variations"},{"id":"001h8","fen":"2r3k1/2r4p/4p1p1/1p1q1pP1/p1bP1P1Q/P6R/5B2/2R3K1 b - - 5 34","moves":["c4e2","h4h7","c7h7","c1c8","g8g7","c8c7"],"rating":1780,"themes":"crushing deflection kingsideAttack long middlegame sacrifice","gameUrl":"https://lichess.org/IxCahP6X/black#68","openingTags":""},{"id":"001om","fen":"5r1k/pp4pp/5p2/1BbQp1r1/6K1/7P/1PP3P1/3R3R w - - 2 26","moves":["g4h4","c5f2","g2g3","f2g3"],"rating":1018,"themes":"mate mateIn2 middlegame short","gameUrl":"https://lichess.org/VWOIWtIh#51","openingTags":""},{"id":"001pC","fen":"r4rk1/pp3ppp/3b4/2p1pPB1/7N/2PP3n/PP4PP/R2Q1RqK w - - 5 18","moves":["f1g1","h3f2"],"rating":895,"themes":"mate mateIn1 middlegame oneMove smotheredMate","gameUrl":"https://lichess.org/d04UP3XD#35","openingTags":"Sicilian_Defense Sicilian_Defense_McDonnell_Attack"},{"id":"001u3","fen":"2r3k1/p1q2pp1/Q3p2p/b1Np4/2nP1P2/4P1P1/5K1P/2B1N3 b - - 3 33","moves":["c7b6","a6c8","g8h7","c8b7"],"rating":2175,"themes":"advantage hangingPiece middlegame short","gameUrl":"https://lichess.org/BBn6ipaK/black#66","openingTags":""},{"id":"001uD","fen":"6k1/1p3pp1/1p5p/2r1p3/2n5/r3PN2/2RnNPPP/2R3K1 b - - 1 32","moves":["f7f6","f3d2","c4d2","c2d2","c5c1","e2c1"],"rating":1832,"themes":"advantage long middlegame","gameUrl":"https://lichess.org/2qkVLUl6/black#64","openingTags":""},{"id":"001w5","fen":"1rb2rk1/q5P1/4p2p/3p3p/3P1P2/2P5/2QK3P/3R2R1 b - - 0 29","moves":["f8f7","c2h7","g8h7","g7g8q"],"rating":1039,"themes":"advancedPawn attraction mate mateIn2 middlegame promotion short","gameUrl":"https://lichess.org/0e1vxAEn/black#58","openingTags":""},{"id":"001wb","fen":"r3k2r/pb1p1ppp/1b4q1/1Q2P3/8/2NP1Pn1/PP4PP/R1B2R1K w kq - 1 17","moves":["h2g3","g6h5"],"rating":1252,"themes":"mate mateIn1 middlegame oneMove","gameUrl":"https://lichess.org/hNzYRMWP#33","openingTags":"Ruy_Lopez Ruy_Lopez_Bird_Variation"},{"id":"001wr","fen":"r4rk1/p3ppbp/Pp1q1np1/3PpbB1/2B5/2N5/1PPQ1PPP/3RR1K1 w - - 4 18","moves":["f2f3","d6c5","g1h1","c5c4"],"rating":947,"themes":"advantage fork master masterVsMaster middlegame short","gameUrl":"https://lichess.org/KnJ2mojX#35","openingTags":"Pirc_Defense Pirc_Defense_Classical_Variation"},{"id":"001xO","fen":"k1r1b3/p1r1nppp/1p1qpn2/2Np4/1P1P4/PQRBPN2/5PPP/2R3K1 w - - 0 19","moves":["d3a6","b6c5","a6c8","c5c4"],"rating":1710,"themes":"crushing master masterVsMaster middlegame sacrifice short","gameUrl":"https://lichess.org/fNCePFgY#37","openingTags":"Slav_Defense Slav_Defense_Other_variations"},{"id":"002HE","fen":"1qr2rk1/1p1p1ppp/pB2p1n1/7n/2P1P3/1Q2NP1P/PP2B1Pb/3R1RK1 w - - 1 20","moves":["g1f2","b8g3"],"rating":1206,"themes":"master mate mateIn1 middlegame oneMove","gameUrl":"https://lichess.org/U21EXYdv#39","openingTags":""},{"id":"002IE","fen":"r3brk1/5pp1/p1nqpn1p/P2pN3/2pP4/2P1PN2/5PPP/RB1QK2R b KQ - 4 16","moves":["c6e5","d4e5","d6e7","e5f6"],"rating":1205,"themes":"advantage fork middlegame short","gameUrl":"https://lichess.org/fDwvVUIp/black#32","openingTags":"Queens_Pawn_Game Queens_Pawn_Game_Accelerated_London_System"},{"id":"002KJ","fen":"r3kb1r/ppq2ppp/4pn2/2Ppn3/1P4bP/2P2N2/P3BPP1/RNBQ1RK1 b kq - 2 10","moves":["f8e7","f3e5","c7e5","e2g4"],"rating":1643,"themes":"crushing discoveredAttack middlegame short","gameUrl":"https://lichess.org/2NpTzh7O/black#20","openingTags":"Caro-Kann_Defense Caro-Kann_Defense_Advance_Variation"},{"id":"002LW","fen":"3r1rk1/1b1n1pp1/3p4/p4PPQ/4P3/3q1BN1/8/2R2RK1 b - - 1 28","moves":["d7e5","f5f6","e5f3","f1f3"],"rating":2464,"themes":"advantage middlegame short","gameUrl":"https://lichess.org/0khwj5dv/black#56","openingTags":""},{"id":"002Mm","fen":"rn1qr1k1/ppp3pQ/3p1pP1/3Pp3/2P1P3/8/PP3PP1/R1B1K3 b Q - 2 16","moves":["g8f8","h7h8","f8e7","h8g7"],"rating":1276,"themes":"deflection mate mateIn2 middlegame short","gameUrl":"https://lichess.org/wAkPv4uG/black#32","openingTags":"Three_Knights_Opening Three_Knights_Opening_Other_variations"},{"id":"002O7","fen":"r3qrk1/2p2pp1/p2bpn1p/2ppNb2/3P1P2/1PP1P1B1/P2N2PP/R2Q1RK1 b - - 0 14","moves":["f5g4","e5g4","f6g4","d1g4"],"rating":966,"themes":"crushing middlegame short","gameUrl":"https://lichess.org/dFEPPiEc/black#28","openingTags":"Queens_Pawn_Game Queens_Pawn_Game_Accelerated_London_System"},{"id":"002Q2","fen":"7k/p4R1p/3p3r/2pN1n2/2PbBBb1/3P2P1/P3r3/5R1K w - - 1 28","moves":["f4h6","f5g3"],"rating":872,"themes":"cornerMate mate mateIn1 middlegame oneMove","gameUrl":"https://lichess.org/yqAJ1jMv#55","openingTags":""},{"id":"002Ua","fen":"r4rk1/pp3ppp/3p1q2/P1P1p3/2B5/2B2n2/2P2P1P/R2Q1RK1 w - - 0 16","moves":["g1h1","f6f4","d1f3","f4f3"],"rating":1817,"themes":"crushing kingsideAttack middlegame short","gameUrl":"https://lichess.org/06i3eMVp#31","openingTags":"Sicilian_Defense Sicilian_Defense_Lowenthal_Variation"},{"id":"002e5","fen":"r2q4/pp1n1kbp/3P2b1/6N1/6Q1/P3P3/6P1/4K2R b K - 1 21","moves":["f7g8","g4c4","g8h8","h1h7","g6h7","g5f7"],"rating":2619,"themes":"crushing long middlegame sacrifice","gameUrl":"https://lichess.org/qaapuG48/black#42","openingTags":""},{"id":"002e8","fen":"r3nrk1/1b3pp1/4pb2/p3q3/1p1N4/3B2R1/PPPQN2P/1K4R1 b - - 1 23","moves":["a8d8","d2h6","g7g6","g3h3"],"rating":2348,"themes":"crushing defensiveMove master middlegame pin short","gameUrl":"https://lichess.org/ygzu5djr/black#46","openingTags":""},{"id":"002mG","fen":"5r1k/B1p3pp/2Qb1p2/3Pq3/P6P/8/2P3K1/3R1R2 w - - 1 36","moves":["g2f2","f8e8","c6e8","e5e8"],"rating":2245,"themes":"advantage middlegame quietMove short","gameUrl":"https://lichess.org/age2hanq#71","openingTags":""},{"id":"002p5","fen":"r1bqr1k1/pp1nbpp1/2p2n2/6P1/2BP4/P7/1PQNNPP1/R3K2R b KQ - 0 13","moves":["f6d5","c2h7","g8f8","h7h8"],"rating":899,"themes":"kingsideAttack mate mateIn2 middlegame short","gameUrl":"https://lichess.org/meSoQkhU/black#26","openingTags":"French_Defense French_Defense_Exchange_Variation"},{"id":"002rd","fen":"r6k/q1pb1p1p/1b3Pr1/p1ppP2Q/3P2p1/4B3/PP2NRPP/3R2K1 b - - 1 25","moves":["d7e6","e2f4","c5d4","f4g6","f7g6","h5h6"],"rating":1795,"themes":"crushing kingsideAttack long middlegame pin","gameUrl":"https://lichess.org/NcD6lul8/black#50","openingTags":""},{"id":"002uV","fen":"r2r2k1/1p2qppp/2n1p3/5n2/p2P4/P2Q1N2/BP3PPP/2R1R1K1 w - - 4 20","moves":["d3f5","e6f5","e1e7","c6e7"],"rating":1589,"themes":"advantage middlegame short","gameUrl":"https://lichess.org/WKH5eIti#39","openingTags":""},{"id":"0030b","fen":"6k1/5ppp/5nb1/pp6/6rP/5N1Q/Pq2r1P1/3R2RK b - - 4 32","moves":["g6e4","d1d8","f6e8","d8e8"],"rating":617,"themes":"backRankMate mate mateIn2 middlegame short","gameUrl":"https://lichess.org/mhIZR6Mc/black#64","openingTags":""},{"id":"003AX","fen":"2r2rk1/5ppp/bq2p3/p1ppP1N1/Pb1P2P1/1P2P2P/2QN4/2R1K2R b K - 1 18","moves":["c5d4","c2h7"],"rating":966,"themes":"kingsideAttack mate mateIn1 middlegame oneMove","gameUrl":"https://lichess.org/kRgejRSt/black#36","openingTags":"French_Defense French_Defense_Advance_Variation"},{"id":"003Jb","fen":"6k1/3bqr1p/2rpp1pR/p7/Pp1QP3/1B3P2/1PP3P1/2KR4 w - - 6 22","moves":["d4a7","e7g5","c1b1","g5h6"],"rating":993,"themes":"advantage fork master middlegame short","gameUrl":"https://lichess.org/8RvK0idj#43","openingTags":""},{"id":"003S3","fen":"r4k1r/pNqnppb1/6pn/2p3Np/7P/2P2Q2/PP3PP1/R1B1K2R b KQ - 2 15","moves":["a8b8","g5e6","f8g8","e6c7"],"rating":1437,"themes":"advantage middlegame pin short","gameUrl":"https://lichess.org/Eu6S0GPA/black#30","openingTags":"Modern_Defense Modern_Defense_Other_variations"},{"id":"003YF","fen":"r4rk1/1pp2ppp/p2p4/2bPp3/2P1Pn1q/P1N2B2/1P3P2/R1BQK1R1 w Q - 1 15","moves":["c1f4","h4f2"],"rating":1054,"themes":"attackingF2F7 mate mateIn1 middlegame oneMove","gameUrl":"https://lichess.org/5DK4vDDB#29","openingTags":"Mexican_Defense Mexican_Defense_Other_variations"},{"id":"003cs","fen":"2r1kbnr/pp4pp/4p3/3pP1N1/3q4/1P2B3/P3Q1PP/nN3RK1 b k - 1 16","moves":["d4e5","f1f8","e8f8","e3c5","c8c5","e2e5","c5c1","g1f2"],"rating":1986,"themes":"advantage attraction discoveredAttack exposedKing middlegame sacrifice veryLong","gameUrl":"https://lichess.org/PmRTKflq/black#32","openingTags":"Caro-Kann_Defense Caro-Kann_Defense_Advance_Variation"},{"id":"003eP","fen":"8/r1b1q2k/2p3p1/2Pp4/1P2p1n1/2B1P3/NQ6/2K4R b - - 1 36","moves":["h7g8","h1h8","g8f7","h8h7","f7e8","h7e7"],"rating":1156,"themes":"crushing exposedKing long middlegame skewer","gameUrl":"https://lichess.org/n9vCFmKh/black#72","openingTags":""},{"id":"003jH","fen":"rn3rk1/p5pp/3N4/4np1q/5Q2/1P3K2/PB1P2P1/2R4R w - - 0 25","moves":["f3f2","e5d3","f2e3","d3f4","h1h5","f4h5"],"rating":1067,"themes":"crushing fork long middlegame","gameUrl":"https://lichess.org/3CQGofXT#49","openingTags":""},{"id":"003jb","fen":"r3kb1r/p4ppp/b1p1p3/3q4/3Q4/4BN2/PPP2PPP/R3K2R b KQkq - 0 11","moves":["c6c5","d4a4","a6b5","a4b5"],"rating":983,"themes":"crushing fork master middlegame short","gameUrl":"https://lichess.org/960EzUS0/black#22","openingTags":"French_Defense French_Defense_Classical_Variation"},{"id":"003md","fen":"r1b1k2N/ppp3pp/2n5/2bp4/7q/1B4n1/PPPP1P1P/RNBQ1RK1 w q - 0 10","moves":["f1e1","g3e4","e1e4","d5e4","d1h5","h4h5","b3f7","h5f7"],"rating":2134,"themes":"crushing defensiveMove middlegame veryLong","gameUrl":"https://lichess.org/ALtR2fxT#19","openingTags":"Russian_Game Russian_Game_Italian_Variation"},{"id":"003mh","fen":"r4k1r/1pp2p2/p2p3p/3N4/3P2q1/8/PPP5/1K2Q1NR b - - 1 23","moves":["a8e8","e1e8","f8e8","d5f6","e8e7","f6g4"],"rating":1424,"themes":"advantage attraction fork long middlegame sacrifice","gameUrl":"https://lichess.org/HSa4keKZ/black#46","openingTags":""},{"id":"003nQ","fen":"6rk/pp6/2n5/3ppn1p/3p4/2P2P1q/PP3QNB/R4R1K w - - 2 29","moves":["f1g1","f5g3","f2g3","g8g3"],"rating":1287,"themes":"crushing kingsideAttack master middlegame pin short","gameUrl":"https://lichess.org/p85fiZcl#57","openingTags":""},{"id":"003r5","fen":"r2qr1k1/ppp2ppp/4b3/3P4/1nP2Q2/2N2N1P/PP3KP1/R4R2 w - - 1 15","moves":["d5e6","b4d3","f2g1","d3f4"],"rating":1107,"themes":"crushing fork middlegame short","gameUrl":"https://lichess.org/JPN97v7j#29","openingTags":"Kings_Gambit_Accepted Kings_Gambit_Accepted_Abbazia_Defense"},{"id":"003wQ","fen":"2r2rk1/6pp/3Q1q2/8/3N1B2/6P1/PP1K3P/R4b2 w - - 0 24","moves":["a1f1","f6d6","f4d6","f8f1"],"rating":1887,"themes":"advantage discoveredAttack middlegame pin short","gameUrl":"https://lichess.org/W3wvnzlo#47","openingTags":""},{"id":"0042j","fen":"3r2k1/4nppp/pq1p1b2/1p2P3/2r2P2/2P1NR2/PP1Q2BP/3R2K1 b - - 0 24","moves":["d6e5","d2d8","b6d8","d1d8"],"rating":438,"themes":"backRankMate mate mateIn2 middlegame short","gameUrl":"https://lichess.org/DuM2FZjg/black#48","openingTags":""},{"id":"004BW","fen":"r1bk2r1/ppq2pQp/3bpn2/1BpnN3/5P2/1P6/PBPP2PP/RN2K2R w KQ - 3 13","moves":["e5f7","d8e7","g7g8","f6g8"],"rating":1790,"themes":"advantage master middlegame short","gameUrl":"https://lichess.org/EXlG6TZs#25","openingTags":"Sicilian_Defense Sicilian_Defense_Modern_Variations"},{"id":"004Op","fen":"2kr2r1/1bp4n/1pq1p2p/p1P5/1P3B2/P6P/5RP1/RB2Q1K1 w - - 3 26","moves":["e1f1","d8d1","f1d1","g8g2","g1f1","g2g1","f1e2","g1d1"],"rating":2274,"themes":"crushing deflection kingsideAttack middlegame pin sacrifice skewer veryLong","gameUrl":"https://lichess.org/tneg9Bzk#51","openingTags":""},{"id":"004Ud","fen":"r1bqk2r/p3Bppp/3p4/1ppn4/4P3/4Q3/PPP2PPP/2KR1B1R b kq - 0 11","moves":["d5e7","f1b5","c8d7","d1d6","d7b5","d6d8"],"rating":1617,"themes":"advantage interference long middlegame","gameUrl":"https://lichess.org/pJ7nXTvE/black#22","openingTags":"Three_Knights_Opening Three_Knights_Opening_Other_variations"},{"id":"004WZ","fen":"r6k/1b3pp1/p1q1pn1p/2p5/P1B5/1PN4Q/2P1RP1P/R4Kr1 w - - 2 26","moves":["f1g1","c6h1"],"rating":891,"themes":"mate mateIn1 middlegame oneMove","gameUrl":"https://lichess.org/BQIdXPOM#51","openingTags":""},{"id":"004Ys","fen":"r4rk1/3q1pbp/p1n1p1p1/2p3NP/1p3B2/3P3Q/PPP3P1/R3R1K1 b - - 2 19","moves":["d7d4","f4e3","d4f6","e1f1","f6e5","h5g6","e5e3","h3e3"],"rating":2299,"themes":"advantage defensiveMove middlegame veryLong","gameUrl":"https://lichess.org/LcIJdugn/black#38","openingTags":"Sicilian_Defense Sicilian_Defense_McDonnell_Attack"},{"id":"004iZ","fen":"r2r2k1/2q1bpp1/3p1n1p/1ppN4/1P1BP3/P5Q1/4RPPP/R5K1 b - - 1 20","moves":["f6d5","g3g7"],"rating":469,"themes":"kingsideAttack mate mateIn1 middlegame oneMove","gameUrl":"https://lichess.org/dQ85JUe1/black#40","openingTags":""},{"id":"004kB","fen":"4rr1k/pQpn2pp/3p1q2/8/8/2P5/PP3PPP/RN3RK1 w - - 1 16","moves":["b7c7","f6f2","f1f2","e8e1","f2f1","e1f1"],"rating":1209,"themes":"kingsideAttack long mate mateIn3 middlegame sacrifice","gameUrl":"https://lichess.org/Cl9T6bjt#31","openingTags":"Ruy_Lopez Ruy_Lopez_Steinitz_Defense"},{"id":"004nd","fen":"3q2k1/2r5/pp3p1Q/2b1n3/P3N3/2P5/1P4PP/R6K b - - 0 24","moves":["c7d7","e4f6","d8f6","h6f6"],"rating":898,"themes":"crushing fork middlegame short","gameUrl":"https://lichess.org/IajkZZBp/black#48","openingTags":""},{"id":"0054a","fen":"r1b2rk1/ppq2ppp/8/4b2Q/4R3/3B4/PP3PPP/R1B3K1 b - - 1 15","moves":["g7g6","h5e5","c7e5","e4e5"],"rating":1484,"themes":"advantage middlegame short","gameUrl":"https://lichess.org/kZlE1pvD/black#30","openingTags":"Queens_Pawn_Game Queens_Pawn_Game_Colle_System"},{"id":"0055Y","fen":"r1b2rk1/p3pp2/2B4b/2Qpq3/3N2pp/4P3/2P2PPP/1R2K2R b K - 1 23","moves":["h6e3","f2e3","e5e3","e1d1"],"rating":2041,"themes":"advantage defensiveMove middlegame short","gameUrl":"https://lichess.org/7Jpwzowt/black#46","openingTags":""},{"id":"005YM","fen":"5k2/p4pp1/1qn3r1/3pP2p/5P2/1NPQ4/Pr3RPP/R5K1 w - - 5 24","moves":["b3d4","b2f2","g1f2","c6d4","d3d4","b6b2"],"rating":2413,"themes":"advantage long middlegame","gameUrl":"https://lichess.org/fDmK2ipV#47","openingTags":""},{"id":"005YX","fen":"2rr4/2N2pk1/p1Q1b1pp/1p4q1/3pP3/1B1P4/PPP3PP/6RK w - - 7 25","moves":["c7e6","f7e6","c6b7","g7h8"],"rating":1823,"themes":"defensiveMove equality middlegame short","gameUrl":"https://lichess.org/zbi5w5Qy#49","openingTags":""},{"id":"005nD","fen":"3rk2r/2qn1pp1/p1Q1R3/3n3p/8/8/PP4PP/5R1K b k - 0 23","moves":["f7e6","c6e6","d5e7","e6f7"],"rating":1028,"themes":"fork mate mateIn2 middlegame short","gameUrl":"https://lichess.org/hlgaj6lV/black#46","openingTags":""},{"id":"005wy","fen":"1r6/pp2kpp1/2n1p1n1/3p2PQ/5P2/2PqP3/PP1N4/2KR3R w - - 3 27","moves":["h5h7","c6b4","c3b4","b8c8","d2c4","c8c4"],"rating":1901,"themes":"long mate mateIn3 middlegame queensideAttack sacrifice","gameUrl":"https://lichess.org/mBQMheB4#53","openingTags":""},{"id":"005x9","fen":"r1b1kb1Q/ppp4p/6pB/3P4/2pn4/8/PPP1qPPP/RN1K3R w q - 2 13","moves":["d1c1","e2c2"],"rating":886,"themes":"mate mateIn1 middlegame oneMove queensideAttack","gameUrl":"https://lichess.org/TiwHxq8n#25","openingTags":"Italian_Game Italian_Game_Rousseau_Gambit"},{"id":"005yO","fen":"r1r3k1/ppq3bQ/4p2p/4n3/3p4/2P5/PBB2PPP/4R1K1 b - - 2 24","moves":["g8f8","b2a3","f8f7","c2d1","c8h8","d1h5","f7f6","h7e4"],"rating":3086,"themes":"advantage exposedKing middlegame quietMove veryLong","gameUrl":"https://lichess.org/j65YI8hC/black#48","openingTags":""},{"id":"00656","fen":"7r/ppp2kp1/2nb1pp1/3p3r/3P2q1/2PQB2P/PP3PP1/R3R1K1 w - - 0 18","moves":["h3g4","h5h1"],"rating":641,"themes":"mate mateIn1 middlegame oneMove","gameUrl":"https://lichess.org/V9os02rv#35","openingTags":"Scandinavian_Defense Scandinavian_Defense_Modern_Variation"},{"id":"0068B","fen":"r1q3k1/4bppp/pp2pn2/4B3/8/2N2Q2/PPPR1PPP/6K1 b - - 0 18","moves":["f6d7","d2d7","c8d7","f3a8"],"rating":1423,"themes":"crushing deflection middlegame short","gameUrl":"https://lichess.org/LNdzAgWP/black#36","openingTags":"Sicilian_Defense Sicilian_Defense_Katalimov_Variation"},{"id":"006NL","fen":"1r6/k2qn1b1/p1b1p1p1/2PpPpN1/2nN1P1P/p4B2/1PP2Q2/1K1R3R w - - 0 32","moves":["d4c6","e7c6","b2b3","a3a2","b1a1","c4e5","f4e5","g7e5","a1a2","b8b5"],"rating":2545,"themes":"advancedPawn advantage middlegame pin veryLong","gameUrl":"https://lichess.org/yA3M5Q6W#63","openingTags":""},{"id":"006RM","fen":"1k1r3r/2q5/pp1n2p1/8/1Q6/3R2P1/PPP2P1P/3R2K1 b - - 4 29","moves":["c7c5","b4c5","b6c5","d3d6","d8d6","d1d6"],"rating":1448,"themes":"crushing long middlegame","gameUrl":"https://lichess.org/ceS0QvtT/black#58","openingTags":""},{"id":"006XF","fen":"r5kr/pp1qb1p1/2p4p/3pPb1Q/3P4/2P1B3/PP4PP/R4RK1 b - - 1 17","moves":["f5e4","h5f7","g8h7","f1f6","e7f6","f7d7"],"rating":2370,"themes":"advantage long middlegame pin","gameUrl":"https://lichess.org/Ynra1LLE/black#34","openingTags":"Russian_Game Russian_Game_Italian_Variation"},{"id":"006cZ","fen":"3r1rk1/1p4p1/p1p3Qp/2q5/8/3n1N1P/PP1R2P1/5R1K b - - 7 28","moves":["g8h8","d2d3","d8d3","g6d3"],"rating":1376,"themes":"advantage master masterVsMaster middlegame short","gameUrl":"https://lichess.org/qrbDEp56/black#56","openingTags":""},{"id":"006fF","fen":"r1b4r/pp1k2pp/2nb2q1/1B1p2B1/3p3Q/8/PPP2PPP/3RR1K1 b - - 5 17","moves":["h7h6","h4g4","d7c7","g5d8","h8d8","g4g6"],"rating":1995,"themes":"advantage discoveredAttack exposedKing long middlegame","gameUrl":"https://lichess.org/mAf9SSin/black#34","openingTags":"Italian_Game Italian_Game_Two_Knights_Defense"},{"id":"006i7","fen":"r4rk1/3nqpp1/2p1bn1p/3pN3/1p1P4/2NQP2P/1PB2PP1/R4RK1 w - - 0 18","moves":["e5c6","e7d6","a1a8","f8a8","c6b4","d6b4"],"rating":1769,"themes":"advantage long middlegame","gameUrl":"https://lichess.org/77CYKPKY#35","openingTags":"Queens_Gambit_Declined Queens_Gambit_Declined_Other_variations"},{"id":"006ia","fen":"1r4k1/4bpp1/1rp2n1p/3p4/3P4/2N1B1P1/Pq2QPKP/2R1R3 w - - 3 24","moves":["e3h6","b2e2","e1e2","e7a3","h6e3","a3c1"],"rating":2073,"themes":"advantage long middlegame","gameUrl":"https://lichess.org/fcKXrUhC#47","openingTags":""},{"id":"006of","fen":"r2qr2k/1pp2pp1/1b4np/pP2P3/P4n2/BQN2N1P/5PP1/R3R1K1 w - - 3 20","moves":["b3f7","d8d3","c3e2","f4e2","e1e2","d3e2"],"rating":2575,"themes":"advantage kingsideAttack long middlegame","gameUrl":"https://lichess.org/MIdWd89x#39","openingTags":""},{"id":"006pe","fen":"r4r2/2q1NN2/4bQpk/2n4p/pp5P/8/1PP2PP1/2KR3R b - - 0 28","moves":["e6f7","e7f5","h6h7","f6g7"],"rating":1661,"themes":"master mate mateIn2 middlegame pin short","gameUrl":"https://lichess.org/gkSEAS27/black#56","openingTags":""},{"id":"0072T","fen":"3q1nk1/1bN2rpp/pp1P4/1N6/4n2b/8/PPP2PPP/R1BQ1RK1 w - - 1 16","moves":["b5d4","h4f2","f1f2","e4f2"],"rating":2312,"themes":"advantage kingsideAttack master middlegame short","gameUrl":"https://lichess.org/aqhibPRF#31","openingTags":"Philidor_Defense Philidor_Defense_Lion_Variation"},{"id":"00734","fen":"rn3bk1/2rqp2p/2p3p1/3p1p2/3P1P1B/pP1BP3/P1Q2PRP/1KR5 b - - 0 26","moves":["b8a6","d3f5","e7e6","f5g6"],"rating":1661,"themes":"crushing middlegame pin short","gameUrl":"https://lichess.org/jM0Jnw0u/black#52","openingTags":""},{"id":"0078T","fen":"rk5r/1b3R2/pp2p2q/4P2p/B2p3B/4R2P/PP4P1/5Q1K b - - 0 27","moves":["d4e3","f7b7","b8b7","f1f7","b7b8","h4e7"],"rating":2248,"themes":"attraction crushing defensiveMove exposedKing long middlegame queensideAttack sacrifice","gameUrl":"https://lichess.org/mXf4gFYU/black#54","openingTags":""},{"id":"007AH","fen":"3r1n2/1bp1bkpp/p1q2n2/1p6/3P4/P1N3B1/1PP2PPP/R2QR1K1 w - - 5 18","moves":["d1e2","c6g2"],"rating":721,"themes":"kingsideAttack master mate mateIn1 middlegame oneMove","gameUrl":"https://lichess.org/MCM1Gmz4#35","openingTags":"Scandinavian_Defense Scandinavian_Defense_Valencian_Variation"},{"id":"007AS","fen":"r3kb1r/3nnpp1/4p1bp/1NppP3/3P4/6N1/P2BBPPP/R3K2R b KQkq - 0 17","moves":["a8b8","b5d6","e8d8","d2a5"],"rating":1585,"themes":"crushing master middlegame short","gameUrl":"https://lichess.org/Nfuw1Dug/black#34","openingTags":"Caro-Kann_Defense Caro-Kann_Defense_Advance_Variation"},{"id":"007HB","fen":"rn2q1k1/pp3ppp/2pb4/3p1B2/2Pn4/1Q3N2/PP3PPP/R1B4K w - - 0 15","moves":["f3d4","e8e1"],"rating":537,"themes":"mate mateIn1 middlegame oneMove","gameUrl":"https://lichess.org/prYQo0BK#29","openingTags":"Petrovs_Defense Petrovs_Defense_Classical_Attack"},{"id":"007XE","fen":"2kr3r/p1p1bpp1/2p2n1p/8/8/1P6/P1P1RPPP/RNB3K1 w - - 1 16","moves":["e2e7","d8d1","e7e1","d1e1"],"rating":645,"themes":"backRankMate fork mate mateIn2 middlegame short","gameUrl":"https://lichess.org/f4f7UwiT#31","openingTags":"Kings_Pawn_Game Kings_Pawn_Game_Leonardis_Variation"},{"id":"007c6","fen":"2kr3r/pp1n2pp/2QB1bp1/5q2/2B5/8/PPP2PPP/3R1RK1 b - - 0 17","moves":["b7c6","c4a6"],"rating":721,"themes":"bodenMate mate mateIn1 middlegame oneMove","gameUrl":"https://lichess.org/vqwzqZHC/black#34","openingTags":"Elephant_Gambit Elephant_Gambit_Other_variations"},{"id":"007en","fen":"rn3rk1/4pp1p/3p2pB/2q4P/3bP1b1/Pp2Q3/1P2B3/1K1R2NR w - - 0 20","moves":["e3d4","c5c2","b1a1","a8a3","b2a3","c2a2"],"rating":1764,"themes":"long mate mateIn3 middlegame queensideAttack sacrifice","gameUrl":"https://lichess.org/jzE2yKAk#39","openingTags":""},{"id":"007ku","fen":"r1bq3Q/1np2kp1/p5B1/1p1Pp3/1Pn2BP1/2b2P2/P3K3/R4N2 b - - 5 35","moves":["f7g6","h8h5","g6f6","f4g5"],"rating":1627,"themes":"mate mateIn2 middlegame short","gameUrl":"https://lichess.org/QveLbBjG/black#70","openingTags":""},{"id":"007tv","fen":"r3k1nr/1pp2ppp/1pnp2q1/4p1B1/2B1P3/3P1Q1P/PPP2PP1/R4RK1 b kq - 0 11","moves":["g6g5","f3f7","e8d8","f7f8","d8d7","f8a8"],"rating":1124,"themes":"advantage attackingF2F7 long middlegame skewer","gameUrl":"https://lichess.org/ky7qZNjk/black#22","openingTags":"Italian_Game Italian_Game_Giuoco_Pianissimo"},{"id":"0082f","fen":"r4rk1/2q2ppp/3pp3/4Pb1N/pp6/1B4Q1/PPP3PP/1K1RR3 b - - 0 21","moves":["a4b3","g3g7"],"rating":951,"themes":"kingsideAttack mate mateIn1 middlegame oneMove","gameUrl":"https://lichess.org/fHfmODEz/black#42","openingTags":""},{"id":"008LT","fen":"r4rk1/6p1/b3p1nN/p1pp4/1p3P1q/3P1Q1B/PPP2PK1/R6R b - - 0 26","moves":["g8h8","h6f7","f8f7","h3e6"],"rating":2110,"themes":"crushing kingsideAttack middlegame pin sacrifice short","gameUrl":"https://lichess.org/vnxisKeU/black#52","openingTags":""},{"id":"008Nz","fen":"6k1/2p2ppp/pnp5/B7/2P3PP/1P1bPPR1/r6r/3R2K1 b - - 1 29","moves":["d3e2","d1d8"],"rating":455,"themes":"backRankMate mate mateIn1 middlegame oneMove","gameUrl":"https://lichess.org/HNU4zavC/black#58","openingTags":""},{"id":"008Y3","fen":"r5k1/1p1rqpp1/p3pnp1/2PN4/8/1Q5P/PP3PP1/3RR1K1 b - - 0 24","moves":["e7c5","d5f6","g7f6","d1d7"],"rating":1075,"themes":"advantage discoveredAttack kingsideAttack master middlegame short","gameUrl":"https://lichess.org/jAILX5BH/black#48","openingTags":""},{"id":"008cl","fen":"r3k2r/ppp2p1p/2n1pp2/7q/2PN2b1/2BP1Pb1/PP2B1P1/R2Q1RK1 w kq - 1 16","moves":["f3g4","h5h2"],"rating":826,"themes":"mate mateIn1 middlegame oneMove","gameUrl":"https://lichess.org/K27KSt2D#31","openingTags":"Scandinavian_Defense Scandinavian_Defense_Mieses-Kotroc_Variation"},{"id":"008lc","fen":"7k/pb1qn2n/1p2R2Q/2p2p2/2Pp4/3B4/PP3PrP/4RK2 b - - 1 27","moves":["g2g7","h6g7","h8g7","e6e7","d7e7","e1e7"],"rating":2005,"themes":"attraction crushing exposedKing fork long middlegame","gameUrl":"https://lichess.org/UdZXrVA5/black#54","openingTags":""},{"id":"008nF","fen":"2rq1rk1/7p/1n4pb/1R2p3/pPpP1P2/P1B5/3NQ1PP/2R3K1 w - - 0 31","moves":["e2e5","f8e8","e5e8","d8e8"],"rating":2133,"themes":"crushing master middlegame short trappedPiece","gameUrl":"https://lichess.org/tYO5rrIU#61","openingTags":""},{"id":"0091A","fen":"1r3rk1/q4ppp/p3Pb2/3nN3/P2P4/7Q/1B4PP/1R3RK1 b - - 0 24","moves":["b8b2","e6f7","f8f7","h3c8","f7f8","c8e6"],"rating":2205,"themes":"advancedPawn advantage kingsideAttack long middlegame","gameUrl":"https://lichess.org/XYVC46Km/black#48","openingTags":""},{"id":"009IO","fen":"3rk3/5p1r/p2Np1p1/3bP3/P2n4/8/1P3RPP/5RK1 b - - 4 25","moves":["e8e7","f2f7","h7f7","f1f7"],"rating":1163,"themes":"hookMate mate mateIn2 middlegame short","gameUrl":"https://lichess.org/LJBrm9Or/black#50","openingTags":""},{"id":"009J1","fen":"rn2k2r/pp2bp1p/2p1pNp1/6B1/5P2/7P/PPP4P/2K1RR2 b - - 3 17","moves":["e8f8","g5h6"],"rating":1214,"themes":"mate mateIn1 middlegame oneMove","gameUrl":"https://lichess.org/lPhlt9XF/black#34","openingTags":"Pirc_Defense Pirc_Defense_Byrne_Variation"},{"id":"009L0","fen":"6k1/pb2r1pN/1n4Bp/3p4/1P2pR2/P7/3R1PPP/2r3K1 w - - 2 30","moves":["d2d1","c1d1"],"rating":706,"themes":"backRankMate hangingPiece mate mateIn1 middlegame oneMove","gameUrl":"https://lichess.org/SAhQtou2#59","openingTags":""},{"id":"009Os","fen":"r2b2k1/1p3q1p/p2p4/3P2p1/2P1PRQr/8/P2B3P/2R4K w - - 1 29","moves":["g4g3","h4f4","d2f4","f7f4","g3f4","g5f4"],"rating":1392,"themes":"crushing long middlegame","gameUrl":"https://lichess.org/AdjEnXlm#57","openingTags":""},{"id":"009Wc","fen":"1r3rk1/1pq2pbp/p1p1pnp1/2N1N3/3P4/1QP5/PP3PPP/3RR1K1 w - - 2 19","moves":["e5d7","f6d7","c5d7","c7d7"],"rating":1084,"themes":"crushing middlegame short","gameUrl":"https://lichess.org/WnthPrdl#37","openingTags":"Caro-Kann_Defense Caro-Kann_Defense_Classical_Variation"},{"id":"009YT","fen":"rqnr2k1/5ppp/p2p4/4Q3/8/1P5P/PBP2PP1/R2R2K1 b - - 2 23","moves":["d6e5","d1d8"],"rating":687,"themes":"backRankMate hangingPiece mate mateIn1 middlegame oneMove","gameUrl":"https://lichess.org/EwnhF9QF/black#46","openingTags":""},{"id":"009aD","fen":"r4k1r/pp3pp1/4p3/3pP1np/6bq/1PP2P2/P3B1PP/RN1Q1RK1 w - - 1 14","moves":["f3g4","h5g4","e2g4","h4h2"],"rating":1427,"themes":"advantage kingsideAttack middlegame short","gameUrl":"https://lichess.org/aITVdulW#27","openingTags":"Queens_Pawn_Game Queens_Pawn_Game_Krause_Variation"},{"id":"009bn","fen":"2kr2r1/ppb2ppp/3qbn2/2Np2B1/P7/2P2Q1P/1PB2PP1/R4RK1 w - - 5 18","moves":["c5e6","d6h2"],"rating":678,"themes":"mate mateIn1 middlegame oneMove","gameUrl":"https://lichess.org/Zw4AxPzS#35","openingTags":"Caro-Kann_Defense Caro-Kann_Defense_Exchange_Variation"},{"id":"009eX","fen":"2r3k1/7p/6q1/p1Np4/Qp2pr2/P4P2/1PR2P1K/5R2 w - - 0 36","moves":["f1g1","f4h4"],"rating":1032,"themes":"mate mateIn1 middlegame oneMove","gameUrl":"https://lichess.org/BlIww047#71","openingTags":""},{"id":"009lk","fen":"1R6/6pk/2p4p/3bP2r/5B1P/2P2qP1/P4P1Q/4R1K1 w - - 2 40","moves":["e1e3","f3d1","e3e1","d1e1"],"rating":934,"themes":"mate mateIn2 middlegame short","gameUrl":"https://lichess.org/gLNPef4f#79","openingTags":""},{"id":"009uB","fen":"3br2r/5k1p/4p1pQ/P5P1/1B5P/P6q/5R2/6K1 b - - 1 35","moves":["f7g8","f2f8","e8f8","h6f8"],"rating":1074,"themes":"mate mateIn2 middlegame short","gameUrl":"https://lichess.org/1llcQdqK/black#70","openingTags":""},{"id":"009zS","fen":"r3r1k1/1p3p1p/p1p3p1/8/6bP/Q3b3/PP2B1P1/R3K2R w KQ - 2 20","moves":["g2g3","g4e2","e1e2","e3c5","e2f3","c5a3"],"rating":1522,"themes":"advantage discoveredAttack exposedKing long middlegame","gameUrl":"https://lichess.org/YSoU6ySt#39","openingTags":""},{"id":"00A1H","fen":"2r3k1/4brp1/2p3b1/2Pp1q1p/3B3P/2P2N2/PP3P1K/R2Q2R1 w - - 1 31","moves":["f3g5","f5f4","h2g2","e7g5"],"rating":2041,"themes":"crushing middlegame short","gameUrl":"https://lichess.org/GeoPB5fa#61","openingTags":""},{"id":"00A9Q","fen":"2rq1rk1/1p3p1p/p1pn2p1/P2p4/1P1PnP2/3NP3/5PBP/R1Q3RK w - - 2 22","moves":["d3c5","e4f2"],"rating":1096,"themes":"kingsideAttack master mate mateIn1 middlegame oneMove smotheredMate","gameUrl":"https://lichess.org/Eek8XUCN#43","openingTags":""},{"id":"00AGs","fen":"rn2k2Q/5p2/2p1p1r1/1q4p1/8/8/4NPPP/3R1K1R b q - 5 23","moves":["e8e7","h8d8"],"rating":895,"themes":"mate mateIn1 middlegame oneMove","gameUrl":"https://lichess.org/gBoWCcF2/black#46","openingTags":""},{"id":"00APl","fen":"3b1k2/1p4r1/p3qp1Q/8/8/3B1bP1/PP3P1P/2R3K1 b - - 0 29","moves":["d8b6","d3c4","f3d5","c4d5","e6d5","h6f6"],"rating":2367,"themes":"advantage long middlegame","gameUrl":"https://lichess.org/daJYZiK5/black#58","openingTags":""},{"id":"00AXb","fen":"5kr1/pp3p1p/1q2pBb1/1B1p4/P7/5P2/1P4rP/2Q1K2R b K - 0 21","moves":["g2g1","h1g1","b6g1","b5f1","g6c2","c1f4"],"rating":2115,"themes":"advantage defensiveMove long middlegame","gameUrl":"https://lichess.org/4i5kxYT5/black#42","openingTags":""},{"id":"00Aas","fen":"3r1rk1/1p2q1pp/5p2/8/1P1n4/6Q1/PPbB1PPP/R2B1RK1 w - - 9 20","moves":["d1c2","d4e2","g1h1","e2g3","f2g3","d8d2"],"rating":1119,"themes":"crushing fork long middlegame","gameUrl":"https://lichess.org/wYjuq3zz#39","openingTags":""},{"id":"00AfZ","fen":"2r3kR/Q7/5q2/1brpN3/5Pp1/4P1P1/6K1/1B6 b - - 2 43","moves":["f6h8","a7f7"],"rating":1033,"themes":"master mate mateIn1 middlegame oneMove","gameUrl":"https://lichess.org/xSsuq2RP/black#86","openingTags":""},{"id":"00AhO","fen":"r1b2rk1/2q2p1p/1p2pbp1/pP6/2P1Q3/P2B1N2/5PPP/3R1RK1 w - - 0 20","moves":["e4a8","c8b7","a8a7","f8a8","a7a8","b7a8"],"rating":1243,"themes":"advantage clearance long master middlegame trappedPiece","gameUrl":"https://lichess.org/9PjjgfVE#39","openingTags":""},{"id":"00Ahb","fen":"1k4nr/pp1r1ppp/4p3/1Nb2q2/2Pp4/6P1/PP3P1P/R1BQR1K1 b - - 2 14","moves":["g8h6","c1f4","f5f4","g3f4"],"rating":1135,"themes":"crushing middlegame short","gameUrl":"https://lichess.org/Cyj8Qkox/black#28","openingTags":"Sicilian_Defense Sicilian_Defense_Franco-Sicilian_Variation"},{"id":"00Al5","fen":"2r3k1/p2q1pbp/1p2pnp1/nB1p4/3P4/1Pr1P2P/P1QB1PP1/2R2RK1 w - - 0 19","moves":["b5d7","c3c2","d7c8","c2d2"],"rating":1589,"themes":"advantage middlegame short","gameUrl":"https://lichess.org/EtyflSie#37","openingTags":"Slav_Defense Slav_Defense_Schlechter_Variation"},{"id":"00Aok","fen":"5rk1/Q2B1p1p/4p1p1/3p4/3N2b1/2q5/Pr3RPP/5RK1 w - - 0 23","moves":["f2f7","c3e3","g1h1","f8f7","a7a8","g8g7","f1f7","g7f7","a8e8","f7f6"],"rating":2236,"themes":"crushing intermezzo middlegame veryLong","gameUrl":"https://lichess.org/kVjMAqKr#45","openingTags":""},{"id":"00Aq4","fen":"2k1r3/pppn1pp1/3b2b1/3p2Pp/2B2P2/3P3P/PPPR4/2K3NR w - - 0 18","moves":["c4d5","e8e1","d2d1","d6f4","c1b1","e1d1"],"rating":1475,"themes":"backRankMate deflection long mate mateIn3 middlegame","gameUrl":"https://lichess.org/VIBqOZyc#35","openingTags":"Scandinavian_Defense Scandinavian_Defense_Main_Line"},{"id":"00Ar2","fen":"r2q1r2/1n4pk/p6p/1pp2pb1/3n1B2/P1NPN2P/1PPQ1PP1/R3R1K1 w - - 0 21","moves":["c3d5","g5f4","d5f4","d8g5","d2d1","g5f4"],"rating":1763,"themes":"advantage clearance long middlegame","gameUrl":"https://lichess.org/fRlxRFsV#41","openingTags":""},{"id":"00B2k","fen":"r4rk1/pbp3pp/1p1pp3/6B1/2PPp2q/3nP2P/PP3P2/R2QKBR1 w Q - 8 16","moves":["f1d3","h4f2"],"rating":830,"themes":"attackingF2F7 mate mateIn1 middlegame oneMove","gameUrl":"https://lichess.org/SIYAVKzo#31","openingTags":"Dutch_Defense Dutch_Defense_Queens_Knight_Variation"},{"id":"00B7G","fen":"1rb2r1k/4q2p/p2p4/3B1p2/1pPb4/1P2NQ2/P5PP/2R2RK1 w - - 1 24","moves":["g1h1","e7e3","f3e3","d4e3"],"rating":1643,"themes":"crushing master masterVsMaster middlegame short","gameUrl":"https://lichess.org/jBgjHSYd#47","openingTags":""},{"id":"00BJm","fen":"r2q1rk1/1Q2bppp/p1N1p3/1p6/2pP1n2/2P5/PP3PPP/R4RK1 b - - 1 18","moves":["d8d5","c6e7","g8h8","e7d5"],"rating":1044,"themes":"advantage fork hangingPiece middlegame short","gameUrl":"https://lichess.org/Umzi5RNZ/black#36","openingTags":"Queens_Pawn_Game Queens_Pawn_Game_Colle_System"},{"id":"00BKa","fen":"5rk1/p1Rb1ppp/2n1pn2/8/8/2P3P1/q4PBP/1rNQK2R b K - 2 16","moves":["f8c8","c7c8","d7c8","c1a2","b1d1","e1d1"],"rating":2518,"themes":"advantage long middlegame","gameUrl":"https://lichess.org/0bBHtpd4/black#32","openingTags":"French_Defense French_Defense_Winawer_Variation"},{"id":"00BM8","fen":"r4rk1/pp2bppp/2ppnn2/8/N1P1P3/q1P4P/P2N2PB/R2Q1R1K b - - 0 16","moves":["a8d8","d2b1","a3a4","d1a4"],"rating":1588,"themes":"advantage master middlegame short trappedPiece","gameUrl":"https://lichess.org/IBbaWSo7/black#32","openingTags":"Caro-Kann_Defense Caro-Kann_Defense_Other_variations"},{"id":"00BNd","fen":"1rr3k1/3bppbp/3p1np1/1B1N4/P2BP3/5P2/P2R2PP/R5K1 b - - 0 21","moves":["d7b5","d5e7","g8f8","e7c8"],"rating":982,"themes":"advantage fork middlegame short","gameUrl":"https://lichess.org/52dQ8pN2/black#42","openingTags":""},{"id":"00BPh","fen":"r4rk1/1b1p1p1p/p2NpQpq/1p6/3R4/P7/1P3PPP/3R2K1 b - - 9 23","moves":["b7d5","d4d5","h6g7","f6g7"],"rating":1839,"themes":"advantage kingsideAttack middlegame short","gameUrl":"https://lichess.org/XrC5P8iP/black#46","openingTags":""},{"id":"00BZ6","fen":"1r1r1bk1/3n1p1p/1qp3p1/2N1p3/PpQ1P3/4BP2/4N1PP/1R3RK1 w - - 0 24","moves":["f1c1","f8c5","e3c5","d7c5"],"rating":2089,"themes":"advantage master middlegame short","gameUrl":"https://lichess.org/whBlSZL2#47","openingTags":""},{"id":"00Bex","fen":"1rb1qrk1/6bp/2np4/2pNpp2/2P5/3P1B2/1B3PPP/1R1QR1K1 b - - 0 22","moves":["c8e6","d5c7","e8f7","c7e6"],"rating":1695,"themes":"crushing middlegame short","gameUrl":"https://lichess.org/qNuFxL0D/black#44","openingTags":""},{"id":"00Bp0","fen":"1r2kr2/pp3p1p/2b1pn2/4N3/2P5/1N1B4/P3KP1P/6R1 b - - 4 21","moves":["f6e4","e5c6","b7c6","d3e4"],"rating":1265,"themes":"advantage capturingDefender middlegame short","gameUrl":"https://lichess.org/GN8F9TsL/black#42","openingTags":""},{"id":"00BrZ","fen":"r6r/pp2kb2/3p1p1Q/1N1Pp3/3bP3/P2B2P1/1P4PP/7K w - - 6 28","moves":["h6d2","h8h2","h1h2","a8h8","d2h6","h8h6"],"rating":1382,"themes":"attraction kingsideAttack long mate mateIn3 middlegame sacrifice","gameUrl":"https://lichess.org/ANKrgoJi#55","openingTags":""},{"id":"00C8Y","fen":"rnb2rk1/pp3p1p/3p2Pb/4p1q1/3pQ3/8/PPP1PPP1/RN2KBNR w KQ - 1 12","moves":["g1f3","g5c1"],"rating":1034,"themes":"mate mateIn1 middlegame oneMove","gameUrl":"https://lichess.org/hTQm3Cc6#23","openingTags":"Indian_Defense Indian_Defense_Other_variations"},{"id":"00CFp","fen":"rn1q3k/pp4pp/1b2B3/4N3/5r2/2p5/PP4PP/RN3Q1K w - - 0 16","moves":["f1f4","d8d1","f4f1","d1f1"],"rating":409,"themes":"kingsideAttack mate mateIn2 middlegame short","gameUrl":"https://lichess.org/6VajuPk6#31","openingTags":"Kings_Gambit_Accepted Kings_Gambit_Accepted_Kings_Knights_Gambit"},{"id":"00CXr","fen":"r2k2nr/pp2qBb1/3p3p/Q5p1/3n1B2/2N2R2/PPP3P1/R5K1 b - - 1 18","moves":["b7b6","a5d5","d4f3","g2f3","a8c8","f4d6"],"rating":1957,"themes":"advantage long middlegame sacrifice","gameUrl":"https://lichess.org/sr8OoFsx/black#36","openingTags":"Kings_Gambit_Accepted Kings_Gambit_Accepted_Fischer_Defense"},{"id":"00CYP","fen":"3rk2r/p1p2pp1/1p6/2pQ1b2/2Pn1P2/8/PP1P1KBq/R1B1R3 b - - 3 25","moves":["e8f8","d5d8"],"rating":1273,"themes":"hangingPiece mate mateIn1 middlegame oneMove","gameUrl":"https://lichess.org/LywFPEls/black#50","openingTags":""},{"id":"00CbV","fen":"2r3k1/5p2/p3p1nQ/3pPP2/2qN4/2b3BP/7K/4R3 b - - 0 33","moves":["c3e1","f5f6","e1g3","h2g3","c4d3","d4f3","d3f3","g3f3","g6h4","h6h4"],"rating":2377,"themes":"crushing middlegame veryLong","gameUrl":"https://lichess.org/B294fXRo/black#66","openingTags":""},{"id":"00CiZ","fen":"5r1k/6b1/3p3p/1P1q2pQ/r5P1/3p1N1P/3R2P1/4R2K w - - 2 34","moves":["e1d1","f8f3","g2f3","d5f3"],"rating":1362,"themes":"crushing middlegame short","gameUrl":"https://lichess.org/PJQUqCX1#67","openingTags":""},{"id":"00Cqg","fen":"2rr2k1/pp4bp/4qpp1/3Pp3/8/4Q2P/4B1P1/2RR3K b - - 0 26","moves":["c8c1","d5e6","d8d1","e2d1","c1d1","h1h2"],"rating":1421,"themes":"advantage defensiveMove hangingPiece long middlegame","gameUrl":"https://lichess.org/mXY3kzod/black#52","openingTags":""},{"id":"00Cs4","fen":"2r1q1k1/8/b2b1r1p/Pp1pNpp1/3Pn3/1RPQ3P/P1B1NPP1/4R1K1 w - - 3 28","moves":["a2a4","b5a4","d3a6","a4b3"],"rating":1401,"themes":"advantage middlegame short","gameUrl":"https://lichess.org/fswqBBFw#55","openingTags":""},{"id":"00Cwz","fen":"1r5r/5pk1/4p3/2Np2PP/p1nP4/n1P5/P3B3/K1R4R w - - 2 34","moves":["c5a4","b8b1","c1b1","a3c2"],"rating":1495,"themes":"mate mateIn2 middlegame sacrifice short","gameUrl":"https://lichess.org/o6LOeNAf#67","openingTags":""},{"id":"00D77","fen":"5rk1/bpp3pp/p1npb3/4p3/1P2Nr1q/P1PP3P/1B1QBPR1/2K3R1 b - - 2 21","moves":["h4h3","g2g7","g8h8","e4g5"],"rating":1934,"themes":"crushing kingsideAttack middlegame short","gameUrl":"https://lichess.org/PgppfwbE/black#42","openingTags":""},{"id":"00DAs","fen":"r5nr/ppp3p1/3bBk1p/4nP2/3p4/8/PPPN1P1P/R1B1K2R b KQ - 1 15","moves":["g8e7","d2e4"],"rating":743,"themes":"mate mateIn1 middlegame oneMove","gameUrl":"https://lichess.org/FKD6drCM/black#30","openingTags":"Scotch_Game Scotch_Game_Other_variations"},{"id":"00DBg","fen":"rn2kbnr/pp6/2p2p2/4P3/4P1pq/2N3N1/PPPB2B1/R2Q1RK1 w kq - 1 17","moves":["g1f2","f8c5","d2e3","c5e3","f2e3","h4g3"],"rating":1083,"themes":"advantage attraction exposedKing long middlegame","gameUrl":"https://lichess.org/hXAo4Q2j#33","openingTags":"Pirc_Defense Pirc_Defense_Other_variations"},{"id":"00DPQ","fen":"2k4r/pp3pp1/4pn2/2np2p1/8/1B1P1Pq1/PPPN1R2/R2Q3K w - - 6 20","moves":["f2h2","g3h2"],"rating":765,"themes":"kingsideAttack mate mateIn1 middlegame oneMove","gameUrl":"https://lichess.org/AKiNfVd0#39","openingTags":""},{"id":"00DU5","fen":"r1bq1rk1/5ppp/p2p1b2/1p1Pn3/1P2Q3/P1NB3P/1B3PP1/R4RK1 b - - 2 17","moves":["c8b7","e4h7"],"rating":487,"themes":"kingsideAttack mate mateIn1 middlegame oneMove","gameUrl":"https://lichess.org/sDwtQGBU/black#34","openingTags":"Sicilian_Defense Sicilian_Defense_Delayed_Alapin_Variation"},{"id":"00DWo","fen":"b4b1r/3k1ppp/p2p4/1p2p3/3nq3/N1P1B3/PP3PPP/R2Q1RK1 w - - 1 16","moves":["c3d4","e4g2"],"rating":1063,"themes":"kingsideAttack mate mateIn1 middlegame oneMove","gameUrl":"https://lichess.org/bSwKB2bL#31","openingTags":"Sicilian_Defense Sicilian_Defense_Kalashnikov_Variation"},{"id":"00DdW","fen":"5rk1/4bppp/4b3/1p1pPpPP/2pP4/2P5/rqNQKP2/2RRN3 b - - 5 23","moves":["e7a3","c1b1","b2b3","b1b3"],"rating":1693,"themes":"advantage middlegame short trappedPiece","gameUrl":"https://lichess.org/bT7kcwFH/black#46","openingTags":""},{"id":"00DkJ","fen":"3r1bnr/2p2ppp/2b5/R1k5/5P2/2N5/4N1PP/1R4K1 b - - 3 21","moves":["c5d6","b1d1","d6e7","a5e5","e7f6","d1d8"],"rating":1613,"themes":"crushing deflection exposedKing long middlegame","gameUrl":"https://lichess.org/JJiGlqDg/black#42","openingTags":""},{"id":"00E29","fen":"r1bq1rk1/4bppp/p1n5/3P4/Pp6/3B1N2/1B3PPP/R2Q1RK1 b - - 0 17","moves":["d8d5","d3h7","g8h7","d1d5"],"rating":956,"themes":"crushing discoveredAttack kingsideAttack middlegame short","gameUrl":"https://lichess.org/tWRCApub/black#34","openingTags":"Sicilian_Defense Sicilian_Defense_Old_Sicilian"},{"id":"00EDN","fen":"rnbq1rk1/p4ppp/1p2p3/2p5/2QPn3/2P1PN2/P3BPPP/R1B2RK1 w - - 0 11","moves":["c1a3","c8a6","c4a6","b8a6"],"rating":1612,"themes":"advantage middlegame short","gameUrl":"https://lichess.org/clViyZ2d#21","openingTags":"Nimzo-Indian_Defense Nimzo-Indian_Defense_Normal_Variation"},{"id":"00ERL","fen":"1r2R1k1/2Q4p/pp6/2p2n2/P2P1P1q/2P4P/2PB2b1/4R1K1 b - - 0 29","moves":["b8e8","e1e8"],"rating":886,"themes":"mate mateIn1 middlegame oneMove","gameUrl":"https://lichess.org/Da4ZV4Yw/black#58","openingTags":""},{"id":"00EUB","fen":"3r1k1r/5p1p/b2q1p2/P2Np3/Bp2P3/2b2P2/3Q2PP/1R2K2R w K - 4 24","moves":["d5c3","d6d2"],"rating":631,"themes":"mate mateIn1 middlegame oneMove","gameUrl":"https://lichess.org/Fgs0hDjT#47","openingTags":""},{"id":"00EXP","fen":"2n3k1/p4ppp/2p1p3/P1NrP3/1n1r4/3N4/5PPP/1R1R2K1 w - - 0 29","moves":["d3b4","d4d1","b1d1","d5d1"],"rating":863,"themes":"backRankMate mate mateIn2 middlegame short","gameUrl":"https://lichess.org/YsjTBKuB#57","openingTags":""},{"id":"00EXS","fen":"r3r1k1/p2Q1p1p/1p2p1p1/8/1P1P4/P3P3/1B2Nb1q/2KR1R2 w - - 0 19","moves":["f1h1","f2e3","c1b1","h2e2"],"rating":1551,"themes":"advantage discoveredAttack middlegame short","gameUrl":"https://lichess.org/CeNY4SjC#37","openingTags":""},{"id":"00Ea3","fen":"3r4/p5k1/1p1qprnp/1Q1pN1p1/3P1pP1/1PP5/P5PP/4RRK1 b - - 3 29","moves":["g6e5","d4e5","d6c5","b5c5","b6c5","e5f6"],"rating":1317,"themes":"crushing fork long middlegame","gameUrl":"https://lichess.org/6TJRc5H1/black#58","openingTags":""},{"id":"00Ec4","fen":"2rq1r1k/p5pp/8/1p1BpPb1/2Pp2Q1/P2P2R1/6PP/R5K1 b - - 3 25","moves":["c8c7","g4g5","d8g5","g3g5"],"rating":827,"themes":"crushing middlegame short","gameUrl":"https://lichess.org/HUFGdjKK/black#50","openingTags":""},{"id":"00EdH","fen":"r4rk1/pb3ppp/1p2p3/3q4/3N4/2PQ3P/PP3PP1/R4RK1 w - - 1 18","moves":["d3c2","d5g2"],"rating":635,"themes":"kingsideAttack mate mateIn1 middlegame oneMove","gameUrl":"https://lichess.org/R9ruy5QZ#35","openingTags":"Scandinavian_Defense Scandinavian_Defense_Mieses-Kotroc_Variation"},{"id":"00EgR","fen":"N2k3r/1b1n1Bpp/p7/1pb1P3/6P1/4p3/PPP4P/1K1R3R w - - 1 20","moves":["e5e6","b7h1","d1d7","d8c8","d7c7","c8b8"],"rating":1794,"themes":"advantage long middlegame","gameUrl":"https://lichess.org/PfKZb868#39","openingTags":""},{"id":"00Enl","fen":"2kr4/1pp5/p1b2R1n/2PpP3/3B2p1/2P1Q1Pp/PPq4P/5RK1 w - - 3 27","moves":["f6h6","c2g2"],"rating":864,"themes":"mate mateIn1 middlegame oneMove","gameUrl":"https://lichess.org/2XZ7QI0F#53","openingTags":""},{"id":"00Er4","fen":"r3k2r/p1bN2pp/2p1pp2/3p3b/3P1q2/2N4P/PPPQ1PP1/R3R1K1 w kq - 0 16","moves":["e1e6","e8d7","d2f4","c7f4"],"rating":1345,"themes":"crushing hangingPiece middlegame short","gameUrl":"https://lichess.org/xukRQ21f#31","openingTags":"Caro-Kann_Defense Caro-Kann_Defense_Other_variations"},{"id":"00Evs","fen":"5qk1/pQ3pp1/7p/b2N1b2/P3r3/5K2/7P/R4B2 b - - 1 24","moves":["g7g5","d5f6","g8h8","f6e4"],"rating":1077,"themes":"advantage fork middlegame short","gameUrl":"https://lichess.org/ZuufvD5S/black#48","openingTags":""},{"id":"00Ezc","fen":"rnb1k2r/ppp4p/3b1qp1/3P1pBQ/4p2N/2N5/PPP2PPP/R3R1K1 b kq - 1 13","moves":["f6f7","c3e4","f5e4","e1e4"],"rating":2005,"themes":"crushing middlegame short","gameUrl":"https://lichess.org/DlEjvVuJ/black#26","openingTags":"Russian_Game Russian_Game_Italian_Variation"},{"id":"00F5G","fen":"2rqrbk1/pp3ppp/4n3/3p1N2/3NnBQ1/2P4P/PP3PP1/R4RK1 b - - 14 22","moves":["e6f4","f5h6","g8h8","h6f7"],"rating":1538,"themes":"crushing deflection kingsideAttack middlegame pin short","gameUrl":"https://lichess.org/HLNR4ZJ8/black#44","openingTags":""},{"id":"00F6y","fen":"2k3r1/ppp2prp/1q2b3/8/Q7/2P1R1P1/P4P1P/4R1K1 b - - 3 23","moves":["e6d7","e3e8","d7e8","e1e8","g8e8","a4e8"],"rating":878,"themes":"long mate mateIn3 middlegame queensideAttack sacrifice","gameUrl":"https://lichess.org/Hii0fRVd/black#46","openingTags":""},{"id":"00FF5","fen":"r3k3/ppp1qp2/1b1p3p/4p2r/2B1P1b1/P1PP1P2/1P4PQ/RN3R1K b q - 2 18","moves":["e7h4","c4f7","e8e7","f7h5"],"rating":1987,"themes":"attackingF2F7 crushing middlegame short","gameUrl":"https://lichess.org/YBDgjNpz/black#36","openingTags":"Italian_Game Italian_Game_Giuoco_Pianissimo"},{"id":"00FGc","fen":"1r4k1/5p2/2q3bp/4R3/p1r5/P1N5/1PP1Q2P/1KR5 w - - 2 33","moves":["b1a2","c4c3","b2c3","f7f6"],"rating":2446,"themes":"advantage middlegame sacrifice short","gameUrl":"https://lichess.org/N39SSpf9#65","openingTags":""},{"id":"00FH6","fen":"r6r/1q2bpk1/7p/p1p1pPpn/Pp2P1nP/1P1B1N2/2P3P1/2BRR1QK w - - 7 30","moves":["c1b2","h5g3"],"rating":1023,"themes":"mate mateIn1 middlegame oneMove","gameUrl":"https://lichess.org/ckigRGV8#59","openingTags":""},{"id":"00FaB","fen":"2k2bn1/ppp2Nrp/2b1p3/3q2BQ/8/8/PP3PPP/RN3RK1 w - - 5 18","moves":["b1c3","d5g2"],"rating":673,"themes":"kingsideAttack mate mateIn1 middlegame oneMove","gameUrl":"https://lichess.org/fjSUfcn3#35","openingTags":"Ponziani_Opening Ponziani_Opening_Jaenisch_Counterattack"},{"id":"00FjB","fen":"rnbk3r/pppp1Bpp/8/5p2/4p3/2PP4/P1P2PPP/R1B1K2R b KQ - 0 13","moves":["h8f8","c1g5"],"rating":879,"themes":"doubleBishopMate mate mateIn1 middlegame oneMove","gameUrl":"https://lichess.org/r1BPO2dx/black#26","openingTags":"Bishops_Opening Bishops_Opening_Boden-Kieseritzky_Gambit"},{"id":"00Flp","fen":"r2q1rk1/ppp2ppp/2n5/3p2N1/3P4/1B5P/P1Q1bPP1/R1B2RK1 b - - 2 16","moves":["e2f1","c2h7"],"rating":703,"themes":"kingsideAttack mate mateIn1 middlegame oneMove","gameUrl":"https://lichess.org/SXoBpAj9/black#32","openingTags":"Italian_Game Italian_Game_Classical_Variation"},{"id":"00G0z","fen":"Q4n1k/p2b2pp/3b4/2p5/4pq2/2Pn3P/PP1NBPP1/R1B2RK1 w - - 1 23","moves":["d2e4","f4h2"],"rating":1339,"themes":"mate mateIn1 middlegame oneMove","gameUrl":"https://lichess.org/5yn9tO6O#45","openingTags":""},{"id":"00G7g","fen":"3r1rk1/p4pp1/b1p4p/8/BPPq4/P2P3P/2Q3P1/RNB4K b - - 2 27","moves":["d4a1","c1b2","a1b2","c2b2"],"rating":1340,"themes":"advantage middlegame short","gameUrl":"https://lichess.org/Gbq7pxMD/black#54","openingTags":""},{"id":"00GAf","fen":"r5k1/5pp1/1p1rb2p/3pR2q/p1pP4/P1P3Q1/5PPN/4R1K1 b - - 1 30","moves":["h5g6","g3g6","f7g6","e5e6","d6e6","e1e6"],"rating":1328,"themes":"crushing long middlegame","gameUrl":"https://lichess.org/DJ3edB5i/black#60","openingTags":""},{"id":"00GBV","fen":"3r1rk1/pp2n1pp/8/8/Nq6/1PB5/P3QPPP/4R1K1 b - - 1 25","moves":["b4d6","e2e7","d6e7","e1e7"],"rating":1455,"themes":"advantage middlegame short","gameUrl":"https://lichess.org/MksLS6CR/black#50","openingTags":""},{"id":"00GBX","fen":"r6k/pp2n1pp/2nN4/4p1Br/1PB5/2P4b/P3Nb1P/R2R3K b - - 1 22","moves":["h5g5","d6f7","h8g8","f7g5"],"rating":929,"themes":"advantage discoveredAttack fork middlegame short","gameUrl":"https://lichess.org/1YLxwOt0/black#44","openingTags":""},{"id":"00GHw","fen":"r1bq1r2/1p4kp/4p1p1/1NpPp1P1/2P1P3/pPQ4B/P4n2/2KR3R b - - 1 21","moves":["f2h1","c3e5","g7g8","d5e6","d8e7","d1h1","e7g7","e5g7"],"rating":2591,"themes":"advantage middlegame veryLong","gameUrl":"https://lichess.org/VU9ATvfr/black#42","openingTags":""},{"id":"00GRa","fen":"1r3rk1/2p1Nppb/p2nq3/1p2p1Pp/4Qn1P/2P1N3/PPB2P1K/3R2R1 b - - 5 28","moves":["e6e7","e4h7"],"rating":400,"themes":"kingsideAttack mate mateIn1 middlegame oneMove","gameUrl":"https://lichess.org/QiJhfG8J/black#56","openingTags":""},{"id":"00GVf","fen":"2b2k2/6q1/pn4p1/1rp2p2/8/8/1P2Q1P1/1K2R2R b - - 3 32","moves":["c8d7","h1h8","g7h8","e2e7","f8g8","e7d8"],"rating":1560,"themes":"crushing exposedKing long middlegame sacrifice","gameUrl":"https://lichess.org/sTFSNjA5/black#64","openingTags":""},{"id":"00GWg","fen":"1r1r2k1/pp4pp/2nNb3/2R2p2/2P1p3/8/P4PPP/3BR1K1 w - - 1 26","moves":["d6b7","b8b7","c5c6","b7b1","g1f1","d8d1","e1d1","b1d1","f1e2","e6d7"],"rating":2232,"themes":"crushing middlegame veryLong","gameUrl":"https://lichess.org/M7Dta3mv#51","openingTags":""},{"id":"00GYk","fen":"1r4k1/p3p1bp/1n3qp1/6B1/6Q1/1P4pP/P5B1/3R3K b - - 0 29","moves":["f6e5","g5f4","e5f4","g4f4"],"rating":1647,"themes":"crushing master middlegame short","gameUrl":"https://lichess.org/YCWBuQpY/black#58","openingTags":""},{"id":"00GoO","fen":"r1b2rk1/ppb5/2p4p/2Ppqpp1/1P6/2N1P3/P3BPPP/2RQ1RK1 w - - 0 16","moves":["e2d3","e5h2"],"rating":543,"themes":"kingsideAttack mate mateIn1 middlegame oneMove","gameUrl":"https://lichess.org/sf8dREp6#31","openingTags":"Dutch_Defense Dutch_Defense_Normal_Variation"},{"id":"00GuD","fen":"1n5k/4r1p1/p2q1rPp/1ppB4/8/3P4/PPP1RPQ1/2K4R b - - 4 25","moves":["e7e2","h1h6","g7h6","g6g7","h8h7","g7g8q"],"rating":1165,"themes":"advancedPawn kingsideAttack long mate mateIn3 middlegame promotion sacrifice","gameUrl":"https://lichess.org/zcHeWRaO/black#50","openingTags":""},{"id":"00Gyu","fen":"r1b1k1nr/1pp2p2/p7/1B1q3p/6p1/4PP2/PPPQ1P2/2KR3R b kq - 1 17","moves":["d5b5","d2d8"],"rating":399,"themes":"mate mateIn1 middlegame oneMove","gameUrl":"https://lichess.org/EZLk62ss/black#34","openingTags":"Queens_Pawn_Game Queens_Pawn_Game_Accelerated_London_System"},{"id":"00H1C","fen":"r3r3/1kpRnqpp/p4p2/Qp2P2P/1N6/4Pb2/PPP3P1/2K2R2 b - - 0 22","moves":["e7c6","a5c7"],"rating":1389,"themes":"mate mateIn1 middlegame oneMove","gameUrl":"https://lichess.org/GzcjOw0p/black#44","openingTags":""},{"id":"00H2I","fen":"4rrk1/ppp2pp1/7p/3n4/3P3q/1P2p2P/P5P1/R1BQRBK1 w - - 2 23","moves":["c1b2","h4f2","g1h2","f2b2"],"rating":2033,"themes":"crushing fork middlegame short","gameUrl":"https://lichess.org/cCjO5vXk#45","openingTags":""},{"id":"00HEh","fen":"3R1rk1/pp3ppp/2p3b1/2n3P1/2B2q1P/5N2/PPP1QP2/4R1K1 b - - 0 23","moves":["f8d8","e2e8","d8e8","e1e8"],"rating":803,"themes":"kingsideAttack mate mateIn2 middlegame sacrifice short","gameUrl":"https://lichess.org/ekEf00kl/black#46","openingTags":""},{"id":"00Hk4","fen":"5rk1/p4ppp/4p3/1Q6/1P1BN1b1/8/Pq3PPP/R1r1KB1R w KQ - 2 18","moves":["a1c1","b2c1"],"rating":639,"themes":"mate mateIn1 middlegame oneMove","gameUrl":"https://lichess.org/gpoTbULY#35","openingTags":"Scandinavian_Defense Scandinavian_Defense_Modern_Variation"},{"id":"00HnR","fen":"q5kr/p4p2/3Bb1p1/4p2p/5n2/2P5/P1Q2PPP/3R1RK1 w - - 4 21","moves":["d6e5","a8g2"],"rating":939,"themes":"master mate mateIn1 middlegame oneMove","gameUrl":"https://lichess.org/Iva57KFW#41","openingTags":""},{"id":"00HoG","fen":"5r1k/5r2/2b2RQp/1p1p2p1/1q4P1/8/8/1B3R1K b - - 0 36","moves":["f7f6","g6h7"],"rating":1513,"themes":"mate mateIn1 middlegame oneMove","gameUrl":"https://lichess.org/zwJu9mKP/black#72","openingTags":""},{"id":"00Hpe","fen":"1rr3k1/4Qppp/qp2p3/P2pn3/3N4/4P2P/5PP1/RR4K1 b - - 3 29","moves":["b6a5","b1b8","c8b8","e7c7","b8c8","c7e5"],"rating":1748,"themes":"advantage fork long middlegame","gameUrl":"https://lichess.org/7DmRgaqW/black#58","openingTags":""},{"id":"00Hut","fen":"r4rk1/4p1bp/3p2p1/q1pP1P2/4QP2/4B3/1p5P/1BKR3R w - - 0 22","moves":["c1c2","a5c3"],"rating":1342,"themes":"mate mateIn1 middlegame oneMove","gameUrl":"https://lichess.org/wzUXW4h3#43","openingTags":""},{"id":"00ICz","fen":"2k2rr1/1p1q3p/1p2p3/1NbpQ3/P1p2P2/6P1/6KP/R4R2 b - - 0 31","moves":["f8f5","b5a7","c8d8","e5b8","d8e7","b8g8"],"rating":1247,"themes":"crushing long middlegame skewer","gameUrl":"https://lichess.org/aGEDdbh2/black#62","openingTags":""},{"id":"00IF7","fen":"b3k2r/4bpp1/2q1p2p/1p1nP3/1Pp1N3/2P5/2B2PPP/2BQR1K1 w k - 0 19","moves":["c1e3","d5c3","d1g4","c3e4"],"rating":1698,"themes":"crushing middlegame short","gameUrl":"https://lichess.org/7PRHzjIO#37","openingTags":"Sicilian_Defense Sicilian_Defense_Old_Sicilian"},{"id":"00IFk","fen":"r1b4r/ppk2ppp/2p5/3n2B1/2P5/6P1/P1P1B2P/2KR3R b - - 0 16","moves":["d5c3","g5f4","c7b6","c4c5","b6c5","f4e3"],"rating":2150,"themes":"attraction crushing long middlegame","gameUrl":"https://lichess.org/aDBJY27j/black#32","openingTags":"Philidor_Defense Philidor_Defense_Lion_Variation"},{"id":"00IMS","fen":"1r4k1/r5q1/p2p1pP1/4pP2/2p1P2Q/2PbnBK1/P6R/2R5 b - - 7 35","moves":["e3f5","e4f5","d3f5","f3d5"],"rating":1729,"themes":"clearance crushing kingsideAttack middlegame short","gameUrl":"https://lichess.org/4sOYAEfF/black#70","openingTags":""},{"id":"00ITc","fen":"3r1rk1/3b1pp1/7p/8/N2Qp1n1/1P6/PB1q1PP1/R5K1 b - - 1 25","moves":["d7a4","d4g7"],"rating":921,"themes":"mate mateIn1 middlegame oneMove","gameUrl":"https://lichess.org/tGroDLV4/black#50","openingTags":""},{"id":"00IUT","fen":"1r2r1k1/ppp1q1pp/4b3/4P3/1Q1p1P2/8/P5PP/R1BR2K1 w - - 6 19","moves":["d1d4","c7c5","b4a3","c5d4","a3e7","e8e7"],"rating":1536,"themes":"crushing fork long middlegame","gameUrl":"https://lichess.org/93xXeKdX#37","openingTags":"Italian_Game Italian_Game_Classical_Variation"},{"id":"00IUW","fen":"8/Q1p1r1kp/5pp1/3P3r/4P3/2N2bPq/PPP2R1P/5RK1 w - - 3 23","moves":["a7e3","h3g3","h2g3","h5h1"],"rating":1679,"themes":"clearance kingsideAttack mate mateIn2 middlegame sacrifice short","gameUrl":"https://lichess.org/83tyhOfz#45","openingTags":""}]'),Yj=JSON.parse('[{"id":"0000D","fen":"5rk1/1p3ppp/pq3b2/8/8/1P1Q1N2/P4PPP/3R2K1 w - - 2 27","moves":["d3d6","f8d8","d6d8","f6d8"],"rating":1501,"themes":"advantage endgame short","gameUrl":"https://lichess.org/F8M8OS71#53","openingTags":""},{"id":"0008Q","fen":"8/4R3/1p2P3/p4r2/P6p/1P3Pk1/4K3/8 w - - 1 64","moves":["e7f7","f5e5","e2f1","e5e6"],"rating":1355,"themes":"advantage endgame rookEndgame short","gameUrl":"https://lichess.org/MQSyb3KW#127","openingTags":""},{"id":"000Pw","fen":"6k1/5p1p/4p3/4q3/3nN3/2Q3P1/PP3P1P/6K1 w - - 2 37","moves":["e4d2","d4e2","g1f1","e2c3"],"rating":1422,"themes":"crushing endgame fork short","gameUrl":"https://lichess.org/au2lCK5o#73","openingTags":""},{"id":"000Sa","fen":"2Q2bk1/5p1p/p5p1/2p3P1/2r1B3/7P/qPQ2P2/2K4R b - - 0 32","moves":["c4c2","e4c2","a2a1","c2b1"],"rating":1537,"themes":"advantage endgame short","gameUrl":"https://lichess.org/lTTa9lwd/black#64","openingTags":""},{"id":"000VW","fen":"r4r2/1p3pkp/p5p1/3R1N1Q/3P4/8/P1q2P2/3R2K1 b - - 3 25","moves":["g6f5","d5c5","c2e4","h5g5","g7h8","g5f6"],"rating":2857,"themes":"crushing endgame long","gameUrl":"https://lichess.org/e9AY2m5j/black#50","openingTags":""},{"id":"000Vc","fen":"8/8/4k1p1/2KpP2p/5PP1/8/8/8 w - - 0 53","moves":["g4h5","g6h5","f4f5","e6e5","f5f6","e5f6"],"rating":1611,"themes":"crushing endgame long pawnEndgame","gameUrl":"https://lichess.org/l6AejDMO#105","openingTags":""},{"id":"000Zo","fen":"4r3/1k6/pp3r2/1b2P2p/3R1p2/P1R2P2/1P4PP/6K1 w - - 0 35","moves":["e5f6","e8e1","g1f2","e1f1"],"rating":1353,"themes":"endgame mate mateIn2 short","gameUrl":"https://lichess.org/n8Ff742v#69","openingTags":""},{"id":"000jr","fen":"5k2/1p4pp/p5n1/5Q2/3BpP2/1P2PP1K/P1q4P/7r b - - 1 33","moves":["f8g8","f5d5","g8f8","d4c5","c2c5","d5c5"],"rating":2053,"themes":"crushing endgame long","gameUrl":"https://lichess.org/JgxFj109/black#66","openingTags":""},{"id":"000o3","fen":"8/2p1k3/6p1/1p1P1p2/1P3P2/3K2Pp/7P/8 b - - 1 43","moves":["e7d6","d3d4","g6g5","f4g5"],"rating":944,"themes":"crushing endgame pawnEndgame short zugzwang","gameUrl":"https://lichess.org/BAY91mF3/black#86","openingTags":""},{"id":"000qP","fen":"8/7R/8/5p2/4bk1P/8/2r2K2/6R1 w - - 7 51","moves":["f2f1","f4f3","f1e1","c2c1","e1d2","c1g1"],"rating":1999,"themes":"crushing endgame exposedKing long skewer","gameUrl":"https://lichess.org/r4xUR6fC#101","openingTags":""},{"id":"000rO","fen":"3R4/8/K7/pB2b3/1p6/1P2k3/3p4/8 w - - 4 58","moves":["a6a5","e5c7","a5b4","c7d8"],"rating":1110,"themes":"crushing endgame fork master short","gameUrl":"https://lichess.org/tzeeBEc2#115","openingTags":""},{"id":"0018P","fen":"5R2/1p6/p1p5/2P1rk2/2K3p1/2P1p1P1/1P5P/8 b - - 1 44","moves":["f5e6","f8e8","e6f5","e8e5","f5e5","c4d3","e5d5","d3e3","a6a5","e3f4","d5c4","f4g4"],"rating":1904,"themes":"crushing endgame exposedKing rookEndgame veryLong","gameUrl":"https://lichess.org/Xg1Gtfjr/black#88","openingTags":""},{"id":"0018S","fen":"2kr3r/pp3p2/4p2p/1N1p2p1/3Q4/1P1P4/2q2PPP/5RK1 b - - 1 20","moves":["b7b6","d4a1","a7a5","f1c1"],"rating":2566,"themes":"advantage endgame pin short","gameUrl":"https://lichess.org/H1ARO2GL/black#40","openingTags":""},{"id":"001Hi","fen":"6k1/pp1r1pp1/1qp1p2p/4P2P/5Q2/1P4R1/P1Pr1PP1/R5K1 b - - 4 23","moves":["b6d4","f4f6","d4f2","f6f2","d2f2","g1f2"],"rating":2389,"themes":"advantage endgame long pin","gameUrl":"https://lichess.org/tUkE0z1z/black#46","openingTags":""},{"id":"001Oo","fen":"6k1/4p1bp/6p1/1p1pP3/1PpPp3/2P1P3/Q2B1KPP/3q4 b - - 2 23","moves":["d1a4","a2a4","b5a4","b4b5","g8f7","b5b6"],"rating":2078,"themes":"crushing endgame long quietMove","gameUrl":"https://lichess.org/8IKs77O9/black#46","openingTags":""},{"id":"001Wz","fen":"4r1k1/5ppp/r1p5/p1n1RP2/8/2P2N1P/2P3P1/3R2K1 b - - 0 21","moves":["e8e5","d1d8","e5e8","d8e8"],"rating":1118,"themes":"backRankMate endgame mate mateIn2 short","gameUrl":"https://lichess.org/84RH3LaP/black#42","openingTags":""},{"id":"001aK","fen":"6k1/5p2/4p3/P1B5/2P4P/4Pnp1/Rb1rN3/5K2 b - - 1 33","moves":["d2e2","f1e2","g3g2","e3e4","f3d4","e2f2"],"rating":2027,"themes":"crushing endgame hangingPiece long quietMove","gameUrl":"https://lichess.org/Epr0AiEh/black#66","openingTags":""},{"id":"001cr","fen":"8/3B2pp/p5k1/2p3P1/1p1p1K2/8/1P6/8 b - - 0 38","moves":["c5c4","d7e8"],"rating":1606,"themes":"bishopEndgame endgame mate mateIn1 oneMove","gameUrl":"https://lichess.org/7FFNwibw/black#76","openingTags":""},{"id":"001m3","fen":"7r/6k1/2b1pp2/8/P1N3p1/5nP1/4RP2/Q4K2 w - - 2 38","moves":["e2e6","h8h1","f1e2","h1a1"],"rating":1459,"themes":"advantage endgame short skewer","gameUrl":"https://lichess.org/LELOz22f#75","openingTags":""},{"id":"001wR","fen":"6nr/pp3p1p/k1p5/8/1QN5/2P1P3/4KPqP/8 b - - 5 26","moves":["b7b5","b4a5","a6b7","c4d6","b7b8","a5d8"],"rating":1212,"themes":"endgame long mate mateIn3","gameUrl":"https://lichess.org/ruvbd9JW/black#52","openingTags":""},{"id":"001xl","fen":"8/4R1k1/p5pp/3B4/5q2/8/5P1P/6K1 b - - 5 40","moves":["g7f6","e7f7","f6e5","f7f4"],"rating":1105,"themes":"advantage endgame master masterVsMaster short skewer superGM","gameUrl":"https://lichess.org/bEQkfPQD/black#80","openingTags":""},{"id":"002CP","fen":"r5k1/pp4pp/4p1q1/4p3/3n4/P5P1/1PP2Q1P/2KR1R2 w - - 4 24","moves":["f2e3","g6c2"],"rating":926,"themes":"endgame mate mateIn1 oneMove queensideAttack","gameUrl":"https://lichess.org/pHZnIFdb#47","openingTags":""},{"id":"002Ds","fen":"8/1pp5/p2p4/P2Pk2p/1PP1p2P/2n1K2P/3N4/8 b - - 0 45","moves":["b7b6","b4b5","c3d1","e3e2","a6b5","a5a6"],"rating":1980,"themes":"crushing endgame knightEndgame long","gameUrl":"https://lichess.org/2SrvOtZN/black#90","openingTags":""},{"id":"002GQ","fen":"5rk1/5ppp/4p3/4N3/8/1Pn5/5PPP/5RK1 w - - 0 28","moves":["f1c1","c3e2","g1f1","e2c1"],"rating":654,"themes":"crushing endgame fork short","gameUrl":"https://lichess.org/2K7g2pDT#55","openingTags":""},{"id":"002Hv","fen":"8/8/8/3N2p1/5b2/3p3P/5kP1/3K4 w - - 16 56","moves":["d5f4","g5f4","h3h4","f2g2","h4h5","f4f3","d1d2","f3f2"],"rating":1603,"themes":"advancedPawn crushing endgame veryLong","gameUrl":"https://lichess.org/rLJ8Hp1v#111","openingTags":""},{"id":"002LF","fen":"7r/p2q1pk1/1pp3p1/8/6P1/4Q3/PP1R1P1r/5KN1 b - - 0 38","moves":["d7g4","e3e5","f7f6","e5c7","g7h6","c7h2"],"rating":2145,"themes":"advantage endgame interference long","gameUrl":"https://lichess.org/md88dHiL/black#76","openingTags":""},{"id":"002Uy","fen":"8/8/1p6/k7/P1R5/1K5r/8/8 w - - 26 64","moves":["c4c3","h3c3","b3c3","a5a4","c3b2","a4b4"],"rating":1615,"themes":"crushing defensiveMove endgame long rookEndgame","gameUrl":"https://lichess.org/sLU7YN1A#127","openingTags":""},{"id":"002VP","fen":"8/6p1/2B1bn2/6k1/3B4/6K1/4P3/8 b - - 4 44","moves":["e6d5","d4f6","g5f5","c6d5"],"rating":1469,"themes":"crushing endgame short","gameUrl":"https://lichess.org/7yJGEbUK/black#88","openingTags":""},{"id":"002Z9","fen":"4r1k1/1p2R1p1/p2p2Pp/P1pP4/5q2/1R3p2/1P1Q3P/5B1K b - - 0 34","moves":["f4d2","e7e8"],"rating":1231,"themes":"endgame hangingPiece master mate mateIn1 oneMove","gameUrl":"https://lichess.org/Ek4aENjD/black#68","openingTags":""},{"id":"002bK","fen":"8/7p/2b1k3/p2p1pPB/1n1P3P/N1p1P3/4K3/8 b - - 1 42","moves":["c6b5","a3b5","c3c2","e2d2"],"rating":1125,"themes":"advantage endgame hangingPiece short","gameUrl":"https://lichess.org/IFGj8W5s/black#84","openingTags":""},{"id":"002vV","fen":"8/6k1/2R4p/5p1P/5P1K/6P1/8/r7 w - - 2 58","moves":["c6b6","a1h1"],"rating":490,"themes":"endgame master mate mateIn1 oneMove rookEndgame","gameUrl":"https://lichess.org/KB7FAntf#115","openingTags":""},{"id":"002xh","fen":"2nk4/8/2PBp1n1/1pK1P1p1/1P4P1/8/8/8 b - - 2 42","moves":["g6h4","c5b5","h4g2","b5a6","g2e3","a6b7"],"rating":2065,"themes":"crushing endgame long","gameUrl":"https://lichess.org/TfRvsd3p/black#84","openingTags":""},{"id":"00347","fen":"8/2p5/8/2pPk2p/8/4K2P/6P1/8 w - - 1 42","moves":["e3d3","h5h4","d3c4","e5d6"],"rating":2264,"themes":"crushing endgame pawnEndgame quietMove short","gameUrl":"https://lichess.org/xFM0YP9S#83","openingTags":""},{"id":"0039T","fen":"1r5r/p3kp2/4p2p/4P3/3R1Pp1/6P1/P1P4P/4K2R w K - 1 25","moves":["d4a4","b8b1","e1f2","b1h1","a4a7","e7f8"],"rating":1081,"themes":"crushing defensiveMove endgame long rookEndgame skewer","gameUrl":"https://lichess.org/BrtVeJlj#49","openingTags":""},{"id":"003IX","fen":"8/3pk3/R7/1R2Pp1p/2PPnKr1/8/8/8 w - - 4 43","moves":["f4f5","e4g3"],"rating":1713,"themes":"endgame mate mateIn1 oneMove","gameUrl":"https://lichess.org/576Btq56#85","openingTags":""},{"id":"003Tx","fen":"2r5/pR5p/5p1k/4p3/4r3/B4nPP/PP3P2/1K2R3 w - - 0 27","moves":["e1e4","f3d2","b1a1","c8c1"],"rating":1518,"themes":"backRankMate endgame fork mate mateIn2 short","gameUrl":"https://lichess.org/A7j9VEC0#53","openingTags":""},{"id":"003UW","fen":"8/6pk/7p/2p5/2qp4/5PP1/P3QK1P/8 b - - 1 40","moves":["c4d5","e2e4","d5e4","f3e4"],"rating":1457,"themes":"advantage endgame queenEndgame short","gameUrl":"https://lichess.org/cXMga3rb/black#80","openingTags":""},{"id":"003aS","fen":"8/8/5k1p/6p1/1R4PP/1p2KP2/8/1r6 w - - 0 43","moves":["h4h5","b3b2","b4b6","f6e5","f3f4","g5f4"],"rating":2014,"themes":"advancedPawn crushing defensiveMove endgame long rookEndgame","gameUrl":"https://lichess.org/I7ZktFeR#85","openingTags":""},{"id":"003if","fen":"8/3q1kpp/1P2p3/4Q3/5P2/4B2P/2r3PK/8 b - - 0 43","moves":["d7b7","e5h5","f7e7","e3c5","c2c5","h5c5"],"rating":1664,"themes":"advantage endgame long","gameUrl":"https://lichess.org/mYGtlm6w/black#86","openingTags":""},{"id":"003jv","fen":"1R6/1p2k2p/p2n2p1/4K3/8/6P1/P6P/8 w - - 10 37","moves":["b8h8","d6f7","e5e4","f7h8"],"rating":1007,"themes":"crushing endgame fork short","gameUrl":"https://lichess.org/n0UvwK36#73","openingTags":""},{"id":"0040n","fen":"r7/p2k1pp1/p1p1pn2/3p4/3P4/P3PQp1/1PP2P1q/2K4R w - - 0 20","moves":["h1h2","g3h2","f3h3","f6g4"],"rating":1233,"themes":"advancedPawn advantage endgame short","gameUrl":"https://lichess.org/WIUWcrdG#39","openingTags":""},{"id":"00465","fen":"3r1Q1k/pp4pp/2p5/6q1/5R2/2P5/P1P2PPP/3rR1K1 b - - 8 27","moves":["d8f8","f4f8"],"rating":594,"themes":"backRankMate endgame mate mateIn1 oneMove queenRookEndgame","gameUrl":"https://lichess.org/h21VtqGG/black#54","openingTags":""},{"id":"0047P","fen":"8/1N3k2/6p1/8/2P3P1/pr6/R5K1/8 w - - 1 56","moves":["g2f1","b3b1","f1e2","b1b2","e2d1","b2a2"],"rating":1769,"themes":"crushing endgame exposedKing fork long master","gameUrl":"https://lichess.org/Gb33KZKC#111","openingTags":""},{"id":"0048h","fen":"4r3/p5k1/2p2R1p/2Pp4/1P1pr1P1/P6P/8/3R3K w - - 1 35","moves":["f6c6","e4e1","d1e1","e8e1","h1g2","d4d3"],"rating":1163,"themes":"crushing endgame exposedKing long rookEndgame","gameUrl":"https://lichess.org/dq15P00L#69","openingTags":""},{"id":"004Ao","fen":"4qk2/1b3rR1/p7/1p2Q3/4P2P/P2P3K/2r5/3R4 w - - 5 41","moves":["g7f7","e8f7","e5h8","f8e7"],"rating":1711,"themes":"advantage endgame short","gameUrl":"https://lichess.org/aFlzjb1K#81","openingTags":""},{"id":"004Ax","fen":"8/8/4R1kp/p7/5rPK/8/7P/8 b - - 2 42","moves":["g6f7","e6h6","f4f6","h6h7","f7g6","h7a7"],"rating":1987,"themes":"crushing endgame exposedKing long rookEndgame","gameUrl":"https://lichess.org/x2mMwVJD/black#84","openingTags":""},{"id":"004JD","fen":"3r4/R7/2p5/p1P2p2/1p4k1/nP6/P2KNP2/8 w - - 3 41","moves":["d2e3","a3c2"],"rating":1271,"themes":"cornerMate endgame mate mateIn1 oneMove","gameUrl":"https://lichess.org/6vTeEc3x#81","openingTags":""},{"id":"004LZ","fen":"8/7R/5p2/p7/7P/2p5/3k2r1/1K2N3 w - - 3 48","moves":["e1g2","c3c2","b1a2","c2c1q","h7d7","d2e2"],"rating":1203,"themes":"advancedPawn crushing defensiveMove deflection endgame long promotion","gameUrl":"https://lichess.org/drahwNdj#95","openingTags":""},{"id":"004Lu","fen":"8/p1p4p/4Pk2/2PP1p1P/1r3r2/5B2/P3RK2/8 b - - 3 38","moves":["f6e7","d5d6","c7d6","c5d6","e7d6","e6e7"],"rating":1152,"themes":"advancedPawn advantage endgame exposedKing long master","gameUrl":"https://lichess.org/WMeZuWza/black#76","openingTags":""},{"id":"004RF","fen":"5rk1/5ppp/1p6/1qp2P1Q/3p3P/6R1/6PK/8 b - - 0 30","moves":["c5c4","g3g7","g8g7","f5f6","g7f6","h5b5"],"rating":1746,"themes":"attraction crushing discoveredAttack endgame long sacrifice","gameUrl":"https://lichess.org/2UeWcE4h/black#60","openingTags":""},{"id":"004X6","fen":"1r4k1/p4ppp/2Q5/3pq3/8/P6P/2PR1PP1/Rr4K1 w - - 1 26","moves":["a1b1","b8b1","d2d1","b1d1"],"rating":1152,"themes":"endgame mate mateIn2 short","gameUrl":"https://lichess.org/wvPFkjF9#51","openingTags":""},{"id":"004XI","fen":"8/3kqp2/4p3/p2p4/3P1P2/4P1rP/7r/1QR2K2 b - - 1 34","moves":["e7a3","b1b7","d7e8","c1c8"],"rating":982,"themes":"endgame mate mateIn2 short","gameUrl":"https://lichess.org/54fnArpo/black#68","openingTags":""},{"id":"004b0","fen":"5kB1/4b3/4P3/2p2P2/2b5/8/p7/B6K w - - 4 48","moves":["g8f7","e7g5","f5f6","g5e3","a1e5","e3f4","e5f4","a2a1q"],"rating":2368,"themes":"advancedPawn bishopEndgame crushing deflection endgame promotion quietMove veryLong","gameUrl":"https://lichess.org/CJKIi1QJ#95","openingTags":""},{"id":"004d8","fen":"8/4kr2/R2p4/1p1Pp1p1/5p2/3K1P2/PPP5/8 b - - 0 39","moves":["g5g4","a6a7","e7f6","a7f7","f6f7","f3g4"],"rating":1608,"themes":"crushing endgame long rookEndgame","gameUrl":"https://lichess.org/FrR3BHbW/black#78","openingTags":""},{"id":"004mT","fen":"5Q2/8/1b1kp1p1/5p2/3p4/5qPK/7P/8 b - - 1 51","moves":["d6c6","f8a8","c6d6","a8f3"],"rating":1287,"themes":"advantage endgame short skewer","gameUrl":"https://lichess.org/Jqhi4ozb/black#102","openingTags":""},{"id":"004sY","fen":"8/2k3n1/3p2p1/1KpP2Pp/2P4P/7B/8/8 w - - 0 57","moves":["b5a6","c7d8","a6b5","g7f5"],"rating":2191,"themes":"crushing endgame short","gameUrl":"https://lichess.org/sMrTPfXp#113","openingTags":""},{"id":"004sg","fen":"6k1/p3b2p/1p1pP3/2p3P1/1Pnp3B/P6P/3Q3K/8 w - - 0 38","moves":["b4c5","c4d2","c5c6","d6d5","g5g6","e7d6"],"rating":2394,"themes":"advantage clearance endgame hangingPiece long quietMove","gameUrl":"https://lichess.org/pSRIvt7K#75","openingTags":""},{"id":"004u0","fen":"6k1/ppq3pp/2p1rp2/4r3/4p1Q1/P5RP/1P3PP1/3R2K1 b - - 3 34","moves":["e6e8","d1d7","c7d7","g4d7"],"rating":1386,"themes":"advantage endgame short","gameUrl":"https://lichess.org/3gEqoQeQ/black#68","openingTags":""},{"id":"004zI","fen":"2q3k1/4br1p/6RQ/1p1n2p1/7P/1P4P1/1B2PP2/6K1 b - - 0 27","moves":["h7g6","h6h8"],"rating":1451,"themes":"endgame mate mateIn1 oneMove","gameUrl":"https://lichess.org/HE33gdt4/black#54","openingTags":""},{"id":"004zh","fen":"4b1k1/4Pr2/3R2pp/1ppBP1q1/8/PP4P1/2P4P/3R3K b - - 2 38","moves":["g5h5","d1f1","g8g7","d5f7","e8f7","d6d8","h5e5","f1f7","g7f7","e7e8q","e5e8","d8e8"],"rating":2624,"themes":"advancedPawn attraction crushing endgame exposedKing intermezzo pin promotion quietMove veryLong","gameUrl":"https://lichess.org/sYeKSrqj/black#76","openingTags":""},{"id":"0050w","fen":"5rk1/1p2p1rp/p2p4/2pPb2R/2P1P3/1P1BKP1R/8/8 b - - 4 30","moves":["g7g3","h3g3","e5g3","h5g5","g8f7","g5g3"],"rating":1066,"themes":"crushing endgame fork long","gameUrl":"https://lichess.org/QD8pUcTR/black#60","openingTags":""},{"id":"005Bm","fen":"4rk2/p1q5/1p3Q1b/8/1p5N/2P1p3/P3P3/2K5 b - - 0 43","moves":["c7f7","h4g6","f8g8","f6h8"],"rating":1229,"themes":"endgame mate mateIn2 pin short","gameUrl":"https://lichess.org/KKslCMev/black#86","openingTags":""},{"id":"005Ep","fen":"5kr1/ppR3p1/3R3p/8/1r1n4/8/1P3PPP/2K5 b - - 4 31","moves":["d4b5","d6d8"],"rating":950,"themes":"endgame mate mateIn1 oneMove","gameUrl":"https://lichess.org/ttFEoJfQ/black#62","openingTags":""},{"id":"005N7","fen":"r6k/2q3pp/8/2p1n3/R1Qp4/7P/2PB1PP1/6K1 b - - 0 32","moves":["e5c4","a4a8","c7b8","a8b8"],"rating":666,"themes":"backRankMate endgame hangingPiece mate mateIn2 short","gameUrl":"https://lichess.org/jxZhmGhg/black#64","openingTags":""},{"id":"005do","fen":"7r/pp1k4/4p1b1/3pP1Np/3P1P1K/8/P7/2R5 b - - 7 42","moves":["h8f8","c1c7","d7c7","g5e6","c7b6","e6f8"],"rating":1439,"themes":"attraction crushing deflection endgame fork long sacrifice","gameUrl":"https://lichess.org/Q1hPi58C/black#84","openingTags":""},{"id":"005f3","fen":"r5k1/2p1pp2/pp4p1/1q1r4/5P2/2QP2R1/PP6/1K4R1 b - - 0 32","moves":["d5h5","g3g6","f7g6","g1g6","g8f7","c3g7","f7e8","g7g8","e8d7","g8e6","d7d8","g6g8"],"rating":1902,"themes":"crushing endgame sacrifice veryLong","gameUrl":"https://lichess.org/Prb24UzR/black#64","openingTags":""},{"id":"005jR","fen":"8/5p1k/1P4pp/3Qn3/4BP2/6P1/1p2P2P/2q3K1 w - - 1 34","moves":["g1f2","b2b1q","e4b1","e5g4","f2f3","c1h1"],"rating":2779,"themes":"advancedPawn crushing endgame long promotion","gameUrl":"https://lichess.org/ltr8kYV9#67","openingTags":""},{"id":"005qG","fen":"8/8/1p1k1p1p/3npp2/2B5/PP1K1PP1/7P/8 b - - 0 36","moves":["f5f4","c4d5","f4g3","h2g3","d6d5","g3g4"],"rating":2310,"themes":"crushing defensiveMove endgame long","gameUrl":"https://lichess.org/RMj9gStA/black#72","openingTags":""},{"id":"005ws","fen":"8/8/5pp1/3K3p/3N2kP/8/8/8 w - - 2 62","moves":["d5e6","g6g5","h4g5","f6g5","e6d5","h5h4","d5e4","h4h3","d4f3","g4g3"],"rating":2342,"themes":"crushing endgame knightEndgame master masterVsMaster quietMove veryLong","gameUrl":"https://lichess.org/LOwACSXb#123","openingTags":""},{"id":"005xu","fen":"8/3k4/1K1P4/2P3r1/R7/5b2/8/8 b - - 0 68","moves":["g5g8","a4a7","d7e6","a7e7","e6d5","d6d7"],"rating":1914,"themes":"advancedPawn crushing endgame exposedKing long","gameUrl":"https://lichess.org/TDu28XvE/black#136","openingTags":""},{"id":"0061g","fen":"6k1/pp3pp1/2p1q1Pp/3b4/8/6Q1/PB3Pp1/3RrNK1 b - - 2 27","moves":["e1d1","g3b8","e6e8","b8e8"],"rating":801,"themes":"endgame mate mateIn2 short","gameUrl":"https://lichess.org/dJ3xEKJK/black#54","openingTags":""},{"id":"0068D","fen":"7r/pppk4/2pb1r2/8/2NP2p1/2P5/PP2RPP1/4R1K1 w - - 2 26","moves":["c4d6","f6h6","f2f4","g4g3","e2e7","d7d6","g1f1","h6h1"],"rating":1918,"themes":"crushing endgame veryLong","gameUrl":"https://lichess.org/WNAZgV2o#51","openingTags":""},{"id":"006E1","fen":"5rk1/R4pp1/1p5p/3Q4/1PPp2q1/3P2P1/5P2/4nK2 w - - 0 34","moves":["f1e1","f8e8","e1f1","g4h3","d5g2","e8e1","f1e1","h3g2"],"rating":1640,"themes":"crushing deflection endgame veryLong","gameUrl":"https://lichess.org/KaLKLKD5#67","openingTags":""},{"id":"006HV","fen":"1r6/5k2/2p1pNp1/p5Pp/1pQ1P2P/2P4R/KP3P2/3q4 w - - 4 31","moves":["c4c6","b4b3","a2a3","d1a1"],"rating":1145,"themes":"endgame mate mateIn2 short","gameUrl":"https://lichess.org/ibb2c72C#61","openingTags":""},{"id":"006OI","fen":"8/p7/5k2/P5R1/6KP/8/8/5r2 w - - 5 53","moves":["g5g8","f1g1","g4f4","g1g8"],"rating":843,"themes":"crushing endgame rookEndgame short skewer","gameUrl":"https://lichess.org/6AH1H5wg#105","openingTags":""},{"id":"006om","fen":"1r3k2/5p1p/2p1pp2/P2n4/2r1N3/P4PK1/2R2P1P/2R5 b - - 9 29","moves":["c4a4","e4c5","a4a5","c5d7","f8g7","d7b8"],"rating":1910,"themes":"crushing endgame fork long master","gameUrl":"https://lichess.org/BMIgw1OR/black#58","openingTags":""},{"id":"006wz","fen":"2r5/4ppkp/5bp1/1p6/1P6/P3B3/2r2PPP/1R1R2K1 b - - 2 22","moves":["f6b2","b1b2","c2b2","e3d4","f7f6","d4b2"],"rating":1428,"themes":"attraction crushing endgame fork long sacrifice","gameUrl":"https://lichess.org/qT0W6o27/black#44","openingTags":""},{"id":"006yP","fen":"6R1/8/Kpk1p3/1p1pP3/6P1/PPP1r3/8/8 b - - 3 40","moves":["e3c3","g8c8","c6d7","c8c3"],"rating":819,"themes":"crushing endgame master rookEndgame short skewer","gameUrl":"https://lichess.org/vf9MOLH1/black#80","openingTags":""},{"id":"0071K","fen":"3N1r2/6R1/kp6/p2pPp1Q/2pP2P1/2q5/2P5/2K5 w - - 0 38","moves":["g7a7","a6a7","h5h7","a7a6"],"rating":1137,"themes":"crushing defensiveMove endgame hangingPiece short","gameUrl":"https://lichess.org/gY0ZkxR4#75","openingTags":""},{"id":"0071N","fen":"6k1/p4pp1/1p5p/4b3/4B3/4P1P1/PpR2PKP/3r4 b - - 1 30","moves":["b2b1q","c2c8","d1d8","c8d8"],"rating":610,"themes":"endgame mate mateIn2 short","gameUrl":"https://lichess.org/HRlw71ON/black#60","openingTags":""},{"id":"00761","fen":"3r2k1/1b3pbR/p2P2P1/3p2N1/2p5/2P2N2/PP6/2K5 b - - 0 28","moves":["f7g6","h7g7","g8g7","g5e6","g7g8","e6d8"],"rating":1525,"themes":"attraction crushing endgame exposedKing fork long sacrifice","gameUrl":"https://lichess.org/vu70Maig/black#56","openingTags":""},{"id":"007Rn","fen":"4r1k1/p4p1p/1p6/6q1/3P2n1/P4Q2/1P1B2P1/7K w - - 0 34","moves":["d2g5","e8e1","f3f1","e1f1"],"rating":992,"themes":"endgame mate mateIn2 short","gameUrl":"https://lichess.org/L9kH7FqT#67","openingTags":""},{"id":"007eS","fen":"6k1/p4p2/1p5p/4r3/P3B3/1P3P2/2PK2PP/8 w - - 0 29","moves":["d2e3","f7f5","g2g4","f5e4"],"rating":1275,"themes":"advantage endgame short","gameUrl":"https://lichess.org/8qs8bafy#57","openingTags":""},{"id":"007fJ","fen":"8/1P3ppp/8/8/8/2pk3P/3p2P1/3K4 w - - 0 52","moves":["b7b8q","c3c2"],"rating":496,"themes":"advancedPawn endgame mate mateIn1 oneMove queenEndgame","gameUrl":"https://lichess.org/34ezZi7R#103","openingTags":""},{"id":"007gO","fen":"2r3rk/5p2/4p2p/4q3/1Q6/8/1P3PPP/R4RK1 w - - 0 31","moves":["a1c1","e5g5","g2g3","c8c1"],"rating":2197,"themes":"crushing endgame short","gameUrl":"https://lichess.org/id1brvZc#61","openingTags":""},{"id":"007mr","fen":"5k2/p2r3p/1p4pP/3r1q2/3Rp3/2P5/PP3PQ1/K3R3 w - - 0 33","moves":["d4e4","d5d1","e1d1","d7d1"],"rating":630,"themes":"backRankMate endgame mate mateIn2 short","gameUrl":"https://lichess.org/J12UnEgz#65","openingTags":""},{"id":"0088O","fen":"7Q/2p5/1p2prp1/p4k1p/P4p1P/8/6RK/3q4 b - - 2 37","moves":["d1a4","g2g5","f5e4","h8f6"],"rating":1133,"themes":"crushing deflection endgame short","gameUrl":"https://lichess.org/GmH1DPx6/black#74","openingTags":""},{"id":"008EC","fen":"6k1/4rpp1/p6p/7P/q1pP1R2/2Pb2Q1/P4RP1/6K1 w - - 9 31","moves":["f4f7","e7f7","g3b8","g8h7","f2f7","a4d1","g1f2","d1f1","f2g3","f1f7"],"rating":2242,"themes":"advantage endgame skewer veryLong","gameUrl":"https://lichess.org/q5CqLXP5#61","openingTags":""},{"id":"008GK","fen":"1k1r4/ppp3p1/8/1P5p/8/P3n2P/2P1r1P1/B3NRK1 b - - 4 31","moves":["d8d1","f1f8","d1d8","f8d8"],"rating":514,"themes":"backRankMate endgame mate mateIn2 short","gameUrl":"https://lichess.org/9vFFDYsH/black#62","openingTags":""},{"id":"008LD","fen":"8/6pp/4N1k1/5p2/5P2/5rPb/4R2P/6K1 w - - 0 35","moves":["e6g5","f3f1"],"rating":404,"themes":"endgame mate mateIn1 oneMove","gameUrl":"https://lichess.org/jzHHsjDp#69","openingTags":""},{"id":"008P4","fen":"8/4k3/1p1p4/rP2p1p1/P2nP1P1/3BK3/8/R7 w - - 0 35","moves":["e3d2","d4b3","d2c3","b3a1"],"rating":717,"themes":"crushing endgame fork short","gameUrl":"https://lichess.org/3GoHPRp3#69","openingTags":""},{"id":"008Sk","fen":"8/6pp/3Bp2k/p2pP2P/P2bp1PK/8/r7/5R2 b - - 2 37","moves":["d4f2","f1f2","g7g5","h4g3","a2f2","g3f2"],"rating":2025,"themes":"crushing endgame long","gameUrl":"https://lichess.org/rah6MiKa/black#74","openingTags":""},{"id":"008o6","fen":"Q5k1/p1p3p1/5rP1/8/3P4/7P/q3r3/B4RK1 b - - 1 34","moves":["f6f8","a8f8"],"rating":471,"themes":"endgame mate mateIn1 oneMove","gameUrl":"https://lichess.org/1k4lXfEi/black#68","openingTags":""},{"id":"008oX","fen":"4r1k1/2R3pp/2p4q/1p1p4/3P4/P7/1PP2R2/1K1N4 b - - 3 32","moves":["e8e1","c7c8","e1e8","c8e8"],"rating":976,"themes":"endgame mate mateIn2 short","gameUrl":"https://lichess.org/APGKH8YH/black#64","openingTags":""},{"id":"008tL","fen":"8/7k/pR5p/3p4/5r2/2P1p2P/P5P1/6K1 w - - 0 40","moves":["b6a6","e3e2","a6e6","f4f1"],"rating":1085,"themes":"advancedPawn crushing endgame master rookEndgame short","gameUrl":"https://lichess.org/yhNupFCi#79","openingTags":""},{"id":"0092z","fen":"2r3k1/2qR1ppp/p7/2p2Q2/P7/7P/5PP1/6K1 b - - 3 26","moves":["c7c6","f5f7","g8h8","f7g7"],"rating":994,"themes":"endgame mate mateIn2 short","gameUrl":"https://lichess.org/fjaha7q0/black#52","openingTags":""},{"id":"0095W","fen":"8/pp1r2kp/q2P1ppb/4p3/2N1P3/1Q5P/PPR2PP1/6K1 w - - 3 32","moves":["c4e5","f6e5","c2c7","a6d6"],"rating":1712,"themes":"advantage endgame hangingPiece short","gameUrl":"https://lichess.org/CaL8Bl7F#63","openingTags":""},{"id":"009BH","fen":"3r2k1/6p1/4Q3/4B3/1p3P2/4PKP1/3q4/8 b - - 17 51","moves":["g8h8","e6h6","h8g8","h6g7"],"rating":1563,"themes":"endgame mate mateIn2 pin short","gameUrl":"https://lichess.org/QauOOpOY/black#102","openingTags":""},{"id":"009bR","fen":"4r2k/3q2r1/1p4pQ/p1pP4/2P4P/1N4p1/PP3RK1/8 b - - 1 37","moves":["g7h7","f2f8","e8f8","h6f8"],"rating":1048,"themes":"endgame mate mateIn2 short","gameUrl":"https://lichess.org/rvHGlZar/black#74","openingTags":""},{"id":"009f8","fen":"8/1p4p1/pb2ppkp/3n4/3P4/P3BN1P/1P2KPP1/8 b - - 0 26","moves":["g6f5","f3h4","f5e4","f2f3"],"rating":1116,"themes":"endgame mate mateIn2 short","gameUrl":"https://lichess.org/paDYagZM/black#52","openingTags":""},{"id":"009hH","fen":"k3r3/p3q3/1pp5/3pnB2/1P1Q4/1KPP4/P4R2/8 w - - 0 41","moves":["f2e2","e5f3","e2e7","f3d4","c3d4","e8e7"],"rating":1877,"themes":"advantage endgame long","gameUrl":"https://lichess.org/LEg5X8PU#81","openingTags":""},{"id":"009oc","fen":"5Q2/pbp3np/1p1pB1pk/1P6/P3q2P/6K1/8/8 b - - 1 32","moves":["e4e6","f8f4","g6g5","f4g5"],"rating":1166,"themes":"endgame mate mateIn2 short","gameUrl":"https://lichess.org/426eHXom/black#64","openingTags":""},{"id":"009tE","fen":"6k1/6pp/p1N2p2/1pP2bP1/5P2/8/PPP5/3K4 b - - 1 28","moves":["f6g5","c6e7","g8f7","e7f5"],"rating":595,"themes":"crushing endgame fork short","gameUrl":"https://lichess.org/fUV1iXBx/black#56","openingTags":""},{"id":"009wR","fen":"1R2R3/p7/1p1k3p/1Pb5/P5p1/6P1/5rKP/8 w - - 6 41","moves":["g2h1","f2f1","h1g2","f1g1"],"rating":1282,"themes":"endgame mate mateIn2 short","gameUrl":"https://lichess.org/tBBaKL5q#81","openingTags":""},{"id":"009zR","fen":"3r4/p1p2ppp/4k3/6Q1/5P2/4P3/Prqn2PP/3R1RK1 w - - 3 22","moves":["g5d8","d2f3","g1h1","c2g2"],"rating":1620,"themes":"discoveredAttack endgame mate mateIn2 short","gameUrl":"https://lichess.org/SctCD3fJ#43","openingTags":""},{"id":"00A5m","fen":"8/1p6/p1p2p2/P3b3/1PK3P1/2PBk3/8/8 b - - 3 60","moves":["e3d2","d3f5","e5c7","f5c8","b7b6","a5b6","c7b6","c8a6"],"rating":1965,"themes":"bishopEndgame crushing endgame quietMove veryLong","gameUrl":"https://lichess.org/Y4Ftfosz/black#120","openingTags":""},{"id":"00A5v","fen":"4r1k1/pp1qr1p1/7p/2pPR3/2P2p2/1PQ2P2/P5PP/4R1K1 w - - 3 33","moves":["c3d2","e7e5","e1e5","e8e5"],"rating":876,"themes":"crushing endgame short","gameUrl":"https://lichess.org/1WXk6Mn2#65","openingTags":""},{"id":"00AB1","fen":"8/7Q/3p1kp1/1p6/2b5/2P4P/5PPK/4q3 b - - 8 36","moves":["e1c3","h7h8","f6e6","h8c3"],"rating":1048,"themes":"crushing endgame short skewer","gameUrl":"https://lichess.org/KQDr21Ph/black#72","openingTags":""},{"id":"00AHY","fen":"r6k/3NR1p1/4n2p/5b2/p6P/6R1/8/6K1 w - - 2 43","moves":["h4h5","a4a3","g3a3","a8a3","e7e8","h8h7"],"rating":1358,"themes":"advantage endgame long","gameUrl":"https://lichess.org/SFxNjHBp#85","openingTags":""},{"id":"00AOH","fen":"6k1/1R6/1p2p1pp/4P3/p1N2P2/6PK/7P/1r6 w - - 0 48","moves":["b7b6","b1b6","c4b6","a4a3","b6d7","a3a2"],"rating":873,"themes":"advancedPawn advantage endgame long","gameUrl":"https://lichess.org/D6NQDAPE#95","openingTags":""},{"id":"00Aae","fen":"1R6/1P6/4pkp1/5p2/3P3p/3KP3/8/1r6 b - - 0 43","moves":["h4h3","b8f8","f6e7","b7b8q","b1b8","f8b8"],"rating":1020,"themes":"advancedPawn clearance crushing endgame long promotion rookEndgame","gameUrl":"https://lichess.org/mLIjph1r/black#86","openingTags":""},{"id":"00AbP","fen":"4r1k1/pp3pp1/2p5/7b/4P2P/2P2N2/PP4K1/3R4 b - - 0 24","moves":["e8e4","d1d8","g8h7","f3g5"],"rating":804,"themes":"crushing endgame short","gameUrl":"https://lichess.org/0NyDgLKw/black#48","openingTags":""},{"id":"00Ac7","fen":"8/2p1pk1p/Pp4p1/8/p1P2P2/3r2P1/3PR2P/3K4 b - - 1 33","moves":["a4a3","a6a7","d3d8","e2e3","a3a2","e3a3"],"rating":2222,"themes":"advancedPawn advantage endgame long rookEndgame","gameUrl":"https://lichess.org/SIcsTksL/black#66","openingTags":""},{"id":"00AcQ","fen":"8/1bpp2k1/1p5r/1P2P3/3P1P2/2P1n1K1/2Q3P1/8 w - - 0 30","moves":["c2a2","h6g6","g3f2","g6g2"],"rating":1710,"themes":"crushing endgame short","gameUrl":"https://lichess.org/MqFuiB4J#59","openingTags":""},{"id":"00AdI","fen":"3r4/4kp1p/1PQ1p1p1/p3b3/1p2P2P/1P6/6PK/8 w - - 1 36","moves":["h2h3","d8d3","g2g3","d3g3","h3h2","g3c3"],"rating":1340,"themes":"crushing discoveredAttack endgame long master","gameUrl":"https://lichess.org/WWyIGzPi#71","openingTags":""},{"id":"00Af3","fen":"8/8/2B2p1p/P4Pp1/3p1kP1/1b1Pb2P/8/4K3 b - - 0 50","moves":["f4g3","a5a6","b3c4","a6a7"],"rating":1119,"themes":"advancedPawn bishopEndgame crushing endgame short","gameUrl":"https://lichess.org/JBQDYKyD/black#100","openingTags":""},{"id":"00AoZ","fen":"8/1R6/p1pk4/6bp/1QP5/P7/KP6/3r2q1 b - - 2 44","moves":["g1c5","b7d7","d6d7","b4c5"],"rating":1033,"themes":"advantage deflection endgame short","gameUrl":"https://lichess.org/356BAYqk/black#88","openingTags":""},{"id":"00Au2","fen":"r5r1/pp2kp2/2p5/3pQ3/3P4/2NB4/PPP2q2/1K6 b - - 1 28","moves":["e7d7","d3f5","f2f5","e5f5"],"rating":949,"themes":"advantage endgame short","gameUrl":"https://lichess.org/kAtvQDbU/black#56","openingTags":""},{"id":"00AuR","fen":"8/4bkp1/R6P/4p3/Pp2P3/1P1rB3/6P1/6K1 b - - 0 33","moves":["d3e3","h6h7","e3e1","g1h2"],"rating":1695,"themes":"advancedPawn crushing endgame short","gameUrl":"https://lichess.org/NQjprK7P/black#66","openingTags":""},{"id":"00Aul","fen":"4r3/1p3R1p/1pb2R1B/7k/6P1/8/r6P/6K1 b - - 0 33","moves":["h5g4","f7g7","g4h4","h6d2","e8e1","d2e1"],"rating":2533,"themes":"crushing endgame long quietMove","gameUrl":"https://lichess.org/WWumMDnF/black#66","openingTags":""},{"id":"00B3B","fen":"2K5/3P4/5b2/p1B5/P7/3k4/6p1/8 w - - 7 77","moves":["d7d8q","f6d8","c8d8","d3c4"],"rating":1482,"themes":"crushing endgame short","gameUrl":"https://lichess.org/b7iJvp5Z#153","openingTags":""},{"id":"00B8m","fen":"3b4/3P4/pp2Pk2/5r2/P6p/3Q4/8/7K w - - 1 43","moves":["d3f5","f6f5","e6e7","d8e7","d7d8q","e7d8"],"rating":1277,"themes":"crushing endgame hangingPiece long","gameUrl":"https://lichess.org/FpH6PRMC#85","openingTags":""},{"id":"00BCa","fen":"1r6/p2kp1P1/3p4/2pP4/2P2B2/pN6/5PK1/8 b - - 1 41","moves":["a3a2","b3c5","d6c5","f4b8","a2a1q","g7g8q"],"rating":1560,"themes":"advancedPawn crushing endgame long master promotion","gameUrl":"https://lichess.org/B8N0BmLk/black#82","openingTags":""},{"id":"00BQD","fen":"4r3/3R1pkp/6p1/1P6/1b6/5B2/1P1p1PPP/3R2K1 w - - 0 36","moves":["d1d2","e8e1"],"rating":685,"themes":"backRankMate endgame mate mateIn1 oneMove","gameUrl":"https://lichess.org/ckr8Ti7I#71","openingTags":""},{"id":"00BSo","fen":"2r3k1/4R1pp/p1p2p2/2p5/2P5/1PbN3P/P4PP1/6K1 w - - 0 25","moves":["d3c5","c3b4","e7a7","b4c5"],"rating":1257,"themes":"advantage endgame short","gameUrl":"https://lichess.org/SjQSgSG9#49","openingTags":""},{"id":"00Bg0","fen":"8/3k4/3P1K2/p2R4/5r2/5P2/8/8 w - - 1 57","moves":["d5f5","f4f5","f6f5","a5a4","f5e4","a4a3","e4d3","a3a2"],"rating":1293,"themes":"advancedPawn crushing endgame quietMove rookEndgame veryLong","gameUrl":"https://lichess.org/Kh8jUvEa#113","openingTags":""},{"id":"00Bg4","fen":"3r2k1/1q3ppp/p2rp3/Qp1B4/7P/P4P2/1PP3P1/1K1R3R b - - 0 21","moves":["d6d5","a5d8","d5d8","d1d8"],"rating":1373,"themes":"backRankMate endgame mate mateIn2 short xRayAttack","gameUrl":"https://lichess.org/6qWf8wOP/black#42","openingTags":""},{"id":"00Bm8","fen":"8/6kp/4b1q1/1p6/1PpPp2Q/2P1P3/r2N2P1/5RK1 w - - 7 34","moves":["d2e4","g6g2"],"rating":1126,"themes":"endgame master mate mateIn1 oneMove","gameUrl":"https://lichess.org/ynNNLRgG#67","openingTags":""},{"id":"00Bn4","fen":"1k6/pp6/4nNp1/P6p/3pr3/7P/3R1PPK/8 b - - 0 40","moves":["e4e5","f6d7","b8c7","d7e5"],"rating":689,"themes":"crushing endgame fork short","gameUrl":"https://lichess.org/jvMUtZF5/black#80","openingTags":""},{"id":"00Bot","fen":"8/5p2/p3kP2/8/5r2/R1P5/4P3/4K3 b - - 2 52","moves":["f4f6","a3a6","e6e5","a6f6"],"rating":818,"themes":"crushing endgame rookEndgame short","gameUrl":"https://lichess.org/FWA12ElZ/black#104","openingTags":""},{"id":"00Bse","fen":"8/5p2/1R4k1/6p1/8/3r2PP/5K2/8 b - - 3 40","moves":["g6h5","g3g4","h5h4","b6h6"],"rating":849,"themes":"endgame mate mateIn2 rookEndgame short","gameUrl":"https://lichess.org/PnM8NvEX/black#80","openingTags":""},{"id":"00C7m","fen":"8/5k2/1P4R1/6PK/1r6/8/8/8 w - - 1 58","moves":["h5h6","b4h4"],"rating":745,"themes":"endgame mate mateIn1 oneMove rookEndgame","gameUrl":"https://lichess.org/ZbuTrTYp#115","openingTags":""},{"id":"00C8e","fen":"8/5p1k/5Ppb/2p3P1/1p6/8/KB5Q/3q4 b - - 4 58","moves":["d1a4","a2b1","a4d1","b2c1"],"rating":1546,"themes":"endgame equality pin short","gameUrl":"https://lichess.org/YqVcRoWF/black#116","openingTags":""},{"id":"00CBU","fen":"8/2pR2kp/pb4p1/8/5p1P/B6K/P1r5/6r1 b - - 3 39","moves":["g7h6","a3f8","h6h5","d7h7"],"rating":1818,"themes":"deflection endgame mate mateIn2 short","gameUrl":"https://lichess.org/8sbUxgqT/black#78","openingTags":""},{"id":"00CMj","fen":"7R/8/8/6p1/2p1p1k1/2PbK2p/P7/8 w - - 4 71","moves":["e3f2","e4e3","f2e3","g4g3"],"rating":1642,"themes":"crushing defensiveMove endgame master short","gameUrl":"https://lichess.org/JJZ8AIxT#141","openingTags":""},{"id":"00CWE","fen":"3r4/1p4p1/2pBkbBp/p1P5/3rp3/P7/1PK2P2/4R3 b - - 1 31","moves":["e6d5","g6f7"],"rating":1509,"themes":"endgame mate mateIn1 oneMove","gameUrl":"https://lichess.org/VCQ4NAd0/black#62","openingTags":""},{"id":"00CcK","fen":"8/8/3p4/4kp2/1pP3pP/1RbK2P1/8/8 w - - 2 42","moves":["b3c3","b4c3","d3c3","f5f4","c3d3","f4g3"],"rating":1691,"themes":"crushing endgame long","gameUrl":"https://lichess.org/y0n2EkgP#83","openingTags":""},{"id":"00Cfq","fen":"6k1/ppR2pp1/4p1p1/4P1N1/3r2P1/1P4K1/P6r/8 b - - 5 30","moves":["h2e2","c7c8","d4d8","c8d8"],"rating":471,"themes":"endgame mate mateIn2 short","gameUrl":"https://lichess.org/Mtebd1Gr/black#60","openingTags":""},{"id":"00CpR","fen":"4r1k1/B7/2p2pK1/3n3p/8/1Q3PP1/P6r/8 b - - 0 31","moves":["e8e5","b3b8","e5e8","b8e8"],"rating":632,"themes":"endgame mate mateIn2 short","gameUrl":"https://lichess.org/tX2xyrPX/black#62","openingTags":""},{"id":"00CtS","fen":"Q5k1/5q2/p2p4/b1p1pr2/P7/6P1/4KP1R/8 b - - 3 38","moves":["g8g7","a8h8","g7g6","h8h6"],"rating":978,"themes":"endgame mate mateIn2 short","gameUrl":"https://lichess.org/yKolw9vl/black#76","openingTags":""},{"id":"00D12","fen":"8/6pp/8/3kP3/1p1P2P1/rPpK3P/4R3/8 b - - 1 39","moves":["a3b3","e5e6","c3c2","d3c2","b3c3","c2d2"],"rating":2250,"themes":"crushing endgame long rookEndgame","gameUrl":"https://lichess.org/iC0vC5to/black#78","openingTags":""},{"id":"00DBP","fen":"5k1r/pp1b1p2/4p2p/2KpP2B/5P2/P5R1/7P/8 b - - 4 34","moves":["h8g8","g3g8","f8g8","c5d6"],"rating":1303,"themes":"advantage endgame master short","gameUrl":"https://lichess.org/Gh4SusNq/black#68","openingTags":""},{"id":"00DEc","fen":"8/p5pk/1p3b1p/3r3P/6P1/3nBN2/P4PK1/4R3 w - - 3 30","moves":["e1d1","d3f4","e3f4","d5d1"],"rating":1091,"themes":"crushing discoveredAttack endgame short","gameUrl":"https://lichess.org/T0mRW37D#59","openingTags":""},{"id":"00DII","fen":"2rr2k1/p5p1/1p5p/2pP1p1P/2q5/P4QR1/5PP1/4R1K1 b - - 3 31","moves":["c4d5","e1e8","g8f7","f3d5","d8d5","e8c8"],"rating":1750,"themes":"advantage endgame intermezzo long","gameUrl":"https://lichess.org/vJnBcDxi/black#62","openingTags":""},{"id":"00DKr","fen":"3r1k2/2p1R3/p2p2n1/1p6/1P1P2Q1/7P/5qPK/3R4 w - - 2 42","moves":["d1e1","g6e7","e1e4","f8e8"],"rating":2090,"themes":"advantage defensiveMove endgame short","gameUrl":"https://lichess.org/mYdqj7UD#83","openingTags":""},{"id":"00DPI","fen":"3r2k1/1B3p1p/6p1/3N4/3p2P1/6r1/5KP1/3R4 b - - 5 35","moves":["g3g4","d5f6","g8g7","f6g4"],"rating":960,"themes":"advantage endgame fork short","gameUrl":"https://lichess.org/Wjj7mxD9/black#70","openingTags":""},{"id":"00DYf","fen":"1R6/6kp/3p1pp1/2r1p3/P7/1P6/2r2PPP/1R4K1 w - - 4 30","moves":["b3b4","c2c1","b1c1","c5c1"],"rating":534,"themes":"backRankMate endgame mate mateIn2 rookEndgame short","gameUrl":"https://lichess.org/nLqNgF9I#59","openingTags":""},{"id":"00DZe","fen":"8/5k2/7p/p1P1bPpP/Pp2P3/1P1pBK2/8/8 w - - 1 47","moves":["e3f2","g5g4","f3e3","e5d4","e3d3","d4f2"],"rating":2397,"themes":"bishopEndgame crushing deflection endgame long master skewer","gameUrl":"https://lichess.org/MVHl8Zy9#93","openingTags":""},{"id":"00DcC","fen":"5k2/6pp/p1b3P1/2N2P1r/p7/8/1KP5/5R2 b - - 0 36","moves":["h7h6","c5e6","f8e7","e6g7"],"rating":1390,"themes":"crushing deflection endgame master short","gameUrl":"https://lichess.org/mWXM78x4/black#72","openingTags":""},{"id":"00Dke","fen":"5bk1/2Q2p1p/5qp1/p7/P1Bp4/1Pr4P/5PP1/3R2K1 b - - 5 27","moves":["c3c2","c4f7","g8g7","c7c2"],"rating":1197,"themes":"crushing discoveredAttack endgame master short","gameUrl":"https://lichess.org/SOcXiDBN/black#54","openingTags":""},{"id":"00Dt6","fen":"5rk1/p4p1p/4p1p1/5nq1/8/5QPP/5PK1/2RR4 w - - 6 35","moves":["c1b1","f5h4","g2f1","h4f3"],"rating":1204,"themes":"crushing endgame pin short","gameUrl":"https://lichess.org/TTZUVvIZ#69","openingTags":""},{"id":"00Dxh","fen":"8/8/8/6R1/2pk2P1/1r3K1P/8/8 w - - 0 48","moves":["f3g2","c4c3","g5g7","c3c2"],"rating":1352,"themes":"advancedPawn crushing endgame master masterVsMaster rookEndgame short","gameUrl":"https://lichess.org/iUtKfI3K#95","openingTags":""},{"id":"00DzI","fen":"8/2p5/2P2k1p/2pKp3/3p2P1/3B1p2/7P/8 w - - 0 42","moves":["d5c5","f6g5","c5d5","g5f4","h2h4","f4e3"],"rating":2590,"themes":"bishopEndgame crushing endgame long","gameUrl":"https://lichess.org/5cjWO8nE#83","openingTags":""},{"id":"00E4Z","fen":"1r4k1/p4p1p/6p1/3rb3/K7/2PpB3/1P1R1PPP/7R w - - 1 25","moves":["h1d1","d5d6","b2b4","e5c3","e3c5","d6a6"],"rating":2290,"themes":"advantage endgame long master masterVsMaster quietMove","gameUrl":"https://lichess.org/YRE2uOtG#49","openingTags":""},{"id":"00EBZ","fen":"3rr1k1/p4pp1/1pp4p/3pPQ2/1P3P2/2P3qP/P2R2P1/5RK1 w - - 1 24","moves":["f1f3","g3e1","g1h2","e1d2"],"rating":831,"themes":"crushing endgame fork short","gameUrl":"https://lichess.org/FrMf0UcF#47","openingTags":""},{"id":"00EEp","fen":"3k2q1/pb1p3p/1p1P4/2p5/2P2Q1K/8/P7/5R2 b - - 2 36","moves":["b7g2","f4f8","g8f8","f1f8"],"rating":1646,"themes":"endgame mate mateIn2 short","gameUrl":"https://lichess.org/dWHeDlRz/black#72","openingTags":""},{"id":"00EJb","fen":"6k1/5pp1/2R1p2p/8/P1B5/1P4P1/1q3Q1P/3r2K1 w - - 1 35","moves":["g1g2","d1d2","c6c8","g8h7","c4d3","f7f5","c8c2","d2f2"],"rating":2288,"themes":"advantage endgame pin veryLong","gameUrl":"https://lichess.org/ki9WEgCM#69","openingTags":""},{"id":"00EUu","fen":"8/5P1P/1p4K1/8/6P1/8/2p5/k6r b - - 0 62","moves":["h1h6","g6h6","c2c1q","g4g5","c1c6","h6g7"],"rating":2515,"themes":"crushing defensiveMove endgame long","gameUrl":"https://lichess.org/u5HjwjcV/black#124","openingTags":""},{"id":"00EWi","fen":"8/8/1R3pkp/1pP5/1P3PKP/r7/8/8 w - - 2 48","moves":["b6b5","f6f5"],"rating":896,"themes":"endgame mate mateIn1 oneMove rookEndgame","gameUrl":"https://lichess.org/RxrVCbwq#95","openingTags":""},{"id":"00EoE","fen":"r1b1k3/ppr4p/5p2/5p2/8/2P3P1/P4PP1/4RK1R b q - 1 23","moves":["e8f7","h1h7","f7g6","h7c7"],"rating":974,"themes":"crushing endgame short skewer","gameUrl":"https://lichess.org/25vOJGCF/black#46","openingTags":""},{"id":"00Erm","fen":"3r4/6k1/1p1pr1p1/p1p2p2/PnP1p1P1/1P6/3R1PBP/4R1K1 b - - 0 29","moves":["b4d3","d2d3","e4d3","e1e6","d3d2","g2f3"],"rating":1402,"themes":"crushing defensiveMove endgame long","gameUrl":"https://lichess.org/kE9mu3xO/black#58","openingTags":""},{"id":"00F1l","fen":"8/2k1b3/5p2/RBpK1Pp1/Pp1p2P1/3P4/2r5/8 b - - 2 45","moves":["b4b3","a5a7","c7b8","a7e7"],"rating":836,"themes":"crushing endgame master short skewer","gameUrl":"https://lichess.org/By9yxCU0/black#90","openingTags":""},{"id":"00F2o","fen":"6k1/4qpp1/3p3p/8/2BP4/1Pn5/2Qn1PPP/6K1 w - - 0 29","moves":["c2c3","e7e1","c4f1","e1f1"],"rating":978,"themes":"endgame mate mateIn2 short","gameUrl":"https://lichess.org/Xik1cEk4#57","openingTags":""},{"id":"00F3S","fen":"3r1rk1/5ppp/p5q1/1p1P4/2PpP3/P6Q/B4PPP/2R3K1 b - - 0 29","moves":["g6e4","a2b1","e4b1","c1b1"],"rating":1330,"themes":"crushing endgame short","gameUrl":"https://lichess.org/kCnMPvjO/black#58","openingTags":""},{"id":"00FAe","fen":"5Rbk/6pp/8/p3P3/Pp1pq3/8/1P4PP/3Q2K1 w - - 1 35","moves":["d1b3","e4e1","f8f1","e1f1","g1f1","g8b3"],"rating":1694,"themes":"crushing endgame long","gameUrl":"https://lichess.org/EvpVpm3n#69","openingTags":""},{"id":"00FHO","fen":"8/1pp5/p2p3p/3P1Pk1/P3K1P1/1P5R/8/2r5 w - - 1 39","moves":["e4f3","c1c3","f3g2","c3h3","g2h3","h6h5","g4h5","g5h5"],"rating":2236,"themes":"crushing endgame rookEndgame veryLong","gameUrl":"https://lichess.org/0KBMAMQh#77","openingTags":""},{"id":"00FHX","fen":"2r3k1/5p1p/4pP2/3p3P/8/5P2/p1b3P1/2R3K1 b - - 0 30","moves":["c2b1","c1c8"],"rating":493,"themes":"endgame hangingPiece mate mateIn1 oneMove","gameUrl":"https://lichess.org/rztVgThB/black#60","openingTags":""},{"id":"00FND","fen":"8/1P6/8/7p/3P4/3k1p1P/4p3/3K4 w - - 0 49","moves":["d1e1","d3e3","h3h4","f3f2"],"rating":1965,"themes":"advancedPawn endgame mate mateIn2 pawnEndgame short","gameUrl":"https://lichess.org/C4mOV5Og#97","openingTags":""},{"id":"00FOM","fen":"8/5k2/8/3pPPB1/1p4K1/1b6/8/8 b - - 0 45","moves":["b3d1","g4h4","d1a4","e5e6"],"rating":2594,"themes":"bishopEndgame crushing defensiveMove endgame short","gameUrl":"https://lichess.org/9wp9pR0Q/black#90","openingTags":""},{"id":"00FON","fen":"1k6/8/8/6p1/1pp5/p4PP1/N1P4P/7K w - - 0 38","moves":["h2h4","b4b3","c2b3","c4b3"],"rating":936,"themes":"crushing endgame knightEndgame short","gameUrl":"https://lichess.org/D9f2JIE8#75","openingTags":""},{"id":"00FPo","fen":"7R/1K3p2/6k1/PP4p1/8/6rp/8/8 b - - 2 47","moves":["g5g4","a5a6","h3h2","h8h2"],"rating":1793,"themes":"crushing endgame rookEndgame short","gameUrl":"https://lichess.org/6C03NLdu/black#94","openingTags":""},{"id":"00Feu","fen":"4R1k1/p4r1p/1pp2rp1/8/5B1q/4QP1P/P1P2PK1/8 b - - 2 28","moves":["f7f8","f4g5","h4g5","e3g5"],"rating":2016,"themes":"crushing endgame fork short","gameUrl":"https://lichess.org/IEDYgK0q/black#56","openingTags":""},{"id":"00G1l","fen":"5k2/1R6/3pp1P1/2p5/1pr1PK2/5P2/8/8 b - - 0 60","moves":["c4c1","f4g5","c1g1","g5f6"],"rating":1838,"themes":"crushing defensiveMove endgame master rookEndgame short","gameUrl":"https://lichess.org/IWYBiMcT/black#120","openingTags":""},{"id":"00G81","fen":"3r4/5k2/p4Pp1/2pK2Pp/2R5/P7/8/8 w - - 7 51","moves":["d5c5","d8c8","c5d4","c8c4","d4c4","h5h4"],"rating":1399,"themes":"crushing defensiveMove endgame long rookEndgame","gameUrl":"https://lichess.org/Q8HZlLcF#101","openingTags":""},{"id":"00GY4","fen":"3k2r1/pR5R/3r4/4p1q1/7Q/3Pn1PP/PP5K/8 b - - 0 27","moves":["g5h4","b7b8"],"rating":1219,"themes":"endgame mate mateIn1 oneMove","gameUrl":"https://lichess.org/uDdpetkC/black#54","openingTags":""},{"id":"00GiQ","fen":"5r2/1p3p1k/6pp/p1qp1P2/7Q/5N2/6PP/5N1K b - - 4 31","moves":["b7b5","f3g5","h7g7","f5f6","g7f6","g5e4"],"rating":1854,"themes":"attraction crushing doubleCheck endgame long pin","gameUrl":"https://lichess.org/XLwP4TgT/black#62","openingTags":""},{"id":"00Gt0","fen":"R7/4k3/5p2/3p2p1/4b2p/2K1P2P/5PP1/8 w - - 2 47","moves":["f2f3","d5d4","c3d4","e4a8"],"rating":1052,"themes":"crushing discoveredAttack endgame master short","gameUrl":"https://lichess.org/5OO7Wczb#93","openingTags":""},{"id":"00GuG","fen":"2R5/7p/1K4k1/8/5p2/5n2/8/8 w - - 0 63","moves":["c8c6","g6f5","b6c5","h7h5"],"rating":2511,"themes":"advantage defensiveMove endgame master short","gameUrl":"https://lichess.org/6xU6SaA2#125","openingTags":""},{"id":"00Gvp","fen":"8/2kn1p2/8/3P4/R7/2P1N3/1r2K3/8 w - - 13 70","moves":["e2d3","d7c5","d3d4","c5a4"],"rating":979,"themes":"advantage endgame fork short","gameUrl":"https://lichess.org/CIq1kOGh#139","openingTags":""},{"id":"00Gvr","fen":"8/1b3pp1/1k4Pp/4K2P/4PP2/8/8/8 b - - 0 46","moves":["f7f6","e5e6","b7e4","e6f7"],"rating":1134,"themes":"advantage bishopEndgame defensiveMove endgame master short","gameUrl":"https://lichess.org/tHhRpYsL/black#92","openingTags":""},{"id":"00Gz6","fen":"r7/p3qkp1/1p4p1/3Nn3/Q7/4PP2/PP3K2/6R1 b - - 0 25","moves":["e7c5","a4f4","f7e6","f4e4","a8f8","g1g6"],"rating":2273,"themes":"crushing endgame fork long pin","gameUrl":"https://lichess.org/F80hPRFE/black#50","openingTags":""},{"id":"00H2L","fen":"8/8/2p2p2/p4P1p/Pk5P/4K1P1/8/8 w - - 1 39","moves":["e3d3","c6c5","d3e2","c5c4","g3g4","h5g4"],"rating":2364,"themes":"crushing endgame long pawnEndgame quietMove","gameUrl":"https://lichess.org/UMoEkwn0#77","openingTags":""},{"id":"00H5n","fen":"8/5Rpk/3p3p/p1qPp3/P3n3/5N1P/1Q3PPK/2r5 b - - 0 35","moves":["e4f2","b2b7","c1h1","h2g3","f2e4","g3g4","e4f6","f7f6","c5b4","b7b4"],"rating":2415,"themes":"advantage endgame pin quietMove veryLong","gameUrl":"https://lichess.org/84oSZ8O3/black#70","openingTags":""},{"id":"00H87","fen":"6k1/2q1pp2/p5pB/2p4n/3pP1Q1/P2P3P/1r4P1/5RK1 b - - 1 30","moves":["c7g3","g4c8","g8h7","f1f7","h5g7","f7g7","h7h6","c8h8","h6g5","g7g6","g5g6","h8g8","g6f6","g8g3"],"rating":1958,"themes":"attraction crushing deflection endgame sacrifice skewer veryLong","gameUrl":"https://lichess.org/hQEAqclb/black#60","openingTags":""},{"id":"00H8a","fen":"5bk1/2R4p/6p1/8/2b1NP1P/4P1K1/r7/8 b - - 2 45","moves":["c4d3","e4f6","g8h8","c7h7"],"rating":793,"themes":"arabianMate endgame mate mateIn2 short","gameUrl":"https://lichess.org/7UUQgJDC/black#90","openingTags":""},{"id":"00H9n","fen":"7k/6p1/8/4p3/Pp1b4/1P3b1q/3Q2P1/5RK1 w - - 0 45","moves":["d2d4","h3g2"],"rating":893,"themes":"endgame master mate mateIn1 oneMove","gameUrl":"https://lichess.org/MaGCLflH#89","openingTags":""},{"id":"00HAM","fen":"R2q1r1k/1p3Qpp/1n6/3P2pP/2PP2P1/1P6/2K5/5R2 b - - 0 29","moves":["d8a8","f7f8","a8f8","f1f8"],"rating":953,"themes":"backRankMate endgame mate mateIn2 short","gameUrl":"https://lichess.org/BgVpYpY8/black#58","openingTags":""},{"id":"00HDS","fen":"6k1/pp2R3/6pp/8/3r4/P4BbP/1P4P1/6K1 b - - 3 38","moves":["d4c4","f3d5","g8f8","e7f7","f8e8","d5c4"],"rating":1506,"themes":"crushing endgame exposedKing fork long","gameUrl":"https://lichess.org/K4Eh4BSQ/black#76","openingTags":""},{"id":"00HEx","fen":"b7/5pk1/R3pn1p/8/3NP3/5P2/6PP/2rB2K1 w - - 1 31","moves":["a6a8","c1d1","g1f2","d1d4"],"rating":975,"themes":"crushing endgame fork hangingPiece master short","gameUrl":"https://lichess.org/Kl5pBLfs#61","openingTags":""},{"id":"00HGG","fen":"8/pp6/2p1kpp1/3p4/3P1PPp/1P3K2/P1P4P/8 w - - 0 31","moves":["g4g5","f6g5","f3g4","g5f4","g4f4","e6f6"],"rating":1682,"themes":"crushing defensiveMove endgame long pawnEndgame","gameUrl":"https://lichess.org/JyqJknFl#61","openingTags":""},{"id":"00HHN","fen":"4r2k/p6p/1p3R2/2p5/2P5/1P4R1/r5PP/2K5 w - - 0 32","moves":["f6f7","e8e1"],"rating":848,"themes":"endgame mate mateIn1 oneMove rookEndgame","gameUrl":"https://lichess.org/tMmxk7ja#63","openingTags":""},{"id":"00HIV","fen":"8/8/1p1k1n1p/4p3/1PP2pp1/3K4/3N1PPP/8 b - - 3 37","moves":["h6h5","d2e4","f6e4","d3e4"],"rating":862,"themes":"crushing endgame knightEndgame master short","gameUrl":"https://lichess.org/1mef1VFJ/black#74","openingTags":""},{"id":"00HPz","fen":"6r1/7p/2pk1p2/P2p4/P2KbP2/4P3/4NR1P/8 w - - 1 35","moves":["e2c3","c6c5"],"rating":691,"themes":"endgame master mate mateIn1 oneMove","gameUrl":"https://lichess.org/ElfQqRYp#69","openingTags":""},{"id":"00HZC","fen":"4r1k1/pp1qn3/2p4R/6p1/3P1rR1/3Q2P1/PP3P1P/6K1 b - - 0 31","moves":["f4g4","d3h7","g8f8","h6f6"],"rating":1518,"themes":"endgame mate mateIn2 short","gameUrl":"https://lichess.org/SPwu7cIA/black#62","openingTags":""},{"id":"00HZa","fen":"6k1/6pp/1p6/p1n5/4qp2/1P2PN2/P4PPP/3Q2K1 b - - 0 28","moves":["f4e3","d1d8","g8f7","f3g5","f7g6","g5e4"],"rating":937,"themes":"crushing endgame fork long master","gameUrl":"https://lichess.org/WRMbDs53/black#56","openingTags":""},{"id":"00HeG","fen":"8/1p5k/p3pQq1/3pP3/2p3P1/2P5/PP6/2K5 w - - 3 33","moves":["f6h4","g6h6","h4h6","h7h6"],"rating":854,"themes":"crushing endgame master queenEndgame short","gameUrl":"https://lichess.org/Fe29uA9P#65","openingTags":""},{"id":"00Huv","fen":"3r2q1/5prk/p3pQpp/1p2P3/2p4R/2P2P1P/PPB2P2/6K1 b - - 2 29","moves":["g8f8","h4h6","h7g8","f6h4"],"rating":1870,"themes":"clearance crushing endgame short","gameUrl":"https://lichess.org/KGI2jWmb/black#58","openingTags":""},{"id":"00Hxb","fen":"1rbr1k2/p4ppp/2B5/2pR1NP1/2P5/P7/7P/4R1K1 b - - 0 27","moves":["d8d5","e1e8"],"rating":1125,"themes":"endgame mate mateIn1 oneMove","gameUrl":"https://lichess.org/FW9LwaHK/black#54","openingTags":""},{"id":"00HzH","fen":"2r2Qk1/p2q2p1/1p2p1Np/3p3P/3Pb1P1/2P5/PP3R2/6K1 b - - 4 33","moves":["c8f8","f2f8","g8h7","f8h8"],"rating":775,"themes":"endgame hookMate mate mateIn2 short","gameUrl":"https://lichess.org/XB8lgZ9N/black#66","openingTags":""},{"id":"00HzX","fen":"4r1k1/5pp1/2R4p/1p6/8/1PP3QP/2q2PP1/6K1 w - - 0 29","moves":["c6h6","c2c1","g1h2","c1h6"],"rating":1638,"themes":"crushing endgame fork short","gameUrl":"https://lichess.org/tKKATkce#57","openingTags":""}]'),Xj={opening:Wj,middlegame:Hj,endgame:Yj};function Jj(){const{user:t}=$s(),[e,n]=T.useState(null),[r,o]=T.useState(null),[d,f]=T.useState(""),[g,b]=T.useState("w"),[w,k]=T.useState(null),[C,N]=T.useState("Select a category to start."),[j,M]=T.useState("easy"),[$,Q]=T.useState("w"),[ae,X]=T.useState(!1),[P,W]=T.useState(null),[u,ye]=T.useState(!1),[ve,be]=T.useState([]),[Ye,me]=T.useState(null),Me=T.useRef(0),Ce=$r(t?.boardTheme).colors,{key:$e,pieces:ce}=T.useMemo(()=>Tr(t?.pieceTheme),[t?.pieceTheme]),ue=O=>{const ge=Xj[O]||[];if(!ge.length)return;const Se=(()=>{const De=ge.filter(qe=>{const bt=qe.rating??0;return j==="easy"?bt<1e3:j==="intermediate"?bt>=1e3&&bt<2e3:bt>=2e3&&bt<=2800});return De.length?De:ge})(),Te=Se[Math.floor(Math.random()*Se.length)];o(Te);const Ke=new wt(Te.fen);Me.current=0;let J=[];if(Te.moves.length>0){const De=Te.moves[Me.current],qe=Ke.move(U(De));qe&&(J=[qe.from,qe.to],Me.current+=1)}f(Ke.fen()),be(J),Q(Ke.turn()),b("w"),k(null),N(Te.themes||Te.openingTags||Te.id),X(!1),ye(!1)};T.useEffect(()=>{e&&ue(e)},[e,j]);const ne=T.useMemo(()=>{const ge=(d?new wt(d):new wt).board();return g==="w"?ge:ge.slice().reverse().map(Se=>Se.slice().reverse())},[d,g]),V=T.useMemo(()=>{try{return new wt(d).turn()}catch{return"w"}},[d]),z=(O,ge)=>{const Se="abcdefgh"[g==="w"?ge:7-ge],Te=g==="w"?8-O:O+1;return`${Se}${Te}`},fe=O=>O?O.color==="w"?ce.w[O.type]:ce.b[O.type]:null,oe=O=>{if(!O)return"";if($e==="chesscom"){if(O.type==="p")return O.color==="w"?"scale-110":"scale-90";if(O.type==="k"&&O.color==="b")return"scale-110 translate-y-[1px]"}return $e==="freestyle"&&O.type==="p"&&O.color==="b"?"scale-110":""},U=O=>{const ge=O.slice(0,2),Se=O.slice(2,4),Te=O[4];return{from:ge,to:Se,promotion:Te}},Z=(O,ge,Se)=>{let Te=[];for(;Me.current<ge.length;){const Ke=ge[Me.current],J=O.move(U(Ke));if(!J||(Me.current+=1,Te=[J.from,J.to],O.turn()===Se))break}f(O.fen()),Te.length&&be(Te)},xe=(O,ge)=>{if(!r||ae)return;const Se=new wt(d);if(Se.turn()!==$){N($==="w"?"White to move.":"Black to move."),W({message:"Wait for your move.",tone:"error"});return}let Te=null;try{Te=Se.move({from:O,to:ge,promotion:"q"})}catch{Te=null}if(!Te){k(null);return}const Ke=r.moves[Me.current];if(!Ke){k(null);return}if(`${Te.from}${Te.to}${Te.promotion||""}`!==Ke){N("Incorrect move. Try again."),W({message:"Incorrect move. Try again.",tone:"error"}),k(null);return}if(Me.current+=1,f(Se.fen()),k(null),be([Te.from,Te.to]),Me.current>=r.moves.length){Ve(r);return}Z(Se,r.moves,$),Me.current>=r.moves.length?Ve(r):N("Your turn.")},Be=(O,ge)=>{const Se=z(O,ge),Te=new wt(d);if(w===Se){k(null);return}if(w){xe(w,Se);return}const Ke=Te.get(Se);Ke&&Ke.color===Te.turn()&&k(Se)},Ze=()=>{n(null),o(null),f(""),k(null),X(!1),Me.current=0,N("Select a category to start.")},Ve=O=>{X(!0),N("Puzzle solved! +100 XP"),W({message:"Puzzle solved! +100 XP",tone:"success"}),t?.id&&cv(t.id,100,{source:"puzzle",subsectionId:O.id}),setTimeout(()=>{e&&ue(e)},500)};return l.jsx(Js,{children:l.jsxs("div",{className:"flex flex-col gap-4 text-white",children:[!e&&l.jsx("div",{className:"flex min-h-[60vh] items-center justify-center",children:l.jsxs("div",{className:"rounded-2xl border border-white/10 bg-black px-6 py-6 space-y-3 text-center max-w-sm w-full",children:[l.jsx("div",{className:"text-lg font-semibold",children:"Choose puzzle category"}),l.jsxs("div",{className:"space-y-2",children:[l.jsxs("div",{className:"grid grid-cols-3 text-xs text-emerald-300 px-1 text-center",children:[l.jsx("span",{children:"Easy"}),l.jsx("span",{children:"Intermediate"}),l.jsx("span",{children:"Advanced"})]}),l.jsx("input",{type:"range",min:0,max:2,step:1,value:j==="easy"?0:j==="intermediate"?1:2,onChange:O=>{const ge=Number(O.target.value);M(ge===0?"easy":ge===1?"intermediate":"advanced")},className:"w-full accent-emerald-400"}),l.jsxs("div",{className:"flex justify-between px-1 text-emerald-300",children:[l.jsx("span",{className:"text-lg leading-none",children:""}),l.jsx("span",{className:"text-lg leading-none",children:""}),l.jsx("span",{className:"text-lg leading-none",children:""})]})]}),l.jsx("div",{className:"flex flex-col gap-3 w-full",children:["endgame","middlegame","opening"].map(O=>{const ge=O==="endgame"?"Endgame":O==="middlegame"?"Middle Game":"Opening";return l.jsx("button",{onClick:()=>n(O),className:"rounded-xl border border-white/10 bg-white/5 hover:bg-white/10 px-4 py-3 text-sm uppercase tracking-wide",children:ge},O)})})]})}),e&&r&&l.jsxs("div",{className:"flex flex-col items-center gap-4",children:[l.jsx("div",{className:"relative block pb-6 sm:pb-8 w-full max-w-[720px] mx-auto",children:l.jsx("div",{className:"rounded-[28px] overflow-hidden border border-white/10 shadow-[0_20px_60px_rgba(0,0,0,0.45)] w-full",style:{backgroundColor:Ce.dark},children:l.jsx("div",{className:"relative grid grid-cols-8 grid-rows-8 w-full max-w-[720px] aspect-square mx-auto",children:ne.map((O,ge)=>O.map((Se,Te)=>{const Ke=z(ge,Te),J=(ge+Te)%2===0,De=w===Ke,qe=ve.includes(Ke),Ie=(()=>{if(!w)return[];try{return new wt(d).moves({square:w,verbose:!0}).map(nt=>nt.to)}catch{return[]}})().includes(Ke);return l.jsxs("button",{onClick:()=>Be(ge,Te),draggable:!!Se&&Se.color===V,onDragStart:Xe=>{if(Se&&Se.color===V){const nt=z(ge,Te);me(nt),Xe.dataTransfer?.setData("text/plain",nt)}else Xe.preventDefault()},onDragOver:Xe=>Xe.preventDefault(),onDrop:Xe=>{Xe.preventDefault();const nt=Ye||Xe.dataTransfer?.getData("text/plain"),Ut=z(ge,Te);nt&&(me(null),xe(nt,Ut))},onDragEnd:()=>me(null),className:`w-full h-full flex items-center justify-center text-2xl font-semibold relative overflow-hidden ${De?"ring-2 ring-pink-400":""} ${Se?"cursor-piece":"cursor-auto"}`,style:{backgroundColor:J?Ce.light:Ce.dark,...Se?{"--cursor-open":`url(${fv}) 8 8, grab`,"--cursor-closed":`url(${rh}) 8 8, grabbing`}:{}},children:[qe&&l.jsx("div",{className:"absolute inset-0 bg-yellow-400/40 pointer-events-none"}),Ie&&l.jsx("div",{className:"absolute inset-0 z-20 pointer-events-none flex items-center justify-center",children:l.jsx("div",{className:"h-3 w-3 rounded-full bg-pink-400/80"})}),Se?l.jsx("img",{src:fe(Se)||"",alt:"",className:`relative z-10 w-full h-full object-contain p-1 ${oe(Se)}`}):null]},`${ge}-${Te}`)}))})})}),l.jsx("div",{className:"rounded-2xl border border-white/10 bg-black p-5 space-y-3 text-white w-full max-w-[720px] mx-auto",children:l.jsxs("div",{className:"flex justify-center gap-3 flex-wrap",children:[l.jsx(Oe,{variant:"outline",className:"min-w-[120px]",onClick:()=>{e&&ue(e)},children:"Next puzzle"}),l.jsx(Oe,{variant:"outline",className:"min-w-[120px]",onClick:Ze,children:"New category"}),l.jsx(Oe,{variant:"outline",className:"min-w-[120px]",onClick:()=>b(O=>O==="w"?"b":"w"),children:"Perspective"}),l.jsx(Oe,{variant:"outline",className:"min-w-[120px]",onClick:()=>{if(!r||ae)return;ye(!0);const O=new wt(r.fen);Me.current=0,Z(O,r.moves,O.turn())},children:"Reveal solution"})]})})]}),P&&l.jsx("div",{className:"fixed bottom-4 right-4 z-50",children:l.jsxs("div",{className:`rounded-lg px-4 py-3 shadow-lg flex items-center gap-3 border ${P.tone==="success"?"bg-emerald-600 text-white border-emerald-300/70":"bg-red-600 text-white border-red-300/70"}`,children:[l.jsx("span",{children:P.message}),l.jsx("button",{className:"text-white/80 hover:text-white",onClick:()=>W(null),"aria-label":"Dismiss notification",children:"x"})]})})]})})}function Zj(){const{user:t}=$s(),e=!!t?.isAdmin,[n,r]=T.useState([]),[o,d]=T.useState(null),[f,g]=T.useState(""),[b,w]=T.useState(""),[k,C]=T.useState(!1),[N,j]=T.useState(null),[M,$]=T.useState(""),[Q,ae]=T.useState(!1),[X,P]=T.useState(null),W=T.useRef(null);T.useEffect(()=>{const me=document.body.style.backgroundColor;return document.body.style.backgroundColor="black",()=>{document.body.style.backgroundColor=me}},[]),T.useEffect(()=>{const me=x8(Me=>{r(Me),!o&&Me.length?d(Me[0].id):o&&!Me.some(Ce=>Ce.id===o)&&d(Me[0]?.id||null)},t);return()=>me()},[t,o]);const u=T.useMemo(()=>n.find(me=>me.id===o)||null,[n,o]),ye=T.useMemo(()=>{const me=M.trim().toLowerCase();return me?n.filter(Me=>Me.title.toLowerCase().includes(me)||Me.url.toLowerCase().includes(me)):n},[n,M]),ve=async()=>{if(!e){j("Only admins can add books.");return}if(!f.trim()||!b.trim()&&!X){j("Title and a PDF link or file are required.");return}j(null),C(!0);try{await P8(t,{title:f.trim(),url:(X||b).trim()}),g(""),w(""),P(null),ae(!1)}catch(me){j(me?.message||"Could not add book right now.")}finally{C(!1)}},be=me=>{if(!me)return;if(me.type!=="application/pdf"){j("Only PDF files are supported.");return}if(me.size>15*1024*1024){j("Please use PDFs under 15MB.");return}const Me=new FileReader;Me.onload=()=>{const Ce=Me.result;typeof Ce=="string"&&(P(Ce),w(""))},Me.readAsDataURL(me)},Ye=async me=>{if(e)try{await _8(t,me)}catch(Me){console.warn("Failed to remove book",Me)}};return l.jsxs(Js,{children:[l.jsx("div",{className:"relative left-1/2 right-1/2 w-screen -translate-x-1/2 bg-black text-white h-screen overflow-hidden",children:l.jsxs("div",{className:"w-full h-full px-3 sm:px-6 py-2 sm:py-3 flex flex-col space-y-3",children:[l.jsxs("div",{className:"flex flex-col gap-3 sm:flex-row sm:items-center sm:justify-between",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("h1",{className:"text-3xl font-extrabold tracking-tight",children:"Square Base"}),e&&l.jsx("button",{onClick:()=>ae(!0),className:"h-10 w-10 rounded-full bg-white/10 border border-white/20 flex items-center justify-center hover:bg-white/15 transition","aria-label":"Add book",children:l.jsx(fg,{className:"h-5 w-5"})})]}),l.jsx("div",{className:"w-full sm:max-w-md",children:l.jsx("input",{value:M,onChange:me=>$(me.target.value),placeholder:"Search books by title or URL",className:"w-full rounded-full bg-white/5 border border-white/10 px-4 py-3 text-sm text-white focus:outline-none focus:ring-2 focus:ring-white/40"})})]}),l.jsxs("div",{className:"grid gap-3 lg:grid-cols-[320px,1fr] flex-1 min-h-0",children:[l.jsxs("div",{className:"rounded-2xl border border-white/10 bg-[#0b0b0f] p-3 space-y-3 overflow-hidden",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx("h2",{className:"text-lg font-semibold",children:"Library"}),l.jsxs("span",{className:"text-xs text-white/50",children:[n.length," item",n.length===1?"":"s"]})]}),l.jsxs("div",{className:"space-y-2 h-full max-h-full overflow-y-auto pr-1",children:[ye.length===0&&l.jsx("div",{className:"text-sm text-white/60 rounded-xl border border-white/10 bg-white/5 px-3 py-3",children:"No books found."}),ye.map(me=>l.jsxs("div",{className:`w-full text-left rounded-xl px-3 py-3 border transition ${o===me.id?"border-white/50 bg-white/10":"border-white/10 bg-white/5 hover:bg-white/10"}`,children:[l.jsxs("div",{className:"flex items-center justify-between gap-2",children:[l.jsx("div",{className:"font-semibold",children:me.title}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(Oe,{variant:"outline",size:"sm",className:"text-xs px-2 py-1",onClick:()=>d(me.id),children:"Select"}),e&&l.jsx("button",{className:"text-xs text-white/60 hover:text-red-400",onClick:()=>Ye(me.id),children:"Remove"})]})]}),l.jsx("div",{className:"text-xs text-white/50 truncate",children:me.url}),me.addedByName&&l.jsxs("div",{className:"text-[11px] text-white/40 mt-1",children:["Added by ",me.addedByName]})]},me.id))]})]}),l.jsx("div",{className:"rounded-2xl border border-white/10 bg-[#0b0b0f] p-3 min-h-0 flex flex-col",children:u?l.jsxs("div",{className:"flex flex-col h-full space-y-3",children:[l.jsx("div",{className:"flex items-center justify-between",children:l.jsxs("div",{children:[l.jsx("div",{className:"text-lg font-semibold",children:u.title}),l.jsx("div",{className:"text-xs text-white/50 truncate",children:u.url})]})}),l.jsx("div",{className:"flex-1 rounded-xl overflow-hidden border border-white/10 bg-black min-h-0",children:l.jsx("iframe",{title:u.title,src:`${u.url}#toolbar=1&view=FitH`,className:"w-full h-full",allow:"fullscreen"})})]}):l.jsx("div",{className:"h-full flex items-center justify-center text-white/60 text-sm",children:"Select a book to start reading."})})]})]})}),Q&&l.jsx("div",{className:"fixed inset-0 z-40 flex items-center justify-center bg-black/70 px-4",children:l.jsxs("div",{className:"w-full max-w-md rounded-2xl bg-[#0b0b0f] border border-white/10 p-6 space-y-4",children:[l.jsxs("div",{className:"flex items-start justify-between",children:[l.jsxs("div",{children:[l.jsx("div",{className:"text-lg font-semibold",children:"Add PDF"}),l.jsx("div",{className:"text-xs text-white/60",children:"Provide a direct link or import a PDF file."})]}),l.jsx("button",{className:"h-9 w-9 rounded-full bg-white/10 hover:bg-white/20 flex items-center justify-center",onClick:()=>{ae(!1),j(null),P(null),w(""),g("")},children:"X"})]}),l.jsxs("div",{className:"space-y-3",children:[l.jsx("input",{value:f,onChange:me=>g(me.target.value),placeholder:"Book title",className:"w-full rounded-xl bg-white/5 border border-white/10 px-3 py-2 text-sm text-white focus:outline-none focus:ring-2 focus:ring-white/40"}),l.jsx("input",{value:b,onChange:me=>{w(me.target.value),P(null)},placeholder:"Direct PDF URL (https://...)",className:"w-full rounded-xl bg-white/5 border border-white/10 px-3 py-2 text-sm text-white focus:outline-none focus:ring-2 focus:ring-white/40"}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("input",{type:"file",accept:"application/pdf",ref:W,className:"hidden",onChange:me=>be(me.target.files?.[0]||null)}),l.jsxs(Oe,{variant:"outline",className:"flex items-center gap-2",onClick:()=>W.current?.click(),children:[l.jsx(S4,{className:"h-4 w-4"}),"Import PDF"]}),X&&l.jsx("span",{className:"text-xs text-white/60 truncate",children:"File loaded"})]}),N&&l.jsx("div",{className:"text-xs text-red-400",children:N})]}),l.jsxs("div",{className:"flex gap-2 justify-end",children:[l.jsx(Oe,{variant:"ghost",onClick:()=>{ae(!1),j(null),P(null),w(""),g("")},children:"Cancel"}),l.jsx(Oe,{variant:"outline",onClick:ve,disabled:k,children:k?"Adding...":"Save"})]})]})})]})}function Sr({children:t}){const{user:e,loading:n}=$s(),[,r]=fa(),o=!n&&!e;return T.useEffect(()=>{o&&r("/login")},[o,r]),n?l.jsx("div",{className:"min-h-screen flex items-center justify-center bg-slate-950 text-white/70",children:"Loading..."}):o?l.jsx("div",{className:"min-h-screen flex items-center justify-center bg-slate-950 text-white/70",children:"Redirecting to login..."}):t}function eI(){return l.jsxs(Xk,{children:[l.jsx(ms,{path:"/",component:A4}),l.jsx(ms,{path:"/login",component:()=>l.jsx(Wy,{mode:"login"})}),l.jsx(ms,{path:"/signup",component:()=>l.jsx(Wy,{mode:"signup"})}),l.jsx(ms,{path:"/dashboard",children:()=>l.jsx(Sr,{children:l.jsx(S8,{})})}),l.jsx(ms,{path:"/courses",children:()=>l.jsx(Sr,{children:l.jsx(R8,{})})}),l.jsx(ms,{path:"/courses/:id",children:t=>l.jsx(Sr,{children:l.jsx(E8,{id:t.id})})}),l.jsx(ms,{path:"/lesson",children:()=>l.jsx(Sr,{children:l.jsx(lw,{})})}),l.jsx(ms,{path:"/lesson/:id",children:t=>l.jsx(Sr,{children:l.jsx(lw,{id:t.id})})}),l.jsx(ms,{path:"/leaderboard",children:()=>l.jsx(Sr,{children:l.jsx(j8,{})})}),l.jsx(ms,{path:"/advent",children:()=>l.jsx(Sr,{children:l.jsx(Ij,{})})}),l.jsx(ms,{path:"/practice",component:ij}),l.jsx(ms,{path:"/puzzles",children:()=>l.jsx(Sr,{children:l.jsx(Jj,{})})}),l.jsx(ms,{path:"/analysis",children:()=>l.jsx(Sr,{children:l.jsx(Vj,{})})}),l.jsx(ms,{path:"/square-base",children:()=>l.jsx(Sr,{children:l.jsx(Zj,{})})}),l.jsx(ms,{path:"/ranks",children:()=>l.jsx(Sr,{children:l.jsx(Gj,{})})}),l.jsx(ms,{path:"/profile",children:()=>l.jsx(Sr,{children:l.jsx($j,{})})}),l.jsx(ms,{path:"/settings",children:()=>l.jsx(Sr,{children:l.jsx(bj,{})})}),l.jsx(ms,{component:aj})]})}function tI(){return l.jsx(N8,{children:l.jsx(eI,{})})}const nI=new vk({defaultOptions:{queries:{refetchOnWindowFocus:!1,staleTime:1e3*60*5}}});W3.createRoot(document.getElementById("root")).render(l.jsx(mw.StrictMode,{children:l.jsx(bk,{client:nI,children:l.jsx(tI,{})})}));
